(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function SS(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Vw={exports:{}},$x={},zw={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc=Symbol.for("react.element"),PS=Symbol.for("react.portal"),ES=Symbol.for("react.fragment"),CS=Symbol.for("react.strict_mode"),TS=Symbol.for("react.profiler"),_S=Symbol.for("react.provider"),DS=Symbol.for("react.context"),AS=Symbol.for("react.forward_ref"),RS=Symbol.for("react.suspense"),MS=Symbol.for("react.memo"),OS=Symbol.for("react.lazy"),pb=Symbol.iterator;function LS(s){return s===null||typeof s!="object"?null:(s=pb&&s[pb]||s["@@iterator"],typeof s=="function"?s:null)}var Bw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$w=Object.assign,Fw={};function Wo(s,t,r){this.props=s,this.context=t,this.refs=Fw,this.updater=r||Bw}Wo.prototype.isReactComponent={};Wo.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Wo.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Uw(){}Uw.prototype=Wo.prototype;function $p(s,t,r){this.props=s,this.context=t,this.refs=Fw,this.updater=r||Bw}var Fp=$p.prototype=new Uw;Fp.constructor=$p;$w(Fp,Wo.prototype);Fp.isPureReactComponent=!0;var fb=Array.isArray,Ww=Object.prototype.hasOwnProperty,Up={current:null},Hw={key:!0,ref:!0,__self:!0,__source:!0};function qw(s,t,r){var a,n={},l=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Ww.call(t,a)&&!Hw.hasOwnProperty(a)&&(n[a]=t[a]);var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){for(var u=Array(d),m=0;m<d;m++)u[m]=arguments[m+2];n.children=u}if(s&&s.defaultProps)for(a in d=s.defaultProps,d)n[a]===void 0&&(n[a]=d[a]);return{$$typeof:Uc,type:s,key:l,ref:o,props:n,_owner:Up.current}}function VS(s,t){return{$$typeof:Uc,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function Wp(s){return typeof s=="object"&&s!==null&&s.$$typeof===Uc}function zS(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var gb=/\/+/g;function Km(s,t){return typeof s=="object"&&s!==null&&s.key!=null?zS(""+s.key):t.toString(36)}function iu(s,t,r,a,n){var l=typeof s;(l==="undefined"||l==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case Uc:case PS:o=!0}}if(o)return o=s,n=n(o),s=a===""?"."+Km(o,0):a,fb(n)?(r="",s!=null&&(r=s.replace(gb,"$&/")+"/"),iu(n,t,r,"",function(m){return m})):n!=null&&(Wp(n)&&(n=VS(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(gb,"$&/")+"/")+s)),t.push(n)),1;if(o=0,a=a===""?".":a+":",fb(s))for(var d=0;d<s.length;d++){l=s[d];var u=a+Km(l,d);o+=iu(l,t,r,u,n)}else if(u=LS(s),typeof u=="function")for(s=u.call(s),d=0;!(l=s.next()).done;)l=l.value,u=a+Km(l,d++),o+=iu(l,t,r,u,n);else if(l==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _d(s,t,r){if(s==null)return s;var a=[],n=0;return iu(s,a,"","",function(l){return t.call(r,l,n++)}),a}function BS(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var rr={current:null},ou={transition:null},$S={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:ou,ReactCurrentOwner:Up};function Gw(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:_d,forEach:function(s,t,r){_d(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return _d(s,function(){t++}),t},toArray:function(s){return _d(s,function(t){return t})||[]},only:function(s){if(!Wp(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Et.Component=Wo;Et.Fragment=ES;Et.Profiler=TS;Et.PureComponent=$p;Et.StrictMode=CS;Et.Suspense=RS;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$S;Et.act=Gw;Et.cloneElement=function(s,t,r){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=$w({},s.props),n=s.key,l=s.ref,o=s._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Up.current),t.key!==void 0&&(n=""+t.key),s.type&&s.type.defaultProps)var d=s.type.defaultProps;for(u in t)Ww.call(t,u)&&!Hw.hasOwnProperty(u)&&(a[u]=t[u]===void 0&&d!==void 0?d[u]:t[u])}var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){d=Array(u);for(var m=0;m<u;m++)d[m]=arguments[m+2];a.children=d}return{$$typeof:Uc,type:s.type,key:n,ref:l,props:a,_owner:o}};Et.createContext=function(s){return s={$$typeof:DS,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:_S,_context:s},s.Consumer=s};Et.createElement=qw;Et.createFactory=function(s){var t=qw.bind(null,s);return t.type=s,t};Et.createRef=function(){return{current:null}};Et.forwardRef=function(s){return{$$typeof:AS,render:s}};Et.isValidElement=Wp;Et.lazy=function(s){return{$$typeof:OS,_payload:{_status:-1,_result:s},_init:BS}};Et.memo=function(s,t){return{$$typeof:MS,type:s,compare:t===void 0?null:t}};Et.startTransition=function(s){var t=ou.transition;ou.transition={};try{s()}finally{ou.transition=t}};Et.unstable_act=Gw;Et.useCallback=function(s,t){return rr.current.useCallback(s,t)};Et.useContext=function(s){return rr.current.useContext(s)};Et.useDebugValue=function(){};Et.useDeferredValue=function(s){return rr.current.useDeferredValue(s)};Et.useEffect=function(s,t){return rr.current.useEffect(s,t)};Et.useId=function(){return rr.current.useId()};Et.useImperativeHandle=function(s,t,r){return rr.current.useImperativeHandle(s,t,r)};Et.useInsertionEffect=function(s,t){return rr.current.useInsertionEffect(s,t)};Et.useLayoutEffect=function(s,t){return rr.current.useLayoutEffect(s,t)};Et.useMemo=function(s,t){return rr.current.useMemo(s,t)};Et.useReducer=function(s,t,r){return rr.current.useReducer(s,t,r)};Et.useRef=function(s){return rr.current.useRef(s)};Et.useState=function(s){return rr.current.useState(s)};Et.useSyncExternalStore=function(s,t,r){return rr.current.useSyncExternalStore(s,t,r)};Et.useTransition=function(){return rr.current.useTransition()};Et.version="18.3.1";zw.exports=Et;var v=zw.exports;const fn=SS(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS=v,US=Symbol.for("react.element"),WS=Symbol.for("react.fragment"),HS=Object.prototype.hasOwnProperty,qS=FS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GS={key:!0,ref:!0,__self:!0,__source:!0};function Qw(s,t,r){var a,n={},l=null,o=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)HS.call(t,a)&&!GS.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:US,type:s,key:l,ref:o,props:n,_owner:qS.current}}$x.Fragment=WS;$x.jsx=Qw;$x.jsxs=Qw;Vw.exports=$x;var e=Vw.exports,X0={},Kw={exports:{}},Cr={},Yw={exports:{}},Xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(ue,je){var pe=ue.length;ue.push(je);e:for(;0<pe;){var Ae=pe-1>>>1,Te=ue[Ae];if(0<n(Te,je))ue[Ae]=je,ue[pe]=Te,pe=Ae;else break e}}function r(ue){return ue.length===0?null:ue[0]}function a(ue){if(ue.length===0)return null;var je=ue[0],pe=ue.pop();if(pe!==je){ue[0]=pe;e:for(var Ae=0,Te=ue.length,be=Te>>>1;Ae<be;){var qe=2*(Ae+1)-1,$e=ue[qe],i=qe+1,k=ue[i];if(0>n($e,pe))i<Te&&0>n(k,$e)?(ue[Ae]=k,ue[i]=pe,Ae=i):(ue[Ae]=$e,ue[qe]=pe,Ae=qe);else if(i<Te&&0>n(k,pe))ue[Ae]=k,ue[i]=pe,Ae=i;else break e}}return je}function n(ue,je){var pe=ue.sortIndex-je.sortIndex;return pe!==0?pe:ue.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var o=Date,d=o.now();s.unstable_now=function(){return o.now()-d}}var u=[],m=[],y=1,j=null,N=3,T=!1,g=!1,B=!1,D=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(ue){for(var je=r(m);je!==null;){if(je.callback===null)a(m);else if(je.startTime<=ue)a(m),je.sortIndex=je.expirationTime,t(u,je);else break;je=r(m)}}function Z(ue){if(B=!1,z(ue),!g)if(r(u)!==null)g=!0,De(G);else{var je=r(m);je!==null&&Ne(Z,je.startTime-ue)}}function G(ue,je){g=!1,B&&(B=!1,R(x),x=-1),T=!0;var pe=N;try{for(z(je),j=r(u);j!==null&&(!(j.expirationTime>je)||ue&&!J());){var Ae=j.callback;if(typeof Ae=="function"){j.callback=null,N=j.priorityLevel;var Te=Ae(j.expirationTime<=je);je=s.unstable_now(),typeof Te=="function"?j.callback=Te:j===r(u)&&a(u),z(je)}else a(u);j=r(u)}if(j!==null)var be=!0;else{var qe=r(m);qe!==null&&Ne(Z,qe.startTime-je),be=!1}return be}finally{j=null,N=pe,T=!1}}var Y=!1,V=null,x=-1,q=5,W=-1;function J(){return!(s.unstable_now()-W<q)}function re(){if(V!==null){var ue=s.unstable_now();W=ue;var je=!0;try{je=V(!0,ue)}finally{je?X():(Y=!1,V=null)}}else Y=!1}var X;if(typeof $=="function")X=function(){$(re)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,E=Q.port2;Q.port1.onmessage=re,X=function(){E.postMessage(null)}}else X=function(){D(re,0)};function De(ue){V=ue,Y||(Y=!0,X())}function Ne(ue,je){x=D(function(){ue(s.unstable_now())},je)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ue){ue.callback=null},s.unstable_continueExecution=function(){g||T||(g=!0,De(G))},s.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ue?Math.floor(1e3/ue):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_getFirstCallbackNode=function(){return r(u)},s.unstable_next=function(ue){switch(N){case 1:case 2:case 3:var je=3;break;default:je=N}var pe=N;N=je;try{return ue()}finally{N=pe}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ue,je){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var pe=N;N=ue;try{return je()}finally{N=pe}},s.unstable_scheduleCallback=function(ue,je,pe){var Ae=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ae+pe:Ae):pe=Ae,ue){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=pe+Te,ue={id:y++,callback:je,priorityLevel:ue,startTime:pe,expirationTime:Te,sortIndex:-1},pe>Ae?(ue.sortIndex=pe,t(m,ue),r(u)===null&&ue===r(m)&&(B?(R(x),x=-1):B=!0,Ne(Z,pe-Ae))):(ue.sortIndex=Te,t(u,ue),g||T||(g=!0,De(G))),ue},s.unstable_shouldYield=J,s.unstable_wrapCallback=function(ue){var je=N;return function(){var pe=N;N=je;try{return ue.apply(this,arguments)}finally{N=pe}}}})(Xw);Yw.exports=Xw;var QS=Yw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS=v,Er=QS;function Re(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jw=new Set,ic={};function Ci(s,t){So(s,t),So(s+"Capture",t)}function So(s,t){for(ic[s]=t,s=0;s<t.length;s++)Jw.add(t[s])}var Oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),J0=Object.prototype.hasOwnProperty,YS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yb={},bb={};function XS(s){return J0.call(bb,s)?!0:J0.call(yb,s)?!1:YS.test(s)?bb[s]=!0:(yb[s]=!0,!1)}function JS(s,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function ZS(s,t,r,a){if(t===null||typeof t>"u"||JS(s,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ar(s,t,r,a,n,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=s,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Ls={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Ls[s]=new ar(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];Ls[t]=new ar(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Ls[s]=new ar(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Ls[s]=new ar(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Ls[s]=new ar(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Ls[s]=new ar(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Ls[s]=new ar(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Ls[s]=new ar(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Ls[s]=new ar(s,5,!1,s.toLowerCase(),null,!1,!1)});var Hp=/[\-:]([a-z])/g;function qp(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(Hp,qp);Ls[t]=new ar(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(Hp,qp);Ls[t]=new ar(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(Hp,qp);Ls[t]=new ar(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Ls[s]=new ar(s,1,!1,s.toLowerCase(),null,!1,!1)});Ls.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Ls[s]=new ar(s,1,!1,s.toLowerCase(),null,!0,!0)});function Gp(s,t,r,a){var n=Ls.hasOwnProperty(t)?Ls[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ZS(t,r,n,a)&&(r=null),a||n===null?XS(t)&&(r===null?s.removeAttribute(t):s.setAttribute(t,""+r)):n.mustUseProperty?s[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,a=n.attributeNamespace,r===null?s.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?s.setAttributeNS(a,t,r):s.setAttribute(t,r))))}var Ka=KS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dd=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),Z0=Symbol.for("react.profiler"),Zw=Symbol.for("react.provider"),e5=Symbol.for("react.context"),Kp=Symbol.for("react.forward_ref"),eh=Symbol.for("react.suspense"),th=Symbol.for("react.suspense_list"),Yp=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),t5=Symbol.for("react.offscreen"),vb=Symbol.iterator;function hl(s){return s===null||typeof s!="object"?null:(s=vb&&s[vb]||s["@@iterator"],typeof s=="function"?s:null)}var os=Object.assign,Ym;function Il(s){if(Ym===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ym=t&&t[1]||""}return`
`+Ym+s}var Xm=!1;function Jm(s,t){if(!s||Xm)return"";Xm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var a=m}Reflect.construct(s,[],t)}else{try{t.call()}catch(m){a=m}s.call(t.prototype)}else{try{throw Error()}catch(m){a=m}s()}}catch(m){if(m&&a&&typeof m.stack=="string"){for(var n=m.stack.split(`
`),l=a.stack.split(`
`),o=n.length-1,d=l.length-1;1<=o&&0<=d&&n[o]!==l[d];)d--;for(;1<=o&&0<=d;o--,d--)if(n[o]!==l[d]){if(o!==1||d!==1)do if(o--,d--,0>d||n[o]!==l[d]){var u=`
`+n[o].replace(" at new "," at ");return s.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",s.displayName)),u}while(1<=o&&0<=d);break}}}finally{Xm=!1,Error.prepareStackTrace=r}return(s=s?s.displayName||s.name:"")?Il(s):""}function eP(s){switch(s.tag){case 5:return Il(s.type);case 16:return Il("Lazy");case 13:return Il("Suspense");case 19:return Il("SuspenseList");case 0:case 2:case 15:return s=Jm(s.type,!1),s;case 11:return s=Jm(s.type.render,!1),s;case 1:return s=Jm(s.type,!0),s;default:return""}}function sh(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Xi:return"Fragment";case Yi:return"Portal";case Z0:return"Profiler";case Qp:return"StrictMode";case eh:return"Suspense";case th:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case e5:return(s.displayName||"Context")+".Consumer";case Zw:return(s._context.displayName||"Context")+".Provider";case Kp:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Yp:return t=s.displayName||null,t!==null?t:sh(s.type)||"Memo";case an:t=s._payload,s=s._init;try{return sh(s(t))}catch{}}return null}function tP(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sh(t);case 8:return t===Qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tn(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function s5(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sP(s){var t=s5(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),a=""+s[t];if(!s.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,l=r.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){a=""+o,l.call(this,o)}}),Object.defineProperty(s,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function Ad(s){s._valueTracker||(s._valueTracker=sP(s))}function r5(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return s&&(a=s5(s)?s.checked?"true":"false":s.value),s=a,s!==r?(t.setValue(s),!0):!1}function Mu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function rh(s,t){var r=t.checked;return os({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??s._wrapperState.initialChecked})}function jb(s,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Tn(t.value!=null?t.value:r),s._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function a5(s,t){t=t.checked,t!=null&&Gp(s,"checked",t,!1)}function ah(s,t){a5(s,t);var r=Tn(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+r):s.value!==""+r&&(s.value=""+r);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?nh(s,t.type,r):t.hasOwnProperty("defaultValue")&&nh(s,t.type,Tn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function Nb(s,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,r||t===s.value||(s.value=t),s.defaultValue=t}r=s.name,r!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,r!==""&&(s.name=r)}function nh(s,t,r){(t!=="number"||Mu(s.ownerDocument)!==s)&&(r==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+r&&(s.defaultValue=""+r))}var Sl=Array.isArray;function fo(s,t,r,a){if(s=s.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<s.length;r++)n=t.hasOwnProperty("$"+s[r].value),s[r].selected!==n&&(s[r].selected=n),n&&a&&(s[r].defaultSelected=!0)}else{for(r=""+Tn(r),t=null,n=0;n<s.length;n++){if(s[n].value===r){s[n].selected=!0,a&&(s[n].defaultSelected=!0);return}t!==null||s[n].disabled||(t=s[n])}t!==null&&(t.selected=!0)}}function ih(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Re(91));return os({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function wb(s,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Re(92));if(Sl(r)){if(1<r.length)throw Error(Re(93));r=r[0]}t=r}t==null&&(t=""),r=t}s._wrapperState={initialValue:Tn(r)}}function n5(s,t){var r=Tn(t.value),a=Tn(t.defaultValue);r!=null&&(r=""+r,r!==s.value&&(s.value=r),t.defaultValue==null&&s.defaultValue!==r&&(s.defaultValue=r)),a!=null&&(s.defaultValue=""+a)}function kb(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function i5(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oh(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?i5(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Rd,o5=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,n){MSApp.execUnsafeLocalFunction(function(){return s(t,r,a,n)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(Rd=Rd||document.createElement("div"),Rd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rd.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function oc(s,t){if(t){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=t;return}}s.textContent=t}var Ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rP=["Webkit","ms","Moz","O"];Object.keys(Ll).forEach(function(s){rP.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),Ll[t]=Ll[s]})});function l5(s,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ll.hasOwnProperty(s)&&Ll[s]?(""+t).trim():t+"px"}function c5(s,t){s=s.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=l5(r,t[r],a);r==="float"&&(r="cssFloat"),a?s.setProperty(r,n):s[r]=n}}var aP=os({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lh(s,t){if(t){if(aP[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Re(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Re(62))}}function ch(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dh=null;function Xp(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var uh=null,go=null,yo=null;function Ib(s){if(s=qc(s)){if(typeof uh!="function")throw Error(Re(280));var t=s.stateNode;t&&(t=qx(t),uh(s.stateNode,s.type,t))}}function d5(s){go?yo?yo.push(s):yo=[s]:go=s}function u5(){if(go){var s=go,t=yo;if(yo=go=null,Ib(s),t)for(s=0;s<t.length;s++)Ib(t[s])}}function x5(s,t){return s(t)}function m5(){}var Zm=!1;function h5(s,t,r){if(Zm)return s(t,r);Zm=!0;try{return x5(s,t,r)}finally{Zm=!1,(go!==null||yo!==null)&&(m5(),u5())}}function lc(s,t){var r=s.stateNode;if(r===null)return null;var a=qx(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(Re(231,t,typeof r));return r}var xh=!1;if(Oa)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){xh=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{xh=!1}function nP(s,t,r,a,n,l,o,d,u){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(y){this.onError(y)}}var Vl=!1,Ou=null,Lu=!1,mh=null,iP={onError:function(s){Vl=!0,Ou=s}};function oP(s,t,r,a,n,l,o,d,u){Vl=!1,Ou=null,nP.apply(iP,arguments)}function lP(s,t,r,a,n,l,o,d,u){if(oP.apply(this,arguments),Vl){if(Vl){var m=Ou;Vl=!1,Ou=null}else throw Error(Re(198));Lu||(Lu=!0,mh=m)}}function Ti(s){var t=s,r=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(r=t.return),s=t.return;while(s)}return t.tag===3?r:null}function p5(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function Sb(s){if(Ti(s)!==s)throw Error(Re(188))}function cP(s){var t=s.alternate;if(!t){if(t=Ti(s),t===null)throw Error(Re(188));return t!==s?null:s}for(var r=s,a=t;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Sb(n),s;if(l===a)return Sb(n),t;l=l.sibling}throw Error(Re(188))}if(r.return!==a.return)r=n,a=l;else{for(var o=!1,d=n.child;d;){if(d===r){o=!0,r=n,a=l;break}if(d===a){o=!0,a=n,r=l;break}d=d.sibling}if(!o){for(d=l.child;d;){if(d===r){o=!0,r=l,a=n;break}if(d===a){o=!0,a=l,r=n;break}d=d.sibling}if(!o)throw Error(Re(189))}}if(r.alternate!==a)throw Error(Re(190))}if(r.tag!==3)throw Error(Re(188));return r.stateNode.current===r?s:t}function f5(s){return s=cP(s),s!==null?g5(s):null}function g5(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=g5(s);if(t!==null)return t;s=s.sibling}return null}var y5=Er.unstable_scheduleCallback,Pb=Er.unstable_cancelCallback,dP=Er.unstable_shouldYield,uP=Er.unstable_requestPaint,fs=Er.unstable_now,xP=Er.unstable_getCurrentPriorityLevel,Jp=Er.unstable_ImmediatePriority,b5=Er.unstable_UserBlockingPriority,Vu=Er.unstable_NormalPriority,mP=Er.unstable_LowPriority,v5=Er.unstable_IdlePriority,Fx=null,ca=null;function hP(s){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(Fx,s,void 0,(s.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:gP,pP=Math.log,fP=Math.LN2;function gP(s){return s>>>=0,s===0?32:31-(pP(s)/fP|0)|0}var Md=64,Od=4194304;function Pl(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function zu(s,t){var r=s.pendingLanes;if(r===0)return 0;var a=0,n=s.suspendedLanes,l=s.pingedLanes,o=r&268435455;if(o!==0){var d=o&~n;d!==0?a=Pl(d):(l&=o,l!==0&&(a=Pl(l)))}else o=r&~n,o!==0?a=Pl(o):l!==0&&(a=Pl(l));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,l=t&-t,n>=l||n===16&&(l&4194240)!==0))return t;if(a&4&&(a|=r&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=a;0<t;)r=31-Jr(t),n=1<<r,a|=s[r],t&=~n;return a}function yP(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bP(s,t){for(var r=s.suspendedLanes,a=s.pingedLanes,n=s.expirationTimes,l=s.pendingLanes;0<l;){var o=31-Jr(l),d=1<<o,u=n[o];u===-1?(!(d&r)||d&a)&&(n[o]=yP(d,t)):u<=t&&(s.expiredLanes|=d),l&=~d}}function hh(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function j5(){var s=Md;return Md<<=1,!(Md&4194240)&&(Md=64),s}function e0(s){for(var t=[],r=0;31>r;r++)t.push(s);return t}function Wc(s,t,r){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-Jr(t),s[t]=r}function vP(s,t){var r=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<r;){var n=31-Jr(r),l=1<<n;t[n]=0,a[n]=-1,s[n]=-1,r&=~l}}function Zp(s,t){var r=s.entangledLanes|=t;for(s=s.entanglements;r;){var a=31-Jr(r),n=1<<a;n&t|s[a]&t&&(s[a]|=t),r&=~n}}var Bt=0;function N5(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var w5,ef,k5,I5,S5,ph=!1,Ld=[],gn=null,yn=null,bn=null,cc=new Map,dc=new Map,on=[],jP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eb(s,t){switch(s){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":cc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(t.pointerId)}}function fl(s,t,r,a,n,l){return s===null||s.nativeEvent!==l?(s={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},t!==null&&(t=qc(t),t!==null&&ef(t)),s):(s.eventSystemFlags|=a,t=s.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),s)}function NP(s,t,r,a,n){switch(t){case"focusin":return gn=fl(gn,s,t,r,a,n),!0;case"dragenter":return yn=fl(yn,s,t,r,a,n),!0;case"mouseover":return bn=fl(bn,s,t,r,a,n),!0;case"pointerover":var l=n.pointerId;return cc.set(l,fl(cc.get(l)||null,s,t,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,dc.set(l,fl(dc.get(l)||null,s,t,r,a,n)),!0}return!1}function P5(s){var t=ni(s.target);if(t!==null){var r=Ti(t);if(r!==null){if(t=r.tag,t===13){if(t=p5(r),t!==null){s.blockedOn=t,S5(s.priority,function(){k5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function lu(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var r=fh(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(r===null){r=s.nativeEvent;var a=new r.constructor(r.type,r);dh=a,r.target.dispatchEvent(a),dh=null}else return t=qc(r),t!==null&&ef(t),s.blockedOn=r,!1;t.shift()}return!0}function Cb(s,t,r){lu(s)&&r.delete(t)}function wP(){ph=!1,gn!==null&&lu(gn)&&(gn=null),yn!==null&&lu(yn)&&(yn=null),bn!==null&&lu(bn)&&(bn=null),cc.forEach(Cb),dc.forEach(Cb)}function gl(s,t){s.blockedOn===t&&(s.blockedOn=null,ph||(ph=!0,Er.unstable_scheduleCallback(Er.unstable_NormalPriority,wP)))}function uc(s){function t(n){return gl(n,s)}if(0<Ld.length){gl(Ld[0],s);for(var r=1;r<Ld.length;r++){var a=Ld[r];a.blockedOn===s&&(a.blockedOn=null)}}for(gn!==null&&gl(gn,s),yn!==null&&gl(yn,s),bn!==null&&gl(bn,s),cc.forEach(t),dc.forEach(t),r=0;r<on.length;r++)a=on[r],a.blockedOn===s&&(a.blockedOn=null);for(;0<on.length&&(r=on[0],r.blockedOn===null);)P5(r),r.blockedOn===null&&on.shift()}var bo=Ka.ReactCurrentBatchConfig,Bu=!0;function kP(s,t,r,a){var n=Bt,l=bo.transition;bo.transition=null;try{Bt=1,tf(s,t,r,a)}finally{Bt=n,bo.transition=l}}function IP(s,t,r,a){var n=Bt,l=bo.transition;bo.transition=null;try{Bt=4,tf(s,t,r,a)}finally{Bt=n,bo.transition=l}}function tf(s,t,r,a){if(Bu){var n=fh(s,t,r,a);if(n===null)d0(s,t,a,$u,r),Eb(s,a);else if(NP(n,s,t,r,a))a.stopPropagation();else if(Eb(s,a),t&4&&-1<jP.indexOf(s)){for(;n!==null;){var l=qc(n);if(l!==null&&w5(l),l=fh(s,t,r,a),l===null&&d0(s,t,a,$u,r),l===n)break;n=l}n!==null&&a.stopPropagation()}else d0(s,t,a,null,r)}}var $u=null;function fh(s,t,r,a){if($u=null,s=Xp(a),s=ni(s),s!==null)if(t=Ti(s),t===null)s=null;else if(r=t.tag,r===13){if(s=p5(t),s!==null)return s;s=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return $u=s,null}function E5(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xP()){case Jp:return 1;case b5:return 4;case Vu:case mP:return 16;case v5:return 536870912;default:return 16}default:return 16}}var mn=null,sf=null,cu=null;function C5(){if(cu)return cu;var s,t=sf,r=t.length,a,n="value"in mn?mn.value:mn.textContent,l=n.length;for(s=0;s<r&&t[s]===n[s];s++);var o=r-s;for(a=1;a<=o&&t[r-a]===n[l-a];a++);return cu=n.slice(s,1<a?1-a:void 0)}function du(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function Vd(){return!0}function Tb(){return!1}function Tr(s){function t(r,a,n,l,o){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var d in s)s.hasOwnProperty(d)&&(r=s[d],this[d]=r?r(l):l[d]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Vd:Tb,this.isPropagationStopped=Tb,this}return os(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vd)},persist:function(){},isPersistent:Vd}),t}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=Tr(Ho),Hc=os({},Ho,{view:0,detail:0}),SP=Tr(Hc),t0,s0,yl,Ux=os({},Hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:af,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yl&&(yl&&s.type==="mousemove"?(t0=s.screenX-yl.screenX,s0=s.screenY-yl.screenY):s0=t0=0,yl=s),t0)},movementY:function(s){return"movementY"in s?s.movementY:s0}}),_b=Tr(Ux),PP=os({},Ux,{dataTransfer:0}),EP=Tr(PP),CP=os({},Hc,{relatedTarget:0}),r0=Tr(CP),TP=os({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),_P=Tr(TP),DP=os({},Ho,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),AP=Tr(DP),RP=os({},Ho,{data:0}),Db=Tr(RP),MP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VP(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=LP[s])?!!t[s]:!1}function af(){return VP}var zP=os({},Hc,{key:function(s){if(s.key){var t=MP[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=du(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?OP[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:af,charCode:function(s){return s.type==="keypress"?du(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?du(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),BP=Tr(zP),$P=os({},Ux,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ab=Tr($P),FP=os({},Hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:af}),UP=Tr(FP),WP=os({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),HP=Tr(WP),qP=os({},Ux,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),GP=Tr(qP),QP=[9,13,27,32],nf=Oa&&"CompositionEvent"in window,zl=null;Oa&&"documentMode"in document&&(zl=document.documentMode);var KP=Oa&&"TextEvent"in window&&!zl,T5=Oa&&(!nf||zl&&8<zl&&11>=zl),Rb=String.fromCharCode(32),Mb=!1;function _5(s,t){switch(s){case"keyup":return QP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D5(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ji=!1;function YP(s,t){switch(s){case"compositionend":return D5(t);case"keypress":return t.which!==32?null:(Mb=!0,Rb);case"textInput":return s=t.data,s===Rb&&Mb?null:s;default:return null}}function XP(s,t){if(Ji)return s==="compositionend"||!nf&&_5(s,t)?(s=C5(),cu=sf=mn=null,Ji=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return T5&&t.locale!=="ko"?null:t.data;default:return null}}var JP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ob(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!JP[s.type]:t==="textarea"}function A5(s,t,r,a){d5(a),t=Fu(t,"onChange"),0<t.length&&(r=new rf("onChange","change",null,r,a),s.push({event:r,listeners:t}))}var Bl=null,xc=null;function ZP(s){W5(s,0)}function Wx(s){var t=to(s);if(r5(t))return s}function eE(s,t){if(s==="change")return t}var R5=!1;if(Oa){var a0;if(Oa){var n0="oninput"in document;if(!n0){var Lb=document.createElement("div");Lb.setAttribute("oninput","return;"),n0=typeof Lb.oninput=="function"}a0=n0}else a0=!1;R5=a0&&(!document.documentMode||9<document.documentMode)}function Vb(){Bl&&(Bl.detachEvent("onpropertychange",M5),xc=Bl=null)}function M5(s){if(s.propertyName==="value"&&Wx(xc)){var t=[];A5(t,xc,s,Xp(s)),h5(ZP,t)}}function tE(s,t,r){s==="focusin"?(Vb(),Bl=t,xc=r,Bl.attachEvent("onpropertychange",M5)):s==="focusout"&&Vb()}function sE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wx(xc)}function rE(s,t){if(s==="click")return Wx(t)}function aE(s,t){if(s==="input"||s==="change")return Wx(t)}function nE(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var ea=typeof Object.is=="function"?Object.is:nE;function mc(s,t){if(ea(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var r=Object.keys(s),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!J0.call(t,n)||!ea(s[n],t[n]))return!1}return!0}function zb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bb(s,t){var r=zb(s);s=0;for(var a;r;){if(r.nodeType===3){if(a=s+r.textContent.length,s<=t&&a>=t)return{node:r,offset:t-s};s=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zb(r)}}function O5(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?O5(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function L5(){for(var s=window,t=Mu();t instanceof s.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)s=t.contentWindow;else break;t=Mu(s.document)}return t}function of(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function iE(s){var t=L5(),r=s.focusedElem,a=s.selectionRange;if(t!==r&&r&&r.ownerDocument&&O5(r.ownerDocument.documentElement,r)){if(a!==null&&of(r)){if(t=a.start,s=a.end,s===void 0&&(s=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(s,r.value.length);else if(s=(t=r.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!s.extend&&l>a&&(n=a,a=l,l=n),n=Bb(r,l);var o=Bb(r,a);n&&o&&(s.rangeCount!==1||s.anchorNode!==n.node||s.anchorOffset!==n.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),s.removeAllRanges(),l>a?(s.addRange(t),s.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),s.addRange(t)))}}for(t=[],s=r;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)s=t[r],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var oE=Oa&&"documentMode"in document&&11>=document.documentMode,Zi=null,gh=null,$l=null,yh=!1;function $b(s,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yh||Zi==null||Zi!==Mu(a)||(a=Zi,"selectionStart"in a&&of(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),$l&&mc($l,a)||($l=a,a=Fu(gh,"onSelect"),0<a.length&&(t=new rf("onSelect","select",null,t,r),s.push({event:t,listeners:a}),t.target=Zi)))}function zd(s,t){var r={};return r[s.toLowerCase()]=t.toLowerCase(),r["Webkit"+s]="webkit"+t,r["Moz"+s]="moz"+t,r}var eo={animationend:zd("Animation","AnimationEnd"),animationiteration:zd("Animation","AnimationIteration"),animationstart:zd("Animation","AnimationStart"),transitionend:zd("Transition","TransitionEnd")},i0={},V5={};Oa&&(V5=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function Hx(s){if(i0[s])return i0[s];if(!eo[s])return s;var t=eo[s],r;for(r in t)if(t.hasOwnProperty(r)&&r in V5)return i0[s]=t[r];return s}var z5=Hx("animationend"),B5=Hx("animationiteration"),$5=Hx("animationstart"),F5=Hx("transitionend"),U5=new Map,Fb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(s,t){U5.set(s,t),Ci(t,[s])}for(var o0=0;o0<Fb.length;o0++){var l0=Fb[o0],lE=l0.toLowerCase(),cE=l0[0].toUpperCase()+l0.slice(1);$n(lE,"on"+cE)}$n(z5,"onAnimationEnd");$n(B5,"onAnimationIteration");$n($5,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(F5,"onTransitionEnd");So("onMouseEnter",["mouseout","mouseover"]);So("onMouseLeave",["mouseout","mouseover"]);So("onPointerEnter",["pointerout","pointerover"]);So("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dE=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function Ub(s,t,r){var a=s.type||"unknown-event";s.currentTarget=r,lP(a,t,void 0,s),s.currentTarget=null}function W5(s,t){t=(t&4)!==0;for(var r=0;r<s.length;r++){var a=s[r],n=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var o=a.length-1;0<=o;o--){var d=a[o],u=d.instance,m=d.currentTarget;if(d=d.listener,u!==l&&n.isPropagationStopped())break e;Ub(n,d,m),l=u}else for(o=0;o<a.length;o++){if(d=a[o],u=d.instance,m=d.currentTarget,d=d.listener,u!==l&&n.isPropagationStopped())break e;Ub(n,d,m),l=u}}}if(Lu)throw s=mh,Lu=!1,mh=null,s}function Jt(s,t){var r=t[wh];r===void 0&&(r=t[wh]=new Set);var a=s+"__bubble";r.has(a)||(H5(t,s,2,!1),r.add(a))}function c0(s,t,r){var a=0;t&&(a|=4),H5(r,s,a,t)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function hc(s){if(!s[Bd]){s[Bd]=!0,Jw.forEach(function(r){r!=="selectionchange"&&(dE.has(r)||c0(r,!1,s),c0(r,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[Bd]||(t[Bd]=!0,c0("selectionchange",!1,t))}}function H5(s,t,r,a){switch(E5(t)){case 1:var n=kP;break;case 4:n=IP;break;default:n=tf}r=n.bind(null,t,r,s),n=void 0,!xh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?s.addEventListener(t,r,{capture:!0,passive:n}):s.addEventListener(t,r,!0):n!==void 0?s.addEventListener(t,r,{passive:n}):s.addEventListener(t,r,!1)}function d0(s,t,r,a,n){var l=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var d=a.stateNode.containerInfo;if(d===n||d.nodeType===8&&d.parentNode===n)break;if(o===4)for(o=a.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===n||u.nodeType===8&&u.parentNode===n))return;o=o.return}for(;d!==null;){if(o=ni(d),o===null)return;if(u=o.tag,u===5||u===6){a=l=o;continue e}d=d.parentNode}}a=a.return}h5(function(){var m=l,y=Xp(r),j=[];e:{var N=U5.get(s);if(N!==void 0){var T=rf,g=s;switch(s){case"keypress":if(du(r)===0)break e;case"keydown":case"keyup":T=BP;break;case"focusin":g="focus",T=r0;break;case"focusout":g="blur",T=r0;break;case"beforeblur":case"afterblur":T=r0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=EP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=UP;break;case z5:case B5:case $5:T=_P;break;case F5:T=HP;break;case"scroll":T=SP;break;case"wheel":T=GP;break;case"copy":case"cut":case"paste":T=AP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Ab}var B=(t&4)!==0,D=!B&&s==="scroll",R=B?N!==null?N+"Capture":null:N;B=[];for(var $=m,z;$!==null;){z=$;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,R!==null&&(Z=lc($,R),Z!=null&&B.push(pc($,Z,z)))),D)break;$=$.return}0<B.length&&(N=new T(N,g,null,r,y),j.push({event:N,listeners:B}))}}if(!(t&7)){e:{if(N=s==="mouseover"||s==="pointerover",T=s==="mouseout"||s==="pointerout",N&&r!==dh&&(g=r.relatedTarget||r.fromElement)&&(ni(g)||g[La]))break e;if((T||N)&&(N=y.window===y?y:(N=y.ownerDocument)?N.defaultView||N.parentWindow:window,T?(g=r.relatedTarget||r.toElement,T=m,g=g?ni(g):null,g!==null&&(D=Ti(g),g!==D||g.tag!==5&&g.tag!==6)&&(g=null)):(T=null,g=m),T!==g)){if(B=_b,Z="onMouseLeave",R="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(B=Ab,Z="onPointerLeave",R="onPointerEnter",$="pointer"),D=T==null?N:to(T),z=g==null?N:to(g),N=new B(Z,$+"leave",T,r,y),N.target=D,N.relatedTarget=z,Z=null,ni(y)===m&&(B=new B(R,$+"enter",g,r,y),B.target=z,B.relatedTarget=D,Z=B),D=Z,T&&g)t:{for(B=T,R=g,$=0,z=B;z;z=Hi(z))$++;for(z=0,Z=R;Z;Z=Hi(Z))z++;for(;0<$-z;)B=Hi(B),$--;for(;0<z-$;)R=Hi(R),z--;for(;$--;){if(B===R||R!==null&&B===R.alternate)break t;B=Hi(B),R=Hi(R)}B=null}else B=null;T!==null&&Wb(j,N,T,B,!1),g!==null&&D!==null&&Wb(j,D,g,B,!0)}}e:{if(N=m?to(m):window,T=N.nodeName&&N.nodeName.toLowerCase(),T==="select"||T==="input"&&N.type==="file")var G=eE;else if(Ob(N))if(R5)G=aE;else{G=sE;var Y=tE}else(T=N.nodeName)&&T.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(G=rE);if(G&&(G=G(s,m))){A5(j,G,r,y);break e}Y&&Y(s,N,m),s==="focusout"&&(Y=N._wrapperState)&&Y.controlled&&N.type==="number"&&nh(N,"number",N.value)}switch(Y=m?to(m):window,s){case"focusin":(Ob(Y)||Y.contentEditable==="true")&&(Zi=Y,gh=m,$l=null);break;case"focusout":$l=gh=Zi=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,$b(j,r,y);break;case"selectionchange":if(oE)break;case"keydown":case"keyup":$b(j,r,y)}var V;if(nf)e:{switch(s){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ji?_5(s,r)&&(x="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(x="onCompositionStart");x&&(T5&&r.locale!=="ko"&&(Ji||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ji&&(V=C5()):(mn=y,sf="value"in mn?mn.value:mn.textContent,Ji=!0)),Y=Fu(m,x),0<Y.length&&(x=new Db(x,s,null,r,y),j.push({event:x,listeners:Y}),V?x.data=V:(V=D5(r),V!==null&&(x.data=V)))),(V=KP?YP(s,r):XP(s,r))&&(m=Fu(m,"onBeforeInput"),0<m.length&&(y=new Db("onBeforeInput","beforeinput",null,r,y),j.push({event:y,listeners:m}),y.data=V))}W5(j,t)})}function pc(s,t,r){return{instance:s,listener:t,currentTarget:r}}function Fu(s,t){for(var r=t+"Capture",a=[];s!==null;){var n=s,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=lc(s,r),l!=null&&a.unshift(pc(s,l,n)),l=lc(s,t),l!=null&&a.push(pc(s,l,n))),s=s.return}return a}function Hi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Wb(s,t,r,a,n){for(var l=t._reactName,o=[];r!==null&&r!==a;){var d=r,u=d.alternate,m=d.stateNode;if(u!==null&&u===a)break;d.tag===5&&m!==null&&(d=m,n?(u=lc(r,l),u!=null&&o.unshift(pc(r,u,d))):n||(u=lc(r,l),u!=null&&o.push(pc(r,u,d)))),r=r.return}o.length!==0&&s.push({event:t,listeners:o})}var uE=/\r\n?/g,xE=/\u0000|\uFFFD/g;function Hb(s){return(typeof s=="string"?s:""+s).replace(uE,`
`).replace(xE,"")}function $d(s,t,r){if(t=Hb(t),Hb(s)!==t&&r)throw Error(Re(425))}function Uu(){}var bh=null,vh=null;function jh(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nh=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,qb=typeof Promise=="function"?Promise:void 0,hE=typeof queueMicrotask=="function"?queueMicrotask:typeof qb<"u"?function(s){return qb.resolve(null).then(s).catch(pE)}:Nh;function pE(s){setTimeout(function(){throw s})}function u0(s,t){var r=t,a=0;do{var n=r.nextSibling;if(s.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){s.removeChild(n),uc(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);uc(t)}function vn(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Gb(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return s;t--}else r==="/$"&&t++}s=s.previousSibling}return null}var qo=Math.random().toString(36).slice(2),la="__reactFiber$"+qo,fc="__reactProps$"+qo,La="__reactContainer$"+qo,wh="__reactEvents$"+qo,fE="__reactListeners$"+qo,gE="__reactHandles$"+qo;function ni(s){var t=s[la];if(t)return t;for(var r=s.parentNode;r;){if(t=r[La]||r[la]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(s=Gb(s);s!==null;){if(r=s[la])return r;s=Gb(s)}return t}s=r,r=s.parentNode}return null}function qc(s){return s=s[la]||s[La],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function to(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Re(33))}function qx(s){return s[fc]||null}var kh=[],so=-1;function Fn(s){return{current:s}}function Zt(s){0>so||(s.current=kh[so],kh[so]=null,so--)}function Kt(s,t){so++,kh[so]=s.current,s.current=t}var _n={},Qs=Fn(_n),xr=Fn(!1),gi=_n;function Po(s,t){var r=s.type.contextTypes;if(!r)return _n;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in r)n[l]=t[l];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=n),n}function mr(s){return s=s.childContextTypes,s!=null}function Wu(){Zt(xr),Zt(Qs)}function Qb(s,t,r){if(Qs.current!==_n)throw Error(Re(168));Kt(Qs,t),Kt(xr,r)}function q5(s,t,r){var a=s.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(Re(108,tP(s)||"Unknown",n));return os({},r,a)}function Hu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||_n,gi=Qs.current,Kt(Qs,s),Kt(xr,xr.current),!0}function Kb(s,t,r){var a=s.stateNode;if(!a)throw Error(Re(169));r?(s=q5(s,t,gi),a.__reactInternalMemoizedMergedChildContext=s,Zt(xr),Zt(Qs),Kt(Qs,s)):Zt(xr),Kt(xr,r)}var Ea=null,Gx=!1,x0=!1;function G5(s){Ea===null?Ea=[s]:Ea.push(s)}function yE(s){Gx=!0,G5(s)}function Un(){if(!x0&&Ea!==null){x0=!0;var s=0,t=Bt;try{var r=Ea;for(Bt=1;s<r.length;s++){var a=r[s];do a=a(!0);while(a!==null)}Ea=null,Gx=!1}catch(n){throw Ea!==null&&(Ea=Ea.slice(s+1)),y5(Jp,Un),n}finally{Bt=t,x0=!1}}return null}var ro=[],ao=0,qu=null,Gu=0,Rr=[],Mr=0,yi=null,Ca=1,Ta="";function ti(s,t){ro[ao++]=Gu,ro[ao++]=qu,qu=s,Gu=t}function Q5(s,t,r){Rr[Mr++]=Ca,Rr[Mr++]=Ta,Rr[Mr++]=yi,yi=s;var a=Ca;s=Ta;var n=32-Jr(a)-1;a&=~(1<<n),r+=1;var l=32-Jr(t)+n;if(30<l){var o=n-n%5;l=(a&(1<<o)-1).toString(32),a>>=o,n-=o,Ca=1<<32-Jr(t)+n|r<<n|a,Ta=l+s}else Ca=1<<l|r<<n|a,Ta=s}function lf(s){s.return!==null&&(ti(s,1),Q5(s,1,0))}function cf(s){for(;s===qu;)qu=ro[--ao],ro[ao]=null,Gu=ro[--ao],ro[ao]=null;for(;s===yi;)yi=Rr[--Mr],Rr[Mr]=null,Ta=Rr[--Mr],Rr[Mr]=null,Ca=Rr[--Mr],Rr[Mr]=null}var Ir=null,wr=null,ts=!1,Kr=null;function K5(s,t){var r=Or(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=s,t=s.deletions,t===null?(s.deletions=[r],s.flags|=16):t.push(r)}function Yb(s,t){switch(s.tag){case 5:var r=s.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,Ir=s,wr=vn(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,Ir=s,wr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=yi!==null?{id:Ca,overflow:Ta}:null,s.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Or(18,null,null,0),r.stateNode=t,r.return=s,s.child=r,Ir=s,wr=null,!0):!1;default:return!1}}function Ih(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Sh(s){if(ts){var t=wr;if(t){var r=t;if(!Yb(s,t)){if(Ih(s))throw Error(Re(418));t=vn(r.nextSibling);var a=Ir;t&&Yb(s,t)?K5(a,r):(s.flags=s.flags&-4097|2,ts=!1,Ir=s)}}else{if(Ih(s))throw Error(Re(418));s.flags=s.flags&-4097|2,ts=!1,Ir=s}}}function Xb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ir=s}function Fd(s){if(s!==Ir)return!1;if(!ts)return Xb(s),ts=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!jh(s.type,s.memoizedProps)),t&&(t=wr)){if(Ih(s))throw Y5(),Error(Re(418));for(;t;)K5(s,t),t=vn(t.nextSibling)}if(Xb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));e:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"){if(t===0){wr=vn(s.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}s=s.nextSibling}wr=null}}else wr=Ir?vn(s.stateNode.nextSibling):null;return!0}function Y5(){for(var s=wr;s;)s=vn(s.nextSibling)}function Eo(){wr=Ir=null,ts=!1}function df(s){Kr===null?Kr=[s]:Kr.push(s)}var bE=Ka.ReactCurrentBatchConfig;function bl(s,t,r){if(s=r.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Re(309));var a=r.stateNode}if(!a)throw Error(Re(147,s));var n=a,l=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var d=n.refs;o===null?delete d[l]:d[l]=o},t._stringRef=l,t)}if(typeof s!="string")throw Error(Re(284));if(!r._owner)throw Error(Re(290,s))}return s}function Ud(s,t){throw s=Object.prototype.toString.call(t),Error(Re(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function Jb(s){var t=s._init;return t(s._payload)}function X5(s){function t(R,$){if(s){var z=R.deletions;z===null?(R.deletions=[$],R.flags|=16):z.push($)}}function r(R,$){if(!s)return null;for(;$!==null;)t(R,$),$=$.sibling;return null}function a(R,$){for(R=new Map;$!==null;)$.key!==null?R.set($.key,$):R.set($.index,$),$=$.sibling;return R}function n(R,$){return R=kn(R,$),R.index=0,R.sibling=null,R}function l(R,$,z){return R.index=z,s?(z=R.alternate,z!==null?(z=z.index,z<$?(R.flags|=2,$):z):(R.flags|=2,$)):(R.flags|=1048576,$)}function o(R){return s&&R.alternate===null&&(R.flags|=2),R}function d(R,$,z,Z){return $===null||$.tag!==6?($=b0(z,R.mode,Z),$.return=R,$):($=n($,z),$.return=R,$)}function u(R,$,z,Z){var G=z.type;return G===Xi?y(R,$,z.props.children,Z,z.key):$!==null&&($.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===an&&Jb(G)===$.type)?(Z=n($,z.props),Z.ref=bl(R,$,z),Z.return=R,Z):(Z=gu(z.type,z.key,z.props,null,R.mode,Z),Z.ref=bl(R,$,z),Z.return=R,Z)}function m(R,$,z,Z){return $===null||$.tag!==4||$.stateNode.containerInfo!==z.containerInfo||$.stateNode.implementation!==z.implementation?($=v0(z,R.mode,Z),$.return=R,$):($=n($,z.children||[]),$.return=R,$)}function y(R,$,z,Z,G){return $===null||$.tag!==7?($=hi(z,R.mode,Z,G),$.return=R,$):($=n($,z),$.return=R,$)}function j(R,$,z){if(typeof $=="string"&&$!==""||typeof $=="number")return $=b0(""+$,R.mode,z),$.return=R,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Dd:return z=gu($.type,$.key,$.props,null,R.mode,z),z.ref=bl(R,null,$),z.return=R,z;case Yi:return $=v0($,R.mode,z),$.return=R,$;case an:var Z=$._init;return j(R,Z($._payload),z)}if(Sl($)||hl($))return $=hi($,R.mode,z,null),$.return=R,$;Ud(R,$)}return null}function N(R,$,z,Z){var G=$!==null?$.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return G!==null?null:d(R,$,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Dd:return z.key===G?u(R,$,z,Z):null;case Yi:return z.key===G?m(R,$,z,Z):null;case an:return G=z._init,N(R,$,G(z._payload),Z)}if(Sl(z)||hl(z))return G!==null?null:y(R,$,z,Z,null);Ud(R,z)}return null}function T(R,$,z,Z,G){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return R=R.get(z)||null,d($,R,""+Z,G);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Dd:return R=R.get(Z.key===null?z:Z.key)||null,u($,R,Z,G);case Yi:return R=R.get(Z.key===null?z:Z.key)||null,m($,R,Z,G);case an:var Y=Z._init;return T(R,$,z,Y(Z._payload),G)}if(Sl(Z)||hl(Z))return R=R.get(z)||null,y($,R,Z,G,null);Ud($,Z)}return null}function g(R,$,z,Z){for(var G=null,Y=null,V=$,x=$=0,q=null;V!==null&&x<z.length;x++){V.index>x?(q=V,V=null):q=V.sibling;var W=N(R,V,z[x],Z);if(W===null){V===null&&(V=q);break}s&&V&&W.alternate===null&&t(R,V),$=l(W,$,x),Y===null?G=W:Y.sibling=W,Y=W,V=q}if(x===z.length)return r(R,V),ts&&ti(R,x),G;if(V===null){for(;x<z.length;x++)V=j(R,z[x],Z),V!==null&&($=l(V,$,x),Y===null?G=V:Y.sibling=V,Y=V);return ts&&ti(R,x),G}for(V=a(R,V);x<z.length;x++)q=T(V,R,x,z[x],Z),q!==null&&(s&&q.alternate!==null&&V.delete(q.key===null?x:q.key),$=l(q,$,x),Y===null?G=q:Y.sibling=q,Y=q);return s&&V.forEach(function(J){return t(R,J)}),ts&&ti(R,x),G}function B(R,$,z,Z){var G=hl(z);if(typeof G!="function")throw Error(Re(150));if(z=G.call(z),z==null)throw Error(Re(151));for(var Y=G=null,V=$,x=$=0,q=null,W=z.next();V!==null&&!W.done;x++,W=z.next()){V.index>x?(q=V,V=null):q=V.sibling;var J=N(R,V,W.value,Z);if(J===null){V===null&&(V=q);break}s&&V&&J.alternate===null&&t(R,V),$=l(J,$,x),Y===null?G=J:Y.sibling=J,Y=J,V=q}if(W.done)return r(R,V),ts&&ti(R,x),G;if(V===null){for(;!W.done;x++,W=z.next())W=j(R,W.value,Z),W!==null&&($=l(W,$,x),Y===null?G=W:Y.sibling=W,Y=W);return ts&&ti(R,x),G}for(V=a(R,V);!W.done;x++,W=z.next())W=T(V,R,x,W.value,Z),W!==null&&(s&&W.alternate!==null&&V.delete(W.key===null?x:W.key),$=l(W,$,x),Y===null?G=W:Y.sibling=W,Y=W);return s&&V.forEach(function(re){return t(R,re)}),ts&&ti(R,x),G}function D(R,$,z,Z){if(typeof z=="object"&&z!==null&&z.type===Xi&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Dd:e:{for(var G=z.key,Y=$;Y!==null;){if(Y.key===G){if(G=z.type,G===Xi){if(Y.tag===7){r(R,Y.sibling),$=n(Y,z.props.children),$.return=R,R=$;break e}}else if(Y.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===an&&Jb(G)===Y.type){r(R,Y.sibling),$=n(Y,z.props),$.ref=bl(R,Y,z),$.return=R,R=$;break e}r(R,Y);break}else t(R,Y);Y=Y.sibling}z.type===Xi?($=hi(z.props.children,R.mode,Z,z.key),$.return=R,R=$):(Z=gu(z.type,z.key,z.props,null,R.mode,Z),Z.ref=bl(R,$,z),Z.return=R,R=Z)}return o(R);case Yi:e:{for(Y=z.key;$!==null;){if($.key===Y)if($.tag===4&&$.stateNode.containerInfo===z.containerInfo&&$.stateNode.implementation===z.implementation){r(R,$.sibling),$=n($,z.children||[]),$.return=R,R=$;break e}else{r(R,$);break}else t(R,$);$=$.sibling}$=v0(z,R.mode,Z),$.return=R,R=$}return o(R);case an:return Y=z._init,D(R,$,Y(z._payload),Z)}if(Sl(z))return g(R,$,z,Z);if(hl(z))return B(R,$,z,Z);Ud(R,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,$!==null&&$.tag===6?(r(R,$.sibling),$=n($,z),$.return=R,R=$):(r(R,$),$=b0(z,R.mode,Z),$.return=R,R=$),o(R)):r(R,$)}return D}var Co=X5(!0),J5=X5(!1),Qu=Fn(null),Ku=null,no=null,uf=null;function xf(){uf=no=Ku=null}function mf(s){var t=Qu.current;Zt(Qu),s._currentValue=t}function Ph(s,t,r){for(;s!==null;){var a=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),s===r)break;s=s.return}}function vo(s,t){Ku=s,uf=no=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(dr=!0),s.firstContext=null)}function zr(s){var t=s._currentValue;if(uf!==s)if(s={context:s,memoizedValue:t,next:null},no===null){if(Ku===null)throw Error(Re(308));no=s,Ku.dependencies={lanes:0,firstContext:s}}else no=no.next=s;return t}var ii=null;function hf(s){ii===null?ii=[s]:ii.push(s)}function Z5(s,t,r,a){var n=t.interleaved;return n===null?(r.next=r,hf(t)):(r.next=n.next,n.next=r),t.interleaved=r,Va(s,a)}function Va(s,t){s.lanes|=t;var r=s.alternate;for(r!==null&&(r.lanes|=t),r=s,s=s.return;s!==null;)s.childLanes|=t,r=s.alternate,r!==null&&(r.childLanes|=t),r=s,s=s.return;return r.tag===3?r.stateNode:null}var nn=!1;function pf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e2(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Aa(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function jn(s,t,r){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,Rt&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,Va(s,r)}return n=a.interleaved,n===null?(t.next=t,hf(a)):(t.next=n.next,n.next=t),a.interleaved=t,Va(s,r)}function uu(s,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,Zp(s,r)}}function Zb(s,t){var r=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?n=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?n=l=t:l=l.next=t}else n=l=t;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=t:s.next=t,r.lastBaseUpdate=t}function Yu(s,t,r,a){var n=s.updateQueue;nn=!1;var l=n.firstBaseUpdate,o=n.lastBaseUpdate,d=n.shared.pending;if(d!==null){n.shared.pending=null;var u=d,m=u.next;u.next=null,o===null?l=m:o.next=m,o=u;var y=s.alternate;y!==null&&(y=y.updateQueue,d=y.lastBaseUpdate,d!==o&&(d===null?y.firstBaseUpdate=m:d.next=m,y.lastBaseUpdate=u))}if(l!==null){var j=n.baseState;o=0,y=m=u=null,d=l;do{var N=d.lane,T=d.eventTime;if((a&N)===N){y!==null&&(y=y.next={eventTime:T,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var g=s,B=d;switch(N=t,T=r,B.tag){case 1:if(g=B.payload,typeof g=="function"){j=g.call(T,j,N);break e}j=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=B.payload,N=typeof g=="function"?g.call(T,j,N):g,N==null)break e;j=os({},j,N);break e;case 2:nn=!0}}d.callback!==null&&d.lane!==0&&(s.flags|=64,N=n.effects,N===null?n.effects=[d]:N.push(d))}else T={eventTime:T,lane:N,tag:d.tag,payload:d.payload,callback:d.callback,next:null},y===null?(m=y=T,u=j):y=y.next=T,o|=N;if(d=d.next,d===null){if(d=n.shared.pending,d===null)break;N=d,d=N.next,N.next=null,n.lastBaseUpdate=N,n.shared.pending=null}}while(1);if(y===null&&(u=j),n.baseState=u,n.firstBaseUpdate=m,n.lastBaseUpdate=y,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else l===null&&(n.shared.lanes=0);vi|=o,s.lanes=o,s.memoizedState=j}}function ev(s,t,r){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var a=s[t],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(Re(191,n));n.call(a)}}}var Gc={},da=Fn(Gc),gc=Fn(Gc),yc=Fn(Gc);function oi(s){if(s===Gc)throw Error(Re(174));return s}function ff(s,t){switch(Kt(yc,t),Kt(gc,s),Kt(da,Gc),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oh(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=oh(t,s)}Zt(da),Kt(da,t)}function To(){Zt(da),Zt(gc),Zt(yc)}function t2(s){oi(yc.current);var t=oi(da.current),r=oh(t,s.type);t!==r&&(Kt(gc,s),Kt(da,r))}function gf(s){gc.current===s&&(Zt(da),Zt(gc))}var ss=Fn(0);function Xu(s){for(var t=s;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var m0=[];function yf(){for(var s=0;s<m0.length;s++)m0[s]._workInProgressVersionPrimary=null;m0.length=0}var xu=Ka.ReactCurrentDispatcher,h0=Ka.ReactCurrentBatchConfig,bi=0,as=null,js=null,Is=null,Ju=!1,Fl=!1,bc=0,vE=0;function $s(){throw Error(Re(321))}function bf(s,t){if(t===null)return!1;for(var r=0;r<t.length&&r<s.length;r++)if(!ea(s[r],t[r]))return!1;return!0}function vf(s,t,r,a,n,l){if(bi=l,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xu.current=s===null||s.memoizedState===null?kE:IE,s=r(a,n),Fl){l=0;do{if(Fl=!1,bc=0,25<=l)throw Error(Re(301));l+=1,Is=js=null,t.updateQueue=null,xu.current=SE,s=r(a,n)}while(Fl)}if(xu.current=Zu,t=js!==null&&js.next!==null,bi=0,Is=js=as=null,Ju=!1,t)throw Error(Re(300));return s}function jf(){var s=bc!==0;return bc=0,s}function ia(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Is===null?as.memoizedState=Is=s:Is=Is.next=s,Is}function Br(){if(js===null){var s=as.alternate;s=s!==null?s.memoizedState:null}else s=js.next;var t=Is===null?as.memoizedState:Is.next;if(t!==null)Is=t,js=s;else{if(s===null)throw Error(Re(310));js=s,s={memoizedState:js.memoizedState,baseState:js.baseState,baseQueue:js.baseQueue,queue:js.queue,next:null},Is===null?as.memoizedState=Is=s:Is=Is.next=s}return Is}function vc(s,t){return typeof t=="function"?t(s):t}function p0(s){var t=Br(),r=t.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=s;var a=js,n=a.baseQueue,l=r.pending;if(l!==null){if(n!==null){var o=n.next;n.next=l.next,l.next=o}a.baseQueue=n=l,r.pending=null}if(n!==null){l=n.next,a=a.baseState;var d=o=null,u=null,m=l;do{var y=m.lane;if((bi&y)===y)u!==null&&(u=u.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),a=m.hasEagerState?m.eagerState:s(a,m.action);else{var j={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};u===null?(d=u=j,o=a):u=u.next=j,as.lanes|=y,vi|=y}m=m.next}while(m!==null&&m!==l);u===null?o=a:u.next=d,ea(a,t.memoizedState)||(dr=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=u,r.lastRenderedState=a}if(s=r.interleaved,s!==null){n=s;do l=n.lane,as.lanes|=l,vi|=l,n=n.next;while(n!==s)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function f0(s){var t=Br(),r=t.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=s;var a=r.dispatch,n=r.pending,l=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do l=s(l,o.action),o=o.next;while(o!==n);ea(l,t.memoizedState)||(dr=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,a]}function s2(){}function r2(s,t){var r=as,a=Br(),n=t(),l=!ea(a.memoizedState,n);if(l&&(a.memoizedState=n,dr=!0),a=a.queue,Nf(i2.bind(null,r,a,s),[s]),a.getSnapshot!==t||l||Is!==null&&Is.memoizedState.tag&1){if(r.flags|=2048,jc(9,n2.bind(null,r,a,n,t),void 0,null),Ps===null)throw Error(Re(349));bi&30||a2(r,t,n)}return n}function a2(s,t,r){s.flags|=16384,s={getSnapshot:t,value:r},t=as.updateQueue,t===null?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[s]):(r=t.stores,r===null?t.stores=[s]:r.push(s))}function n2(s,t,r,a){t.value=r,t.getSnapshot=a,o2(t)&&l2(s)}function i2(s,t,r){return r(function(){o2(t)&&l2(s)})}function o2(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!ea(s,r)}catch{return!0}}function l2(s){var t=Va(s,1);t!==null&&Zr(t,s,1,-1)}function tv(s){var t=ia();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:s},t.queue=s,s=s.dispatch=wE.bind(null,as,s),[t.memoizedState,s]}function jc(s,t,r,a){return s={tag:s,create:t,destroy:r,deps:a,next:null},t=as.updateQueue,t===null?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=s.next=s):(r=t.lastEffect,r===null?t.lastEffect=s.next=s:(a=r.next,r.next=s,s.next=a,t.lastEffect=s)),s}function c2(){return Br().memoizedState}function mu(s,t,r,a){var n=ia();as.flags|=s,n.memoizedState=jc(1|t,r,void 0,a===void 0?null:a)}function Qx(s,t,r,a){var n=Br();a=a===void 0?null:a;var l=void 0;if(js!==null){var o=js.memoizedState;if(l=o.destroy,a!==null&&bf(a,o.deps)){n.memoizedState=jc(t,r,l,a);return}}as.flags|=s,n.memoizedState=jc(1|t,r,l,a)}function sv(s,t){return mu(8390656,8,s,t)}function Nf(s,t){return Qx(2048,8,s,t)}function d2(s,t){return Qx(4,2,s,t)}function u2(s,t){return Qx(4,4,s,t)}function x2(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function m2(s,t,r){return r=r!=null?r.concat([s]):null,Qx(4,4,x2.bind(null,t,s),r)}function wf(){}function h2(s,t){var r=Br();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&bf(t,a[1])?a[0]:(r.memoizedState=[s,t],s)}function p2(s,t){var r=Br();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&bf(t,a[1])?a[0]:(s=s(),r.memoizedState=[s,t],s)}function f2(s,t,r){return bi&21?(ea(r,t)||(r=j5(),as.lanes|=r,vi|=r,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,dr=!0),s.memoizedState=r)}function jE(s,t){var r=Bt;Bt=r!==0&&4>r?r:4,s(!0);var a=h0.transition;h0.transition={};try{s(!1),t()}finally{Bt=r,h0.transition=a}}function g2(){return Br().memoizedState}function NE(s,t,r){var a=wn(s);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},y2(s))b2(t,r);else if(r=Z5(s,t,r,a),r!==null){var n=tr();Zr(r,s,a,n),v2(r,t,a)}}function wE(s,t,r){var a=wn(s),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(y2(s))b2(t,n);else{var l=s.alternate;if(s.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,d=l(o,r);if(n.hasEagerState=!0,n.eagerState=d,ea(d,o)){var u=t.interleaved;u===null?(n.next=n,hf(t)):(n.next=u.next,u.next=n),t.interleaved=n;return}}catch{}finally{}r=Z5(s,t,n,a),r!==null&&(n=tr(),Zr(r,s,a,n),v2(r,t,a))}}function y2(s){var t=s.alternate;return s===as||t!==null&&t===as}function b2(s,t){Fl=Ju=!0;var r=s.pending;r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t}function v2(s,t,r){if(r&4194240){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,Zp(s,r)}}var Zu={readContext:zr,useCallback:$s,useContext:$s,useEffect:$s,useImperativeHandle:$s,useInsertionEffect:$s,useLayoutEffect:$s,useMemo:$s,useReducer:$s,useRef:$s,useState:$s,useDebugValue:$s,useDeferredValue:$s,useTransition:$s,useMutableSource:$s,useSyncExternalStore:$s,useId:$s,unstable_isNewReconciler:!1},kE={readContext:zr,useCallback:function(s,t){return ia().memoizedState=[s,t===void 0?null:t],s},useContext:zr,useEffect:sv,useImperativeHandle:function(s,t,r){return r=r!=null?r.concat([s]):null,mu(4194308,4,x2.bind(null,t,s),r)},useLayoutEffect:function(s,t){return mu(4194308,4,s,t)},useInsertionEffect:function(s,t){return mu(4,2,s,t)},useMemo:function(s,t){var r=ia();return t=t===void 0?null:t,s=s(),r.memoizedState=[s,t],s},useReducer:function(s,t,r){var a=ia();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},a.queue=s,s=s.dispatch=NE.bind(null,as,s),[a.memoizedState,s]},useRef:function(s){var t=ia();return s={current:s},t.memoizedState=s},useState:tv,useDebugValue:wf,useDeferredValue:function(s){return ia().memoizedState=s},useTransition:function(){var s=tv(!1),t=s[0];return s=jE.bind(null,s[1]),ia().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,r){var a=as,n=ia();if(ts){if(r===void 0)throw Error(Re(407));r=r()}else{if(r=t(),Ps===null)throw Error(Re(349));bi&30||a2(a,t,r)}n.memoizedState=r;var l={value:r,getSnapshot:t};return n.queue=l,sv(i2.bind(null,a,l,s),[s]),a.flags|=2048,jc(9,n2.bind(null,a,l,r,t),void 0,null),r},useId:function(){var s=ia(),t=Ps.identifierPrefix;if(ts){var r=Ta,a=Ca;r=(a&~(1<<32-Jr(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=bc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=vE++,t=":"+t+"r"+r.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},IE={readContext:zr,useCallback:h2,useContext:zr,useEffect:Nf,useImperativeHandle:m2,useInsertionEffect:d2,useLayoutEffect:u2,useMemo:p2,useReducer:p0,useRef:c2,useState:function(){return p0(vc)},useDebugValue:wf,useDeferredValue:function(s){var t=Br();return f2(t,js.memoizedState,s)},useTransition:function(){var s=p0(vc)[0],t=Br().memoizedState;return[s,t]},useMutableSource:s2,useSyncExternalStore:r2,useId:g2,unstable_isNewReconciler:!1},SE={readContext:zr,useCallback:h2,useContext:zr,useEffect:Nf,useImperativeHandle:m2,useInsertionEffect:d2,useLayoutEffect:u2,useMemo:p2,useReducer:f0,useRef:c2,useState:function(){return f0(vc)},useDebugValue:wf,useDeferredValue:function(s){var t=Br();return js===null?t.memoizedState=s:f2(t,js.memoizedState,s)},useTransition:function(){var s=f0(vc)[0],t=Br().memoizedState;return[s,t]},useMutableSource:s2,useSyncExternalStore:r2,useId:g2,unstable_isNewReconciler:!1};function Gr(s,t){if(s&&s.defaultProps){t=os({},t),s=s.defaultProps;for(var r in s)t[r]===void 0&&(t[r]=s[r]);return t}return t}function Eh(s,t,r,a){t=s.memoizedState,r=r(a,t),r=r==null?t:os({},t,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var Kx={isMounted:function(s){return(s=s._reactInternals)?Ti(s)===s:!1},enqueueSetState:function(s,t,r){s=s._reactInternals;var a=tr(),n=wn(s),l=Aa(a,n);l.payload=t,r!=null&&(l.callback=r),t=jn(s,l,n),t!==null&&(Zr(t,s,n,a),uu(t,s,n))},enqueueReplaceState:function(s,t,r){s=s._reactInternals;var a=tr(),n=wn(s),l=Aa(a,n);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=jn(s,l,n),t!==null&&(Zr(t,s,n,a),uu(t,s,n))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var r=tr(),a=wn(s),n=Aa(r,a);n.tag=2,t!=null&&(n.callback=t),t=jn(s,n,a),t!==null&&(Zr(t,s,a,r),uu(t,s,a))}};function rv(s,t,r,a,n,l,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,l,o):t.prototype&&t.prototype.isPureReactComponent?!mc(r,a)||!mc(n,l):!0}function j2(s,t,r){var a=!1,n=_n,l=t.contextType;return typeof l=="object"&&l!==null?l=zr(l):(n=mr(t)?gi:Qs.current,a=t.contextTypes,l=(a=a!=null)?Po(s,n):_n),t=new t(r,l),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kx,s.stateNode=t,t._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=n,s.__reactInternalMemoizedMaskedChildContext=l),t}function av(s,t,r,a){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==s&&Kx.enqueueReplaceState(t,t.state,null)}function Ch(s,t,r,a){var n=s.stateNode;n.props=r,n.state=s.memoizedState,n.refs={},pf(s);var l=t.contextType;typeof l=="object"&&l!==null?n.context=zr(l):(l=mr(t)?gi:Qs.current,n.context=Po(s,l)),n.state=s.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Eh(s,t,l,r),n.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Kx.enqueueReplaceState(n,n.state,null),Yu(s,r,n,a),n.state=s.memoizedState),typeof n.componentDidMount=="function"&&(s.flags|=4194308)}function _o(s,t){try{var r="",a=t;do r+=eP(a),a=a.return;while(a);var n=r}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:s,source:t,stack:n,digest:null}}function g0(s,t,r){return{value:s,source:null,stack:r??null,digest:t??null}}function Th(s,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var PE=typeof WeakMap=="function"?WeakMap:Map;function N2(s,t,r){r=Aa(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){tx||(tx=!0,Bh=a),Th(s,t)},r}function w2(s,t,r){r=Aa(-1,r),r.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;r.payload=function(){return a(n)},r.callback=function(){Th(s,t)}}var l=s.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Th(s,t),typeof a!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function nv(s,t,r){var a=s.pingCache;if(a===null){a=s.pingCache=new PE;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(r)||(n.add(r),s=$E.bind(null,s,t,r),t.then(s,s))}function iv(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function ov(s,t,r,a,n){return s.mode&1?(s.flags|=65536,s.lanes=n,s):(s===t?s.flags|=65536:(s.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Aa(-1,1),t.tag=2,jn(r,t,1))),r.lanes|=1),s)}var EE=Ka.ReactCurrentOwner,dr=!1;function Xs(s,t,r,a){t.child=s===null?J5(t,null,r,a):Co(t,s.child,r,a)}function lv(s,t,r,a,n){r=r.render;var l=t.ref;return vo(t,n),a=vf(s,t,r,a,l,n),r=jf(),s!==null&&!dr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~n,za(s,t,n)):(ts&&r&&lf(t),t.flags|=1,Xs(s,t,a,n),t.child)}function cv(s,t,r,a,n){if(s===null){var l=r.type;return typeof l=="function"&&!_f(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,k2(s,t,l,a,n)):(s=gu(r.type,null,a,t,t.mode,n),s.ref=t.ref,s.return=t,t.child=s)}if(l=s.child,!(s.lanes&n)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:mc,r(o,a)&&s.ref===t.ref)return za(s,t,n)}return t.flags|=1,s=kn(l,a),s.ref=t.ref,s.return=t,t.child=s}function k2(s,t,r,a,n){if(s!==null){var l=s.memoizedProps;if(mc(l,a)&&s.ref===t.ref)if(dr=!1,t.pendingProps=a=l,(s.lanes&n)!==0)s.flags&131072&&(dr=!0);else return t.lanes=s.lanes,za(s,t,n)}return _h(s,t,r,a,n)}function I2(s,t,r){var a=t.pendingProps,n=a.children,l=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(oo,vr),vr|=r;else{if(!(r&1073741824))return s=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,Kt(oo,vr),vr|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,Kt(oo,vr),vr|=a}else l!==null?(a=l.baseLanes|r,t.memoizedState=null):a=r,Kt(oo,vr),vr|=a;return Xs(s,t,n,r),t.child}function S2(s,t){var r=t.ref;(s===null&&r!==null||s!==null&&s.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _h(s,t,r,a,n){var l=mr(r)?gi:Qs.current;return l=Po(t,l),vo(t,n),r=vf(s,t,r,a,l,n),a=jf(),s!==null&&!dr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~n,za(s,t,n)):(ts&&a&&lf(t),t.flags|=1,Xs(s,t,r,n),t.child)}function dv(s,t,r,a,n){if(mr(r)){var l=!0;Hu(t)}else l=!1;if(vo(t,n),t.stateNode===null)hu(s,t),j2(t,r,a),Ch(t,r,a,n),a=!0;else if(s===null){var o=t.stateNode,d=t.memoizedProps;o.props=d;var u=o.context,m=r.contextType;typeof m=="object"&&m!==null?m=zr(m):(m=mr(r)?gi:Qs.current,m=Po(t,m));var y=r.getDerivedStateFromProps,j=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function";j||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==a||u!==m)&&av(t,o,a,m),nn=!1;var N=t.memoizedState;o.state=N,Yu(t,a,o,n),u=t.memoizedState,d!==a||N!==u||xr.current||nn?(typeof y=="function"&&(Eh(t,r,y,a),u=t.memoizedState),(d=nn||rv(t,r,d,a,N,u,m))?(j||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=u),o.props=a,o.state=u,o.context=m,a=d):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,e2(s,t),d=t.memoizedProps,m=t.type===t.elementType?d:Gr(t.type,d),o.props=m,j=t.pendingProps,N=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=zr(u):(u=mr(r)?gi:Qs.current,u=Po(t,u));var T=r.getDerivedStateFromProps;(y=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==j||N!==u)&&av(t,o,a,u),nn=!1,N=t.memoizedState,o.state=N,Yu(t,a,o,n);var g=t.memoizedState;d!==j||N!==g||xr.current||nn?(typeof T=="function"&&(Eh(t,r,T,a),g=t.memoizedState),(m=nn||rv(t,r,m,a,N,g,u)||!1)?(y||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,g,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===s.memoizedProps&&N===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===s.memoizedProps&&N===s.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=g),o.props=a,o.state=g,o.context=u,a=m):(typeof o.componentDidUpdate!="function"||d===s.memoizedProps&&N===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===s.memoizedProps&&N===s.memoizedState||(t.flags|=1024),a=!1)}return Dh(s,t,r,a,l,n)}function Dh(s,t,r,a,n,l){S2(s,t);var o=(t.flags&128)!==0;if(!a&&!o)return n&&Kb(t,r,!1),za(s,t,l);a=t.stateNode,EE.current=t;var d=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,s!==null&&o?(t.child=Co(t,s.child,null,l),t.child=Co(t,null,d,l)):Xs(s,t,d,l),t.memoizedState=a.state,n&&Kb(t,r,!0),t.child}function P2(s){var t=s.stateNode;t.pendingContext?Qb(s,t.pendingContext,t.pendingContext!==t.context):t.context&&Qb(s,t.context,!1),ff(s,t.containerInfo)}function uv(s,t,r,a,n){return Eo(),df(n),t.flags|=256,Xs(s,t,r,a),t.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Rh(s){return{baseLanes:s,cachePool:null,transitions:null}}function E2(s,t,r){var a=t.pendingProps,n=ss.current,l=!1,o=(t.flags&128)!==0,d;if((d=o)||(d=s!==null&&s.memoizedState===null?!1:(n&2)!==0),d?(l=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(n|=1),Kt(ss,n&1),s===null)return Sh(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,s=a.fallback,l?(a=t.mode,l=t.child,o={mode:"hidden",children:o},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Jx(o,a,0,null),s=hi(s,a,r,null),l.return=t,s.return=t,l.sibling=s,t.child=l,t.child.memoizedState=Rh(r),t.memoizedState=Ah,s):kf(t,o));if(n=s.memoizedState,n!==null&&(d=n.dehydrated,d!==null))return CE(s,t,o,a,d,n,r);if(l){l=a.fallback,o=t.mode,n=s.child,d=n.sibling;var u={mode:"hidden",children:a.children};return!(o&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=u,t.deletions=null):(a=kn(n,u),a.subtreeFlags=n.subtreeFlags&14680064),d!==null?l=kn(d,l):(l=hi(l,o,r,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,o=s.child.memoizedState,o=o===null?Rh(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=s.childLanes&~r,t.memoizedState=Ah,a}return l=s.child,s=l.sibling,a=kn(l,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,s!==null&&(r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)),t.child=a,t.memoizedState=null,a}function kf(s,t){return t=Jx({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function Wd(s,t,r,a){return a!==null&&df(a),Co(t,s.child,null,r),s=kf(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function CE(s,t,r,a,n,l,o){if(r)return t.flags&256?(t.flags&=-257,a=g0(Error(Re(422))),Wd(s,t,o,a)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(l=a.fallback,n=t.mode,a=Jx({mode:"visible",children:a.children},n,0,null),l=hi(l,n,o,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,t.mode&1&&Co(t,s.child,null,o),t.child.memoizedState=Rh(o),t.memoizedState=Ah,l);if(!(t.mode&1))return Wd(s,t,o,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var d=a.dgst;return a=d,l=Error(Re(419)),a=g0(l,a,void 0),Wd(s,t,o,a)}if(d=(o&s.childLanes)!==0,dr||d){if(a=Ps,a!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|o)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Va(s,n),Zr(a,s,n,-1))}return Tf(),a=g0(Error(Re(421))),Wd(s,t,o,a)}return n.data==="$?"?(t.flags|=128,t.child=s.child,t=FE.bind(null,s),n._reactRetry=t,null):(s=l.treeContext,wr=vn(n.nextSibling),Ir=t,ts=!0,Kr=null,s!==null&&(Rr[Mr++]=Ca,Rr[Mr++]=Ta,Rr[Mr++]=yi,Ca=s.id,Ta=s.overflow,yi=t),t=kf(t,a.children),t.flags|=4096,t)}function xv(s,t,r){s.lanes|=t;var a=s.alternate;a!==null&&(a.lanes|=t),Ph(s.return,t,r)}function y0(s,t,r,a,n){var l=s.memoizedState;l===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function C2(s,t,r){var a=t.pendingProps,n=a.revealOrder,l=a.tail;if(Xs(s,t,a.children,r),a=ss.current,a&2)a=a&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xv(s,r,t);else if(s.tag===19)xv(s,r,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(Kt(ss,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)s=r.alternate,s!==null&&Xu(s)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),y0(t,!1,n,r,l);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(s=n.alternate,s!==null&&Xu(s)===null){t.child=n;break}s=n.sibling,n.sibling=r,r=n,n=s}y0(t,!0,r,null,l);break;case"together":y0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hu(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function za(s,t,r){if(s!==null&&(t.dependencies=s.dependencies),vi|=t.lanes,!(r&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(Re(153));if(t.child!==null){for(s=t.child,r=kn(s,s.pendingProps),t.child=r,r.return=t;s.sibling!==null;)s=s.sibling,r=r.sibling=kn(s,s.pendingProps),r.return=t;r.sibling=null}return t.child}function TE(s,t,r){switch(t.tag){case 3:P2(t),Eo();break;case 5:t2(t);break;case 1:mr(t.type)&&Hu(t);break;case 4:ff(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;Kt(Qu,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Kt(ss,ss.current&1),t.flags|=128,null):r&t.child.childLanes?E2(s,t,r):(Kt(ss,ss.current&1),s=za(s,t,r),s!==null?s.sibling:null);Kt(ss,ss.current&1);break;case 19:if(a=(r&t.childLanes)!==0,s.flags&128){if(a)return C2(s,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Kt(ss,ss.current),a)break;return null;case 22:case 23:return t.lanes=0,I2(s,t,r)}return za(s,t,r)}var T2,Mh,_2,D2;T2=function(s,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Mh=function(){};_2=function(s,t,r,a){var n=s.memoizedProps;if(n!==a){s=t.stateNode,oi(da.current);var l=null;switch(r){case"input":n=rh(s,n),a=rh(s,a),l=[];break;case"select":n=os({},n,{value:void 0}),a=os({},a,{value:void 0}),l=[];break;case"textarea":n=ih(s,n),a=ih(s,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=Uu)}lh(r,a);var o;r=null;for(m in n)if(!a.hasOwnProperty(m)&&n.hasOwnProperty(m)&&n[m]!=null)if(m==="style"){var d=n[m];for(o in d)d.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ic.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in a){var u=a[m];if(d=n!=null?n[m]:void 0,a.hasOwnProperty(m)&&u!==d&&(u!=null||d!=null))if(m==="style")if(d){for(o in d)!d.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&d[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(l||(l=[]),l.push(m,r)),r=u;else m==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,d=d?d.__html:void 0,u!=null&&d!==u&&(l=l||[]).push(m,u)):m==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(m,""+u):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ic.hasOwnProperty(m)?(u!=null&&m==="onScroll"&&Jt("scroll",s),l||d===u||(l=[])):(l=l||[]).push(m,u))}r&&(l=l||[]).push("style",r);var m=l;(t.updateQueue=m)&&(t.flags|=4)}};D2=function(s,t,r,a){r!==a&&(t.flags|=4)};function vl(s,t){if(!ts)switch(s.tailMode){case"hidden":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function Fs(s){var t=s.alternate!==null&&s.alternate.child===s.child,r=0,a=0;if(t)for(var n=s.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=s,n=n.sibling;else for(n=s.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=s,n=n.sibling;return s.subtreeFlags|=a,s.childLanes=r,t}function _E(s,t,r){var a=t.pendingProps;switch(cf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fs(t),null;case 1:return mr(t.type)&&Wu(),Fs(t),null;case 3:return a=t.stateNode,To(),Zt(xr),Zt(Qs),yf(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Fd(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Kr!==null&&(Uh(Kr),Kr=null))),Mh(s,t),Fs(t),null;case 5:gf(t);var n=oi(yc.current);if(r=t.type,s!==null&&t.stateNode!=null)_2(s,t,r,a,n),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Re(166));return Fs(t),null}if(s=oi(da.current),Fd(t)){a=t.stateNode,r=t.type;var l=t.memoizedProps;switch(a[la]=t,a[fc]=l,s=(t.mode&1)!==0,r){case"dialog":Jt("cancel",a),Jt("close",a);break;case"iframe":case"object":case"embed":Jt("load",a);break;case"video":case"audio":for(n=0;n<El.length;n++)Jt(El[n],a);break;case"source":Jt("error",a);break;case"img":case"image":case"link":Jt("error",a),Jt("load",a);break;case"details":Jt("toggle",a);break;case"input":jb(a,l),Jt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Jt("invalid",a);break;case"textarea":wb(a,l),Jt("invalid",a)}lh(r,l),n=null;for(var o in l)if(l.hasOwnProperty(o)){var d=l[o];o==="children"?typeof d=="string"?a.textContent!==d&&(l.suppressHydrationWarning!==!0&&$d(a.textContent,d,s),n=["children",d]):typeof d=="number"&&a.textContent!==""+d&&(l.suppressHydrationWarning!==!0&&$d(a.textContent,d,s),n=["children",""+d]):ic.hasOwnProperty(o)&&d!=null&&o==="onScroll"&&Jt("scroll",a)}switch(r){case"input":Ad(a),Nb(a,l,!0);break;case"textarea":Ad(a),kb(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=Uu)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=i5(r)),s==="http://www.w3.org/1999/xhtml"?r==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=o.createElement(r,{is:a.is}):(s=o.createElement(r),r==="select"&&(o=s,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):s=o.createElementNS(s,r),s[la]=t,s[fc]=a,T2(s,t,!1,!1),t.stateNode=s;e:{switch(o=ch(r,a),r){case"dialog":Jt("cancel",s),Jt("close",s),n=a;break;case"iframe":case"object":case"embed":Jt("load",s),n=a;break;case"video":case"audio":for(n=0;n<El.length;n++)Jt(El[n],s);n=a;break;case"source":Jt("error",s),n=a;break;case"img":case"image":case"link":Jt("error",s),Jt("load",s),n=a;break;case"details":Jt("toggle",s),n=a;break;case"input":jb(s,a),n=rh(s,a),Jt("invalid",s);break;case"option":n=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},n=os({},a,{value:void 0}),Jt("invalid",s);break;case"textarea":wb(s,a),n=ih(s,a),Jt("invalid",s);break;default:n=a}lh(r,n),d=n;for(l in d)if(d.hasOwnProperty(l)){var u=d[l];l==="style"?c5(s,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&o5(s,u)):l==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&oc(s,u):typeof u=="number"&&oc(s,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ic.hasOwnProperty(l)?u!=null&&l==="onScroll"&&Jt("scroll",s):u!=null&&Gp(s,l,u,o))}switch(r){case"input":Ad(s),Nb(s,a,!1);break;case"textarea":Ad(s),kb(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Tn(a.value));break;case"select":s.multiple=!!a.multiple,l=a.value,l!=null?fo(s,!!a.multiple,l,!1):a.defaultValue!=null&&fo(s,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(s.onclick=Uu)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fs(t),null;case 6:if(s&&t.stateNode!=null)D2(s,t,s.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Re(166));if(r=oi(yc.current),oi(da.current),Fd(t)){if(a=t.stateNode,r=t.memoizedProps,a[la]=t,(l=a.nodeValue!==r)&&(s=Ir,s!==null))switch(s.tag){case 3:$d(a.nodeValue,r,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&$d(a.nodeValue,r,(s.mode&1)!==0)}l&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[la]=t,t.stateNode=a}return Fs(t),null;case 13:if(Zt(ss),a=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ts&&wr!==null&&t.mode&1&&!(t.flags&128))Y5(),Eo(),t.flags|=98560,l=!1;else if(l=Fd(t),a!==null&&a.dehydrated!==null){if(s===null){if(!l)throw Error(Re(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Re(317));l[la]=t}else Eo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fs(t),l=!1}else Kr!==null&&(Uh(Kr),Kr=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(s===null||ss.current&1?Ns===0&&(Ns=3):Tf())),t.updateQueue!==null&&(t.flags|=4),Fs(t),null);case 4:return To(),Mh(s,t),s===null&&hc(t.stateNode.containerInfo),Fs(t),null;case 10:return mf(t.type._context),Fs(t),null;case 17:return mr(t.type)&&Wu(),Fs(t),null;case 19:if(Zt(ss),l=t.memoizedState,l===null)return Fs(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)vl(l,!1);else{if(Ns!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(o=Xu(s),o!==null){for(t.flags|=128,vl(l,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)l=r,s=a,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=s,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r=r.sibling;return Kt(ss,ss.current&1|2),t.child}s=s.sibling}l.tail!==null&&fs()>Do&&(t.flags|=128,a=!0,vl(l,!1),t.lanes=4194304)}else{if(!a)if(s=Xu(o),s!==null){if(t.flags|=128,a=!0,r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!ts)return Fs(t),null}else 2*fs()-l.renderingStartTime>Do&&r!==1073741824&&(t.flags|=128,a=!0,vl(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(r=l.last,r!==null?r.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=fs(),t.sibling=null,r=ss.current,Kt(ss,a?r&1|2:r&1),t):(Fs(t),null);case 22:case 23:return Cf(),a=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?vr&1073741824&&(Fs(t),t.subtreeFlags&6&&(t.flags|=8192)):Fs(t),null;case 24:return null;case 25:return null}throw Error(Re(156,t.tag))}function DE(s,t){switch(cf(t),t.tag){case 1:return mr(t.type)&&Wu(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return To(),Zt(xr),Zt(Qs),yf(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return gf(t),null;case 13:if(Zt(ss),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(Re(340));Eo()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return Zt(ss),null;case 4:return To(),null;case 10:return mf(t.type._context),null;case 22:case 23:return Cf(),null;case 24:return null;default:return null}}var Hd=!1,qs=!1,AE=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function io(s,t){var r=s.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){ms(s,t,a)}else r.current=null}function Oh(s,t,r){try{r()}catch(a){ms(s,t,a)}}var mv=!1;function RE(s,t){if(bh=Bu,s=L5(),of(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,d=-1,u=-1,m=0,y=0,j=s,N=null;t:for(;;){for(var T;j!==r||n!==0&&j.nodeType!==3||(d=o+n),j!==l||a!==0&&j.nodeType!==3||(u=o+a),j.nodeType===3&&(o+=j.nodeValue.length),(T=j.firstChild)!==null;)N=j,j=T;for(;;){if(j===s)break t;if(N===r&&++m===n&&(d=o),N===l&&++y===a&&(u=o),(T=j.nextSibling)!==null)break;j=N,N=j.parentNode}j=T}r=d===-1||u===-1?null:{start:d,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(vh={focusedElem:s,selectionRange:r},Bu=!1,Ze=t;Ze!==null;)if(t=Ze,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,Ze=s;else for(;Ze!==null;){t=Ze;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var B=g.memoizedProps,D=g.memoizedState,R=t.stateNode,$=R.getSnapshotBeforeUpdate(t.elementType===t.type?B:Gr(t.type,B),D);R.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(Z){ms(t,t.return,Z)}if(s=t.sibling,s!==null){s.return=t.return,Ze=s;break}Ze=t.return}return g=mv,mv=!1,g}function Ul(s,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&s)===s){var l=n.destroy;n.destroy=void 0,l!==void 0&&Oh(t,r,l)}n=n.next}while(n!==a)}}function Yx(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&s)===s){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Lh(s){var t=s.ref;if(t!==null){var r=s.stateNode;switch(s.tag){case 5:s=r;break;default:s=r}typeof t=="function"?t(s):t.current=s}}function A2(s){var t=s.alternate;t!==null&&(s.alternate=null,A2(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[la],delete t[fc],delete t[wh],delete t[fE],delete t[gE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function R2(s){return s.tag===5||s.tag===3||s.tag===4}function hv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||R2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vh(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(s,t):r.insertBefore(s,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(s,r)):(t=r,t.appendChild(s)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Uu));else if(a!==4&&(s=s.child,s!==null))for(Vh(s,t,r),s=s.sibling;s!==null;)Vh(s,t,r),s=s.sibling}function zh(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.insertBefore(s,t):r.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(zh(s,t,r),s=s.sibling;s!==null;)zh(s,t,r),s=s.sibling}var Cs=null,Qr=!1;function tn(s,t,r){for(r=r.child;r!==null;)M2(s,t,r),r=r.sibling}function M2(s,t,r){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(Fx,r)}catch{}switch(r.tag){case 5:qs||io(r,t);case 6:var a=Cs,n=Qr;Cs=null,tn(s,t,r),Cs=a,Qr=n,Cs!==null&&(Qr?(s=Cs,r=r.stateNode,s.nodeType===8?s.parentNode.removeChild(r):s.removeChild(r)):Cs.removeChild(r.stateNode));break;case 18:Cs!==null&&(Qr?(s=Cs,r=r.stateNode,s.nodeType===8?u0(s.parentNode,r):s.nodeType===1&&u0(s,r),uc(s)):u0(Cs,r.stateNode));break;case 4:a=Cs,n=Qr,Cs=r.stateNode.containerInfo,Qr=!0,tn(s,t,r),Cs=a,Qr=n;break;case 0:case 11:case 14:case 15:if(!qs&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Oh(r,t,o),n=n.next}while(n!==a)}tn(s,t,r);break;case 1:if(!qs&&(io(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(d){ms(r,t,d)}tn(s,t,r);break;case 21:tn(s,t,r);break;case 22:r.mode&1?(qs=(a=qs)||r.memoizedState!==null,tn(s,t,r),qs=a):tn(s,t,r);break;default:tn(s,t,r)}}function pv(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var r=s.stateNode;r===null&&(r=s.stateNode=new AE),t.forEach(function(a){var n=UE.bind(null,s,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Hr(s,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var l=s,o=t,d=o;e:for(;d!==null;){switch(d.tag){case 5:Cs=d.stateNode,Qr=!1;break e;case 3:Cs=d.stateNode.containerInfo,Qr=!0;break e;case 4:Cs=d.stateNode.containerInfo,Qr=!0;break e}d=d.return}if(Cs===null)throw Error(Re(160));M2(l,o,n),Cs=null,Qr=!1;var u=n.alternate;u!==null&&(u.return=null),n.return=null}catch(m){ms(n,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)O2(t,s),t=t.sibling}function O2(s,t){var r=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Hr(t,s),na(s),a&4){try{Ul(3,s,s.return),Yx(3,s)}catch(B){ms(s,s.return,B)}try{Ul(5,s,s.return)}catch(B){ms(s,s.return,B)}}break;case 1:Hr(t,s),na(s),a&512&&r!==null&&io(r,r.return);break;case 5:if(Hr(t,s),na(s),a&512&&r!==null&&io(r,r.return),s.flags&32){var n=s.stateNode;try{oc(n,"")}catch(B){ms(s,s.return,B)}}if(a&4&&(n=s.stateNode,n!=null)){var l=s.memoizedProps,o=r!==null?r.memoizedProps:l,d=s.type,u=s.updateQueue;if(s.updateQueue=null,u!==null)try{d==="input"&&l.type==="radio"&&l.name!=null&&a5(n,l),ch(d,o);var m=ch(d,l);for(o=0;o<u.length;o+=2){var y=u[o],j=u[o+1];y==="style"?c5(n,j):y==="dangerouslySetInnerHTML"?o5(n,j):y==="children"?oc(n,j):Gp(n,y,j,m)}switch(d){case"input":ah(n,l);break;case"textarea":n5(n,l);break;case"select":var N=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?fo(n,!!l.multiple,T,!1):N!==!!l.multiple&&(l.defaultValue!=null?fo(n,!!l.multiple,l.defaultValue,!0):fo(n,!!l.multiple,l.multiple?[]:"",!1))}n[fc]=l}catch(B){ms(s,s.return,B)}}break;case 6:if(Hr(t,s),na(s),a&4){if(s.stateNode===null)throw Error(Re(162));n=s.stateNode,l=s.memoizedProps;try{n.nodeValue=l}catch(B){ms(s,s.return,B)}}break;case 3:if(Hr(t,s),na(s),a&4&&r!==null&&r.memoizedState.isDehydrated)try{uc(t.containerInfo)}catch(B){ms(s,s.return,B)}break;case 4:Hr(t,s),na(s);break;case 13:Hr(t,s),na(s),n=s.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(Pf=fs())),a&4&&pv(s);break;case 22:if(y=r!==null&&r.memoizedState!==null,s.mode&1?(qs=(m=qs)||y,Hr(t,s),qs=m):Hr(t,s),na(s),a&8192){if(m=s.memoizedState!==null,(s.stateNode.isHidden=m)&&!y&&s.mode&1)for(Ze=s,y=s.child;y!==null;){for(j=Ze=y;Ze!==null;){switch(N=Ze,T=N.child,N.tag){case 0:case 11:case 14:case 15:Ul(4,N,N.return);break;case 1:io(N,N.return);var g=N.stateNode;if(typeof g.componentWillUnmount=="function"){a=N,r=N.return;try{t=a,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(B){ms(a,r,B)}}break;case 5:io(N,N.return);break;case 22:if(N.memoizedState!==null){gv(j);continue}}T!==null?(T.return=N,Ze=T):gv(j)}y=y.sibling}e:for(y=null,j=s;;){if(j.tag===5){if(y===null){y=j;try{n=j.stateNode,m?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(d=j.stateNode,u=j.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,d.style.display=l5("display",o))}catch(B){ms(s,s.return,B)}}}else if(j.tag===6){if(y===null)try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(B){ms(s,s.return,B)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===s)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===s)break e;for(;j.sibling===null;){if(j.return===null||j.return===s)break e;y===j&&(y=null),j=j.return}y===j&&(y=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:Hr(t,s),na(s),a&4&&pv(s);break;case 21:break;default:Hr(t,s),na(s)}}function na(s){var t=s.flags;if(t&2){try{e:{for(var r=s.return;r!==null;){if(R2(r)){var a=r;break e}r=r.return}throw Error(Re(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(oc(n,""),a.flags&=-33);var l=hv(s);zh(s,l,n);break;case 3:case 4:var o=a.stateNode.containerInfo,d=hv(s);Vh(s,d,o);break;default:throw Error(Re(161))}}catch(u){ms(s,s.return,u)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function ME(s,t,r){Ze=s,L2(s)}function L2(s,t,r){for(var a=(s.mode&1)!==0;Ze!==null;){var n=Ze,l=n.child;if(n.tag===22&&a){var o=n.memoizedState!==null||Hd;if(!o){var d=n.alternate,u=d!==null&&d.memoizedState!==null||qs;d=Hd;var m=qs;if(Hd=o,(qs=u)&&!m)for(Ze=n;Ze!==null;)o=Ze,u=o.child,o.tag===22&&o.memoizedState!==null?yv(n):u!==null?(u.return=o,Ze=u):yv(n);for(;l!==null;)Ze=l,L2(l),l=l.sibling;Ze=n,Hd=d,qs=m}fv(s)}else n.subtreeFlags&8772&&l!==null?(l.return=n,Ze=l):fv(s)}}function fv(s){for(;Ze!==null;){var t=Ze;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qs||Yx(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!qs)if(r===null)a.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Gr(t.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&ev(t,l,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ev(t,o,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var j=y.dehydrated;j!==null&&uc(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}qs||t.flags&512&&Lh(t)}catch(N){ms(t,t.return,N)}}if(t===s){Ze=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ze=r;break}Ze=t.return}}function gv(s){for(;Ze!==null;){var t=Ze;if(t===s){Ze=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ze=r;break}Ze=t.return}}function yv(s){for(;Ze!==null;){var t=Ze;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Yx(4,t)}catch(u){ms(t,r,u)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(u){ms(t,n,u)}}var l=t.return;try{Lh(t)}catch(u){ms(t,l,u)}break;case 5:var o=t.return;try{Lh(t)}catch(u){ms(t,o,u)}}}catch(u){ms(t,t.return,u)}if(t===s){Ze=null;break}var d=t.sibling;if(d!==null){d.return=t.return,Ze=d;break}Ze=t.return}}var OE=Math.ceil,ex=Ka.ReactCurrentDispatcher,If=Ka.ReactCurrentOwner,Lr=Ka.ReactCurrentBatchConfig,Rt=0,Ps=null,bs=null,Ms=0,vr=0,oo=Fn(0),Ns=0,Nc=null,vi=0,Xx=0,Sf=0,Wl=null,cr=null,Pf=0,Do=1/0,Pa=null,tx=!1,Bh=null,Nn=null,qd=!1,hn=null,sx=0,Hl=0,$h=null,pu=-1,fu=0;function tr(){return Rt&6?fs():pu!==-1?pu:pu=fs()}function wn(s){return s.mode&1?Rt&2&&Ms!==0?Ms&-Ms:bE.transition!==null?(fu===0&&(fu=j5()),fu):(s=Bt,s!==0||(s=window.event,s=s===void 0?16:E5(s.type)),s):1}function Zr(s,t,r,a){if(50<Hl)throw Hl=0,$h=null,Error(Re(185));Wc(s,r,a),(!(Rt&2)||s!==Ps)&&(s===Ps&&(!(Rt&2)&&(Xx|=r),Ns===4&&ln(s,Ms)),hr(s,a),r===1&&Rt===0&&!(t.mode&1)&&(Do=fs()+500,Gx&&Un()))}function hr(s,t){var r=s.callbackNode;bP(s,t);var a=zu(s,s===Ps?Ms:0);if(a===0)r!==null&&Pb(r),s.callbackNode=null,s.callbackPriority=0;else if(t=a&-a,s.callbackPriority!==t){if(r!=null&&Pb(r),t===1)s.tag===0?yE(bv.bind(null,s)):G5(bv.bind(null,s)),hE(function(){!(Rt&6)&&Un()}),r=null;else{switch(N5(a)){case 1:r=Jp;break;case 4:r=b5;break;case 16:r=Vu;break;case 536870912:r=v5;break;default:r=Vu}r=H2(r,V2.bind(null,s))}s.callbackPriority=t,s.callbackNode=r}}function V2(s,t){if(pu=-1,fu=0,Rt&6)throw Error(Re(327));var r=s.callbackNode;if(jo()&&s.callbackNode!==r)return null;var a=zu(s,s===Ps?Ms:0);if(a===0)return null;if(a&30||a&s.expiredLanes||t)t=rx(s,a);else{t=a;var n=Rt;Rt|=2;var l=B2();(Ps!==s||Ms!==t)&&(Pa=null,Do=fs()+500,mi(s,t));do try{zE();break}catch(d){z2(s,d)}while(1);xf(),ex.current=l,Rt=n,bs!==null?t=0:(Ps=null,Ms=0,t=Ns)}if(t!==0){if(t===2&&(n=hh(s),n!==0&&(a=n,t=Fh(s,n))),t===1)throw r=Nc,mi(s,0),ln(s,a),hr(s,fs()),r;if(t===6)ln(s,a);else{if(n=s.current.alternate,!(a&30)&&!LE(n)&&(t=rx(s,a),t===2&&(l=hh(s),l!==0&&(a=l,t=Fh(s,l))),t===1))throw r=Nc,mi(s,0),ln(s,a),hr(s,fs()),r;switch(s.finishedWork=n,s.finishedLanes=a,t){case 0:case 1:throw Error(Re(345));case 2:si(s,cr,Pa);break;case 3:if(ln(s,a),(a&130023424)===a&&(t=Pf+500-fs(),10<t)){if(zu(s,0)!==0)break;if(n=s.suspendedLanes,(n&a)!==a){tr(),s.pingedLanes|=s.suspendedLanes&n;break}s.timeoutHandle=Nh(si.bind(null,s,cr,Pa),t);break}si(s,cr,Pa);break;case 4:if(ln(s,a),(a&4194240)===a)break;for(t=s.eventTimes,n=-1;0<a;){var o=31-Jr(a);l=1<<o,o=t[o],o>n&&(n=o),a&=~l}if(a=n,a=fs()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*OE(a/1960))-a,10<a){s.timeoutHandle=Nh(si.bind(null,s,cr,Pa),a);break}si(s,cr,Pa);break;case 5:si(s,cr,Pa);break;default:throw Error(Re(329))}}}return hr(s,fs()),s.callbackNode===r?V2.bind(null,s):null}function Fh(s,t){var r=Wl;return s.current.memoizedState.isDehydrated&&(mi(s,t).flags|=256),s=rx(s,t),s!==2&&(t=cr,cr=r,t!==null&&Uh(t)),s}function Uh(s){cr===null?cr=s:cr.push.apply(cr,s)}function LE(s){for(var t=s;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!ea(l(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ln(s,t){for(t&=~Sf,t&=~Xx,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var r=31-Jr(t),a=1<<r;s[r]=-1,t&=~a}}function bv(s){if(Rt&6)throw Error(Re(327));jo();var t=zu(s,0);if(!(t&1))return hr(s,fs()),null;var r=rx(s,t);if(s.tag!==0&&r===2){var a=hh(s);a!==0&&(t=a,r=Fh(s,a))}if(r===1)throw r=Nc,mi(s,0),ln(s,t),hr(s,fs()),r;if(r===6)throw Error(Re(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,si(s,cr,Pa),hr(s,fs()),null}function Ef(s,t){var r=Rt;Rt|=1;try{return s(t)}finally{Rt=r,Rt===0&&(Do=fs()+500,Gx&&Un())}}function ji(s){hn!==null&&hn.tag===0&&!(Rt&6)&&jo();var t=Rt;Rt|=1;var r=Lr.transition,a=Bt;try{if(Lr.transition=null,Bt=1,s)return s()}finally{Bt=a,Lr.transition=r,Rt=t,!(Rt&6)&&Un()}}function Cf(){vr=oo.current,Zt(oo)}function mi(s,t){s.finishedWork=null,s.finishedLanes=0;var r=s.timeoutHandle;if(r!==-1&&(s.timeoutHandle=-1,mE(r)),bs!==null)for(r=bs.return;r!==null;){var a=r;switch(cf(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Wu();break;case 3:To(),Zt(xr),Zt(Qs),yf();break;case 5:gf(a);break;case 4:To();break;case 13:Zt(ss);break;case 19:Zt(ss);break;case 10:mf(a.type._context);break;case 22:case 23:Cf()}r=r.return}if(Ps=s,bs=s=kn(s.current,null),Ms=vr=t,Ns=0,Nc=null,Sf=Xx=vi=0,cr=Wl=null,ii!==null){for(t=0;t<ii.length;t++)if(r=ii[t],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,l=r.pending;if(l!==null){var o=l.next;l.next=n,a.next=o}r.pending=a}ii=null}return s}function z2(s,t){do{var r=bs;try{if(xf(),xu.current=Zu,Ju){for(var a=as.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Ju=!1}if(bi=0,Is=js=as=null,Fl=!1,bc=0,If.current=null,r===null||r.return===null){Ns=1,Nc=t,bs=null;break}e:{var l=s,o=r.return,d=r,u=t;if(t=Ms,d.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=u,y=d,j=y.tag;if(!(y.mode&1)&&(j===0||j===11||j===15)){var N=y.alternate;N?(y.updateQueue=N.updateQueue,y.memoizedState=N.memoizedState,y.lanes=N.lanes):(y.updateQueue=null,y.memoizedState=null)}var T=iv(o);if(T!==null){T.flags&=-257,ov(T,o,d,l,t),T.mode&1&&nv(l,m,t),t=T,u=m;var g=t.updateQueue;if(g===null){var B=new Set;B.add(u),t.updateQueue=B}else g.add(u);break e}else{if(!(t&1)){nv(l,m,t),Tf();break e}u=Error(Re(426))}}else if(ts&&d.mode&1){var D=iv(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),ov(D,o,d,l,t),df(_o(u,d));break e}}l=u=_o(u,d),Ns!==4&&(Ns=2),Wl===null?Wl=[l]:Wl.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var R=N2(l,u,t);Zb(l,R);break e;case 1:d=u;var $=l.type,z=l.stateNode;if(!(l.flags&128)&&(typeof $.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Nn===null||!Nn.has(z)))){l.flags|=65536,t&=-t,l.lanes|=t;var Z=w2(l,d,t);Zb(l,Z);break e}}l=l.return}while(l!==null)}F2(r)}catch(G){t=G,bs===r&&r!==null&&(bs=r=r.return);continue}break}while(1)}function B2(){var s=ex.current;return ex.current=Zu,s===null?Zu:s}function Tf(){(Ns===0||Ns===3||Ns===2)&&(Ns=4),Ps===null||!(vi&268435455)&&!(Xx&268435455)||ln(Ps,Ms)}function rx(s,t){var r=Rt;Rt|=2;var a=B2();(Ps!==s||Ms!==t)&&(Pa=null,mi(s,t));do try{VE();break}catch(n){z2(s,n)}while(1);if(xf(),Rt=r,ex.current=a,bs!==null)throw Error(Re(261));return Ps=null,Ms=0,Ns}function VE(){for(;bs!==null;)$2(bs)}function zE(){for(;bs!==null&&!dP();)$2(bs)}function $2(s){var t=W2(s.alternate,s,vr);s.memoizedProps=s.pendingProps,t===null?F2(s):bs=t,If.current=null}function F2(s){var t=s;do{var r=t.alternate;if(s=t.return,t.flags&32768){if(r=DE(r,t),r!==null){r.flags&=32767,bs=r;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ns=6,bs=null;return}}else if(r=_E(r,t,vr),r!==null){bs=r;return}if(t=t.sibling,t!==null){bs=t;return}bs=t=s}while(t!==null);Ns===0&&(Ns=5)}function si(s,t,r){var a=Bt,n=Lr.transition;try{Lr.transition=null,Bt=1,BE(s,t,r,a)}finally{Lr.transition=n,Bt=a}return null}function BE(s,t,r,a){do jo();while(hn!==null);if(Rt&6)throw Error(Re(327));r=s.finishedWork;var n=s.finishedLanes;if(r===null)return null;if(s.finishedWork=null,s.finishedLanes=0,r===s.current)throw Error(Re(177));s.callbackNode=null,s.callbackPriority=0;var l=r.lanes|r.childLanes;if(vP(s,l),s===Ps&&(bs=Ps=null,Ms=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qd||(qd=!0,H2(Vu,function(){return jo(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Lr.transition,Lr.transition=null;var o=Bt;Bt=1;var d=Rt;Rt|=4,If.current=null,RE(s,r),O2(r,s),iE(vh),Bu=!!bh,vh=bh=null,s.current=r,ME(r),uP(),Rt=d,Bt=o,Lr.transition=l}else s.current=r;if(qd&&(qd=!1,hn=s,sx=n),l=s.pendingLanes,l===0&&(Nn=null),hP(r.stateNode),hr(s,fs()),t!==null)for(a=s.onRecoverableError,r=0;r<t.length;r++)n=t[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(tx)throw tx=!1,s=Bh,Bh=null,s;return sx&1&&s.tag!==0&&jo(),l=s.pendingLanes,l&1?s===$h?Hl++:(Hl=0,$h=s):Hl=0,Un(),null}function jo(){if(hn!==null){var s=N5(sx),t=Lr.transition,r=Bt;try{if(Lr.transition=null,Bt=16>s?16:s,hn===null)var a=!1;else{if(s=hn,hn=null,sx=0,Rt&6)throw Error(Re(331));var n=Rt;for(Rt|=4,Ze=s.current;Ze!==null;){var l=Ze,o=l.child;if(Ze.flags&16){var d=l.deletions;if(d!==null){for(var u=0;u<d.length;u++){var m=d[u];for(Ze=m;Ze!==null;){var y=Ze;switch(y.tag){case 0:case 11:case 15:Ul(8,y,l)}var j=y.child;if(j!==null)j.return=y,Ze=j;else for(;Ze!==null;){y=Ze;var N=y.sibling,T=y.return;if(A2(y),y===m){Ze=null;break}if(N!==null){N.return=T,Ze=N;break}Ze=T}}}var g=l.alternate;if(g!==null){var B=g.child;if(B!==null){g.child=null;do{var D=B.sibling;B.sibling=null,B=D}while(B!==null)}}Ze=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,Ze=o;else e:for(;Ze!==null;){if(l=Ze,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ul(9,l,l.return)}var R=l.sibling;if(R!==null){R.return=l.return,Ze=R;break e}Ze=l.return}}var $=s.current;for(Ze=$;Ze!==null;){o=Ze;var z=o.child;if(o.subtreeFlags&2064&&z!==null)z.return=o,Ze=z;else e:for(o=$;Ze!==null;){if(d=Ze,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Yx(9,d)}}catch(G){ms(d,d.return,G)}if(d===o){Ze=null;break e}var Z=d.sibling;if(Z!==null){Z.return=d.return,Ze=Z;break e}Ze=d.return}}if(Rt=n,Un(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(Fx,s)}catch{}a=!0}return a}finally{Bt=r,Lr.transition=t}}return!1}function vv(s,t,r){t=_o(r,t),t=N2(s,t,1),s=jn(s,t,1),t=tr(),s!==null&&(Wc(s,1,t),hr(s,t))}function ms(s,t,r){if(s.tag===3)vv(s,s,r);else for(;t!==null;){if(t.tag===3){vv(t,s,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Nn===null||!Nn.has(a))){s=_o(r,s),s=w2(t,s,1),t=jn(t,s,1),s=tr(),t!==null&&(Wc(t,1,s),hr(t,s));break}}t=t.return}}function $E(s,t,r){var a=s.pingCache;a!==null&&a.delete(t),t=tr(),s.pingedLanes|=s.suspendedLanes&r,Ps===s&&(Ms&r)===r&&(Ns===4||Ns===3&&(Ms&130023424)===Ms&&500>fs()-Pf?mi(s,0):Sf|=r),hr(s,t)}function U2(s,t){t===0&&(s.mode&1?(t=Od,Od<<=1,!(Od&130023424)&&(Od=4194304)):t=1);var r=tr();s=Va(s,t),s!==null&&(Wc(s,t,r),hr(s,r))}function FE(s){var t=s.memoizedState,r=0;t!==null&&(r=t.retryLane),U2(s,r)}function UE(s,t){var r=0;switch(s.tag){case 13:var a=s.stateNode,n=s.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(Re(314))}a!==null&&a.delete(t),U2(s,r)}var W2;W2=function(s,t,r){if(s!==null)if(s.memoizedProps!==t.pendingProps||xr.current)dr=!0;else{if(!(s.lanes&r)&&!(t.flags&128))return dr=!1,TE(s,t,r);dr=!!(s.flags&131072)}else dr=!1,ts&&t.flags&1048576&&Q5(t,Gu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;hu(s,t),s=t.pendingProps;var n=Po(t,Qs.current);vo(t,r),n=vf(null,t,a,s,n,r);var l=jf();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mr(a)?(l=!0,Hu(t)):l=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,pf(t),n.updater=Kx,t.stateNode=n,n._reactInternals=t,Ch(t,a,s,r),t=Dh(null,t,a,!0,l,r)):(t.tag=0,ts&&l&&lf(t),Xs(null,t,n,r),t=t.child),t;case 16:a=t.elementType;e:{switch(hu(s,t),s=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=HE(a),s=Gr(a,s),n){case 0:t=_h(null,t,a,s,r);break e;case 1:t=dv(null,t,a,s,r);break e;case 11:t=lv(null,t,a,s,r);break e;case 14:t=cv(null,t,a,Gr(a.type,s),r);break e}throw Error(Re(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Gr(a,n),_h(s,t,a,n,r);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Gr(a,n),dv(s,t,a,n,r);case 3:e:{if(P2(t),s===null)throw Error(Re(387));a=t.pendingProps,l=t.memoizedState,n=l.element,e2(s,t),Yu(t,a,null,r);var o=t.memoizedState;if(a=o.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){n=_o(Error(Re(423)),t),t=uv(s,t,a,r,n);break e}else if(a!==n){n=_o(Error(Re(424)),t),t=uv(s,t,a,r,n);break e}else for(wr=vn(t.stateNode.containerInfo.firstChild),Ir=t,ts=!0,Kr=null,r=J5(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Eo(),a===n){t=za(s,t,r);break e}Xs(s,t,a,r)}t=t.child}return t;case 5:return t2(t),s===null&&Sh(t),a=t.type,n=t.pendingProps,l=s!==null?s.memoizedProps:null,o=n.children,jh(a,n)?o=null:l!==null&&jh(a,l)&&(t.flags|=32),S2(s,t),Xs(s,t,o,r),t.child;case 6:return s===null&&Sh(t),null;case 13:return E2(s,t,r);case 4:return ff(t,t.stateNode.containerInfo),a=t.pendingProps,s===null?t.child=Co(t,null,a,r):Xs(s,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Gr(a,n),lv(s,t,a,n,r);case 7:return Xs(s,t,t.pendingProps,r),t.child;case 8:return Xs(s,t,t.pendingProps.children,r),t.child;case 12:return Xs(s,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,l=t.memoizedProps,o=n.value,Kt(Qu,a._currentValue),a._currentValue=o,l!==null)if(ea(l.value,o)){if(l.children===n.children&&!xr.current){t=za(s,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var d=l.dependencies;if(d!==null){o=l.child;for(var u=d.firstContext;u!==null;){if(u.context===a){if(l.tag===1){u=Aa(-1,r&-r),u.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?u.next=u:(u.next=y.next,y.next=u),m.pending=u}}l.lanes|=r,u=l.alternate,u!==null&&(u.lanes|=r),Ph(l.return,r,t),d.lanes|=r;break}u=u.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(Re(341));o.lanes|=r,d=o.alternate,d!==null&&(d.lanes|=r),Ph(o,r,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Xs(s,t,n.children,r),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,vo(t,r),n=zr(n),a=a(n),t.flags|=1,Xs(s,t,a,r),t.child;case 14:return a=t.type,n=Gr(a,t.pendingProps),n=Gr(a.type,n),cv(s,t,a,n,r);case 15:return k2(s,t,t.type,t.pendingProps,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Gr(a,n),hu(s,t),t.tag=1,mr(a)?(s=!0,Hu(t)):s=!1,vo(t,r),j2(t,a,n),Ch(t,a,n,r),Dh(null,t,a,!0,s,r);case 19:return C2(s,t,r);case 22:return I2(s,t,r)}throw Error(Re(156,t.tag))};function H2(s,t){return y5(s,t)}function WE(s,t,r,a){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(s,t,r,a){return new WE(s,t,r,a)}function _f(s){return s=s.prototype,!(!s||!s.isReactComponent)}function HE(s){if(typeof s=="function")return _f(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Kp)return 11;if(s===Yp)return 14}return 2}function kn(s,t){var r=s.alternate;return r===null?(r=Or(s.tag,t,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=t,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&14680064,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,t=s.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r}function gu(s,t,r,a,n,l){var o=2;if(a=s,typeof s=="function")_f(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case Xi:return hi(r.children,n,l,t);case Qp:o=8,n|=8;break;case Z0:return s=Or(12,r,t,n|2),s.elementType=Z0,s.lanes=l,s;case eh:return s=Or(13,r,t,n),s.elementType=eh,s.lanes=l,s;case th:return s=Or(19,r,t,n),s.elementType=th,s.lanes=l,s;case t5:return Jx(r,n,l,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Zw:o=10;break e;case e5:o=9;break e;case Kp:o=11;break e;case Yp:o=14;break e;case an:o=16,a=null;break e}throw Error(Re(130,s==null?s:typeof s,""))}return t=Or(o,r,t,n),t.elementType=s,t.type=a,t.lanes=l,t}function hi(s,t,r,a){return s=Or(7,s,a,t),s.lanes=r,s}function Jx(s,t,r,a){return s=Or(22,s,a,t),s.elementType=t5,s.lanes=r,s.stateNode={isHidden:!1},s}function b0(s,t,r){return s=Or(6,s,null,t),s.lanes=r,s}function v0(s,t,r){return t=Or(4,s.children!==null?s.children:[],s.key,t),t.lanes=r,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function qE(s,t,r,a,n){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=e0(0),this.expirationTimes=e0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e0(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Df(s,t,r,a,n,l,o,d,u){return s=new qE(s,t,r,d,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Or(3,null,null,t),s.current=l,l.stateNode=s,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pf(l),s}function GE(s,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:a==null?null:""+a,children:s,containerInfo:t,implementation:r}}function q2(s){if(!s)return _n;s=s._reactInternals;e:{if(Ti(s)!==s||s.tag!==1)throw Error(Re(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Re(171))}if(s.tag===1){var r=s.type;if(mr(r))return q5(s,r,t)}return t}function G2(s,t,r,a,n,l,o,d,u){return s=Df(r,a,!0,s,n,l,o,d,u),s.context=q2(null),r=s.current,a=tr(),n=wn(r),l=Aa(a,n),l.callback=t??null,jn(r,l,n),s.current.lanes=n,Wc(s,n,a),hr(s,a),s}function Zx(s,t,r,a){var n=t.current,l=tr(),o=wn(n);return r=q2(r),t.context===null?t.context=r:t.pendingContext=r,t=Aa(l,o),t.payload={element:s},a=a===void 0?null:a,a!==null&&(t.callback=a),s=jn(n,t,o),s!==null&&(Zr(s,n,o,l),uu(s,n,o)),o}function ax(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function jv(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<t?r:t}}function Af(s,t){jv(s,t),(s=s.alternate)&&jv(s,t)}function QE(){return null}var Q2=typeof reportError=="function"?reportError:function(s){console.error(s)};function Rf(s){this._internalRoot=s}em.prototype.render=Rf.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(Re(409));Zx(s,t,null,null)};em.prototype.unmount=Rf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;ji(function(){Zx(null,s,null,null)}),t[La]=null}};function em(s){this._internalRoot=s}em.prototype.unstable_scheduleHydration=function(s){if(s){var t=I5();s={blockedOn:null,target:s,priority:t};for(var r=0;r<on.length&&t!==0&&t<on[r].priority;r++);on.splice(r,0,s),r===0&&P5(s)}};function Mf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function tm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Nv(){}function KE(s,t,r,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var m=ax(o);l.call(m)}}var o=G2(t,a,s,0,null,!1,!1,"",Nv);return s._reactRootContainer=o,s[La]=o.current,hc(s.nodeType===8?s.parentNode:s),ji(),o}for(;n=s.lastChild;)s.removeChild(n);if(typeof a=="function"){var d=a;a=function(){var m=ax(u);d.call(m)}}var u=Df(s,0,!1,null,null,!1,!1,"",Nv);return s._reactRootContainer=u,s[La]=u.current,hc(s.nodeType===8?s.parentNode:s),ji(function(){Zx(t,u,r,a)}),u}function sm(s,t,r,a,n){var l=r._reactRootContainer;if(l){var o=l;if(typeof n=="function"){var d=n;n=function(){var u=ax(o);d.call(u)}}Zx(t,o,s,n)}else o=KE(r,t,s,n,a);return ax(o)}w5=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pl(t.pendingLanes);r!==0&&(Zp(t,r|1),hr(t,fs()),!(Rt&6)&&(Do=fs()+500,Un()))}break;case 13:ji(function(){var a=Va(s,1);if(a!==null){var n=tr();Zr(a,s,1,n)}}),Af(s,1)}};ef=function(s){if(s.tag===13){var t=Va(s,134217728);if(t!==null){var r=tr();Zr(t,s,134217728,r)}Af(s,134217728)}};k5=function(s){if(s.tag===13){var t=wn(s),r=Va(s,t);if(r!==null){var a=tr();Zr(r,s,t,a)}Af(s,t)}};I5=function(){return Bt};S5=function(s,t){var r=Bt;try{return Bt=s,t()}finally{Bt=r}};uh=function(s,t,r){switch(t){case"input":if(ah(s,r),t=r.name,r.type==="radio"&&t!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==s&&a.form===s.form){var n=qx(a);if(!n)throw Error(Re(90));r5(a),ah(a,n)}}}break;case"textarea":n5(s,r);break;case"select":t=r.value,t!=null&&fo(s,!!r.multiple,t,!1)}};x5=Ef;m5=ji;var YE={usingClientEntryPoint:!1,Events:[qc,to,qx,d5,u5,Ef]},jl={findFiberByHostInstance:ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XE={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=f5(s),s===null?null:s.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||QE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Fx=Gd.inject(XE),ca=Gd}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YE;Cr.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mf(t))throw Error(Re(200));return GE(s,t,null,r)};Cr.createRoot=function(s,t){if(!Mf(s))throw Error(Re(299));var r=!1,a="",n=Q2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Df(s,1,!1,null,null,r,!1,a,n),s[La]=t.current,hc(s.nodeType===8?s.parentNode:s),new Rf(t)};Cr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(Re(188)):(s=Object.keys(s).join(","),Error(Re(268,s)));return s=f5(t),s=s===null?null:s.stateNode,s};Cr.flushSync=function(s){return ji(s)};Cr.hydrate=function(s,t,r){if(!tm(t))throw Error(Re(200));return sm(null,s,t,!0,r)};Cr.hydrateRoot=function(s,t,r){if(!Mf(s))throw Error(Re(405));var a=r!=null&&r.hydratedSources||null,n=!1,l="",o=Q2;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=G2(t,null,s,1,r??null,n,!1,l,o),s[La]=t.current,hc(s),a)for(s=0;s<a.length;s++)r=a[s],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new em(t)};Cr.render=function(s,t,r){if(!tm(t))throw Error(Re(200));return sm(null,s,t,!1,r)};Cr.unmountComponentAtNode=function(s){if(!tm(s))throw Error(Re(40));return s._reactRootContainer?(ji(function(){sm(null,null,s,!1,function(){s._reactRootContainer=null,s[La]=null})}),!0):!1};Cr.unstable_batchedUpdates=Ef;Cr.unstable_renderSubtreeIntoContainer=function(s,t,r,a){if(!tm(r))throw Error(Re(200));if(s==null||s._reactInternals===void 0)throw Error(Re(38));return sm(s,t,r,!1,a)};Cr.version="18.3.1-next-f1338f8080-20240426";function K2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K2)}catch(s){console.error(s)}}K2(),Kw.exports=Cr;var JE=Kw.exports,wv=JE;X0.createRoot=wv.createRoot,X0.hydrateRoot=wv.hydrateRoot;const ZE="modulepreload",eC=function(s){return"/"+s},kv={},tC=function(t,r,a){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=eC(l),l in kv)return;kv[l]=!0;const o=l.endsWith(".css"),d=o?'[rel="stylesheet"]':"";if(!!a)for(let y=n.length-1;y>=0;y--){const j=n[y];if(j.href===l&&(!o||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const m=document.createElement("link");if(m.rel=o?"stylesheet":ZE,o||(m.as="script",m.crossOrigin=""),m.href=l,document.head.appendChild(m),o)return new Promise((y,j)=>{m.addEventListener("load",y),m.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l})};var Of={};Object.defineProperty(Of,"__esModule",{value:!0});Of.parse=lC;Of.serialize=cC;const sC=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,rC=/^[\u0021-\u003A\u003C-\u007E]*$/,aC=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,nC=/^[\u0020-\u003A\u003D-\u007E]*$/,iC=Object.prototype.toString,oC=(()=>{const s=function(){};return s.prototype=Object.create(null),s})();function lC(s,t){const r=new oC,a=s.length;if(a<2)return r;const n=(t==null?void 0:t.decode)||dC;let l=0;do{const o=s.indexOf("=",l);if(o===-1)break;const d=s.indexOf(";",l),u=d===-1?a:d;if(o>u){l=s.lastIndexOf(";",o-1)+1;continue}const m=Iv(s,l,o),y=Sv(s,o,m),j=s.slice(m,y);if(r[j]===void 0){let N=Iv(s,o+1,u),T=Sv(s,u,N);const g=n(s.slice(N,T));r[j]=g}l=u+1}while(l<a);return r}function Iv(s,t,r){do{const a=s.charCodeAt(t);if(a!==32&&a!==9)return t}while(++t<r);return r}function Sv(s,t,r){for(;t>r;){const a=s.charCodeAt(--t);if(a!==32&&a!==9)return t+1}return r}function cC(s,t,r){const a=(r==null?void 0:r.encode)||encodeURIComponent;if(!sC.test(s))throw new TypeError(`argument name is invalid: ${s}`);const n=a(t);if(!rC.test(n))throw new TypeError(`argument val is invalid: ${t}`);let l=s+"="+n;if(!r)return l;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);l+="; Max-Age="+r.maxAge}if(r.domain){if(!aC.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);l+="; Domain="+r.domain}if(r.path){if(!nC.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);l+="; Path="+r.path}if(r.expires){if(!uC(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);l+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.partitioned&&(l+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return l}function dC(s){if(s.indexOf("%")===-1)return s;try{return decodeURIComponent(s)}catch{return s}}function uC(s){return iC.call(s)==="[object Date]"}var Pv="popstate";function xC(s={}){function t(a,n){let{pathname:l,search:o,hash:d}=a.location;return Wh("",{pathname:l,search:o,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:wc(n)}return hC(t,r,null,s)}function ns(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ya(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mC(){return Math.random().toString(36).substring(2,10)}function Ev(s,t){return{usr:s.state,key:s.key,idx:t}}function Wh(s,t,r=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Go(t):t,state:r,key:t&&t.key||a||mC()}}function wc({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Go(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substring(a),s=s.substring(0,a)),s&&(t.pathname=s)}return t}function hC(s,t,r,a={}){let{window:n=document.defaultView,v5Compat:l=!1}=a,o=n.history,d="POP",u=null,m=y();m==null&&(m=0,o.replaceState({...o.state,idx:m},""));function y(){return(o.state||{idx:null}).idx}function j(){d="POP";let D=y(),R=D==null?null:D-m;m=D,u&&u({action:d,location:B.location,delta:R})}function N(D,R){d="PUSH";let $=Wh(B.location,D,R);r&&r($,D),m=y()+1;let z=Ev($,m),Z=B.createHref($);try{o.pushState(z,"",Z)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;n.location.assign(Z)}l&&u&&u({action:d,location:B.location,delta:1})}function T(D,R){d="REPLACE";let $=Wh(B.location,D,R);r&&r($,D),m=y();let z=Ev($,m),Z=B.createHref($);o.replaceState(z,"",Z),l&&u&&u({action:d,location:B.location,delta:0})}function g(D){let R=n.location.origin!=="null"?n.location.origin:n.location.href,$=typeof D=="string"?D:wc(D);return $=$.replace(/ $/,"%20"),ns(R,`No window.location.(origin|href) available to create URL for href: ${$}`),new URL($,R)}let B={get action(){return d},get location(){return s(n,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(Pv,j),u=D,()=>{n.removeEventListener(Pv,j),u=null}},createHref(D){return t(n,D)},createURL:g,encodeLocation(D){let R=g(D);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:N,replace:T,go(D){return o.go(D)}};return B}function Y2(s,t,r="/"){return pC(s,t,r,!1)}function pC(s,t,r,a){let n=typeof t=="string"?Go(t):t,l=Ba(n.pathname||"/",r);if(l==null)return null;let o=X2(s);fC(o);let d=null;for(let u=0;d==null&&u<o.length;++u){let m=PC(l);d=IC(o[u],m,a)}return d}function X2(s,t=[],r=[],a=""){let n=(l,o,d)=>{let u={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};u.relativePath.startsWith("/")&&(ns(u.relativePath.startsWith(a),`Absolute route path "${u.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(a.length));let m=Ra([a,u.relativePath]),y=r.concat(u);l.children&&l.children.length>0&&(ns(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),X2(l.children,t,y,m)),!(l.path==null&&!l.index)&&t.push({path:m,score:wC(m,l.index),routesMeta:y})};return s.forEach((l,o)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))n(l,o);else for(let u of J2(l.path))n(l,o,u)}),t}function J2(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let o=J2(a.join("/")),d=[];return d.push(...o.map(u=>u===""?l:[l,u].join("/"))),n&&d.push(...o),d.map(u=>s.startsWith("/")&&u===""?"/":u)}function fC(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:kC(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var gC=/^:[\w-]+$/,yC=3,bC=2,vC=1,jC=10,NC=-2,Cv=s=>s==="*";function wC(s,t){let r=s.split("/"),a=r.length;return r.some(Cv)&&(a+=NC),t&&(a+=bC),r.filter(n=>!Cv(n)).reduce((n,l)=>n+(gC.test(l)?yC:l===""?vC:jC),a)}function kC(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function IC(s,t,r=!1){let{routesMeta:a}=s,n={},l="/",o=[];for(let d=0;d<a.length;++d){let u=a[d],m=d===a.length-1,y=l==="/"?t:t.slice(l.length)||"/",j=nx({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},y),N=u.route;if(!j&&m&&r&&!a[a.length-1].route.index&&(j=nx({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},y)),!j)return null;Object.assign(n,j.params),o.push({params:n,pathname:Ra([l,j.pathname]),pathnameBase:_C(Ra([l,j.pathnameBase])),route:N}),j.pathnameBase!=="/"&&(l=Ra([l,j.pathnameBase]))}return o}function nx(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=SC(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let l=n[0],o=l.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:a.reduce((m,{paramName:y,isOptional:j},N)=>{if(y==="*"){let g=d[N]||"";o=l.slice(0,l.length-g.length).replace(/(.)\/+$/,"$1")}const T=d[N];return j&&!T?m[y]=void 0:m[y]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:o,pattern:s}}function SC(s,t=!1,r=!0){ya(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,u)=>(a.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function PC(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ya(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function Ba(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function EC(s,t="/"){let{pathname:r,search:a="",hash:n=""}=typeof s=="string"?Go(s):s;return{pathname:r?r.startsWith("/")?r:CC(r,t):t,search:DC(a),hash:AC(n)}}function CC(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function j0(s,t,r,a){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TC(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Z2(s){let t=TC(s);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function e1(s,t,r,a=!1){let n;typeof s=="string"?n=Go(s):(n={...s},ns(!n.pathname||!n.pathname.includes("?"),j0("?","pathname","search",n)),ns(!n.pathname||!n.pathname.includes("#"),j0("#","pathname","hash",n)),ns(!n.search||!n.search.includes("#"),j0("#","search","hash",n)));let l=s===""||n.pathname==="",o=l?"/":n.pathname,d;if(o==null)d=r;else{let j=t.length-1;if(!a&&o.startsWith("..")){let N=o.split("/");for(;N[0]==="..";)N.shift(),j-=1;n.pathname=N.join("/")}d=j>=0?t[j]:"/"}let u=EC(n,d),m=o&&o!=="/"&&o.endsWith("/"),y=(l||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(m||y)&&(u.pathname+="/"),u}var Ra=s=>s.join("/").replace(/\/\/+/g,"/"),_C=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),DC=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,AC=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function RC(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var t1=["POST","PUT","PATCH","DELETE"];new Set(t1);var MC=["GET",...t1];new Set(MC);var Qo=v.createContext(null);Qo.displayName="DataRouter";var rm=v.createContext(null);rm.displayName="DataRouterState";var s1=v.createContext({isTransitioning:!1});s1.displayName="ViewTransition";var OC=v.createContext(new Map);OC.displayName="Fetchers";var LC=v.createContext(null);LC.displayName="Await";var Na=v.createContext(null);Na.displayName="Navigation";var Qc=v.createContext(null);Qc.displayName="Location";var Ya=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ya.displayName="Route";var Lf=v.createContext(null);Lf.displayName="RouteError";function VC(s,{relative:t}={}){ns(Kc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=v.useContext(Na),{hash:n,pathname:l,search:o}=Yc(s,{relative:t}),d=l;return r!=="/"&&(d=l==="/"?r:Ra([r,l])),a.createHref({pathname:d,search:o,hash:n})}function Kc(){return v.useContext(Qc)!=null}function _i(){return ns(Kc(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Qc).location}var r1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a1(s){v.useContext(Na).static||v.useLayoutEffect(s)}function It(){let{isDataRoute:s}=v.useContext(Ya);return s?XC():zC()}function zC(){ns(Kc(),"useNavigate() may be used only in the context of a <Router> component.");let s=v.useContext(Qo),{basename:t,navigator:r}=v.useContext(Na),{matches:a}=v.useContext(Ya),{pathname:n}=_i(),l=JSON.stringify(Z2(a)),o=v.useRef(!1);return a1(()=>{o.current=!0}),v.useCallback((u,m={})=>{if(ya(o.current,r1),!o.current)return;if(typeof u=="number"){r.go(u);return}let y=e1(u,JSON.parse(l),n,m.relative==="path");s==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Ra([t,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[t,r,l,n,s])}v.createContext(null);function Yc(s,{relative:t}={}){let{matches:r}=v.useContext(Ya),{pathname:a}=_i(),n=JSON.stringify(Z2(r));return v.useMemo(()=>e1(s,JSON.parse(n),a,t==="path"),[s,n,a,t])}function BC(s,t){return n1(s,t)}function n1(s,t,r,a){var $;ns(Kc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n,static:l}=v.useContext(Na),{matches:o}=v.useContext(Ya),d=o[o.length-1],u=d?d.params:{},m=d?d.pathname:"/",y=d?d.pathnameBase:"/",j=d&&d.route;{let z=j&&j.path||"";i1(m,!j||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let N=_i(),T;if(t){let z=typeof t=="string"?Go(t):t;ns(y==="/"||(($=z.pathname)==null?void 0:$.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${z.pathname}" was given in the \`location\` prop.`),T=z}else T=N;let g=T.pathname||"/",B=g;if(y!=="/"){let z=y.replace(/^\//,"").split("/");B="/"+g.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=!l&&r&&r.matches&&r.matches.length>0?r.matches:Y2(s,{pathname:B});ya(j||D!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),ya(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=HC(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},u,z.params),pathname:Ra([y,n.encodeLocation?n.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:Ra([y,n.encodeLocation?n.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,r,a);return t&&R?v.createElement(Qc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},R):R}function $C(){let s=YC(),t=RC(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:l},"ErrorBoundary")," or"," ",v.createElement("code",{style:l},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:n},r):null,o)}var FC=v.createElement($C,null),UC=class extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){console.error("React Router caught the following error during render",s,t)}render(){return this.state.error!==void 0?v.createElement(Ya.Provider,{value:this.props.routeContext},v.createElement(Lf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WC({routeContext:s,match:t,children:r}){let a=v.useContext(Qo);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(Ya.Provider,{value:s},r)}function HC(s,t=[],r=null,a=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let n=s,l=r==null?void 0:r.errors;if(l!=null){let u=n.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);ns(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),n=n.slice(0,Math.min(n.length,u+1))}let o=!1,d=-1;if(r)for(let u=0;u<n.length;u++){let m=n[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:y,errors:j}=r,N=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!j||j[m.route.id]===void 0);if(m.route.lazy||N){o=!0,d>=0?n=n.slice(0,d+1):n=[n[0]];break}}}return n.reduceRight((u,m,y)=>{let j,N=!1,T=null,g=null;r&&(j=l&&m.route.id?l[m.route.id]:void 0,T=m.route.errorElement||FC,o&&(d<0&&y===0?(i1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,g=null):d===y&&(N=!0,g=m.route.hydrateFallbackElement||null)));let B=t.concat(n.slice(0,y+1)),D=()=>{let R;return j?R=T:N?R=g:m.route.Component?R=v.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=u,v.createElement(WC,{match:m,routeContext:{outlet:u,matches:B,isDataRoute:r!=null},children:R})};return r&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?v.createElement(UC,{location:r.location,revalidation:r.revalidation,component:T,error:j,children:D(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):D()},null)}function Vf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qC(s){let t=v.useContext(Qo);return ns(t,Vf(s)),t}function GC(s){let t=v.useContext(rm);return ns(t,Vf(s)),t}function QC(s){let t=v.useContext(Ya);return ns(t,Vf(s)),t}function zf(s){let t=QC(s),r=t.matches[t.matches.length-1];return ns(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function KC(){return zf("useRouteId")}function YC(){var a;let s=v.useContext(Lf),t=GC("useRouteError"),r=zf("useRouteError");return s!==void 0?s:(a=t.errors)==null?void 0:a[r]}function XC(){let{router:s}=qC("useNavigate"),t=zf("useNavigate"),r=v.useRef(!1);return a1(()=>{r.current=!0}),v.useCallback(async(n,l={})=>{ya(r.current,r1),r.current&&(typeof n=="number"?s.navigate(n):await s.navigate(n,{fromRouteId:t,...l}))},[s,t])}var Tv={};function i1(s,t,r){!t&&!Tv[s]&&(Tv[s]=!0,ya(!1,r))}v.memo(JC);function JC({routes:s,future:t,state:r}){return n1(s,void 0,r,t)}function Pt(s){ns(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZC({basename:s="/",children:t=null,location:r,navigationType:a="POP",navigator:n,static:l=!1}){ns(!Kc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:o,navigator:n,static:l,future:{}}),[o,n,l]);typeof r=="string"&&(r=Go(r));let{pathname:u="/",search:m="",hash:y="",state:j=null,key:N="default"}=r,T=v.useMemo(()=>{let g=Ba(u,o);return g==null?null:{location:{pathname:g,search:m,hash:y,state:j,key:N},navigationType:a}},[o,u,m,y,j,N,a]);return ya(T!=null,`<Router basename="${o}"> is not able to match the URL "${u}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:v.createElement(Na.Provider,{value:d},v.createElement(Qc.Provider,{children:t,value:T}))}function eT({children:s,location:t}){return BC(Hh(s),t)}function Hh(s,t=[]){let r=[];return v.Children.forEach(s,(a,n)=>{if(!v.isValidElement(a))return;let l=[...t,n];if(a.type===v.Fragment){r.push.apply(r,Hh(a.props.children,l));return}ns(a.type===Pt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ns(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Hh(a.props.children,l)),r.push(o)}),r}var yu="get",bu="application/x-www-form-urlencoded";function am(s){return s!=null&&typeof s.tagName=="string"}function tT(s){return am(s)&&s.tagName.toLowerCase()==="button"}function sT(s){return am(s)&&s.tagName.toLowerCase()==="form"}function rT(s){return am(s)&&s.tagName.toLowerCase()==="input"}function aT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function nT(s,t){return s.button===0&&(!t||t==="_self")&&!aT(s)}var Qd=null;function iT(){if(Qd===null)try{new FormData(document.createElement("form"),0),Qd=!1}catch{Qd=!0}return Qd}var oT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function N0(s){return s!=null&&!oT.has(s)?(ya(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bu}"`),null):s}function lT(s,t){let r,a,n,l,o;if(sT(s)){let d=s.getAttribute("action");a=d?Ba(d,t):null,r=s.getAttribute("method")||yu,n=N0(s.getAttribute("enctype"))||bu,l=new FormData(s)}else if(tT(s)||rT(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=s.getAttribute("formaction")||d.getAttribute("action");if(a=u?Ba(u,t):null,r=s.getAttribute("formmethod")||d.getAttribute("method")||yu,n=N0(s.getAttribute("formenctype"))||N0(d.getAttribute("enctype"))||bu,l=new FormData(d,s),!iT()){let{name:m,type:y,value:j}=s;if(y==="image"){let N=m?`${m}.`:"";l.append(`${N}x`,"0"),l.append(`${N}y`,"0")}else m&&l.append(m,j)}}else{if(am(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=yu,a=null,n=bu,o=s}return l&&n==="text/plain"&&(o=l,l=void 0),{action:a,method:r.toLowerCase(),encType:n,formData:l,body:o}}function Bf(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}async function cT(s,t){if(s.id in t)return t[s.id];try{let r=await tC(()=>import(s.module),[]);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dT(s){return s!=null&&typeof s.page=="string"}function uT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function xT(s,t,r){let a=await Promise.all(s.map(async n=>{let l=t.routes[n.route.id];if(l){let o=await cT(l,r);return o.links?o.links():[]}return[]}));return fT(a.flat(1).filter(uT).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function _v(s,t,r,a,n,l){let o=(u,m)=>r[m]?u.route.id!==r[m].route.id:!0,d=(u,m)=>{var y;return r[m].pathname!==u.pathname||((y=r[m].route.path)==null?void 0:y.endsWith("*"))&&r[m].params["*"]!==u.params["*"]};return l==="assets"?t.filter((u,m)=>o(u,m)||d(u,m)):l==="data"?t.filter((u,m)=>{var j;let y=a.routes[u.route.id];if(!y||!y.hasLoader)return!1;if(o(u,m)||d(u,m))return!0;if(u.route.shouldRevalidate){let N=u.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((j=r[0])==null?void 0:j.params)||{},nextUrl:new URL(s,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function mT(s,t,{includeHydrateFallback:r}={}){return hT(s.map(a=>{let n=t.routes[a.route.id];if(!n)return[];let l=[n.module];return n.clientActionModule&&(l=l.concat(n.clientActionModule)),n.clientLoaderModule&&(l=l.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(l=l.concat(n.hydrateFallbackModule)),n.imports&&(l=l.concat(n.imports)),l}).flat(1))}function hT(s){return[...new Set(s)]}function pT(s){let t={},r=Object.keys(s).sort();for(let a of r)t[a]=s[a];return t}function fT(s,t){let r=new Set,a=new Set(t);return s.reduce((n,l)=>{if(t&&!dT(l)&&l.as==="script"&&l.href&&a.has(l.href))return n;let d=JSON.stringify(pT(l));return r.has(d)||(r.add(d),n.push({key:d,link:l})),n},[])}function gT(s,t){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname="_root.data":t&&Ba(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function o1(){let s=v.useContext(Qo);return Bf(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function yT(){let s=v.useContext(rm);return Bf(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var $f=v.createContext(void 0);$f.displayName="FrameworkContext";function l1(){let s=v.useContext($f);return Bf(s,"You must render this element inside a <HydratedRouter> element"),s}function bT(s,t){let r=v.useContext($f),[a,n]=v.useState(!1),[l,o]=v.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:m,onMouseLeave:y,onTouchStart:j}=t,N=v.useRef(null);v.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let B=R=>{R.forEach($=>{o($.isIntersecting)})},D=new IntersectionObserver(B,{threshold:.5});return N.current&&D.observe(N.current),()=>{D.disconnect()}}},[s]),v.useEffect(()=>{if(a){let B=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(B)}}},[a]);let T=()=>{n(!0)},g=()=>{n(!1),o(!1)};return r?s!=="intent"?[l,N,{}]:[l,N,{onFocus:Nl(d,T),onBlur:Nl(u,g),onMouseEnter:Nl(m,T),onMouseLeave:Nl(y,g),onTouchStart:Nl(j,T)}]:[!1,N,{}]}function Nl(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function vT({page:s,...t}){let{router:r}=o1(),a=v.useMemo(()=>Y2(r.routes,s,r.basename),[r.routes,s,r.basename]);return a?v.createElement(NT,{page:s,matches:a,...t}):null}function jT(s){let{manifest:t,routeModules:r}=l1(),[a,n]=v.useState([]);return v.useEffect(()=>{let l=!1;return xT(s,t,r).then(o=>{l||n(o)}),()=>{l=!0}},[s,t,r]),a}function NT({page:s,matches:t,...r}){let a=_i(),{manifest:n,routeModules:l}=l1(),{basename:o}=o1(),{loaderData:d,matches:u}=yT(),m=v.useMemo(()=>_v(s,t,u,n,a,"data"),[s,t,u,n,a]),y=v.useMemo(()=>_v(s,t,u,n,a,"assets"),[s,t,u,n,a]),j=v.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let g=new Set,B=!1;if(t.forEach(R=>{var z;let $=n.routes[R.route.id];!$||!$.hasLoader||(!m.some(Z=>Z.route.id===R.route.id)&&R.route.id in d&&((z=l[R.route.id])!=null&&z.shouldRevalidate)||$.hasClientLoader?B=!0:g.add(R.route.id))}),g.size===0)return[];let D=gT(s,o);return B&&g.size>0&&D.searchParams.set("_routes",t.filter(R=>g.has(R.route.id)).map(R=>R.route.id).join(",")),[D.pathname+D.search]},[o,d,a,n,m,t,s,l]),N=v.useMemo(()=>mT(y,n),[y,n]),T=jT(y);return v.createElement(v.Fragment,null,j.map(g=>v.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),N.map(g=>v.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),T.map(({key:g,link:B})=>v.createElement("link",{key:g,...B})))}function wT(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var c1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c1&&(window.__reactRouterVersion="7.5.0")}catch{}function kT({basename:s,children:t,window:r}){let a=v.useRef();a.current==null&&(a.current=xC({window:r,v5Compat:!0}));let n=a.current,[l,o]=v.useState({action:n.action,location:n.location}),d=v.useCallback(u=>{v.startTransition(()=>o(u))},[o]);return v.useLayoutEffect(()=>n.listen(d),[n,d]),v.createElement(ZC,{basename:s,children:t,location:l.location,navigationType:l.action,navigator:n})}var d1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b=v.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:n,reloadDocument:l,replace:o,state:d,target:u,to:m,preventScrollReset:y,viewTransition:j,...N},T){let{basename:g}=v.useContext(Na),B=typeof m=="string"&&d1.test(m),D,R=!1;if(typeof m=="string"&&B&&(D=m,c1))try{let q=new URL(window.location.href),W=m.startsWith("//")?new URL(q.protocol+m):new URL(m),J=Ba(W.pathname,g);W.origin===q.origin&&J!=null?m=J+W.search+W.hash:R=!0}catch{ya(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=VC(m,{relative:n}),[z,Z,G]=bT(a,N),Y=ET(m,{replace:o,state:d,target:u,preventScrollReset:y,relative:n,viewTransition:j});function V(q){t&&t(q),q.defaultPrevented||Y(q)}let x=v.createElement("a",{...N,...G,href:D||$,onClick:R||l?t:V,ref:wT(T,Z),target:u,"data-discover":!B&&r==="render"?"true":void 0});return z&&!B?v.createElement(v.Fragment,null,x,v.createElement(vT,{page:$})):x});b.displayName="Link";var IT=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:n=!1,style:l,to:o,viewTransition:d,children:u,...m},y){let j=Yc(o,{relative:m.relative}),N=_i(),T=v.useContext(rm),{navigator:g,basename:B}=v.useContext(Na),D=T!=null&&AT(j)&&d===!0,R=g.encodeLocation?g.encodeLocation(j).pathname:j.pathname,$=N.pathname,z=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;r||($=$.toLowerCase(),z=z?z.toLowerCase():null,R=R.toLowerCase()),z&&B&&(z=Ba(z,B)||z);const Z=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let G=$===R||!n&&$.startsWith(R)&&$.charAt(Z)==="/",Y=z!=null&&(z===R||!n&&z.startsWith(R)&&z.charAt(R.length)==="/"),V={isActive:G,isPending:Y,isTransitioning:D},x=G?t:void 0,q;typeof a=="function"?q=a(V):q=[a,G?"active":null,Y?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let W=typeof l=="function"?l(V):l;return v.createElement(b,{...m,"aria-current":x,className:q,ref:y,style:W,to:o,viewTransition:d},typeof u=="function"?u(V):u)});IT.displayName="NavLink";var ST=v.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:n,state:l,method:o=yu,action:d,onSubmit:u,relative:m,preventScrollReset:y,viewTransition:j,...N},T)=>{let g=_T(),B=DT(d,{relative:m}),D=o.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&d1.test(d),$=z=>{if(u&&u(z),z.defaultPrevented)return;z.preventDefault();let Z=z.nativeEvent.submitter,G=(Z==null?void 0:Z.getAttribute("formmethod"))||o;g(Z||z.currentTarget,{fetcherKey:t,method:G,navigate:r,replace:n,state:l,relative:m,preventScrollReset:y,viewTransition:j})};return v.createElement("form",{ref:T,method:D,action:B,onSubmit:a?u:$,...N,"data-discover":!R&&s==="render"?"true":void 0})});ST.displayName="Form";function PT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u1(s){let t=v.useContext(Qo);return ns(t,PT(s)),t}function ET(s,{target:t,replace:r,state:a,preventScrollReset:n,relative:l,viewTransition:o}={}){let d=It(),u=_i(),m=Yc(s,{relative:l});return v.useCallback(y=>{if(nT(y,t)){y.preventDefault();let j=r!==void 0?r:wc(u)===wc(m);d(s,{replace:j,state:a,preventScrollReset:n,relative:l,viewTransition:o})}},[u,d,m,r,a,t,s,n,l,o])}var CT=0,TT=()=>`__${String(++CT)}__`;function _T(){let{router:s}=u1("useSubmit"),{basename:t}=v.useContext(Na),r=KC();return v.useCallback(async(a,n={})=>{let{action:l,method:o,encType:d,formData:u,body:m}=lT(a,t);if(n.navigate===!1){let y=n.fetcherKey||TT();await s.fetch(y,r,n.action||l,{preventScrollReset:n.preventScrollReset,formData:u,body:m,formMethod:n.method||o,formEncType:n.encType||d,flushSync:n.flushSync})}else await s.navigate(n.action||l,{preventScrollReset:n.preventScrollReset,formData:u,body:m,formMethod:n.method||o,formEncType:n.encType||d,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[s,t,r])}function DT(s,{relative:t}={}){let{basename:r}=v.useContext(Na),a=v.useContext(Ya);ns(a,"useFormAction must be used inside a RouteContext");let[n]=a.matches.slice(-1),l={...Yc(s||".",{relative:t})},o=_i();if(s==null){l.search=o.search;let d=new URLSearchParams(l.search),u=d.getAll("index");if(u.some(y=>y==="")){d.delete("index"),u.filter(j=>j).forEach(j=>d.append("index",j));let y=d.toString();l.search=y?`?${y}`:""}}return(!s||s===".")&&n.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:Ra([r,l.pathname])),wc(l)}function AT(s,t={}){let r=v.useContext(s1);ns(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=u1("useViewTransitionState"),n=Yc(s,{relative:t.relative});if(!r.isTransitioning)return!1;let l=Ba(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=Ba(r.nextLocation.pathname,a)||r.nextLocation.pathname;return nx(n.pathname,o)!=null||nx(n.pathname,l)!=null}new TextEncoder;const RT=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=function(s){const t=[];let r=0;for(let a=0;a<s.length;a++){let n=s.charCodeAt(a);n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=n&63|128):(n&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(n=65536+((n&1023)<<10)+(s.charCodeAt(++a)&1023),t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=n&63|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=n&63|128)}return t},MT=function(s){const t=[];let r=0,a=0;for(;r<s.length;){const n=s[r++];if(n<128)t[a++]=String.fromCharCode(n);else if(n>191&&n<224){const l=s[r++];t[a++]=String.fromCharCode((n&31)<<6|l&63)}else if(n>239&&n<365){const l=s[r++],o=s[r++],d=s[r++],u=((n&7)<<18|(l&63)<<12|(o&63)<<6|d&63)-65536;t[a++]=String.fromCharCode(55296+(u>>10)),t[a++]=String.fromCharCode(56320+(u&1023))}else{const l=s[r++],o=s[r++];t[a++]=String.fromCharCode((n&15)<<12|(l&63)<<6|o&63)}}return t.join("")},m1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let n=0;n<s.length;n+=3){const l=s[n],o=n+1<s.length,d=o?s[n+1]:0,u=n+2<s.length,m=u?s[n+2]:0,y=l>>2,j=(l&3)<<4|d>>4;let N=(d&15)<<2|m>>6,T=m&63;u||(T=64,o||(N=64)),a.push(r[y],r[j],r[N],r[T])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(x1(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):MT(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let n=0;n<s.length;){const l=r[s.charAt(n++)],d=n<s.length?r[s.charAt(n)]:0;++n;const m=n<s.length?r[s.charAt(n)]:64;++n;const j=n<s.length?r[s.charAt(n)]:64;if(++n,l==null||d==null||m==null||j==null)throw new OT;const N=l<<2|d>>4;if(a.push(N),m!==64){const T=d<<4&240|m>>2;if(a.push(T),j!==64){const g=m<<6&192|j;a.push(g)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class OT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LT=function(s){const t=x1(s);return m1.encodeByteArray(t,!0)},ix=function(s){return LT(s).replace(/\./g,"")},h1=function(s){try{return m1.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=()=>VT().__FIREBASE_DEFAULTS__,BT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const s={}.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},$T=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&h1(s[1]);return t&&JSON.parse(t)},nm=()=>{try{return RT()||zT()||BT()||$T()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},p1=s=>{var t,r;return(r=(t=nm())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[s]},f1=s=>{const t=p1(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},g1=()=>{var s;return(s=nm())===null||s===void 0?void 0:s.config},y1=s=>{var t;return(t=nm())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",n=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:n,exp:n+3600,auth_time:n,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s),d="";return[ix(JSON.stringify(r)),ix(JSON.stringify(o)),d].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ks())}function WT(){var s;const t=(s=nm())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function qT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GT(){const s=Ks();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function QT(){return!WT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j1(){try{return typeof indexedDB=="object"}catch{return!1}}function N1(){return new Promise((s,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(a);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(a),s(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{var l;t(((l=n.error)===null||l===void 0?void 0:l.message)||"")}}catch(r){t(r)}})}function KT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="FirebaseError";class Fr extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=YT,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Di.prototype.create)}}class Di{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},n=`${this.service}/${t}`,l=this.errors[t],o=l?XT(l,a):"Error",d=`${this.serviceName}: ${o} (${n}).`;return new Fr(n,d,a)}}function XT(s,t){return s.replace(JT,(r,a)=>{const n=t[a];return n!=null?String(n):`<${a}?>`})}const JT=/\{\$([^}]+)}/g;function ZT(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Dn(s,t){if(s===t)return!0;const r=Object.keys(s),a=Object.keys(t);for(const n of r){if(!a.includes(n))return!1;const l=s[n],o=t[n];if(Dv(l)&&Dv(o)){if(!Dn(l,o))return!1}else if(l!==o)return!1}for(const n of a)if(!r.includes(n))return!1;return!0}function Dv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(s){const t=[];for(const[r,a]of Object.entries(s))Array.isArray(a)?a.forEach(n=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Cl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[n,l]=a.split("=");t[decodeURIComponent(n)]=decodeURIComponent(l)}}),t}function Tl(s){const t=s.indexOf("?");if(!t)return"";const r=s.indexOf("#",t);return s.substring(t,r>0?r:void 0)}function e6(s,t){const r=new t6(s,t);return r.subscribe.bind(r)}class t6{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let n;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");s6(t,["next","error","complete"])?n=t:n={next:t,error:r,complete:a},n.next===void 0&&(n.next=w0),n.error===void 0&&(n.error=w0),n.complete===void 0&&(n.complete=w0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s6(s,t){if(typeof s!="object"||s===null)return!1;for(const r of t)if(r in s&&typeof s[r]=="function")return!0;return!1}function w0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=1e3,a6=2,n6=4*60*60*1e3,i6=.5;function Av(s,t=r6,r=a6){const a=t*Math.pow(r,s),n=Math.round(i6*a*(Math.random()-.5)*2);return Math.min(n6,a+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(s){return s&&s._delegate?s._delegate:s}class $r{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new FT;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:r});n&&a.resolve(n)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(n)return null;throw l}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(c6(t))try{this.getOrInitializeService({instanceIdentifier:ri})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(r);try{const l=this.getOrInitializeService({instanceIdentifier:n});a.resolve(l)}catch{}}}}clearInstance(t=ri){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ri){return this.instances.has(t)}getOptions(t=ri){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[l,o]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&o.resolve(n)}return n}onInit(t,r){var a;const n=this.normalizeInstanceIdentifier(r),l=(a=this.onInitCallbacks.get(n))!==null&&a!==void 0?a:new Set;l.add(t),this.onInitCallbacks.set(n,l);const o=this.instances.get(n);return o&&t(o,n),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const n of a)try{n(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:l6(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=ri){return this.component?this.component.multipleInstances?t:ri:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l6(s){return s===ri?void 0:s}function c6(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new o6(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ct||(Ct={}));const u6={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},x6=Ct.INFO,m6={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},h6=(s,t,...r)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),n=m6[t];if(n)console[n](`[${a}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class im{constructor(t){this.name=t,this._logLevel=x6,this._logHandler=h6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?u6[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...t),this._logHandler(this,Ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...t),this._logHandler(this,Ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...t),this._logHandler(this,Ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...t),this._logHandler(this,Ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...t),this._logHandler(this,Ct.ERROR,...t)}}const p6=(s,t)=>t.some(r=>s instanceof r);let Rv,Mv;function f6(){return Rv||(Rv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g6(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w1=new WeakMap,qh=new WeakMap,k1=new WeakMap,k0=new WeakMap,Ff=new WeakMap;function y6(s){const t=new Promise((r,a)=>{const n=()=>{s.removeEventListener("success",l),s.removeEventListener("error",o)},l=()=>{r(In(s.result)),n()},o=()=>{a(s.error),n()};s.addEventListener("success",l),s.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&w1.set(r,s)}).catch(()=>{}),Ff.set(t,s),t}function b6(s){if(qh.has(s))return;const t=new Promise((r,a)=>{const n=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",o),s.removeEventListener("abort",o)},l=()=>{r(),n()},o=()=>{a(s.error||new DOMException("AbortError","AbortError")),n()};s.addEventListener("complete",l),s.addEventListener("error",o),s.addEventListener("abort",o)});qh.set(s,t)}let Gh={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return qh.get(s);if(t==="objectStoreNames")return s.objectStoreNames||k1.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return In(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function v6(s){Gh=s(Gh)}function j6(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=s.call(I0(this),t,...r);return k1.set(a,t.sort?t.sort():[t]),In(a)}:g6().includes(s)?function(...t){return s.apply(I0(this),t),In(w1.get(this))}:function(...t){return In(s.apply(I0(this),t))}}function N6(s){return typeof s=="function"?j6(s):(s instanceof IDBTransaction&&b6(s),p6(s,f6())?new Proxy(s,Gh):s)}function In(s){if(s instanceof IDBRequest)return y6(s);if(k0.has(s))return k0.get(s);const t=N6(s);return t!==s&&(k0.set(s,t),Ff.set(t,s)),t}const I0=s=>Ff.get(s);function I1(s,t,{blocked:r,upgrade:a,blocking:n,terminated:l}={}){const o=indexedDB.open(s,t),d=In(o);return a&&o.addEventListener("upgradeneeded",u=>{a(In(o.result),u.oldVersion,u.newVersion,In(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),d.then(u=>{l&&u.addEventListener("close",()=>l()),n&&u.addEventListener("versionchange",m=>n(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const w6=["get","getKey","getAll","getAllKeys","count"],k6=["put","add","delete","clear"],S0=new Map;function Ov(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(S0.get(t))return S0.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,n=k6.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(n||w6.includes(r)))return;const l=async function(o,...d){const u=this.transaction(o,n?"readwrite":"readonly");let m=u.store;return a&&(m=m.index(d.shift())),(await Promise.all([m[r](...d),n&&u.done]))[0]};return S0.set(t,l),l}v6(s=>({...s,get:(t,r,a)=>Ov(t,r)||s.get(t,r,a),has:(t,r)=>!!Ov(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(S6(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function S6(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Qh="@firebase/app",Lv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new im("@firebase/app"),P6="@firebase/app-compat",E6="@firebase/analytics-compat",C6="@firebase/analytics",T6="@firebase/app-check-compat",_6="@firebase/app-check",D6="@firebase/auth",A6="@firebase/auth-compat",R6="@firebase/database",M6="@firebase/data-connect",O6="@firebase/database-compat",L6="@firebase/functions",V6="@firebase/functions-compat",z6="@firebase/installations",B6="@firebase/installations-compat",$6="@firebase/messaging",F6="@firebase/messaging-compat",U6="@firebase/performance",W6="@firebase/performance-compat",H6="@firebase/remote-config",q6="@firebase/remote-config-compat",G6="@firebase/storage",Q6="@firebase/storage-compat",K6="@firebase/firestore",Y6="@firebase/vertexai",X6="@firebase/firestore-compat",J6="firebase",Z6="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="[DEFAULT]",e_={[Qh]:"fire-core",[P6]:"fire-core-compat",[C6]:"fire-analytics",[E6]:"fire-analytics-compat",[_6]:"fire-app-check",[T6]:"fire-app-check-compat",[D6]:"fire-auth",[A6]:"fire-auth-compat",[R6]:"fire-rtdb",[M6]:"fire-data-connect",[O6]:"fire-rtdb-compat",[L6]:"fire-fn",[V6]:"fire-fn-compat",[z6]:"fire-iid",[B6]:"fire-iid-compat",[$6]:"fire-fcm",[F6]:"fire-fcm-compat",[U6]:"fire-perf",[W6]:"fire-perf-compat",[H6]:"fire-rc",[q6]:"fire-rc-compat",[G6]:"fire-gcs",[Q6]:"fire-gcs-compat",[K6]:"fire-fst",[X6]:"fire-fst-compat",[Y6]:"fire-vertex","fire-js":"fire-js",[J6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new Map,t_=new Map,Yh=new Map;function Vv(s,t){try{s.container.addComponent(t)}catch(r){$a.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function ta(s){const t=s.name;if(Yh.has(t))return $a.debug(`There were multiple attempts to register component ${t}.`),!1;Yh.set(t,s);for(const r of ox.values())Vv(r,s);for(const r of t_.values())Vv(r,s);return!0}function Wn(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function jr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sn=new Di("app","Firebase",s_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t,r,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=Z6;function S1(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Kh,automaticDataCollectionEnabled:!1},t),n=a.name;if(typeof n!="string"||!n)throw Sn.create("bad-app-name",{appName:String(n)});if(r||(r=g1()),!r)throw Sn.create("no-options");const l=ox.get(n);if(l){if(Dn(r,l.options)&&Dn(a,l.config))return l;throw Sn.create("duplicate-app",{appName:n})}const o=new d6(n);for(const u of Yh.values())o.addComponent(u);const d=new r_(r,a,o);return ox.set(n,d),d}function om(s=Kh){const t=ox.get(s);if(!t&&s===Kh&&g1())return S1();if(!t)throw Sn.create("no-app",{appName:s});return t}function pr(s,t,r){var a;let n=(a=e_[s])!==null&&a!==void 0?a:s;r&&(n+=`-${r}`);const l=n.match(/\s|\//),o=t.match(/\s|\//);if(l||o){const d=[`Unable to register library "${n}" with version "${t}":`];l&&d.push(`library name "${n}" contains illegal characters (whitespace or "/")`),l&&o&&d.push("and"),o&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$a.warn(d.join(" "));return}ta(new $r(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="firebase-heartbeat-database",n_=1,kc="firebase-heartbeat-store";let P0=null;function P1(){return P0||(P0=I1(a_,n_,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(kc)}catch(r){console.warn(r)}}}}).catch(s=>{throw Sn.create("idb-open",{originalErrorMessage:s.message})})),P0}async function i_(s){try{const r=(await P1()).transaction(kc),a=await r.objectStore(kc).get(E1(s));return await r.done,a}catch(t){if(t instanceof Fr)$a.warn(t.message);else{const r=Sn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});$a.warn(r.message)}}}async function zv(s,t){try{const a=(await P1()).transaction(kc,"readwrite");await a.objectStore(kc).put(t,E1(s)),await a.done}catch(r){if(r instanceof Fr)$a.warn(r.message);else{const a=Sn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});$a.warn(a.message)}}}function E1(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=1024,l_=30;class c_{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new u_(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Bv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(o=>o.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:n}),this._heartbeatsCache.heartbeats.length>l_){const o=x_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){$a.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Bv(),{heartbeatsToSend:a,unsentEntries:n}=d_(this._heartbeatsCache.heartbeats),l=ix(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(r){return $a.warn(r),""}}}function Bv(){return new Date().toISOString().substring(0,10)}function d_(s,t=o_){const r=[];let a=s.slice();for(const n of s){const l=r.find(o=>o.agent===n.agent);if(l){if(l.dates.push(n.date),$v(r)>t){l.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),$v(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class u_{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return j1()?N1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await i_(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const n=await this.read();return zv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const n=await this.read();return zv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function $v(s){return ix(JSON.stringify({version:2,heartbeats:s})).length}function x_(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let a=1;a<s.length;a++)s[a].date<r&&(r=s[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(s){ta(new $r("platform-logger",t=>new I6(t),"PRIVATE")),ta(new $r("heartbeat",t=>new c_(t),"PRIVATE")),pr(Qh,Lv,s),pr(Qh,Lv,"esm2017"),pr("fire-js","")}m_("");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pn,C1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,x){function q(){}q.prototype=x.prototype,V.D=x.prototype,V.prototype=new q,V.prototype.constructor=V,V.C=function(W,J,re){for(var X=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)X[Q-2]=arguments[Q];return x.prototype[J].apply(W,X)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(V,x,q){q||(q=0);var W=Array(16);if(typeof x=="string")for(var J=0;16>J;++J)W[J]=x.charCodeAt(q++)|x.charCodeAt(q++)<<8|x.charCodeAt(q++)<<16|x.charCodeAt(q++)<<24;else for(J=0;16>J;++J)W[J]=x[q++]|x[q++]<<8|x[q++]<<16|x[q++]<<24;x=V.g[0],q=V.g[1],J=V.g[2];var re=V.g[3],X=x+(re^q&(J^re))+W[0]+3614090360&4294967295;x=q+(X<<7&4294967295|X>>>25),X=re+(J^x&(q^J))+W[1]+3905402710&4294967295,re=x+(X<<12&4294967295|X>>>20),X=J+(q^re&(x^q))+W[2]+606105819&4294967295,J=re+(X<<17&4294967295|X>>>15),X=q+(x^J&(re^x))+W[3]+3250441966&4294967295,q=J+(X<<22&4294967295|X>>>10),X=x+(re^q&(J^re))+W[4]+4118548399&4294967295,x=q+(X<<7&4294967295|X>>>25),X=re+(J^x&(q^J))+W[5]+1200080426&4294967295,re=x+(X<<12&4294967295|X>>>20),X=J+(q^re&(x^q))+W[6]+2821735955&4294967295,J=re+(X<<17&4294967295|X>>>15),X=q+(x^J&(re^x))+W[7]+4249261313&4294967295,q=J+(X<<22&4294967295|X>>>10),X=x+(re^q&(J^re))+W[8]+1770035416&4294967295,x=q+(X<<7&4294967295|X>>>25),X=re+(J^x&(q^J))+W[9]+2336552879&4294967295,re=x+(X<<12&4294967295|X>>>20),X=J+(q^re&(x^q))+W[10]+4294925233&4294967295,J=re+(X<<17&4294967295|X>>>15),X=q+(x^J&(re^x))+W[11]+2304563134&4294967295,q=J+(X<<22&4294967295|X>>>10),X=x+(re^q&(J^re))+W[12]+1804603682&4294967295,x=q+(X<<7&4294967295|X>>>25),X=re+(J^x&(q^J))+W[13]+4254626195&4294967295,re=x+(X<<12&4294967295|X>>>20),X=J+(q^re&(x^q))+W[14]+2792965006&4294967295,J=re+(X<<17&4294967295|X>>>15),X=q+(x^J&(re^x))+W[15]+1236535329&4294967295,q=J+(X<<22&4294967295|X>>>10),X=x+(J^re&(q^J))+W[1]+4129170786&4294967295,x=q+(X<<5&4294967295|X>>>27),X=re+(q^J&(x^q))+W[6]+3225465664&4294967295,re=x+(X<<9&4294967295|X>>>23),X=J+(x^q&(re^x))+W[11]+643717713&4294967295,J=re+(X<<14&4294967295|X>>>18),X=q+(re^x&(J^re))+W[0]+3921069994&4294967295,q=J+(X<<20&4294967295|X>>>12),X=x+(J^re&(q^J))+W[5]+3593408605&4294967295,x=q+(X<<5&4294967295|X>>>27),X=re+(q^J&(x^q))+W[10]+38016083&4294967295,re=x+(X<<9&4294967295|X>>>23),X=J+(x^q&(re^x))+W[15]+3634488961&4294967295,J=re+(X<<14&4294967295|X>>>18),X=q+(re^x&(J^re))+W[4]+3889429448&4294967295,q=J+(X<<20&4294967295|X>>>12),X=x+(J^re&(q^J))+W[9]+568446438&4294967295,x=q+(X<<5&4294967295|X>>>27),X=re+(q^J&(x^q))+W[14]+3275163606&4294967295,re=x+(X<<9&4294967295|X>>>23),X=J+(x^q&(re^x))+W[3]+4107603335&4294967295,J=re+(X<<14&4294967295|X>>>18),X=q+(re^x&(J^re))+W[8]+1163531501&4294967295,q=J+(X<<20&4294967295|X>>>12),X=x+(J^re&(q^J))+W[13]+2850285829&4294967295,x=q+(X<<5&4294967295|X>>>27),X=re+(q^J&(x^q))+W[2]+4243563512&4294967295,re=x+(X<<9&4294967295|X>>>23),X=J+(x^q&(re^x))+W[7]+1735328473&4294967295,J=re+(X<<14&4294967295|X>>>18),X=q+(re^x&(J^re))+W[12]+2368359562&4294967295,q=J+(X<<20&4294967295|X>>>12),X=x+(q^J^re)+W[5]+4294588738&4294967295,x=q+(X<<4&4294967295|X>>>28),X=re+(x^q^J)+W[8]+2272392833&4294967295,re=x+(X<<11&4294967295|X>>>21),X=J+(re^x^q)+W[11]+1839030562&4294967295,J=re+(X<<16&4294967295|X>>>16),X=q+(J^re^x)+W[14]+4259657740&4294967295,q=J+(X<<23&4294967295|X>>>9),X=x+(q^J^re)+W[1]+2763975236&4294967295,x=q+(X<<4&4294967295|X>>>28),X=re+(x^q^J)+W[4]+1272893353&4294967295,re=x+(X<<11&4294967295|X>>>21),X=J+(re^x^q)+W[7]+4139469664&4294967295,J=re+(X<<16&4294967295|X>>>16),X=q+(J^re^x)+W[10]+3200236656&4294967295,q=J+(X<<23&4294967295|X>>>9),X=x+(q^J^re)+W[13]+681279174&4294967295,x=q+(X<<4&4294967295|X>>>28),X=re+(x^q^J)+W[0]+3936430074&4294967295,re=x+(X<<11&4294967295|X>>>21),X=J+(re^x^q)+W[3]+3572445317&4294967295,J=re+(X<<16&4294967295|X>>>16),X=q+(J^re^x)+W[6]+76029189&4294967295,q=J+(X<<23&4294967295|X>>>9),X=x+(q^J^re)+W[9]+3654602809&4294967295,x=q+(X<<4&4294967295|X>>>28),X=re+(x^q^J)+W[12]+3873151461&4294967295,re=x+(X<<11&4294967295|X>>>21),X=J+(re^x^q)+W[15]+530742520&4294967295,J=re+(X<<16&4294967295|X>>>16),X=q+(J^re^x)+W[2]+3299628645&4294967295,q=J+(X<<23&4294967295|X>>>9),X=x+(J^(q|~re))+W[0]+4096336452&4294967295,x=q+(X<<6&4294967295|X>>>26),X=re+(q^(x|~J))+W[7]+1126891415&4294967295,re=x+(X<<10&4294967295|X>>>22),X=J+(x^(re|~q))+W[14]+2878612391&4294967295,J=re+(X<<15&4294967295|X>>>17),X=q+(re^(J|~x))+W[5]+4237533241&4294967295,q=J+(X<<21&4294967295|X>>>11),X=x+(J^(q|~re))+W[12]+1700485571&4294967295,x=q+(X<<6&4294967295|X>>>26),X=re+(q^(x|~J))+W[3]+2399980690&4294967295,re=x+(X<<10&4294967295|X>>>22),X=J+(x^(re|~q))+W[10]+4293915773&4294967295,J=re+(X<<15&4294967295|X>>>17),X=q+(re^(J|~x))+W[1]+2240044497&4294967295,q=J+(X<<21&4294967295|X>>>11),X=x+(J^(q|~re))+W[8]+1873313359&4294967295,x=q+(X<<6&4294967295|X>>>26),X=re+(q^(x|~J))+W[15]+4264355552&4294967295,re=x+(X<<10&4294967295|X>>>22),X=J+(x^(re|~q))+W[6]+2734768916&4294967295,J=re+(X<<15&4294967295|X>>>17),X=q+(re^(J|~x))+W[13]+1309151649&4294967295,q=J+(X<<21&4294967295|X>>>11),X=x+(J^(q|~re))+W[4]+4149444226&4294967295,x=q+(X<<6&4294967295|X>>>26),X=re+(q^(x|~J))+W[11]+3174756917&4294967295,re=x+(X<<10&4294967295|X>>>22),X=J+(x^(re|~q))+W[2]+718787259&4294967295,J=re+(X<<15&4294967295|X>>>17),X=q+(re^(J|~x))+W[9]+3951481745&4294967295,V.g[0]=V.g[0]+x&4294967295,V.g[1]=V.g[1]+(J+(X<<21&4294967295|X>>>11))&4294967295,V.g[2]=V.g[2]+J&4294967295,V.g[3]=V.g[3]+re&4294967295}a.prototype.u=function(V,x){x===void 0&&(x=V.length);for(var q=x-this.blockSize,W=this.B,J=this.h,re=0;re<x;){if(J==0)for(;re<=q;)n(this,V,re),re+=this.blockSize;if(typeof V=="string"){for(;re<x;)if(W[J++]=V.charCodeAt(re++),J==this.blockSize){n(this,W),J=0;break}}else for(;re<x;)if(W[J++]=V[re++],J==this.blockSize){n(this,W),J=0;break}}this.h=J,this.o+=x},a.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var x=1;x<V.length-8;++x)V[x]=0;var q=8*this.o;for(x=V.length-8;x<V.length;++x)V[x]=q&255,q/=256;for(this.u(V),V=Array(16),x=q=0;4>x;++x)for(var W=0;32>W;W+=8)V[q++]=this.g[x]>>>W&255;return V};function l(V,x){var q=d;return Object.prototype.hasOwnProperty.call(q,V)?q[V]:q[V]=x(V)}function o(V,x){this.h=x;for(var q=[],W=!0,J=V.length-1;0<=J;J--){var re=V[J]|0;W&&re==x||(q[J]=re,W=!1)}this.g=q}var d={};function u(V){return-128<=V&&128>V?l(V,function(x){return new o([x|0],0>x?-1:0)}):new o([V|0],0>V?-1:0)}function m(V){if(isNaN(V)||!isFinite(V))return j;if(0>V)return D(m(-V));for(var x=[],q=1,W=0;V>=q;W++)x[W]=V/q|0,q*=4294967296;return new o(x,0)}function y(V,x){if(V.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(V.charAt(0)=="-")return D(y(V.substring(1),x));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var q=m(Math.pow(x,8)),W=j,J=0;J<V.length;J+=8){var re=Math.min(8,V.length-J),X=parseInt(V.substring(J,J+re),x);8>re?(re=m(Math.pow(x,re)),W=W.j(re).add(m(X))):(W=W.j(q),W=W.add(m(X)))}return W}var j=u(0),N=u(1),T=u(16777216);s=o.prototype,s.m=function(){if(B(this))return-D(this).m();for(var V=0,x=1,q=0;q<this.g.length;q++){var W=this.i(q);V+=(0<=W?W:4294967296+W)*x,x*=4294967296}return V},s.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(g(this))return"0";if(B(this))return"-"+D(this).toString(V);for(var x=m(Math.pow(V,6)),q=this,W="";;){var J=Z(q,x).g;q=R(q,J.j(x));var re=((0<q.g.length?q.g[0]:q.h)>>>0).toString(V);if(q=J,g(q))return re+W;for(;6>re.length;)re="0"+re;W=re+W}},s.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function g(V){if(V.h!=0)return!1;for(var x=0;x<V.g.length;x++)if(V.g[x]!=0)return!1;return!0}function B(V){return V.h==-1}s.l=function(V){return V=R(this,V),B(V)?-1:g(V)?0:1};function D(V){for(var x=V.g.length,q=[],W=0;W<x;W++)q[W]=~V.g[W];return new o(q,~V.h).add(N)}s.abs=function(){return B(this)?D(this):this},s.add=function(V){for(var x=Math.max(this.g.length,V.g.length),q=[],W=0,J=0;J<=x;J++){var re=W+(this.i(J)&65535)+(V.i(J)&65535),X=(re>>>16)+(this.i(J)>>>16)+(V.i(J)>>>16);W=X>>>16,re&=65535,X&=65535,q[J]=X<<16|re}return new o(q,q[q.length-1]&-2147483648?-1:0)};function R(V,x){return V.add(D(x))}s.j=function(V){if(g(this)||g(V))return j;if(B(this))return B(V)?D(this).j(D(V)):D(D(this).j(V));if(B(V))return D(this.j(D(V)));if(0>this.l(T)&&0>V.l(T))return m(this.m()*V.m());for(var x=this.g.length+V.g.length,q=[],W=0;W<2*x;W++)q[W]=0;for(W=0;W<this.g.length;W++)for(var J=0;J<V.g.length;J++){var re=this.i(W)>>>16,X=this.i(W)&65535,Q=V.i(J)>>>16,E=V.i(J)&65535;q[2*W+2*J]+=X*E,$(q,2*W+2*J),q[2*W+2*J+1]+=re*E,$(q,2*W+2*J+1),q[2*W+2*J+1]+=X*Q,$(q,2*W+2*J+1),q[2*W+2*J+2]+=re*Q,$(q,2*W+2*J+2)}for(W=0;W<x;W++)q[W]=q[2*W+1]<<16|q[2*W];for(W=x;W<2*x;W++)q[W]=0;return new o(q,0)};function $(V,x){for(;(V[x]&65535)!=V[x];)V[x+1]+=V[x]>>>16,V[x]&=65535,x++}function z(V,x){this.g=V,this.h=x}function Z(V,x){if(g(x))throw Error("division by zero");if(g(V))return new z(j,j);if(B(V))return x=Z(D(V),x),new z(D(x.g),D(x.h));if(B(x))return x=Z(V,D(x)),new z(D(x.g),x.h);if(30<V.g.length){if(B(V)||B(x))throw Error("slowDivide_ only works with positive integers.");for(var q=N,W=x;0>=W.l(V);)q=G(q),W=G(W);var J=Y(q,1),re=Y(W,1);for(W=Y(W,2),q=Y(q,2);!g(W);){var X=re.add(W);0>=X.l(V)&&(J=J.add(q),re=X),W=Y(W,1),q=Y(q,1)}return x=R(V,J.j(x)),new z(J,x)}for(J=j;0<=V.l(x);){for(q=Math.max(1,Math.floor(V.m()/x.m())),W=Math.ceil(Math.log(q)/Math.LN2),W=48>=W?1:Math.pow(2,W-48),re=m(q),X=re.j(x);B(X)||0<X.l(V);)q-=W,re=m(q),X=re.j(x);g(re)&&(re=N),J=J.add(re),V=R(V,X)}return new z(J,V)}s.A=function(V){return Z(this,V).h},s.and=function(V){for(var x=Math.max(this.g.length,V.g.length),q=[],W=0;W<x;W++)q[W]=this.i(W)&V.i(W);return new o(q,this.h&V.h)},s.or=function(V){for(var x=Math.max(this.g.length,V.g.length),q=[],W=0;W<x;W++)q[W]=this.i(W)|V.i(W);return new o(q,this.h|V.h)},s.xor=function(V){for(var x=Math.max(this.g.length,V.g.length),q=[],W=0;W<x;W++)q[W]=this.i(W)^V.i(W);return new o(q,this.h^V.h)};function G(V){for(var x=V.g.length+1,q=[],W=0;W<x;W++)q[W]=V.i(W)<<1|V.i(W-1)>>>31;return new o(q,V.h)}function Y(V,x){var q=x>>5;x%=32;for(var W=V.g.length-q,J=[],re=0;re<W;re++)J[re]=0<x?V.i(re+q)>>>x|V.i(re+q+1)<<32-x:V.i(re+q);return new o(J,V.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,C1=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=m,o.fromString=y,Pn=o}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var Kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T1,_l,_1,vu,Xh,D1,A1,R1;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,L){return h==Array.prototype||h==Object.prototype||(h[_]=L.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kd=="object"&&Kd];for(var _=0;_<h.length;++_){var L=h[_];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var a=r(this);function n(h,_){if(_)e:{var L=a;h=h.split(".");for(var K=0;K<h.length-1;K++){var me=h[K];if(!(me in L))break e;L=L[me]}h=h[h.length-1],K=L[h],_=_(K),_!=K&&_!=null&&t(L,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var L=0,K=!1,me={next:function(){if(!K&&L<h.length){var ye=L++;return{value:_(ye,h[ye]),done:!1}}return K=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}n("Array.prototype.values",function(h){return h||function(){return l(this,function(_,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},d=this||self;function u(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,L){return h.call.apply(h.bind,arguments)}function j(h,_,L){if(!h)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,K),h.apply(_,me)}}return function(){return h.apply(_,arguments)}}function N(h,_,L){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:j,N.apply(null,arguments)}function T(h,_){var L=Array.prototype.slice.call(arguments,1);return function(){var K=L.slice();return K.push.apply(K,arguments),h.apply(this,K)}}function g(h,_){function L(){}L.prototype=_.prototype,h.aa=_.prototype,h.prototype=new L,h.prototype.constructor=h,h.Qb=function(K,me,ye){for(var Fe=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)Fe[Wt-2]=arguments[Wt];return _.prototype[me].apply(K,Fe)}}function B(h){const _=h.length;if(0<_){const L=Array(_);for(let K=0;K<_;K++)L[K]=h[K];return L}return[]}function D(h,_){for(let L=1;L<arguments.length;L++){const K=arguments[L];if(u(K)){const me=h.length||0,ye=K.length||0;h.length=me+ye;for(let Fe=0;Fe<ye;Fe++)h[me+Fe]=K[Fe]}else h.push(K)}}class R{constructor(_,L){this.i=_,this.j=L,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function $(h){return/^[\s\xa0]*$/.test(h)}function z(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function Z(h){return Z[" "](h),h}Z[" "]=function(){};var G=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Y(h,_,L){for(const K in h)_.call(L,h[K],K,h)}function V(h,_){for(const L in h)_.call(void 0,h[L],L,h)}function x(h){const _={};for(const L in h)_[L]=h[L];return _}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(h,_){let L,K;for(let me=1;me<arguments.length;me++){K=arguments[me];for(L in K)h[L]=K[L];for(let ye=0;ye<q.length;ye++)L=q[ye],Object.prototype.hasOwnProperty.call(K,L)&&(h[L]=K[L])}}function J(h){var _=1;h=h.split(":");const L=[];for(;0<_&&h.length;)L.push(h.shift()),_--;return h.length&&L.push(h.join(":")),L}function re(h){d.setTimeout(()=>{throw h},0)}function X(){var h=je;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Q{constructor(){this.h=this.g=null}add(_,L){const K=E.get();K.set(_,L),this.h?this.h.next=K:this.g=K,this.h=K}}var E=new R(()=>new De,h=>h.reset());class De{constructor(){this.next=this.g=this.h=null}set(_,L){this.h=_,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,ue=!1,je=new Q,pe=()=>{const h=d.Promise.resolve(void 0);Ne=()=>{h.then(Ae)}};var Ae=()=>{for(var h;h=X();){try{h.h.call(h.g)}catch(L){re(L)}var _=E;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}ue=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const L=()=>{};d.addEventListener("test",L,_),d.removeEventListener("test",L,_)}catch{}return h}();function $e(h,_){if(be.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var L=this.type=h.type,K=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(G){e:{try{Z(_.nodeName);var me=!0;break e}catch{}me=!1}me||(_=null)}}else L=="mouseover"?_=h.fromElement:L=="mouseout"&&(_=h.toElement);this.relatedTarget=_,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:i[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&$e.aa.h.call(this)}}g($e,be);var i={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var k="closure_listenable_"+(1e6*Math.random()|0),c=0;function P(h,_,L,K,me){this.listener=h,this.proxy=null,this.src=_,this.type=L,this.capture=!!K,this.ha=me,this.key=++c,this.da=this.fa=!1}function A(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function H(h){this.src=h,this.g={},this.h=0}H.prototype.add=function(h,_,L,K,me){var ye=h.toString();h=this.g[ye],h||(h=this.g[ye]=[],this.h++);var Fe=te(h,_,K,me);return-1<Fe?(_=h[Fe],L||(_.fa=!1)):(_=new P(_,this.src,ye,!!K,me),_.fa=L,h.push(_)),_};function se(h,_){var L=_.type;if(L in h.g){var K=h.g[L],me=Array.prototype.indexOf.call(K,_,void 0),ye;(ye=0<=me)&&Array.prototype.splice.call(K,me,1),ye&&(A(_),h.g[L].length==0&&(delete h.g[L],h.h--))}}function te(h,_,L,K){for(var me=0;me<h.length;++me){var ye=h[me];if(!ye.da&&ye.listener==_&&ye.capture==!!L&&ye.ha==K)return me}return-1}var I="closure_lm_"+(1e6*Math.random()|0),M={};function C(h,_,L,K,me){if(K&&K.once)return w(h,_,L,K,me);if(Array.isArray(_)){for(var ye=0;ye<_.length;ye++)C(h,_[ye],L,K,me);return null}return L=he(L),h&&h[k]?h.K(_,L,m(K)?!!K.capture:!!K,me):f(h,_,L,!1,K,me)}function f(h,_,L,K,me,ye){if(!_)throw Error("Invalid event type");var Fe=m(me)?!!me.capture:!!me,Wt=oe(h);if(Wt||(h[I]=Wt=new H(h)),L=Wt.add(_,L,K,Fe,ye),L.proxy)return L;if(K=p(),L.proxy=K,K.src=h,K.listener=L,h.addEventListener)qe||(me=Fe),me===void 0&&(me=!1),h.addEventListener(_.toString(),K,me);else if(h.attachEvent)h.attachEvent(ae(_.toString()),K);else if(h.addListener&&h.removeListener)h.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return L}function p(){function h(L){return _.call(h.src,h.listener,L)}const _=ie;return h}function w(h,_,L,K,me){if(Array.isArray(_)){for(var ye=0;ye<_.length;ye++)w(h,_[ye],L,K,me);return null}return L=he(L),h&&h[k]?h.L(_,L,m(K)?!!K.capture:!!K,me):f(h,_,L,!0,K,me)}function F(h,_,L,K,me){if(Array.isArray(_))for(var ye=0;ye<_.length;ye++)F(h,_[ye],L,K,me);else K=m(K)?!!K.capture:!!K,L=he(L),h&&h[k]?(h=h.i,_=String(_).toString(),_ in h.g&&(ye=h.g[_],L=te(ye,L,K,me),-1<L&&(A(ye[L]),Array.prototype.splice.call(ye,L,1),ye.length==0&&(delete h.g[_],h.h--)))):h&&(h=oe(h))&&(_=h.g[_.toString()],h=-1,_&&(h=te(_,L,K,me)),(L=-1<h?_[h]:null)&&O(L))}function O(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[k])se(_.i,h);else{var L=h.type,K=h.proxy;_.removeEventListener?_.removeEventListener(L,K,h.capture):_.detachEvent?_.detachEvent(ae(L),K):_.addListener&&_.removeListener&&_.removeListener(K),(L=oe(_))?(se(L,h),L.h==0&&(L.src=null,_[I]=null)):A(h)}}}function ae(h){return h in M?M[h]:M[h]="on"+h}function ie(h,_){if(h.da)h=!0;else{_=new $e(_,this);var L=h.listener,K=h.ha||h.src;h.fa&&O(h),h=L.call(K,_)}return h}function oe(h){return h=h[I],h instanceof H?h:null}var ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function he(h){return typeof h=="function"?h:(h[ne]||(h[ne]=function(_){return h.handleEvent(_)}),h[ne])}function de(){Te.call(this),this.i=new H(this),this.M=this,this.F=null}g(de,Te),de.prototype[k]=!0,de.prototype.removeEventListener=function(h,_,L,K){F(this,h,_,L,K)};function we(h,_){var L,K=h.F;if(K)for(L=[];K;K=K.F)L.push(K);if(h=h.M,K=_.type||_,typeof _=="string")_=new be(_,h);else if(_ instanceof be)_.target=_.target||h;else{var me=_;_=new be(K,h),W(_,me)}if(me=!0,L)for(var ye=L.length-1;0<=ye;ye--){var Fe=_.g=L[ye];me=Se(Fe,K,!0,_)&&me}if(Fe=_.g=h,me=Se(Fe,K,!0,_)&&me,me=Se(Fe,K,!1,_)&&me,L)for(ye=0;ye<L.length;ye++)Fe=_.g=L[ye],me=Se(Fe,K,!1,_)&&me}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var L=h.g[_],K=0;K<L.length;K++)A(L[K]);delete h.g[_],h.h--}}this.F=null},de.prototype.K=function(h,_,L,K){return this.i.add(String(h),_,!1,L,K)},de.prototype.L=function(h,_,L,K){return this.i.add(String(h),_,!0,L,K)};function Se(h,_,L,K){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var me=!0,ye=0;ye<_.length;++ye){var Fe=_[ye];if(Fe&&!Fe.da&&Fe.capture==L){var Wt=Fe.listener,Es=Fe.ha||Fe.src;Fe.fa&&se(h.i,Fe),me=Wt.call(Es,K)!==!1&&me}}return me&&!K.defaultPrevented}function xt(h,_,L){if(typeof h=="function")L&&(h=N(h,L));else if(h&&typeof h.handleEvent=="function")h=N(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Le(h){h.g=xt(()=>{h.g=null,h.i&&(h.i=!1,Le(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Qe extends Te{constructor(_,L){super(),this.m=_,this.l=L,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _e(h){Te.call(this),this.h=h,this.g={}}g(_e,Te);var He=[];function Oe(h){Y(h.g,function(_,L){this.g.hasOwnProperty(L)&&O(_)},h),h.g={}}_e.prototype.N=function(){_e.aa.N.call(this),Oe(this)},_e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=d.JSON.stringify,cs=d.JSON.parse,ke=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Me(){}Me.prototype.h=null;function tt(h){return h.h||(h.h=h.i())}function at(){}var Nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ut(){be.call(this,"d")}g(Ut,be);function zt(){be.call(this,"c")}g(zt,be);var pt={},nr=null;function ds(){return nr=nr||new de}pt.La="serverreachability";function ir(h){be.call(this,pt.La,h)}g(ir,be);function gs(h){const _=ds();we(_,new ir(_))}pt.STAT_EVENT="statevent";function gr(h,_){be.call(this,pt.STAT_EVENT,h),this.stat=_}g(gr,be);function Yt(h){const _=ds();we(_,new gr(_,h))}pt.Ma="timingevent";function Ys(h,_){be.call(this,pt.Ma,h),this.size=_}g(Ys,be);function or(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function Li(h,_,L,K,me,ye){h.info(function(){if(h.g)if(ye)for(var Fe="",Wt=ye.split("&"),Es=0;Es<Wt.length;Es++){var Lt=Wt[Es].split("=");if(1<Lt.length){var zs=Lt[0];Lt=Lt[1];var Bs=zs.split("_");Fe=2<=Bs.length&&Bs[1]=="type"?Fe+(zs+"="+Lt+"&"):Fe+(zs+"=redacted&")}}else Fe=null;else Fe=ye;return"XMLHTTP REQ ("+K+") [attempt "+me+"]: "+_+`
`+L+`
`+Fe})}function al(h,_,L,K,me,ye,Fe){h.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+me+"]: "+_+`
`+L+`
`+ye+" "+Fe})}function aa(h,_,L,K){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+zm(h,L)+(K?" "+K:"")})}function Vm(h,_){h.info(function(){return"TIMEOUT: "+_})}_r.prototype.info=function(){};function zm(h,_){if(!h.g)return _;if(!_)return null;try{var L=JSON.parse(_);if(L){for(h=0;h<L.length;h++)if(Array.isArray(L[h])){var K=L[h];if(!(2>K.length)){var me=K[1];if(Array.isArray(me)&&!(1>me.length)){var ye=me[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var Fe=1;Fe<me.length;Fe++)me[Fe]=""}}}}return Ft(L)}catch{return _}}var Vi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zi;function ka(){}g(ka,Me),ka.prototype.g=function(){return new XMLHttpRequest},ka.prototype.i=function(){return{}},zi=new ka;function Ur(h,_,L,K){this.j=h,this.i=_,this.l=L,this.R=K||1,this.U=new _e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yn}function Yn(){this.i=null,this.g="",this.h=!1}var nl={},Bi={};function $i(h,_,L){h.L=1,h.v=Nd(Ia(_)),h.m=L,h.P=!0,yd(h,null)}function yd(h,_){h.F=Date.now(),bd(h),h.A=Ia(h.v);var L=h.A,K=h.R;Array.isArray(K)||(K=[String(K)]),Gy(L.i,"t",K),h.C=0,L=h.j.J,h.h=new Yn,h.g=ub(h.j,L?_:null,!h.m),0<h.O&&(h.M=new Qe(N(h.Y,h,h.g),h.O)),_=h.U,L=h.g,K=h.ca;var me="readystatechange";Array.isArray(me)||(me&&(He[0]=me.toString()),me=He);for(var ye=0;ye<me.length;ye++){var Fe=C(L,me[ye],K||_.handleEvent,!1,_.h||_);if(!Fe)break;_.g[Fe.key]=Fe}_=h.H?x(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),gs(),Li(h.i,h.u,h.A,h.l,h.R,h.m)}Ur.prototype.ca=function(h){h=h.target;const _=this.M;_&&Sa(h)==3?_.j():this.Y(h)},Ur.prototype.Y=function(h){try{if(h==this.g)e:{const Bs=Sa(this.g);var _=this.g.Ba();const Wi=this.g.Z();if(!(3>Bs)&&(Bs!=3||this.g&&(this.h.h||this.g.oa()||eb(this.g)))){this.J||Bs!=4||_==7||(_==8||0>=Wi?gs(3):gs(2)),Bm(this);var L=this.g.Z();this.X=L;t:if(Ry(this)){var K=eb(this.g);h="";var me=K.length,ye=Sa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),il(this);var Fe="";break t}this.h.i=new d.TextDecoder}for(_=0;_<me;_++)this.h.h=!0,h+=this.h.i.decode(K[_],{stream:!(ye&&_==me-1)});K.length=0,this.h.g+=h,this.C=0,Fe=this.h.g}else Fe=this.g.oa();if(this.o=L==200,al(this.i,this.u,this.A,this.l,this.R,Bs,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Wt,Es=this.g;if((Wt=Es.g?Es.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Wt)){var Lt=Wt;break t}}Lt=null}if(L=Lt)aa(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$m(this,L);else{this.o=!1,this.s=3,Yt(12),Xn(this),il(this);break e}}if(this.P){L=!0;let Wr;for(;!this.J&&this.C<Fe.length;)if(Wr=oS(this,Fe),Wr==Bi){Bs==4&&(this.s=4,Yt(14),L=!1),aa(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==nl){this.s=4,Yt(15),aa(this.i,this.l,Fe,"[Invalid Chunk]"),L=!1;break}else aa(this.i,this.l,Wr,null),$m(this,Wr);if(Ry(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bs!=4||Fe.length!=0||this.h.h||(this.s=1,Yt(16),L=!1),this.o=this.o&&L,!L)aa(this.i,this.l,Fe,"[Invalid Chunked Response]"),Xn(this),il(this);else if(0<Fe.length&&!this.W){this.W=!0;var zs=this.j;zs.g==this&&zs.ba&&!zs.M&&(zs.j.info("Great, no buffering proxy detected. Bytes received: "+Fe.length),Gm(zs),zs.M=!0,Yt(11))}}else aa(this.i,this.l,Fe,null),$m(this,Fe);Bs==4&&Xn(this),this.o&&!this.J&&(Bs==4?ob(this.j,this):(this.o=!1,bd(this)))}else kS(this.g),L==400&&0<Fe.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Xn(this),il(this)}}}catch{}finally{}};function Ry(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function oS(h,_){var L=h.C,K=_.indexOf(`
`,L);return K==-1?Bi:(L=Number(_.substring(L,K)),isNaN(L)?nl:(K+=1,K+L>_.length?Bi:(_=_.slice(K,K+L),h.C=K+L,_)))}Ur.prototype.cancel=function(){this.J=!0,Xn(this)};function bd(h){h.S=Date.now()+h.I,My(h,h.I)}function My(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=or(N(h.ba,h),_)}function Bm(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Ur.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Vm(this.i,this.A),this.L!=2&&(gs(),Yt(17)),Xn(this),this.s=2,il(this)):My(this,this.S-h)};function il(h){h.j.G==0||h.J||ob(h.j,h)}function Xn(h){Bm(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Oe(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function $m(h,_){try{var L=h.j;if(L.G!=0&&(L.g==h||Fm(L.h,h))){if(!h.K&&Fm(L.h,h)&&L.G==3){try{var K=L.Da.g.parse(_)}catch{K=null}if(Array.isArray(K)&&K.length==3){var me=K;if(me[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<h.F)Ed(L),Sd(L);else break e;qm(L),Yt(18)}}else L.za=me[1],0<L.za-L.T&&37500>me[2]&&L.F&&L.v==0&&!L.C&&(L.C=or(N(L.Za,L),6e3));if(1>=Vy(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Zn(L,11)}else if((h.K||L.g==h)&&Ed(L),!$(_))for(me=L.Da.g.parse(_),_=0;_<me.length;_++){let Lt=me[_];if(L.T=Lt[0],Lt=Lt[1],L.G==2)if(Lt[0]=="c"){L.K=Lt[1],L.ia=Lt[2];const zs=Lt[3];zs!=null&&(L.la=zs,L.j.info("VER="+L.la));const Bs=Lt[4];Bs!=null&&(L.Aa=Bs,L.j.info("SVER="+L.Aa));const Wi=Lt[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(K=1.5*Wi,L.L=K,L.j.info("backChannelRequestTimeoutMs_="+K)),K=L;const Wr=h.g;if(Wr){const Td=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Td){var ye=K.h;ye.g||Td.indexOf("spdy")==-1&&Td.indexOf("quic")==-1&&Td.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(Um(ye,ye.h),ye.h=null))}if(K.D){const Qm=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Qm&&(K.ya=Qm,Xt(K.I,K.D,Qm))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-h.F,L.j.info("Handshake RTT: "+L.R+"ms")),K=L;var Fe=h;if(K.qa=db(K,K.J?K.ia:null,K.W),Fe.K){zy(K.h,Fe);var Wt=Fe,Es=K.L;Es&&(Wt.I=Es),Wt.B&&(Bm(Wt),bd(Wt)),K.g=Fe}else nb(K);0<L.i.length&&Pd(L)}else Lt[0]!="stop"&&Lt[0]!="close"||Zn(L,7);else L.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Zn(L,7):Hm(L):Lt[0]!="noop"&&L.l&&L.l.ta(Lt),L.v=0)}}gs(4)}catch{}}var lS=class{constructor(h,_){this.g=h,this.map=_}};function Oy(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ly(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Vy(h){return h.h?1:h.g?h.g.size:0}function Fm(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Um(h,_){h.g?h.g.add(_):h.h=_}function zy(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Oy.prototype.cancel=function(){if(this.i=By(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function By(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const L of h.g.values())_=_.concat(L.D);return _}return B(h.i)}function cS(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(u(h)){for(var _=[],L=h.length,K=0;K<L;K++)_.push(h[K]);return _}_=[],L=0;for(K in h)_[L++]=h[K];return _}function dS(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||typeof h=="string"){var _=[];h=h.length;for(var L=0;L<h;L++)_.push(L);return _}_=[],L=0;for(const K in h)_[L++]=K;return _}}}function $y(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(u(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var L=dS(h),K=cS(h),me=K.length,ye=0;ye<me;ye++)_.call(void 0,K[ye],L&&L[ye],h)}var Fy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uS(h,_){if(h){h=h.split("&");for(var L=0;L<h.length;L++){var K=h[L].indexOf("="),me=null;if(0<=K){var ye=h[L].substring(0,K);me=h[L].substring(K+1)}else ye=h[L];_(ye,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function Jn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Jn){this.h=h.h,vd(this,h.j),this.o=h.o,this.g=h.g,jd(this,h.s),this.l=h.l;var _=h.i,L=new cl;L.i=_.i,_.g&&(L.g=new Map(_.g),L.h=_.h),Uy(this,L),this.m=h.m}else h&&(_=String(h).match(Fy))?(this.h=!1,vd(this,_[1]||"",!0),this.o=ol(_[2]||""),this.g=ol(_[3]||"",!0),jd(this,_[4]),this.l=ol(_[5]||"",!0),Uy(this,_[6]||"",!0),this.m=ol(_[7]||"")):(this.h=!1,this.i=new cl(null,this.h))}Jn.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ll(_,Wy,!0),":");var L=this.g;return(L||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ll(_,Wy,!0),"@"),h.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&h.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&h.push("/"),h.push(ll(L,L.charAt(0)=="/"?hS:mS,!0))),(L=this.i.toString())&&h.push("?",L),(L=this.m)&&h.push("#",ll(L,fS)),h.join("")};function Ia(h){return new Jn(h)}function vd(h,_,L){h.j=L?ol(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function jd(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Uy(h,_,L){_ instanceof cl?(h.i=_,gS(h.i,h.h)):(L||(_=ll(_,pS)),h.i=new cl(_,h.h))}function Xt(h,_,L){h.i.set(_,L)}function Nd(h){return Xt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ol(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ll(h,_,L){return typeof h=="string"?(h=encodeURI(h).replace(_,xS),L&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function xS(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wy=/[#\/\?@]/g,mS=/[#\?:]/g,hS=/[#\?]/g,pS=/[#\?@]/g,fS=/#/g;function cl(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Za(h){h.g||(h.g=new Map,h.h=0,h.i&&uS(h.i,function(_,L){h.add(decodeURIComponent(_.replace(/\+/g," ")),L)}))}s=cl.prototype,s.add=function(h,_){Za(this),this.i=null,h=Fi(this,h);var L=this.g.get(h);return L||this.g.set(h,L=[]),L.push(_),this.h+=1,this};function Hy(h,_){Za(h),_=Fi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function qy(h,_){return Za(h),_=Fi(h,_),h.g.has(_)}s.forEach=function(h,_){Za(this),this.g.forEach(function(L,K){L.forEach(function(me){h.call(_,me,K,this)},this)},this)},s.na=function(){Za(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),L=[];for(let K=0;K<_.length;K++){const me=h[K];for(let ye=0;ye<me.length;ye++)L.push(_[K])}return L},s.V=function(h){Za(this);let _=[];if(typeof h=="string")qy(this,h)&&(_=_.concat(this.g.get(Fi(this,h))));else{h=Array.from(this.g.values());for(let L=0;L<h.length;L++)_=_.concat(h[L])}return _},s.set=function(h,_){return Za(this),this.i=null,h=Fi(this,h),qy(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},s.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Gy(h,_,L){Hy(h,_),0<L.length&&(h.i=null,h.g.set(Fi(h,_),B(L)),h.h+=L.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var L=0;L<_.length;L++){var K=_[L];const ye=encodeURIComponent(String(K)),Fe=this.V(K);for(K=0;K<Fe.length;K++){var me=ye;Fe[K]!==""&&(me+="="+encodeURIComponent(String(Fe[K]))),h.push(me)}}return this.i=h.join("&")};function Fi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function gS(h,_){_&&!h.j&&(Za(h),h.i=null,h.g.forEach(function(L,K){var me=K.toLowerCase();K!=me&&(Hy(this,K),Gy(this,me,L))},h)),h.j=_}function yS(h,_){const L=new _r;if(d.Image){const K=new Image;K.onload=T(en,L,"TestLoadImage: loaded",!0,_,K),K.onerror=T(en,L,"TestLoadImage: error",!1,_,K),K.onabort=T(en,L,"TestLoadImage: abort",!1,_,K),K.ontimeout=T(en,L,"TestLoadImage: timeout",!1,_,K),d.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=h}else _(!1)}function bS(h,_){const L=new _r,K=new AbortController,me=setTimeout(()=>{K.abort(),en(L,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:K.signal}).then(ye=>{clearTimeout(me),ye.ok?en(L,"TestPingServer: ok",!0,_):en(L,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(me),en(L,"TestPingServer: error",!1,_)})}function en(h,_,L,K,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),K(L)}catch{}}function vS(){this.g=new ke}function jS(h,_,L){const K=L||"";try{$y(h,function(me,ye){let Fe=me;m(me)&&(Fe=Ft(me)),_.push(K+ye+"="+encodeURIComponent(Fe))})}catch(me){throw _.push(K+"type="+encodeURIComponent("_badmap")),me}}function wd(h){this.l=h.Ub||null,this.j=h.eb||!1}g(wd,Me),wd.prototype.g=function(){return new kd(this.l,this.j)},wd.prototype.i=function(h){return function(){return h}}({});function kd(h,_){de.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(kd,de),s=kd.prototype,s.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ul(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dl(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ul(this)),this.g&&(this.readyState=3,ul(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qy(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qy(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?dl(this):ul(this),this.readyState==3&&Qy(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,dl(this))},s.Qa=function(h){this.g&&(this.response=h,dl(this))},s.ga=function(){this.g&&dl(this)};function dl(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ul(h)}s.setRequestHeader=function(h,_){this.u.append(h,_)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var L=_.next();!L.done;)L=L.value,h.push(L[0]+": "+L[1]),L=_.next();return h.join(`\r
`)};function ul(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(kd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ky(h){let _="";return Y(h,function(L,K){_+=K,_+=":",_+=L,_+=`\r
`}),_}function Wm(h,_,L){e:{for(K in L){var K=!1;break e}K=!0}K||(L=Ky(L),typeof h=="string"?L!=null&&encodeURIComponent(String(L)):Xt(h,_,L))}function us(h){de.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(us,de);var NS=/^https?$/i,wS=["POST","PUT"];s=us.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,_,L,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zi.g(),this.v=this.o?tt(this.o):tt(zi),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ye){Yy(this,ye);return}if(h=L||"",L=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var me in K)L.set(me,K[me]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const ye of K.keys())L.set(ye,K.get(ye));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(L.keys()).find(ye=>ye.toLowerCase()=="content-type"),me=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(wS,_,void 0))||K||me||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Fe]of L)this.g.setRequestHeader(ye,Fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zy(this),this.u=!0,this.g.send(h),this.u=!1}catch(ye){Yy(this,ye)}};function Yy(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Xy(h),Id(h)}function Xy(h){h.A||(h.A=!0,we(h,"complete"),we(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,we(this,"complete"),we(this,"abort"),Id(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Id(this,!0)),us.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Jy(this):this.bb())},s.bb=function(){Jy(this)};function Jy(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Sa(h)!=4||h.Z()!=2)){if(h.u&&Sa(h)==4)xt(h.Ea,0,h);else if(we(h,"readystatechange"),Sa(h)==4){h.h=!1;try{const Fe=h.Z();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var L;if(!(L=_)){var K;if(K=Fe===0){var me=String(h.D).match(Fy)[1]||null;!me&&d.self&&d.self.location&&(me=d.self.location.protocol.slice(0,-1)),K=!NS.test(me?me.toLowerCase():"")}L=K}if(L)we(h,"complete"),we(h,"success");else{h.m=6;try{var ye=2<Sa(h)?h.g.statusText:""}catch{ye=""}h.l=ye+" ["+h.Z()+"]",Xy(h)}}finally{Id(h)}}}}function Id(h,_){if(h.g){Zy(h);const L=h.g,K=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||we(h,"ready");try{L.onreadystatechange=K}catch{}}}function Zy(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function Sa(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<Sa(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),cs(_)}};function eb(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function kS(h){const _={};h=(h.g&&2<=Sa(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<h.length;K++){if($(h[K]))continue;var L=J(h[K]);const me=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const ye=_[me]||[];_[me]=ye,ye.push(L)}V(_,function(K){return K.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xl(h,_,L){return L&&L.internalChannelParams&&L.internalChannelParams[h]||_}function tb(h){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xl("baseRetryDelayMs",5e3,h),this.cb=xl("retryDelaySeedMs",1e4,h),this.Wa=xl("forwardChannelMaxRetries",2,h),this.wa=xl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Oy(h&&h.concurrentRequestLimit),this.Da=new vS,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=tb.prototype,s.la=8,s.G=1,s.connect=function(h,_,L,K){Yt(0),this.W=h,this.H=_||{},L&&K!==void 0&&(this.H.OSID=L,this.H.OAID=K),this.F=this.X,this.I=db(this,null,this.W),Pd(this)};function Hm(h){if(sb(h),h.G==3){var _=h.U++,L=Ia(h.I);if(Xt(L,"SID",h.K),Xt(L,"RID",_),Xt(L,"TYPE","terminate"),ml(h,L),_=new Ur(h,h.j,_),_.L=2,_.v=Nd(Ia(L)),L=!1,d.navigator&&d.navigator.sendBeacon)try{L=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!L&&d.Image&&(new Image().src=_.v,L=!0),L||(_.g=ub(_.j,null),_.g.ea(_.v)),_.F=Date.now(),bd(_)}cb(h)}function Sd(h){h.g&&(Gm(h),h.g.cancel(),h.g=null)}function sb(h){Sd(h),h.u&&(d.clearTimeout(h.u),h.u=null),Ed(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Pd(h){if(!Ly(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ne||pe(),ue||(Ne(),ue=!0),je.add(_,h),h.B=0}}function IS(h,_){return Vy(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=or(N(h.Ga,h,_),lb(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const me=new Ur(this,this.j,h);let ye=this.o;if(this.S&&(ye?(ye=x(ye),W(ye,this.S)):ye=this.S),this.m!==null||this.O||(me.H=ye,ye=null),this.P)e:{for(var _=0,L=0;L<this.i.length;L++){t:{var K=this.i[L];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(_+=K,4096<_){_=L;break e}if(_===4096||L===this.i.length-1){_=L+1;break e}}_=1e3}else _=1e3;_=ab(this,me,_),L=Ia(this.I),Xt(L,"RID",h),Xt(L,"CVER",22),this.D&&Xt(L,"X-HTTP-Session-Id",this.D),ml(this,L),ye&&(this.O?_="headers="+encodeURIComponent(String(Ky(ye)))+"&"+_:this.m&&Wm(L,this.m,ye)),Um(this.h,me),this.Ua&&Xt(L,"TYPE","init"),this.P?(Xt(L,"$req",_),Xt(L,"SID","null"),me.T=!0,$i(me,L,null)):$i(me,L,_),this.G=2}}else this.G==3&&(h?rb(this,h):this.i.length==0||Ly(this.h)||rb(this))};function rb(h,_){var L;_?L=_.l:L=h.U++;const K=Ia(h.I);Xt(K,"SID",h.K),Xt(K,"RID",L),Xt(K,"AID",h.T),ml(h,K),h.m&&h.o&&Wm(K,h.m,h.o),L=new Ur(h,h.j,L,h.B+1),h.m===null&&(L.H=h.o),_&&(h.i=_.D.concat(h.i)),_=ab(h,L,1e3),L.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Um(h.h,L),$i(L,K,_)}function ml(h,_){h.H&&Y(h.H,function(L,K){Xt(_,K,L)}),h.l&&$y({},function(L,K){Xt(_,K,L)})}function ab(h,_,L){L=Math.min(h.i.length,L);var K=h.l?N(h.l.Na,h.l,h):null;e:{var me=h.i;let ye=-1;for(;;){const Fe=["count="+L];ye==-1?0<L?(ye=me[0].g,Fe.push("ofs="+ye)):ye=0:Fe.push("ofs="+ye);let Wt=!0;for(let Es=0;Es<L;Es++){let Lt=me[Es].g;const zs=me[Es].map;if(Lt-=ye,0>Lt)ye=Math.max(0,me[Es].g-100),Wt=!1;else try{jS(zs,Fe,"req"+Lt+"_")}catch{K&&K(zs)}}if(Wt){K=Fe.join("&");break e}}}return h=h.i.splice(0,L),_.D=h,K}function nb(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ne||pe(),ue||(Ne(),ue=!0),je.add(_,h),h.v=0}}function qm(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=or(N(h.Fa,h),lb(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,ib(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=or(N(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Sd(this),ib(this))};function Gm(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function ib(h){h.g=new Ur(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Ia(h.qa);Xt(_,"RID","rpc"),Xt(_,"SID",h.K),Xt(_,"AID",h.T),Xt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xt(_,"TO",h.ja),Xt(_,"TYPE","xmlhttp"),ml(h,_),h.m&&h.o&&Wm(_,h.m,h.o),h.L&&(h.g.I=h.L);var L=h.g;h=h.ia,L.L=1,L.v=Nd(Ia(_)),L.m=null,L.P=!0,yd(L,h)}s.Za=function(){this.C!=null&&(this.C=null,Sd(this),qm(this),Yt(19))};function Ed(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ob(h,_){var L=null;if(h.g==_){Ed(h),Gm(h),h.g=null;var K=2}else if(Fm(h.h,_))L=_.D,zy(h.h,_),K=1;else return;if(h.G!=0){if(_.o)if(K==1){L=_.m?_.m.length:0,_=Date.now()-_.F;var me=h.B;K=ds(),we(K,new Ys(K,L)),Pd(h)}else nb(h);else if(me=_.s,me==3||me==0&&0<_.X||!(K==1&&IS(h,_)||K==2&&qm(h)))switch(L&&0<L.length&&(_=h.h,_.i=_.i.concat(L)),me){case 1:Zn(h,5);break;case 4:Zn(h,10);break;case 3:Zn(h,6);break;default:Zn(h,2)}}}function lb(h,_){let L=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(L*=2),L*_}function Zn(h,_){if(h.j.info("Error code "+_),_==2){var L=N(h.fb,h),K=h.Xa;const me=!K;K=new Jn(K||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||vd(K,"https"),Nd(K),me?yS(K.toString(),L):bS(K.toString(),L)}else Yt(2);h.G=0,h.l&&h.l.sa(_),cb(h),sb(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function cb(h){if(h.G=0,h.ka=[],h.l){const _=By(h.h);(_.length!=0||h.i.length!=0)&&(D(h.ka,_),D(h.ka,h.i),h.h.i.length=0,B(h.i),h.i.length=0),h.l.ra()}}function db(h,_,L){var K=L instanceof Jn?Ia(L):new Jn(L);if(K.g!="")_&&(K.g=_+"."+K.g),jd(K,K.s);else{var me=d.location;K=me.protocol,_=_?_+"."+me.hostname:me.hostname,me=+me.port;var ye=new Jn(null);K&&vd(ye,K),_&&(ye.g=_),me&&jd(ye,me),L&&(ye.l=L),K=ye}return L=h.D,_=h.ya,L&&_&&Xt(K,L,_),Xt(K,"VER",h.la),ml(h,K),K}function ub(h,_,L){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new us(new wd({eb:L})):new us(h.pa),_.Ha(h.J),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function xb(){}s=xb.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Cd(){}Cd.prototype.g=function(h,_){return new yr(h,_)};function yr(h,_){de.call(this),this.g=new tb(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!$(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!$(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ui(this)}g(yr,de),yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){Hm(this.g)},yr.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var L={};L.__data__=h,h=L}else this.u&&(L={},L.__data__=Ft(h),h=L);_.i.push(new lS(_.Ya++,h)),_.G==3&&Pd(_)},yr.prototype.N=function(){this.g.l=null,delete this.j,Hm(this.g),delete this.g,yr.aa.N.call(this)};function mb(h){Ut.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const L in _){h=L;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}g(mb,Ut);function hb(){zt.call(this),this.status=1}g(hb,zt);function Ui(h){this.g=h}g(Ui,xb),Ui.prototype.ua=function(){we(this.g,"a")},Ui.prototype.ta=function(h){we(this.g,new mb(h))},Ui.prototype.sa=function(h){we(this.g,new hb)},Ui.prototype.ra=function(){we(this.g,"b")},Cd.prototype.createWebChannel=Cd.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,R1=function(){return new Cd},A1=function(){return ds()},D1=pt,Xh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,vu=Vi,Kn.COMPLETE="complete",_1=Kn,at.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",de.prototype.listen=de.prototype.K,_l=at,us.prototype.listenOnce=us.prototype.L,us.prototype.getLastError=us.prototype.Ka,us.prototype.getLastErrorCode=us.prototype.Ba,us.prototype.getStatus=us.prototype.Z,us.prototype.getResponseJson=us.prototype.Oa,us.prototype.getResponseText=us.prototype.oa,us.prototype.send=us.prototype.ea,us.prototype.setWithCredentials=us.prototype.Ha,T1=us}).apply(typeof Kd<"u"?Kd:typeof self<"u"?self:typeof window<"u"?window:{});const Uv="@firebase/firestore",Wv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Hs.UNAUTHENTICATED=new Hs(null),Hs.GOOGLE_CREDENTIALS=new Hs("google-credentials-uid"),Hs.FIRST_PARTY=new Hs("first-party-uid"),Hs.MOCK_USER=new Hs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new im("@firebase/firestore");function qi(){return Ni.logLevel}function Xe(s,...t){if(Ni.logLevel<=Ct.DEBUG){const r=t.map(Uf);Ni.debug(`Firestore (${Ko}): ${s}`,...r)}}function Fa(s,...t){if(Ni.logLevel<=Ct.ERROR){const r=t.map(Uf);Ni.error(`Firestore (${Ko}): ${s}`,...r)}}function Ao(s,...t){if(Ni.logLevel<=Ct.WARN){const r=t.map(Uf);Ni.warn(`Firestore (${Ko}): ${s}`,...r)}}function Uf(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(s="Unexpected state"){const t=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+s;throw Fa(t),new Error(t)}function At(s,t){s||ht()}function vt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends Fr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class h_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Hs.UNAUTHENTICATED))}shutdown(){}}class p_{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class f_{constructor(t){this.t=t,this.currentUser=Hs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){At(this.o===void 0);let a=this.i;const n=u=>this.i!==a?(a=this.i,r(u)):Promise.resolve();let l=new ua;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ua,t.enqueueRetryable(()=>n(this.currentUser))};const o=()=>{const u=l;t.enqueueRetryable(async()=>{await u.promise,await n(this.currentUser)})},d=u=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>d(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ua)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(At(typeof a.accessToken=="string"),new M1(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return At(t===null||typeof t=="string"),new Hs(t)}}class g_{constructor(t,r,a){this.l=t,this.h=r,this.P=a,this.type="FirstParty",this.user=Hs.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class y_{constructor(t,r,a){this.l=t,this.h=r,this.P=a}getToken(){return Promise.resolve(new g_(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Hs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b_{constructor(t,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,jr(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,r){At(this.o===void 0);const a=l=>{l.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const o=l.token!==this.R;return this.R=l.token,Xe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>a(l))};const n=l=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>n(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?n(l):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Hv(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(At(typeof r.token=="string"),this.R=r.token,new Hv(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const n=v_(40);for(let l=0;l<n.length;++l)a.length<20&&n[l]<r&&(a+=t.charAt(n[l]%62))}return a}}function kt(s,t){return s<t?-1:s>t?1:0}function Jh(s,t){let r=0;for(;r<s.length&&r<t.length;){const a=s.codePointAt(r),n=t.codePointAt(r);if(a!==n){if(a<128&&n<128)return kt(a,n);{const l=O1(),o=j_(l.encode(qv(s,r)),l.encode(qv(t,r)));return o!==0?o:kt(a,n)}}r+=a>65535?2:1}return kt(s.length,t.length)}function qv(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function j_(s,t){for(let r=0;r<s.length&&r<t.length;++r)if(s[r]!==t[r])return kt(s[r],t[r]);return kt(s.length,t.length)}function Ro(s,t,r){return s.length===t.length&&s.every((a,n)=>r(a,t[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Qv=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(t){return qt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*Qv);return new qt(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ke(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ke(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<Gv)throw new Ke(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ke(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(t){return this.seconds===t.seconds?kt(this.nanoseconds,t.nanoseconds):kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Gv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{static fromTimestamp(t){return new gt(t)}static min(){return new gt(new qt(0,0))}static max(){return new gt(new qt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="__name__";class oa{constructor(t,r,a){r===void 0?r=0:r>t.length&&ht(),a===void 0?a=t.length-r:a>t.length-r&&ht(),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return oa.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof oa?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let n=0;n<a;n++){const l=oa.compareSegments(t.get(n),r.get(n));if(l!==0)return l}return kt(t.length,r.length)}static compareSegments(t,r){const a=oa.isNumericId(t),n=oa.isNumericId(r);return a&&!n?-1:!a&&n?1:a&&n?oa.extractNumericId(t).compare(oa.extractNumericId(r)):Jh(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Pn.fromString(t.substring(4,t.length-2))}}class Ht extends oa{construct(t,r,a){return new Ht(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ke(Ie.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(n=>n.length>0))}return new Ht(r)}static emptyPath(){return new Ht([])}}const N_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ds extends oa{construct(t,r,a){return new Ds(t,r,a)}static isValidIdentifier(t){return N_.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ds.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kv}static keyField(){return new Ds([Kv])}static fromServerFormat(t){const r=[];let a="",n=0;const l=()=>{if(a.length===0)throw new Ke(Ie.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let o=!1;for(;n<t.length;){const d=t[n];if(d==="\\"){if(n+1===t.length)throw new Ke(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[n+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ke(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=u,n+=2}else d==="`"?(o=!o,n++):d!=="."||o?(a+=d,n++):(l(),n++)}if(l(),o)throw new Ke(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ds(r)}static emptyPath(){return new Ds([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(Ht.fromString(t))}static fromName(t){return new mt(Ht.fromString(t).popFirst(5))}static empty(){return new mt(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ht.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Ht.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new Ht(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=-1;function w_(s,t){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,n=gt.fromTimestamp(a===1e9?new qt(r+1,0):new qt(r,a));return new An(n,mt.empty(),t)}function k_(s){return new An(s.readTime,s.key,Ic)}class An{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new An(gt.min(),mt.empty(),Ic)}static max(){return new An(gt.max(),mt.empty(),Ic)}}function I_(s,t){let r=s.readTime.compareTo(t.readTime);return r!==0?r:(r=mt.comparator(s.documentKey,t.documentKey),r!==0?r:kt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(s){if(s.code!==Ie.FAILED_PRECONDITION||s.message!==S_)throw s;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ce((a,n)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(a,n)},this.catchCallback=l=>{this.wrapFailure(r,l).next(a,n)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ce?r:Ce.resolve(r)}catch(r){return Ce.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ce.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ce.reject(r)}static resolve(t){return new Ce((r,a)=>{r(t)})}static reject(t){return new Ce((r,a)=>{a(t)})}static waitFor(t){return new Ce((r,a)=>{let n=0,l=0,o=!1;t.forEach(d=>{++n,d.next(()=>{++l,o&&l===n&&r()},u=>a(u))}),o=!0,l===n&&r()})}static or(t){let r=Ce.resolve(!1);for(const a of t)r=r.next(n=>n?Ce.resolve(n):a());return r}static forEach(t,r){const a=[];return t.forEach((n,l)=>{a.push(r.call(this,n,l))}),this.waitFor(a)}static mapArray(t,r){return new Ce((a,n)=>{const l=t.length,o=new Array(l);let d=0;for(let u=0;u<l;u++){const m=u;r(t[m]).next(y=>{o[m]=y,++d,d===l&&a(o)},y=>n(y))}})}static doWhile(t,r){return new Ce((a,n)=>{const l=()=>{t()===!0?r().next(()=>{l()},n):a()};l()})}}function E_(s){const t=s.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Xo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.oe(a),this._e=a=>r.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}lm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=-1;function Jc(s){return s==null}function lx(s){return s===0&&1/s==-1/0}function C_(s){return typeof s=="number"&&Number.isInteger(s)&&!lx(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="";function T_(s){let t="";for(let r=0;r<s.length;r++)t.length>0&&(t=Yv(t)),t=__(s.get(r),t);return Yv(t)}function __(s,t){let r=t;const a=s.length;for(let n=0;n<a;n++){const l=s.charAt(n);switch(l){case"\0":r+="";break;case V1:r+="";break;default:r+=l}}return r}function Yv(s){return s+V1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(s){let t=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t++;return t}function Hn(s,t){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t(r,s[r])}function z1(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,r){this.comparator=t,this.root=r||_s.EMPTY}insert(t,r){return new ls(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,_s.BLACK,null,null))}remove(t){return new ls(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_s.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const n=this.comparator(t,a.key);if(n===0)return r+a.left.size;n<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yd(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yd(this.root,t,this.comparator,!0)}}class Yd{constructor(t,r,a,n){this.isReverse=n,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=r?a(t.key,r):1,r&&n&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _s{constructor(t,r,a,n,l){this.key=t,this.value=r,this.color=a??_s.RED,this.left=n??_s.EMPTY,this.right=l??_s.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,n,l){return new _s(t??this.key,r??this.value,a??this.color,n??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let n=this;const l=a(t,n.key);return n=l<0?n.copy(null,null,null,n.left.insert(t,r,a),null):l===0?n.copy(null,r,null,null,null):n.copy(null,null,null,null,n.right.insert(t,r,a)),n.fixUp()}removeMin(){if(this.left.isEmpty())return _s.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,n=this;if(r(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,r),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),r(t,n.key)===0){if(n.right.isEmpty())return _s.EMPTY;a=n.right.min(),n=n.copy(a.key,a.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,r))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_s.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const t=this.left.check();if(t!==this.right.check())throw ht();return t+(this.isRed()?0:1)}}_s.EMPTY=null,_s.RED=!0,_s.BLACK=!1;_s.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(t,r,a,n,l){return this}insert(t,r,a){return new _s(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(t){this.comparator=t,this.data=new ls(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const n=a.getNext();if(this.comparator(n.key,t[1])>=0)return;r(n.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(t){return new Jv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof ws)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const n=r.getNext().key,l=a.getNext().key;if(this.comparator(n,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new ws(this.comparator);return r.data=t,r}}class Jv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this.fields=t,t.sort(Ds.comparator)}static empty(){return new kr([])}unionWith(t){let r=new ws(Ds.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new kr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Ro(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(n){try{return atob(n)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new B1("Invalid base64 string: "+l):l}}(t);return new Vs(r)}static fromUint8Array(t){const r=function(n){let l="";for(let o=0;o<n.length;++o)l+=String.fromCharCode(n[o]);return l}(t);return new Vs(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Vs.EMPTY_BYTE_STRING=new Vs("");const D_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(s){if(At(!!s),typeof s=="string"){let t=0;const r=D_.exec(s);if(At(!!r),r[1]){let n=r[1];n=(n+"000000000").substr(0,9),t=Number(n)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:ps(s.seconds),nanos:ps(s.nanos)}}function ps(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Mn(s){return typeof s=="string"?Vs.fromBase64String(s):Vs.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="server_timestamp",F1="__type__",U1="__previous_value__",W1="__local_write_time__";function Hf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[F1])===null||r===void 0?void 0:r.stringValue)===$1}function cm(s){const t=s.mapValue.fields[U1];return Hf(t)?cm(t):t}function Sc(s){const t=Rn(s.mapValue.fields[W1].timestampValue);return new qt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(t,r,a,n,l,o,d,u,m){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=n,this.ssl=l,this.forceLongPolling=o,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=m}}const cx="(default)";class Pc{constructor(t,r){this.projectId=t,this.database=r||cx}static empty(){return new Pc("","")}get isDefaultDatabase(){return this.database===cx}isEqual(t){return t instanceof Pc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="__type__",q1="__max__",Xd={mapValue:{fields:{__type__:{stringValue:q1}}}},G1="__vector__",dx="value";function On(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Hf(s)?4:M_(s)?9007199254740991:R_(s)?10:11:ht()}function ba(s,t){if(s===t)return!0;const r=On(s);if(r!==On(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Sc(s).isEqual(Sc(t));case 3:return function(n,l){if(typeof n.timestampValue=="string"&&typeof l.timestampValue=="string"&&n.timestampValue.length===l.timestampValue.length)return n.timestampValue===l.timestampValue;const o=Rn(n.timestampValue),d=Rn(l.timestampValue);return o.seconds===d.seconds&&o.nanos===d.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(n,l){return Mn(n.bytesValue).isEqual(Mn(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(n,l){return ps(n.geoPointValue.latitude)===ps(l.geoPointValue.latitude)&&ps(n.geoPointValue.longitude)===ps(l.geoPointValue.longitude)}(s,t);case 2:return function(n,l){if("integerValue"in n&&"integerValue"in l)return ps(n.integerValue)===ps(l.integerValue);if("doubleValue"in n&&"doubleValue"in l){const o=ps(n.doubleValue),d=ps(l.doubleValue);return o===d?lx(o)===lx(d):isNaN(o)&&isNaN(d)}return!1}(s,t);case 9:return Ro(s.arrayValue.values||[],t.arrayValue.values||[],ba);case 10:case 11:return function(n,l){const o=n.mapValue.fields||{},d=l.mapValue.fields||{};if(Xv(o)!==Xv(d))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(d[u]===void 0||!ba(o[u],d[u])))return!1;return!0}(s,t);default:return ht()}}function Ec(s,t){return(s.values||[]).find(r=>ba(r,t))!==void 0}function Mo(s,t){if(s===t)return 0;const r=On(s),a=On(t);if(r!==a)return kt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return kt(s.booleanValue,t.booleanValue);case 2:return function(l,o){const d=ps(l.integerValue||l.doubleValue),u=ps(o.integerValue||o.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1}(s,t);case 3:return Zv(s.timestampValue,t.timestampValue);case 4:return Zv(Sc(s),Sc(t));case 5:return Jh(s.stringValue,t.stringValue);case 6:return function(l,o){const d=Mn(l),u=Mn(o);return d.compareTo(u)}(s.bytesValue,t.bytesValue);case 7:return function(l,o){const d=l.split("/"),u=o.split("/");for(let m=0;m<d.length&&m<u.length;m++){const y=kt(d[m],u[m]);if(y!==0)return y}return kt(d.length,u.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,o){const d=kt(ps(l.latitude),ps(o.latitude));return d!==0?d:kt(ps(l.longitude),ps(o.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return ej(s.arrayValue,t.arrayValue);case 10:return function(l,o){var d,u,m,y;const j=l.fields||{},N=o.fields||{},T=(d=j[dx])===null||d===void 0?void 0:d.arrayValue,g=(u=N[dx])===null||u===void 0?void 0:u.arrayValue,B=kt(((m=T==null?void 0:T.values)===null||m===void 0?void 0:m.length)||0,((y=g==null?void 0:g.values)===null||y===void 0?void 0:y.length)||0);return B!==0?B:ej(T,g)}(s.mapValue,t.mapValue);case 11:return function(l,o){if(l===Xd.mapValue&&o===Xd.mapValue)return 0;if(l===Xd.mapValue)return 1;if(o===Xd.mapValue)return-1;const d=l.fields||{},u=Object.keys(d),m=o.fields||{},y=Object.keys(m);u.sort(),y.sort();for(let j=0;j<u.length&&j<y.length;++j){const N=Jh(u[j],y[j]);if(N!==0)return N;const T=Mo(d[u[j]],m[y[j]]);if(T!==0)return T}return kt(u.length,y.length)}(s.mapValue,t.mapValue);default:throw ht()}}function Zv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return kt(s,t);const r=Rn(s),a=Rn(t),n=kt(r.seconds,a.seconds);return n!==0?n:kt(r.nanos,a.nanos)}function ej(s,t){const r=s.values||[],a=t.values||[];for(let n=0;n<r.length&&n<a.length;++n){const l=Mo(r[n],a[n]);if(l)return l}return kt(r.length,a.length)}function Oo(s){return Zh(s)}function Zh(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(r){const a=Rn(r);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(r){return Mn(r).toBase64()}(s.bytesValue):"referenceValue"in s?function(r){return mt.fromName(r).toString()}(s.referenceValue):"geoPointValue"in s?function(r){return`geo(${r.latitude},${r.longitude})`}(s.geoPointValue):"arrayValue"in s?function(r){let a="[",n=!0;for(const l of r.values||[])n?n=!1:a+=",",a+=Zh(l);return a+"]"}(s.arrayValue):"mapValue"in s?function(r){const a=Object.keys(r.fields||{}).sort();let n="{",l=!0;for(const o of a)l?l=!1:n+=",",n+=`${o}:${Zh(r.fields[o])}`;return n+"}"}(s.mapValue):ht()}function ju(s){switch(On(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=cm(s);return t?16+ju(t):16;case 5:return 2*s.stringValue.length;case 6:return Mn(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((n,l)=>n+ju(l),0)}(s.arrayValue);case 10:case 11:return function(a){let n=0;return Hn(a.fields,(l,o)=>{n+=l.length+ju(o)}),n}(s.mapValue);default:throw ht()}}function tj(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function ep(s){return!!s&&"integerValue"in s}function qf(s){return!!s&&"arrayValue"in s}function sj(s){return!!s&&"nullValue"in s}function rj(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Nu(s){return!!s&&"mapValue"in s}function R_(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[H1])===null||r===void 0?void 0:r.stringValue)===G1}function ql(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return Hn(s.mapValue.fields,(r,a)=>t.mapValue.fields[r]=ql(a)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ql(s.arrayValue.values[r]);return t}return Object.assign({},s)}function M_(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===q1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t){this.value=t}static empty(){return new Js({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!Nu(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=ql(r)}setAll(t){let r=Ds.emptyPath(),a={},n=[];t.forEach((o,d)=>{if(!r.isImmediateParentOf(d)){const u=this.getFieldsMap(r);this.applyChanges(u,a,n),a={},n=[],r=d.popLast()}o?a[d.lastSegment()]=ql(o):n.push(d.lastSegment())});const l=this.getFieldsMap(r);this.applyChanges(l,a,n)}delete(t){const r=this.field(t.popLast());Nu(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return ba(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let n=r.mapValue.fields[t.get(a)];Nu(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=n),r=n}return r.mapValue.fields}applyChanges(t,r,a){Hn(r,(n,l)=>t[n]=l);for(const n of a)delete t[n]}clone(){return new Js(ql(this.value))}}function Q1(s){const t=[];return Hn(s.fields,(r,a)=>{const n=new Ds([r]);if(Nu(a)){const l=Q1(a.mapValue).fields;if(l.length===0)t.push(n);else for(const o of l)t.push(n.child(o))}else t.push(n)}),new kr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,r,a,n,l,o,d){this.key=t,this.documentType=r,this.version=a,this.readTime=n,this.createTime=l,this.data=o,this.documentState=d}static newInvalidDocument(t){return new Ss(t,0,gt.min(),gt.min(),gt.min(),Js.empty(),0)}static newFoundDocument(t,r,a,n){return new Ss(t,1,r,gt.min(),a,n,0)}static newNoDocument(t,r){return new Ss(t,2,r,gt.min(),gt.min(),Js.empty(),0)}static newUnknownDocument(t,r){return new Ss(t,3,r,gt.min(),gt.min(),Js.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Js.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Js.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ss&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ss(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(t,r){this.position=t,this.inclusive=r}}function aj(s,t,r){let a=0;for(let n=0;n<s.position.length;n++){const l=t[n],o=s.position[n];if(l.field.isKeyField()?a=mt.comparator(mt.fromName(o.referenceValue),r.key):a=Mo(o,r.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function nj(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!ba(s.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,r="asc"){this.field=t,this.dir=r}}function O_(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{}class vs extends K1{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new V_(t,r,a):r==="array-contains"?new $_(t,a):r==="in"?new F_(t,a):r==="not-in"?new U_(t,a):r==="array-contains-any"?new W_(t,a):new vs(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new z_(t,a):new B_(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Mo(r,this.value)):r!==null&&On(this.value)===On(r)&&this.matchesComparison(Mo(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends K1{constructor(t,r){super(),this.filters=t,this.op=r,this.ce=null}static create(t,r){return new sa(t,r)}matches(t){return Y1(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Y1(s){return s.op==="and"}function X1(s){return L_(s)&&Y1(s)}function L_(s){for(const t of s.filters)if(t instanceof sa)return!1;return!0}function tp(s){if(s instanceof vs)return s.field.canonicalString()+s.op.toString()+Oo(s.value);if(X1(s))return s.filters.map(t=>tp(t)).join(",");{const t=s.filters.map(r=>tp(r)).join(",");return`${s.op}(${t})`}}function J1(s,t){return s instanceof vs?function(a,n){return n instanceof vs&&a.op===n.op&&a.field.isEqual(n.field)&&ba(a.value,n.value)}(s,t):s instanceof sa?function(a,n){return n instanceof sa&&a.op===n.op&&a.filters.length===n.filters.length?a.filters.reduce((l,o,d)=>l&&J1(o,n.filters[d]),!0):!1}(s,t):void ht()}function Z1(s){return s instanceof vs?function(r){return`${r.field.canonicalString()} ${r.op} ${Oo(r.value)}`}(s):s instanceof sa?function(r){return r.op.toString()+" {"+r.getFilters().map(Z1).join(" ,")+"}"}(s):"Filter"}class V_ extends vs{constructor(t,r,a){super(t,r,a),this.key=mt.fromName(a.referenceValue)}matches(t){const r=mt.comparator(t.key,this.key);return this.matchesComparison(r)}}class z_ extends vs{constructor(t,r){super(t,"in",r),this.keys=ek("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class B_ extends vs{constructor(t,r){super(t,"not-in",r),this.keys=ek("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function ek(s,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(a=>mt.fromName(a.referenceValue))}class $_ extends vs{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return qf(r)&&Ec(r.arrayValue,this.value)}}class F_ extends vs{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Ec(this.value.arrayValue,r)}}class U_ extends vs{constructor(t,r){super(t,"not-in",r)}matches(t){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Ec(this.value.arrayValue,r)}}class W_ extends vs{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!qf(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Ec(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(t,r=null,a=[],n=[],l=null,o=null,d=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=n,this.limit=l,this.startAt=o,this.endAt=d,this.le=null}}function ij(s,t=null,r=[],a=[],n=null,l=null,o=null){return new H_(s,t,r,a,n,l,o)}function Gf(s){const t=vt(s);if(t.le===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>tp(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(l){return l.field.canonicalString()+l.dir}(a)).join(","),Jc(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Oo(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Oo(a)).join(",")),t.le=r}return t.le}function Qf(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<s.orderBy.length;r++)if(!O_(s.orderBy[r],t.orderBy[r]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let r=0;r<s.filters.length;r++)if(!J1(s.filters[r],t.filters[r]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!nj(s.startAt,t.startAt)&&nj(s.endAt,t.endAt)}function sp(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(t,r=null,a=[],n=[],l=null,o="F",d=null,u=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=n,this.limit=l,this.limitType=o,this.startAt=d,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function q_(s,t,r,a,n,l,o,d){return new Jo(s,t,r,a,n,l,o,d)}function dm(s){return new Jo(s)}function oj(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function tk(s){return s.collectionGroup!==null}function Gl(s){const t=vt(s);if(t.he===null){t.he=[];const r=new Set;for(const l of t.explicitOrderBy)t.he.push(l),r.add(l.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let d=new ws(Ds.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(t).forEach(l=>{r.has(l.canonicalString())||l.isKeyField()||t.he.push(new Cc(l,a))}),r.has(Ds.keyField().canonicalString())||t.he.push(new Cc(Ds.keyField(),a))}return t.he}function xa(s){const t=vt(s);return t.Pe||(t.Pe=G_(t,Gl(s))),t.Pe}function G_(s,t){if(s.limitType==="F")return ij(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(n=>{const l=n.dir==="desc"?"asc":"desc";return new Cc(n.field,l)});const r=s.endAt?new ux(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new ux(s.startAt.position,s.startAt.inclusive):null;return ij(s.path,s.collectionGroup,t,s.filters,s.limit,r,a)}}function rp(s,t){const r=s.filters.concat([t]);return new Jo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),r,s.limit,s.limitType,s.startAt,s.endAt)}function xx(s,t,r){return new Jo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,r,s.startAt,s.endAt)}function um(s,t){return Qf(xa(s),xa(t))&&s.limitType===t.limitType}function sk(s){return`${Gf(xa(s))}|lt:${s.limitType}`}function Gi(s){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(n=>Z1(n)).join(", ")}]`),Jc(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(n=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(n)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(n=>Oo(n)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(n=>Oo(n)).join(",")),`Target(${a})`}(xa(s))}; limitType=${s.limitType})`}function xm(s,t){return t.isFoundDocument()&&function(a,n){const l=n.key.path;return a.collectionGroup!==null?n.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):mt.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)}(s,t)&&function(a,n){for(const l of Gl(a))if(!l.field.isKeyField()&&n.data.field(l.field)===null)return!1;return!0}(s,t)&&function(a,n){for(const l of a.filters)if(!l.matches(n))return!1;return!0}(s,t)&&function(a,n){return!(a.startAt&&!function(o,d,u){const m=aj(o,d,u);return o.inclusive?m<=0:m<0}(a.startAt,Gl(a),n)||a.endAt&&!function(o,d,u){const m=aj(o,d,u);return o.inclusive?m>=0:m>0}(a.endAt,Gl(a),n))}(s,t)}function Q_(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function rk(s){return(t,r)=>{let a=!1;for(const n of Gl(s)){const l=K_(n,t,r);if(l!==0)return l;a=a||n.field.isKeyField()}return 0}}function K_(s,t,r){const a=s.field.isKeyField()?mt.comparator(t.key,r.key):function(l,o,d){const u=o.data.field(l),m=d.data.field(l);return u!==null&&m!==null?Mo(u,m):ht()}(s.field,t,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return ht()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[n,l]of a)if(this.equalsFn(n,t))return l}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),n=this.inner[a];if(n===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let l=0;l<n.length;l++)if(this.equalsFn(n[l][0],t))return void(n[l]=[t,r]);n.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let n=0;n<a.length;n++)if(this.equalsFn(a[n][0],t))return a.length===1?delete this.inner[r]:a.splice(n,1),this.innerSize--,!0;return!1}forEach(t){Hn(this.inner,(r,a)=>{for(const[n,l]of a)t(n,l)})}isEmpty(){return z1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new ls(mt.comparator);function Ua(){return Y_}const ak=new ls(mt.comparator);function Dl(...s){let t=ak;for(const r of s)t=t.insert(r.key,r);return t}function nk(s){let t=ak;return s.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function li(){return Ql()}function ik(){return Ql()}function Ql(){return new Ri(s=>s.toString(),(s,t)=>s.isEqual(t))}const X_=new ls(mt.comparator),J_=new ws(mt.comparator);function Tt(...s){let t=J_;for(const r of s)t=t.add(r);return t}const Z_=new ws(kt);function eD(){return Z_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lx(t)?"-0":t}}function ok(s){return{integerValue:""+s}}function lk(s,t){return C_(t)?ok(t):Kf(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this._=void 0}}function tD(s,t,r){return s instanceof Tc?function(n,l){const o={fields:{[F1]:{stringValue:$1},[W1]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return l&&Hf(l)&&(l=cm(l)),l&&(o.fields[U1]=l),{mapValue:o}}(r,t):s instanceof _c?dk(s,t):s instanceof Dc?uk(s,t):function(n,l){const o=ck(n,l),d=lj(o)+lj(n.Ie);return ep(o)&&ep(n.Ie)?ok(d):Kf(n.serializer,d)}(s,t)}function sD(s,t,r){return s instanceof _c?dk(s,t):s instanceof Dc?uk(s,t):r}function ck(s,t){return s instanceof Ac?function(a){return ep(a)||function(l){return!!l&&"doubleValue"in l}(a)}(t)?t:{integerValue:0}:null}class Tc extends mm{}class _c extends mm{constructor(t){super(),this.elements=t}}function dk(s,t){const r=xk(t);for(const a of s.elements)r.some(n=>ba(n,a))||r.push(a);return{arrayValue:{values:r}}}class Dc extends mm{constructor(t){super(),this.elements=t}}function uk(s,t){let r=xk(t);for(const a of s.elements)r=r.filter(n=>!ba(n,a));return{arrayValue:{values:r}}}class Ac extends mm{constructor(t,r){super(),this.serializer=t,this.Ie=r}}function lj(s){return ps(s.integerValue||s.doubleValue)}function xk(s){return qf(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(t,r){this.field=t,this.transform=r}}function rD(s,t){return s.field.isEqual(t.field)&&function(a,n){return a instanceof _c&&n instanceof _c||a instanceof Dc&&n instanceof Dc?Ro(a.elements,n.elements,ba):a instanceof Ac&&n instanceof Ac?ba(a.Ie,n.Ie):a instanceof Tc&&n instanceof Tc}(s.transform,t.transform)}class aD{constructor(t,r){this.version=t,this.transformResults=r}}class As{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new As}static exists(t){return new As(void 0,t)}static updateTime(t){return new As(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wu(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class hm{}function hk(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new pm(s.key,As.none()):new Zc(s.key,s.data,As.none());{const r=s.data,a=Js.empty();let n=new ws(Ds.comparator);for(let l of t.fields)if(!n.has(l)){let o=r.field(l);o===null&&l.length>1&&(l=l.popLast(),o=r.field(l)),o===null?a.delete(l):a.set(l,o),n=n.add(l)}return new qn(s.key,a,new kr(n.toArray()),As.none())}}function nD(s,t,r){s instanceof Zc?function(n,l,o){const d=n.value.clone(),u=dj(n.fieldTransforms,l,o.transformResults);d.setAll(u),l.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(s,t,r):s instanceof qn?function(n,l,o){if(!wu(n.precondition,l))return void l.convertToUnknownDocument(o.version);const d=dj(n.fieldTransforms,l,o.transformResults),u=l.data;u.setAll(pk(n)),u.setAll(d),l.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(s,t,r):function(n,l,o){l.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function Kl(s,t,r,a){return s instanceof Zc?function(l,o,d,u){if(!wu(l.precondition,o))return d;const m=l.value.clone(),y=uj(l.fieldTransforms,u,o);return m.setAll(y),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(s,t,r,a):s instanceof qn?function(l,o,d,u){if(!wu(l.precondition,o))return d;const m=uj(l.fieldTransforms,u,o),y=o.data;return y.setAll(pk(l)),y.setAll(m),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(j=>j.field))}(s,t,r,a):function(l,o,d){return wu(l.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):d}(s,t,r)}function iD(s,t){let r=null;for(const a of s.fieldTransforms){const n=t.data.field(a.field),l=ck(a.transform,n||null);l!=null&&(r===null&&(r=Js.empty()),r.set(a.field,l))}return r||null}function cj(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(a,n){return a===void 0&&n===void 0||!(!a||!n)&&Ro(a,n,(l,o)=>rD(l,o))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Zc extends hm{constructor(t,r,a,n=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class qn extends hm{constructor(t,r,a,n,l=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=n,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function pk(s){const t=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);t.set(r,a)}}),t}function dj(s,t,r){const a=new Map;At(s.length===r.length);for(let n=0;n<r.length;n++){const l=s[n],o=l.transform,d=t.data.field(l.field);a.set(l.field,sD(o,d,r[n]))}return a}function uj(s,t,r){const a=new Map;for(const n of s){const l=n.transform,o=r.data.field(n.field);a.set(n.field,tD(l,o,t))}return a}class pm extends hm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fk extends hm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(t,r,a,n){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=n}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let n=0;n<this.mutations.length;n++){const l=this.mutations[n];l.key.isEqual(t.key)&&nD(l,t,a[n])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=Kl(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=Kl(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=ik();return this.mutations.forEach(n=>{const l=t.get(n.key),o=l.overlayedDocument;let d=this.applyToLocalView(o,l.mutatedFields);d=r.has(n.key)?null:d;const u=hk(o,d);u!==null&&a.set(n.key,u),o.isValidDocument()||o.convertToNoDocument(gt.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Tt())}isEqual(t){return this.batchId===t.batchId&&Ro(this.mutations,t.mutations,(r,a)=>cj(r,a))&&Ro(this.baseMutations,t.baseMutations,(r,a)=>cj(r,a))}}class Yf{constructor(t,r,a,n){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=n}static from(t,r,a){At(t.mutations.length===a.length);let n=function(){return X_}();const l=t.mutations;for(let o=0;o<l.length;o++)n=n.insert(l[o].key,a[o].version);return new Yf(t,r,a,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys,Dt;function gk(s){switch(s){case Ie.OK:return ht();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return ht()}}function yk(s){if(s===void 0)return Fa("GRPC error has no .code"),Ie.UNKNOWN;switch(s){case ys.OK:return Ie.OK;case ys.CANCELLED:return Ie.CANCELLED;case ys.UNKNOWN:return Ie.UNKNOWN;case ys.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case ys.INTERNAL:return Ie.INTERNAL;case ys.UNAVAILABLE:return Ie.UNAVAILABLE;case ys.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case ys.NOT_FOUND:return Ie.NOT_FOUND;case ys.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case ys.ABORTED:return Ie.ABORTED;case ys.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case ys.DATA_LOSS:return Ie.DATA_LOSS;default:return ht()}}(Dt=ys||(ys={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new Pn([4294967295,4294967295],0);function xj(s){const t=O1().encode(s),r=new C1;return r.update(t),new Uint8Array(r.digest())}function mj(s){const t=new DataView(s.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),n=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Pn([r,a],0),new Pn([n,l],0)]}class Xf{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new Al(`Invalid padding: ${r}`);if(a<0)throw new Al(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new Al(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new Al(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*t.length-r,this.de=Pn.fromNumber(this.Ee)}Ae(t,r,a){let n=t.add(r.multiply(Pn.fromNumber(a)));return n.compare(dD)===1&&(n=new Pn([n.getBits(0),n.getBits(1)],0)),n.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const r=xj(t),[a,n]=mj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,n,l);if(!this.Re(o))return!1}return!0}static create(t,r,a){const n=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),o=new Xf(l,n,r);return a.forEach(d=>o.insert(d)),o}insert(t){if(this.Ee===0)return;const r=xj(t),[a,n]=mj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,n,l);this.Ve(o)}}Ve(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(t,r,a,n,l){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=n,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const n=new Map;return n.set(t,ed.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new fm(gt.min(),n,new ls(kt),Ua(),Tt())}}class ed{constructor(t,r,a,n,l){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=n,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new ed(a,r,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(t,r,a,n){this.me=t,this.removedTargetIds=r,this.key=a,this.fe=n}}class bk{constructor(t,r){this.targetId=t,this.ge=r}}class vk{constructor(t,r,a=Vs.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=n}}class hj{constructor(){this.pe=0,this.ye=pj(),this.we=Vs.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Tt(),r=Tt(),a=Tt();return this.ye.forEach((n,l)=>{switch(l){case 0:t=t.add(n);break;case 2:r=r.add(n);break;case 1:a=a.add(n);break;default:ht()}}),new ed(this.we,this.Se,t,r,a)}Me(){this.be=!1,this.ye=pj()}xe(t,r){this.be=!0,this.ye=this.ye.insert(t,r)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,At(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class uD{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Ua(),this.$e=Jd(),this.Ue=Jd(),this.Ke=new ls(kt)}We(t){for(const r of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(r,t.fe):this.ze(r,t.key,t.fe);for(const r of t.removedTargetIds)this.ze(r,t.key,t.fe)}je(t){this.forEachTarget(t,r=>{const a=this.He(r);switch(t.state){case 0:this.Je(r)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(r);break;case 3:this.Je(r)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),a.Ce(t.resumeToken));break;default:ht()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.qe.forEach((a,n)=>{this.Je(n)&&r(n)})}Ze(t){const r=t.targetId,a=t.ge.count,n=this.Xe(r);if(n){const l=n.target;if(sp(l))if(a===0){const o=new mt(l.path);this.ze(r,o,Ss.newNoDocument(o,gt.min()))}else At(a===1);else{const o=this.et(r);if(o!==a){const d=this.tt(t),u=d?this.nt(d,t,o):1;if(u!==0){this.Ye(r);const m=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,m)}}}}}tt(t){const r=t.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:n=0},hashCount:l=0}=r;let o,d;try{o=Mn(a).toUint8Array()}catch(u){if(u instanceof B1)return Ao("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new Xf(o,n,l)}catch(u){return Ao(u instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.Ee===0?null:d}nt(t,r,a){return r.ge.count===a-this.st(t,r.targetId)?0:2}st(t,r){const a=this.ke.getRemoteKeysForTarget(r);let n=0;return a.forEach(l=>{const o=this.ke.it(),d=`projects/${o.projectId}/databases/${o.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.ze(r,l,null),n++)}),n}ot(t){const r=new Map;this.qe.forEach((l,o)=>{const d=this.Xe(o);if(d){if(l.current&&sp(d.target)){const u=new mt(d.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,Ss.newNoDocument(u,t))}l.ve&&(r.set(o,l.Fe()),l.Me())}});let a=Tt();this.Ue.forEach((l,o)=>{let d=!0;o.forEachWhile(u=>{const m=this.Xe(u);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(a=a.add(l))}),this.Qe.forEach((l,o)=>o.setReadTime(t));const n=new fm(t,r,this.Ke,this.Qe,a);return this.Qe=Ua(),this.$e=Jd(),this.Ue=Jd(),this.Ke=new ls(kt),n}Ge(t,r){if(!this.Je(t))return;const a=this.ut(t,r.key)?2:0;this.He(t).xe(r.key,a),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(t)),this.Ue=this.Ue.insert(r.key,this.ct(r.key).add(t))}ze(t,r,a){if(!this.Je(t))return;const n=this.He(t);this.ut(t,r)?n.xe(r,1):n.Oe(r),this.Ue=this.Ue.insert(r,this.ct(r).delete(t)),this.Ue=this.Ue.insert(r,this.ct(r).add(t)),a&&(this.Qe=this.Qe.insert(r,a))}removeTarget(t){this.qe.delete(t)}et(t){const r=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let r=this.qe.get(t);return r||(r=new hj,this.qe.set(t,r)),r}ct(t){let r=this.Ue.get(t);return r||(r=new ws(kt),this.Ue=this.Ue.insert(t,r)),r}_t(t){let r=this.$e.get(t);return r||(r=new ws(kt),this.$e=this.$e.insert(t,r)),r}Je(t){const r=this.Xe(t)!==null;return r||Xe("WatchChangeAggregator","Detected inactive target",t),r}Xe(t){const r=this.qe.get(t);return r&&r.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new hj),this.ke.getRemoteKeysForTarget(t).forEach(r=>{this.ze(t,r,null)})}ut(t,r){return this.ke.getRemoteKeysForTarget(t).has(r)}}function Jd(){return new ls(mt.comparator)}function pj(){return new ls(mt.comparator)}const xD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),mD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),hD=(()=>({and:"AND",or:"OR"}))();class pD{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function ap(s,t){return s.useProto3Json||Jc(t)?t:{value:t}}function mx(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function jk(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function fD(s,t){return mx(s,t.toTimestamp())}function Sr(s){return At(!!s),gt.fromTimestamp(function(r){const a=Rn(r);return new qt(a.seconds,a.nanos)}(s))}function Jf(s,t){return np(s,t).canonicalString()}function np(s,t){const r=function(n){return new Ht(["projects",n.projectId,"databases",n.database])}(s).child("documents");return t===void 0?r:r.child(t)}function Nk(s){const t=Ht.fromString(s);return At(Ek(t)),t}function hx(s,t){return Jf(s.databaseId,t.path)}function Yl(s,t){const r=Nk(t);if(r.get(1)!==s.databaseId.projectId)throw new Ke(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Ke(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new mt(kk(r))}function wk(s,t){return Jf(s.databaseId,t)}function gD(s){const t=Nk(s);return t.length===4?Ht.emptyPath():kk(t)}function ip(s){return new Ht(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function kk(s){return At(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function fj(s,t,r){return{name:hx(s,t),fields:r.value.mapValue.fields}}function yD(s,t){return"found"in t?function(a,n){At(!!n.found),n.found.name,n.found.updateTime;const l=Yl(a,n.found.name),o=Sr(n.found.updateTime),d=n.found.createTime?Sr(n.found.createTime):gt.min(),u=new Js({mapValue:{fields:n.found.fields}});return Ss.newFoundDocument(l,o,d,u)}(s,t):"missing"in t?function(a,n){At(!!n.missing),At(!!n.readTime);const l=Yl(a,n.missing),o=Sr(n.readTime);return Ss.newNoDocument(l,o)}(s,t):ht()}function bD(s,t){let r;if("targetChange"in t){t.targetChange;const a=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ht()}(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(At(y===void 0||typeof y=="string"),Vs.fromBase64String(y||"")):(At(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Vs.fromUint8Array(y||new Uint8Array))}(s,t.targetChange.resumeToken),o=t.targetChange.cause,d=o&&function(m){const y=m.code===void 0?Ie.UNKNOWN:yk(m.code);return new Ke(y,m.message||"")}(o);r=new vk(a,n,l,d||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const n=Yl(s,a.document.name),l=Sr(a.document.updateTime),o=a.document.createTime?Sr(a.document.createTime):gt.min(),d=new Js({mapValue:{fields:a.document.fields}}),u=Ss.newFoundDocument(n,l,o,d),m=a.targetIds||[],y=a.removedTargetIds||[];r=new ku(m,y,u.key,u)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const n=Yl(s,a.document),l=a.readTime?Sr(a.readTime):gt.min(),o=Ss.newNoDocument(n,l),d=a.removedTargetIds||[];r=new ku([],d,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const n=Yl(s,a.document),l=a.removedTargetIds||[];r=new ku([],l,n,null)}else{if(!("filter"in t))return ht();{t.filter;const a=t.filter;a.targetId;const{count:n=0,unchangedNames:l}=a,o=new cD(n,l),d=a.targetId;r=new bk(d,o)}}return r}function Ik(s,t){let r;if(t instanceof Zc)r={update:fj(s,t.key,t.value)};else if(t instanceof pm)r={delete:hx(s,t.key)};else if(t instanceof qn)r={update:fj(s,t.key,t.data),updateMask:ED(t.fieldMask)};else{if(!(t instanceof fk))return ht();r={verify:hx(s,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(l,o){const d=o.transform;if(d instanceof Tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _c)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Dc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ac)return{fieldPath:o.field.canonicalString(),increment:d.Ie};throw ht()}(0,a))),t.precondition.isNone||(r.currentDocument=function(n,l){return l.updateTime!==void 0?{updateTime:fD(n,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ht()}(s,t.precondition)),r}function vD(s,t){return s&&s.length>0?(At(t!==void 0),s.map(r=>function(n,l){let o=n.updateTime?Sr(n.updateTime):Sr(l);return o.isEqual(gt.min())&&(o=Sr(l)),new aD(o,n.transformResults||[])}(r,t))):[]}function jD(s,t){return{documents:[wk(s,t.path)]}}function ND(s,t){const r={structuredQuery:{}},a=t.path;let n;t.collectionGroup!==null?(n=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=wk(s,n);const l=function(m){if(m.length!==0)return Pk(sa.create(m,"and"))}(t.filters);l&&(r.structuredQuery.where=l);const o=function(m){if(m.length!==0)return m.map(y=>function(N){return{field:Qi(N.field),direction:ID(N.dir)}}(y))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const d=ap(s,t.limit);return d!==null&&(r.structuredQuery.limit=d),t.startAt&&(r.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{ht:r,parent:n}}function wD(s){let t=gD(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let n=null;if(a>0){At(a===1);const y=r.from[0];y.allDescendants?n=y.collectionId:t=t.child(y.collectionId)}let l=[];r.where&&(l=function(j){const N=Sk(j);return N instanceof sa&&X1(N)?N.getFilters():[N]}(r.where));let o=[];r.orderBy&&(o=function(j){return j.map(N=>function(g){return new Cc(Ki(g.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(N))}(r.orderBy));let d=null;r.limit&&(d=function(j){let N;return N=typeof j=="object"?j.value:j,Jc(N)?null:N}(r.limit));let u=null;r.startAt&&(u=function(j){const N=!!j.before,T=j.values||[];return new ux(T,N)}(r.startAt));let m=null;return r.endAt&&(m=function(j){const N=!j.before,T=j.values||[];return new ux(T,N)}(r.endAt)),q_(t,n,o,l,d,"F",u,m)}function kD(s,t){const r=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Sk(s){return s.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=Ki(r.unaryFilter.field);return vs.create(a,"==",{doubleValue:NaN});case"IS_NULL":const n=Ki(r.unaryFilter.field);return vs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ki(r.unaryFilter.field);return vs.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ki(r.unaryFilter.field);return vs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(s):s.fieldFilter!==void 0?function(r){return vs.create(Ki(r.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(r.fieldFilter.op),r.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(r){return sa.create(r.compositeFilter.filters.map(a=>Sk(a)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ht()}}(r.compositeFilter.op))}(s):ht()}function ID(s){return xD[s]}function SD(s){return mD[s]}function PD(s){return hD[s]}function Qi(s){return{fieldPath:s.canonicalString()}}function Ki(s){return Ds.fromServerFormat(s.fieldPath)}function Pk(s){return s instanceof vs?function(r){if(r.op==="=="){if(rj(r.value))return{unaryFilter:{field:Qi(r.field),op:"IS_NAN"}};if(sj(r.value))return{unaryFilter:{field:Qi(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(rj(r.value))return{unaryFilter:{field:Qi(r.field),op:"IS_NOT_NAN"}};if(sj(r.value))return{unaryFilter:{field:Qi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(r.field),op:SD(r.op),value:r.value}}}(s):s instanceof sa?function(r){const a=r.getFilters().map(n=>Pk(n));return a.length===1?a[0]:{compositeFilter:{op:PD(r.op),filters:a}}}(s):ht()}function ED(s){const t=[];return s.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function Ek(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,r,a,n,l=gt.min(),o=gt.min(),d=Vs.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=n,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(t){return new pn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t){this.Tt=t}}function TD(s){const t=wD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?xx(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.Tn=new DD}addToCollectionParentIndex(t,r){return this.Tn.add(r),Ce.resolve()}getCollectionParents(t,r){return Ce.resolve(this.Tn.getEntries(r))}addFieldIndex(t,r){return Ce.resolve()}deleteFieldIndex(t,r){return Ce.resolve()}deleteAllFieldIndexes(t){return Ce.resolve()}createTargetIndexes(t,r){return Ce.resolve()}getDocumentsMatchingTarget(t,r){return Ce.resolve(null)}getIndexType(t,r){return Ce.resolve(0)}getFieldIndexes(t,r){return Ce.resolve([])}getNextCollectionGroupToUpdate(t){return Ce.resolve(null)}getMinOffset(t,r){return Ce.resolve(An.min())}getMinOffsetFromCollectionGroup(t,r){return Ce.resolve(An.min())}updateCollectionGroup(t,r,a){return Ce.resolve()}updateIndexEntries(t,r){return Ce.resolve()}}class DD{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r]||new ws(Ht.comparator),l=!n.has(a);return this.index[r]=n.add(a),l}has(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r];return n&&n.has(a)}getEntries(t){return(this.index[t]||new ws(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ck=41943040;class lr{static withCacheSize(t){return new lr(t,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(Ck,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Lo(0)}static Kn(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="LruGarbageCollector",AD=1048576;function bj([s,t],[r,a]){const n=kt(s,r);return n===0?kt(t,a):n}class RD{constructor(t){this.Hn=t,this.buffer=new ws(bj),this.Jn=0}Yn(){return++this.Jn}Zn(t){const r=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();bj(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class MD{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Xe(yj,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Xo(r)?Xe(yj,"Ignoring IndexedDB error during garbage collection: ",r):await Yo(r)}await this.er(3e5)})}}class OD{constructor(t,r){this.tr=t,this.params=r}calculateTargetCount(t,r){return this.tr.nr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return Ce.resolve(lm.ae);const a=new RD(r);return this.tr.forEachTarget(t,n=>a.Zn(n.sequenceNumber)).next(()=>this.tr.rr(t,n=>a.Zn(n))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.tr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.tr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(gj)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gj):this.ir(t,r))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,r){let a,n,l,o,d,u,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(j=>(j>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${j}`),n=this.params.maximumSequenceNumbersToCollect):n=j,o=Date.now(),this.nthSequenceNumber(t,n))).next(j=>(a=j,d=Date.now(),this.removeTargets(t,a,r))).next(j=>(l=j,u=Date.now(),this.removeOrphanedDocuments(t,a))).next(j=>(m=Date.now(),qi()<=Ct.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-y}ms
	Determined least recently used ${n} in `+(d-o)+`ms
	Removed ${l} targets in `+(u-d)+`ms
	Removed ${j} documents in `+(m-u)+`ms
Total Duration: ${m-y}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:l,documentsRemoved:j})))}}function LD(s,t){return new OD(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.changes=new Ri(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Ss.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?Ce.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t,r,a,n){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=n}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(n=>(a=n,this.remoteDocumentCache.getEntry(t,r))).next(n=>(a!==null&&Kl(a.mutation,n,kr.empty(),qt.now()),n))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,Tt()).next(()=>a))}getLocalViewOfDocuments(t,r,a=Tt()){const n=li();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,a).next(l=>{let o=Dl();return l.forEach((d,u)=>{o=o.insert(d,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const a=li();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,Tt()))}populateOverlays(t,r,a){const n=[];return a.forEach(l=>{r.has(l)||n.push(l)}),this.documentOverlayCache.getOverlays(t,n).next(l=>{l.forEach((o,d)=>{r.set(o,d)})})}computeViews(t,r,a,n){let l=Ua();const o=Ql(),d=function(){return Ql()}();return r.forEach((u,m)=>{const y=a.get(m.key);n.has(m.key)&&(y===void 0||y.mutation instanceof qn)?l=l.insert(m.key,m):y!==void 0?(o.set(m.key,y.mutation.getFieldMask()),Kl(y.mutation,m,y.mutation.getFieldMask(),qt.now())):o.set(m.key,kr.empty())}),this.recalculateAndSaveOverlays(t,l).next(u=>(u.forEach((m,y)=>o.set(m,y)),r.forEach((m,y)=>{var j;return d.set(m,new zD(y,(j=o.get(m))!==null&&j!==void 0?j:null))}),d))}recalculateAndSaveOverlays(t,r){const a=Ql();let n=new ls((o,d)=>o-d),l=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const d of o)d.keys().forEach(u=>{const m=r.get(u);if(m===null)return;let y=a.get(u)||kr.empty();y=d.applyToLocalView(m,y),a.set(u,y);const j=(n.get(d.batchId)||Tt()).add(u);n=n.insert(d.batchId,j)})}).next(()=>{const o=[],d=n.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),m=u.key,y=u.value,j=ik();y.forEach(N=>{if(!l.has(N)){const T=hk(r.get(N),a.get(N));T!==null&&j.set(N,T),l=l.add(N)}}),o.push(this.documentOverlayCache.saveOverlays(t,m,j))}return Ce.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,n){return function(o){return mt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):tk(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,n):this.getDocumentsMatchingCollectionQuery(t,r,a,n)}getNextDocuments(t,r,a,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,n).next(l=>{const o=n-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,n-l.size):Ce.resolve(li());let d=Ic,u=l;return o.next(m=>Ce.forEach(m,(y,j)=>(d<j.largestBatchId&&(d=j.largestBatchId),l.get(y)?Ce.resolve():this.remoteDocumentCache.getEntry(t,y).next(N=>{u=u.insert(y,N)}))).next(()=>this.populateOverlays(t,m,l)).next(()=>this.computeViews(t,u,m,Tt())).next(y=>({batchId:d,changes:nk(y)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new mt(r)).next(a=>{let n=Dl();return a.isFoundDocument()&&(n=n.insert(a.key,a)),n})}getDocumentsMatchingCollectionGroupQuery(t,r,a,n){const l=r.collectionGroup;let o=Dl();return this.indexManager.getCollectionParents(t,l).next(d=>Ce.forEach(d,u=>{const m=function(j,N){return new Jo(N,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt)}(r,u.child(l));return this.getDocumentsMatchingCollectionQuery(t,m,a,n).next(y=>{y.forEach((j,N)=>{o=o.insert(j,N)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,a,n){let l;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(o=>(l=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,l,n))).next(o=>{l.forEach((u,m)=>{const y=m.getKey();o.get(y)===null&&(o=o.insert(y,Ss.newInvalidDocument(y)))});let d=Dl();return o.forEach((u,m)=>{const y=l.get(u);y!==void 0&&Kl(y.mutation,m,kr.empty(),qt.now()),xm(r,m)&&(d=d.insert(u,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,r){return Ce.resolve(this.dr.get(r))}saveBundleMetadata(t,r){return this.dr.set(r.id,function(n){return{id:n.id,version:n.version,createTime:Sr(n.createTime)}}(r)),Ce.resolve()}getNamedQuery(t,r){return Ce.resolve(this.Ar.get(r))}saveNamedQuery(t,r){return this.Ar.set(r.name,function(n){return{name:n.name,query:TD(n.bundledQuery),readTime:Sr(n.readTime)}}(r)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.overlays=new ls(mt.comparator),this.Rr=new Map}getOverlay(t,r){return Ce.resolve(this.overlays.get(r))}getOverlays(t,r){const a=li();return Ce.forEach(r,n=>this.getOverlay(t,n).next(l=>{l!==null&&a.set(n,l)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((n,l)=>{this.Et(t,r,l)}),Ce.resolve()}removeOverlaysForBatchId(t,r,a){const n=this.Rr.get(a);return n!==void 0&&(n.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(a)),Ce.resolve()}getOverlaysForCollection(t,r,a){const n=li(),l=r.length+1,o=new mt(r.child("")),d=this.overlays.getIteratorFrom(o);for(;d.hasNext();){const u=d.getNext().value,m=u.getKey();if(!r.isPrefixOf(m.path))break;m.path.length===l&&u.largestBatchId>a&&n.set(u.getKey(),u)}return Ce.resolve(n)}getOverlaysForCollectionGroup(t,r,a,n){let l=new ls((m,y)=>m-y);const o=this.overlays.getIterator();for(;o.hasNext();){const m=o.getNext().value;if(m.getKey().getCollectionGroup()===r&&m.largestBatchId>a){let y=l.get(m.largestBatchId);y===null&&(y=li(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=li(),u=l.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=n)););return Ce.resolve(d)}Et(t,r,a){const n=this.overlays.get(a.key);if(n!==null){const o=this.Rr.get(n.largestBatchId).delete(a.key);this.Rr.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new lD(r,a));let l=this.Rr.get(r);l===void 0&&(l=Tt(),this.Rr.set(r,l)),this.Rr.set(r,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.sessionToken=Vs.EMPTY_BYTE_STRING}getSessionToken(t){return Ce.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this.Vr=new ws(ks.mr),this.gr=new ws(ks.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,r){const a=new ks(t,r);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.wr(new ks(t,r))}Sr(t,r){t.forEach(a=>this.removeReference(a,r))}br(t){const r=new mt(new Ht([])),a=new ks(r,t),n=new ks(r,t+1),l=[];return this.gr.forEachInRange([a,n],o=>{this.wr(o),l.push(o.key)}),l}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const r=new mt(new Ht([])),a=new ks(r,t),n=new ks(r,t+1);let l=Tt();return this.gr.forEachInRange([a,n],o=>{l=l.add(o.key)}),l}containsKey(t){const r=new ks(t,0),a=this.Vr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class ks{constructor(t,r){this.key=t,this.Cr=r}static mr(t,r){return mt.comparator(t.key,r.key)||kt(t.Cr,r.Cr)}static pr(t,r){return kt(t.Cr,r.Cr)||mt.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new ws(ks.mr)}checkEmpty(t){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,n){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oD(l,r,a,n);this.mutationQueue.push(o);for(const d of n)this.Mr=this.Mr.add(new ks(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return Ce.resolve(o)}lookupMutationBatch(t,r){return Ce.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,n=this.Nr(a),l=n<0?0:n;return Ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?Wf:this.Fr-1)}getAllMutationBatches(t){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new ks(r,0),n=new ks(r,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([a,n],o=>{const d=this.Or(o.Cr);l.push(d)}),Ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new ws(kt);return r.forEach(n=>{const l=new ks(n,0),o=new ks(n,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,o],d=>{a=a.add(d.Cr)})}),Ce.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,n=a.length+1;let l=a;mt.isDocumentKey(l)||(l=l.child(""));const o=new ks(new mt(l),0);let d=new ws(kt);return this.Mr.forEachWhile(u=>{const m=u.key.path;return!!a.isPrefixOf(m)&&(m.length===n&&(d=d.add(u.Cr)),!0)},o),Ce.resolve(this.Br(d))}Br(t){const r=[];return t.forEach(a=>{const n=this.Or(a);n!==null&&r.push(n)}),r}removeMutationBatch(t,r){At(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Ce.forEach(r.mutations,n=>{const l=new ks(n.key,r.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,r){const a=new ks(r,0),n=this.Mr.firstAfterOrEqual(a);return Ce.resolve(r.isEqual(n&&n.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ce.resolve()}Lr(t,r){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const r=this.Nr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t){this.kr=t,this.docs=function(){return new ls(mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,n=this.docs.get(a),l=n?n.size:0,o=this.kr(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:o}),this.size+=o-l,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return Ce.resolve(a?a.document.mutableCopy():Ss.newInvalidDocument(r))}getEntries(t,r){let a=Ua();return r.forEach(n=>{const l=this.docs.get(n);a=a.insert(n,l?l.document.mutableCopy():Ss.newInvalidDocument(n))}),Ce.resolve(a)}getDocumentsMatchingQuery(t,r,a,n){let l=Ua();const o=r.path,d=new mt(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:m,value:{document:y}}=u.getNext();if(!o.isPrefixOf(m.path))break;m.path.length>o.length+1||I_(k_(y),a)<=0||(n.has(y.key)||xm(r,y))&&(l=l.insert(y.key,y.mutableCopy()))}return Ce.resolve(l)}getAllFromCollectionGroup(t,r,a,n){ht()}qr(t,r){return Ce.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new qD(this)}getSize(t){return Ce.resolve(this.size)}}class qD extends VD{constructor(t){super(),this.Ir=t}applyChanges(t){const r=[];return this.changes.forEach((a,n)=>{n.isValidDocument()?r.push(this.Ir.addEntry(t,n)):this.Ir.removeEntry(a)}),Ce.waitFor(r)}getFromCache(t,r){return this.Ir.getEntry(t,r)}getAllFromCache(t,r){return this.Ir.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t){this.persistence=t,this.Qr=new Ri(r=>Gf(r),Qf),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Zf,this.targetCount=0,this.Kr=Lo.Un()}forEachTarget(t,r){return this.Qr.forEach((a,n)=>r(n)),Ce.resolve()}getLastRemoteSnapshotVersion(t){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ce.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.$r&&(this.$r=r),Ce.resolve()}zn(t){this.Qr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Kr=new Lo(r),this.highestTargetId=r),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,r){return this.zn(r),this.targetCount+=1,Ce.resolve()}updateTargetData(t,r){return this.zn(r),Ce.resolve()}removeTargetData(t,r){return this.Qr.delete(r.target),this.Ur.br(r.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(t,r,a){let n=0;const l=[];return this.Qr.forEach((o,d)=>{d.sequenceNumber<=r&&a.get(d.targetId)===null&&(this.Qr.delete(o),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),n++)}),Ce.waitFor(l).next(()=>n)}getTargetCount(t){return Ce.resolve(this.targetCount)}getTargetData(t,r){const a=this.Qr.get(r)||null;return Ce.resolve(a)}addMatchingKeys(t,r,a){return this.Ur.yr(r,a),Ce.resolve()}removeMatchingKeys(t,r,a){this.Ur.Sr(r,a);const n=this.persistence.referenceDelegate,l=[];return n&&r.forEach(o=>{l.push(n.markPotentiallyOrphaned(t,o))}),Ce.waitFor(l)}removeMatchingKeysForTargetId(t,r){return this.Ur.br(r),Ce.resolve()}getMatchingKeysForTargetId(t,r){const a=this.Ur.vr(r);return Ce.resolve(a)}containsKey(t,r){return Ce.resolve(this.Ur.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(t,r){this.Wr={},this.overlays={},this.Gr=new lm(0),this.zr=!1,this.zr=!0,this.jr=new UD,this.referenceDelegate=t(this),this.Hr=new GD(this),this.indexManager=new _D,this.remoteDocumentCache=function(n){return new HD(n)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new CD(r),this.Yr=new $D(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new FD,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.Wr[t.toKey()];return a||(a=new WD(r,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,r,a){Xe("MemoryPersistence","Starting transaction:",t);const n=new QD(this.Gr.next());return this.referenceDelegate.Zr(),a(n).next(l=>this.referenceDelegate.Xr(n).next(()=>l)).toPromise().then(l=>(n.raiseOnCommittedEvent(),l))}ei(t,r){return Ce.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,r)))}}class QD extends P_{constructor(t){super(),this.currentSequenceNumber=t}}class eg{constructor(t){this.persistence=t,this.ti=new Zf,this.ni=null}static ri(t){return new eg(t)}get ii(){if(this.ni)return this.ni;throw ht()}addReference(t,r,a){return this.ti.addReference(a,r),this.ii.delete(a.toString()),Ce.resolve()}removeReference(t,r,a){return this.ti.removeReference(a,r),this.ii.add(a.toString()),Ce.resolve()}markPotentiallyOrphaned(t,r){return this.ii.add(r.toString()),Ce.resolve()}removeTarget(t,r){this.ti.br(r.targetId).forEach(n=>this.ii.add(n.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(n=>{n.forEach(l=>this.ii.add(l.toString()))}).next(()=>a.removeTargetData(t,r))}Zr(){this.ni=new Set}Xr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.ii,a=>{const n=mt.fromPath(a);return this.si(t,n).next(l=>{l||r.removeEntry(n,gt.min())})}).next(()=>(this.ni=null,r.apply(t)))}updateLimboDocument(t,r){return this.si(t,r).next(a=>{a?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(t){return 0}si(t,r){return Ce.or([()=>Ce.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.ei(t,r)])}}class px{constructor(t,r){this.persistence=t,this.oi=new Ri(a=>T_(a.path),(a,n)=>a.isEqual(n)),this.garbageCollector=LD(this,r)}static ri(t,r){return new px(t,r)}Zr(){}Xr(t){return Ce.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}nr(t){const r=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(n=>a+n))}sr(t){let r=0;return this.rr(t,a=>{r++}).next(()=>r)}rr(t,r){return Ce.forEach(this.oi,(a,n)=>this.ar(t,a,n).next(l=>l?Ce.resolve():r(n)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const n=this.persistence.getRemoteDocumentCache(),l=n.newChangeBuffer();return n.qr(t,o=>this.ar(t,o,r).next(d=>{d||(a++,l.removeEntry(o,gt.min()))})).next(()=>l.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.oi.set(r,t.currentSequenceNumber),Ce.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ce.resolve()}removeReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ce.resolve()}updateLimboDocument(t,r){return this.oi.set(r,t.currentSequenceNumber),Ce.resolve()}Jr(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=ju(t.data.value)),r}ar(t,r,a){return Ce.or([()=>this.persistence.ei(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const n=this.oi.get(r);return Ce.resolve(n!==void 0&&n>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,r,a,n){this.targetId=t,this.fromCache=r,this.Hi=a,this.Ji=n}static Yi(t,r){let a=Tt(),n=Tt();for(const l of r.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:n=n.add(l.doc.key)}return new tg(t,r.fromCache,a,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return QT()?8:E_(Ks())>0?6:4}()}initialize(t,r){this.ns=t,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(t,r,a,n){const l={result:null};return this.rs(t,r).next(o=>{l.result=o}).next(()=>{if(!l.result)return this.ss(t,r,n,a).next(o=>{l.result=o})}).next(()=>{if(l.result)return;const o=new KD;return this._s(t,r,o).next(d=>{if(l.result=d,this.Xi)return this.us(t,r,o,d.size)})}).next(()=>l.result)}us(t,r,a,n){return a.documentReadCount<this.es?(qi()<=Ct.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",Gi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ce.resolve()):(qi()<=Ct.DEBUG&&Xe("QueryEngine","Query:",Gi(r),"scans",a.documentReadCount,"local documents and returns",n,"documents as results."),a.documentReadCount>this.ts*n?(qi()<=Ct.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",Gi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,xa(r))):Ce.resolve())}rs(t,r){if(oj(r))return Ce.resolve(null);let a=xa(r);return this.indexManager.getIndexType(t,a).next(n=>n===0?null:(r.limit!==null&&n===1&&(r=xx(r,null,"F"),a=xa(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(l=>{const o=Tt(...l);return this.ns.getDocuments(t,o).next(d=>this.indexManager.getMinOffset(t,a).next(u=>{const m=this.cs(r,d);return this.ls(r,m,o,u.readTime)?this.rs(t,xx(r,null,"F")):this.hs(t,m,r,u)}))})))}ss(t,r,a,n){return oj(r)||n.isEqual(gt.min())?Ce.resolve(null):this.ns.getDocuments(t,a).next(l=>{const o=this.cs(r,l);return this.ls(r,o,a,n)?Ce.resolve(null):(qi()<=Ct.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Gi(r)),this.hs(t,o,r,w_(n,Ic)).next(d=>d))})}cs(t,r){let a=new ws(rk(t));return r.forEach((n,l)=>{xm(t,l)&&(a=a.add(l))}),a}ls(t,r,a,n){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const l=t.limitType==="F"?r.last():r.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(n)>0)}_s(t,r,a){return qi()<=Ct.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",Gi(r)),this.ns.getDocumentsMatchingQuery(t,r,An.min(),a)}hs(t,r,a,n){return this.ns.getDocumentsMatchingQuery(t,a,n).next(l=>(r.forEach(o=>{l=l.insert(o.key,o)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="LocalStore",XD=3e8;class JD{constructor(t,r,a,n){this.persistence=t,this.Ps=r,this.serializer=n,this.Ts=new ls(kt),this.Is=new Ri(l=>Gf(l),Qf),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new BD(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ts))}}function ZD(s,t,r,a){return new JD(s,t,r,a)}async function _k(s,t){const r=vt(s);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let n;return r.mutationQueue.getAllMutationBatches(a).next(l=>(n=l,r.As(t),r.mutationQueue.getAllMutationBatches(a))).next(l=>{const o=[],d=[];let u=Tt();for(const m of n){o.push(m.batchId);for(const y of m.mutations)u=u.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)u=u.add(y.key)}return r.localDocuments.getDocuments(a,u).next(m=>({Rs:m,removedBatchIds:o,addedBatchIds:d}))})})}function eA(s,t){const r=vt(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const n=t.batch.keys(),l=r.ds.newChangeBuffer({trackRemovals:!0});return function(d,u,m,y){const j=m.batch,N=j.keys();let T=Ce.resolve();return N.forEach(g=>{T=T.next(()=>y.getEntry(u,g)).next(B=>{const D=m.docVersions.get(g);At(D!==null),B.version.compareTo(D)<0&&(j.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),y.addEntry(B)))})}),T.next(()=>d.mutationQueue.removeMutationBatch(u,j))}(r,a,t,l).next(()=>l.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(d){let u=Tt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(u=u.add(d.batch.mutations[m].key));return u}(t))).next(()=>r.localDocuments.getDocuments(a,n))})}function Dk(s){const t=vt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Hr.getLastRemoteSnapshotVersion(r))}function tA(s,t){const r=vt(s),a=t.snapshotVersion;let n=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});n=r.Ts;const d=[];t.targetChanges.forEach((y,j)=>{const N=n.get(j);if(!N)return;d.push(r.Hr.removeMatchingKeys(l,y.removedDocuments,j).next(()=>r.Hr.addMatchingKeys(l,y.addedDocuments,j)));let T=N.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(j)!==null?T=T.withResumeToken(Vs.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,a)),n=n.insert(j,T),function(B,D,R){return B.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=XD?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(N,T,y)&&d.push(r.Hr.updateTargetData(l,T))});let u=Ua(),m=Tt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(r.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(sA(l,o,t.documentUpdates).next(y=>{u=y.Vs,m=y.fs})),!a.isEqual(gt.min())){const y=r.Hr.getLastRemoteSnapshotVersion(l).next(j=>r.Hr.setTargetsMetadata(l,l.currentSequenceNumber,a));d.push(y)}return Ce.waitFor(d).next(()=>o.apply(l)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,u,m)).next(()=>u)}).then(l=>(r.Ts=n,l))}function sA(s,t,r){let a=Tt(),n=Tt();return r.forEach(l=>a=a.add(l)),t.getEntries(s,a).next(l=>{let o=Ua();return r.forEach((d,u)=>{const m=l.get(d);u.isFoundDocument()!==m.isFoundDocument()&&(n=n.add(d)),u.isNoDocument()&&u.version.isEqual(gt.min())?(t.removeEntry(d,u.readTime),o=o.insert(d,u)):!m.isValidDocument()||u.version.compareTo(m.version)>0||u.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(u),o=o.insert(d,u)):Xe(sg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",u.version)}),{Vs:o,fs:n}})}function rA(s,t){const r=vt(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=Wf),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function aA(s,t){const r=vt(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let n;return r.Hr.getTargetData(a,t).next(l=>l?(n=l,Ce.resolve(n)):r.Hr.allocateTargetId(a).next(o=>(n=new pn(t,o,"TargetPurposeListen",a.currentSequenceNumber),r.Hr.addTargetData(a,n).next(()=>n))))}).then(a=>{const n=r.Ts.get(a.targetId);return(n===null||a.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(a.targetId,a),r.Is.set(t,a.targetId)),a})}async function op(s,t,r){const a=vt(s),n=a.Ts.get(t),l=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",l,o=>a.persistence.referenceDelegate.removeTarget(o,n))}catch(o){if(!Xo(o))throw o;Xe(sg,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ts=a.Ts.remove(t),a.Is.delete(n.target)}function vj(s,t,r){const a=vt(s);let n=gt.min(),l=Tt();return a.persistence.runTransaction("Execute query","readwrite",o=>function(u,m,y){const j=vt(u),N=j.Is.get(y);return N!==void 0?Ce.resolve(j.Ts.get(N)):j.Hr.getTargetData(m,y)}(a,o,xa(t)).next(d=>{if(d)return n=d.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(o,d.targetId).next(u=>{l=u})}).next(()=>a.Ps.getDocumentsMatchingQuery(o,t,r?n:gt.min(),r?l:Tt())).next(d=>(nA(a,Q_(t),d),{documents:d,gs:l})))}function nA(s,t,r){let a=s.Es.get(t)||gt.min();r.forEach((n,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)}),s.Es.set(t,a)}class jj{constructor(){this.activeTargetIds=eD()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class iA{constructor(){this.ho=new jj,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,r,a){this.Po[t]=r}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new jj,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="ConnectivityMonitor";class wj{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Xe(Nj,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Xe(Nj,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd=null;function lp(){return Zd===null?Zd=function(){return 268435456+Math.round(2147483648*Math.random())}():Zd++,"0x"+Zd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="RestConnection",lA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cA{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${a}/databases/${n}`,this.wo=this.databaseId.database===cx?`project_id=${a}`:`project_id=${a}&database_id=${n}`}So(t,r,a,n,l){const o=lp(),d=this.bo(t,r.toUriEncodedString());Xe(E0,`Sending RPC '${t}' ${o}:`,d,a);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,n,l),this.vo(t,d,u,a).then(m=>(Xe(E0,`Received RPC '${t}' ${o}: `,m),m),m=>{throw Ao(E0,`RPC '${t}' ${o} failed with error: `,m,"url: ",d,"request:",a),m})}Co(t,r,a,n,l,o){return this.So(t,r,a,n,l)}Do(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((n,l)=>t[l]=n),a&&a.headers.forEach((n,l)=>t[l]=n)}bo(t,r){const a=lA[t];return`${this.po}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="WebChannelConnection";class uA extends cA{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,r,a,n){const l=lp();return new Promise((o,d)=>{const u=new T1;u.setWithCredentials(!0),u.listenOnce(_1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vu.NO_ERROR:const y=u.getResponseJson();Xe(Us,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(y)),o(y);break;case vu.TIMEOUT:Xe(Us,`RPC '${t}' ${l} timed out`),d(new Ke(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const j=u.getStatus();if(Xe(Us,`RPC '${t}' ${l} failed with status:`,j,"response text:",u.getResponseText()),j>0){let N=u.getResponseJson();Array.isArray(N)&&(N=N[0]);const T=N==null?void 0:N.error;if(T&&T.status&&T.message){const g=function(D){const R=D.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(R)>=0?R:Ie.UNKNOWN}(T.status);d(new Ke(g,T.message))}else d(new Ke(Ie.UNKNOWN,"Server responded with status "+u.getStatus()))}else d(new Ke(Ie.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Xe(Us,`RPC '${t}' ${l} completed.`)}});const m=JSON.stringify(n);Xe(Us,`RPC '${t}' ${l} sending request:`,n),u.send(r,"POST",m,a,15)})}Wo(t,r,a){const n=lp(),l=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=R1(),d=A1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(u.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,a),u.encodeInitMessageHeaders=!0;const y=l.join("");Xe(Us,`Creating RPC '${t}' stream ${n}: ${y}`,u);const j=o.createWebChannel(y,u);let N=!1,T=!1;const g=new dA({Fo:D=>{T?Xe(Us,`Not sending because RPC '${t}' stream ${n} is closed:`,D):(N||(Xe(Us,`Opening RPC '${t}' stream ${n} transport.`),j.open(),N=!0),Xe(Us,`RPC '${t}' stream ${n} sending:`,D),j.send(D))},Mo:()=>j.close()}),B=(D,R,$)=>{D.listen(R,z=>{try{$(z)}catch(Z){setTimeout(()=>{throw Z},0)}})};return B(j,_l.EventType.OPEN,()=>{T||(Xe(Us,`RPC '${t}' stream ${n} transport opened.`),g.Qo())}),B(j,_l.EventType.CLOSE,()=>{T||(T=!0,Xe(Us,`RPC '${t}' stream ${n} transport closed`),g.Uo())}),B(j,_l.EventType.ERROR,D=>{T||(T=!0,Ao(Us,`RPC '${t}' stream ${n} transport errored:`,D),g.Uo(new Ke(Ie.UNAVAILABLE,"The operation could not be completed")))}),B(j,_l.EventType.MESSAGE,D=>{var R;if(!T){const $=D.data[0];At(!!$);const z=$,Z=(z==null?void 0:z.error)||((R=z[0])===null||R===void 0?void 0:R.error);if(Z){Xe(Us,`RPC '${t}' stream ${n} received error:`,Z);const G=Z.status;let Y=function(q){const W=ys[q];if(W!==void 0)return yk(W)}(G),V=Z.message;Y===void 0&&(Y=Ie.INTERNAL,V="Unknown error status: "+G+" with message "+Z.message),T=!0,g.Uo(new Ke(Y,V)),j.close()}else Xe(Us,`RPC '${t}' stream ${n} received:`,$),g.Ko($)}}),B(d,D1.STAT_EVENT,D=>{D.stat===Xh.PROXY?Xe(Us,`RPC '${t}' stream ${n} detected buffering proxy`):D.stat===Xh.NOPROXY&&Xe(Us,`RPC '${t}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{g.$o()},0),g}}function C0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(s){return new pD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,r,a=1e3,n=1.5,l=6e4){this.Ti=t,this.timerId=r,this.Go=a,this.zo=n,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const r=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),n=Math.max(0,r-a);n>0&&Xe("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,n,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="PersistentStream";class Ak{constructor(t,r,a,n,l,o,d,u){this.Ti=t,this.n_=a,this.r_=n,this.connection=l,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new rg(t,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():r&&r.code===Ie.RESOURCE_EXHAUSTED?(Fa(r.toString()),Fa("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,n])=>{this.i_===r&&this.V_(a,n)},a=>{t(()=>{const n=new Ke(Ie.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(n)})})}V_(t,r){const a=this.R_(this.i_);this.stream=this.f_(t,r),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(n=>{a(()=>this.m_(n))}),this.stream.onMessage(n=>{a(()=>++this.__==1?this.g_(n):this.onNext(n))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Xe(kj,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return r=>{this.Ti.enqueueAndForget(()=>this.i_===t?r():(Xe(kj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xA extends Ak{constructor(t,r,a,n,l,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,n,o),this.serializer=l}f_(t,r){return this.connection.Wo("Listen",t,r)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const r=bD(this.serializer,t),a=function(l){if(!("targetChange"in l))return gt.min();const o=l.targetChange;return o.targetIds&&o.targetIds.length?gt.min():o.readTime?Sr(o.readTime):gt.min()}(t);return this.listener.p_(r,a)}y_(t){const r={};r.database=ip(this.serializer),r.addTarget=function(l,o){let d;const u=o.target;if(d=sp(u)?{documents:jD(l,u)}:{query:ND(l,u).ht},d.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){d.resumeToken=jk(l,o.resumeToken);const m=ap(l,o.expectedCount);m!==null&&(d.expectedCount=m)}else if(o.snapshotVersion.compareTo(gt.min())>0){d.readTime=mx(l,o.snapshotVersion.toTimestamp());const m=ap(l,o.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,t);const a=kD(this.serializer,t);a&&(r.labels=a),this.I_(r)}w_(t){const r={};r.database=ip(this.serializer),r.removeTarget=t,this.I_(r)}}class mA extends Ak{constructor(t,r,a,n,l,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,n,o),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,r){return this.connection.Wo("Write",t,r)}g_(t){return At(!!t.streamToken),this.lastStreamToken=t.streamToken,At(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){At(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const r=vD(t.writeResults,t.commitTime),a=Sr(t.commitTime);return this.listener.v_(a,r)}C_(){const t={};t.database=ip(this.serializer),this.I_(t)}b_(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>Ik(this.serializer,a))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{}class pA extends hA{constructor(t,r,a,n){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=n,this.F_=!1}M_(){if(this.F_)throw new Ke(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,r,a,n){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,o])=>this.connection.So(t,np(r,a),n,l,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ke(Ie.UNKNOWN,l.toString())})}Co(t,r,a,n,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,d])=>this.connection.Co(t,np(r,a),n,o,d,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ke(Ie.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class fA{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Fa(r),this.N_=!1):Xe("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="RemoteStore";class gA{constructor(t,r,a,n,l){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(o=>{a.enqueueAndForget(async()=>{Mi(this)&&(Xe(wi,"Restarting streams for network reachability change."),await async function(u){const m=vt(u);m.W_.add(4),await td(m),m.j_.set("Unknown"),m.W_.delete(4),await ym(m)}(this))})}),this.j_=new fA(a,n)}}async function ym(s){if(Mi(s))for(const t of s.G_)await t(!0)}async function td(s){for(const t of s.G_)await t(!1)}function Rk(s,t){const r=vt(s);r.K_.has(t.targetId)||(r.K_.set(t.targetId,t),og(r)?ig(r):Zo(r).c_()&&ng(r,t))}function ag(s,t){const r=vt(s),a=Zo(r);r.K_.delete(t),a.c_()&&Mk(r,t),r.K_.size===0&&(a.c_()?a.P_():Mi(r)&&r.j_.set("Unknown"))}function ng(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gt.min())>0){const r=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Zo(s).y_(t)}function Mk(s,t){s.H_.Ne(t),Zo(s).w_(t)}function ig(s){s.H_=new uD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),Zo(s).start(),s.j_.B_()}function og(s){return Mi(s)&&!Zo(s).u_()&&s.K_.size>0}function Mi(s){return vt(s).W_.size===0}function Ok(s){s.H_=void 0}async function yA(s){s.j_.set("Online")}async function bA(s){s.K_.forEach((t,r)=>{ng(s,t)})}async function vA(s,t){Ok(s),og(s)?(s.j_.q_(t),ig(s)):s.j_.set("Unknown")}async function jA(s,t,r){if(s.j_.set("Online"),t instanceof vk&&t.state===2&&t.cause)try{await async function(n,l){const o=l.cause;for(const d of l.targetIds)n.K_.has(d)&&(await n.remoteSyncer.rejectListen(d,o),n.K_.delete(d),n.H_.removeTarget(d))}(s,t)}catch(a){Xe(wi,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await fx(s,a)}else if(t instanceof ku?s.H_.We(t):t instanceof bk?s.H_.Ze(t):s.H_.je(t),!r.isEqual(gt.min()))try{const a=await Dk(s.localStore);r.compareTo(a)>=0&&await function(l,o){const d=l.H_.ot(o);return d.targetChanges.forEach((u,m)=>{if(u.resumeToken.approximateByteSize()>0){const y=l.K_.get(m);y&&l.K_.set(m,y.withResumeToken(u.resumeToken,o))}}),d.targetMismatches.forEach((u,m)=>{const y=l.K_.get(u);if(!y)return;l.K_.set(u,y.withResumeToken(Vs.EMPTY_BYTE_STRING,y.snapshotVersion)),Mk(l,u);const j=new pn(y.target,u,m,y.sequenceNumber);ng(l,j)}),l.remoteSyncer.applyRemoteEvent(d)}(s,r)}catch(a){Xe(wi,"Failed to raise snapshot:",a),await fx(s,a)}}async function fx(s,t,r){if(!Xo(t))throw t;s.W_.add(1),await td(s),s.j_.set("Offline"),r||(r=()=>Dk(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Xe(wi,"Retrying IndexedDB access"),await r(),s.W_.delete(1),await ym(s)})}function Lk(s,t){return t().catch(r=>fx(s,r,t))}async function bm(s){const t=vt(s),r=Ln(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:Wf;for(;NA(t);)try{const n=await rA(t.localStore,a);if(n===null){t.U_.length===0&&r.P_();break}a=n.batchId,wA(t,n)}catch(n){await fx(t,n)}Vk(t)&&zk(t)}function NA(s){return Mi(s)&&s.U_.length<10}function wA(s,t){s.U_.push(t);const r=Ln(s);r.c_()&&r.S_&&r.b_(t.mutations)}function Vk(s){return Mi(s)&&!Ln(s).u_()&&s.U_.length>0}function zk(s){Ln(s).start()}async function kA(s){Ln(s).C_()}async function IA(s){const t=Ln(s);for(const r of s.U_)t.b_(r.mutations)}async function SA(s,t,r){const a=s.U_.shift(),n=Yf.from(a,t,r);await Lk(s,()=>s.remoteSyncer.applySuccessfulWrite(n)),await bm(s)}async function PA(s,t){t&&Ln(s).S_&&await async function(a,n){if(function(o){return gk(o)&&o!==Ie.ABORTED}(n.code)){const l=a.U_.shift();Ln(a).h_(),await Lk(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,n)),await bm(a)}}(s,t),Vk(s)&&zk(s)}async function Ij(s,t){const r=vt(s);r.asyncQueue.verifyOperationInProgress(),Xe(wi,"RemoteStore received new credentials");const a=Mi(r);r.W_.add(3),await td(r),a&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.W_.delete(3),await ym(r)}async function EA(s,t){const r=vt(s);t?(r.W_.delete(2),await ym(r)):t||(r.W_.add(2),await td(r),r.j_.set("Unknown"))}function Zo(s){return s.J_||(s.J_=function(r,a,n){const l=vt(r);return l.M_(),new xA(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,n)}(s.datastore,s.asyncQueue,{xo:yA.bind(null,s),No:bA.bind(null,s),Lo:vA.bind(null,s),p_:jA.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),og(s)?ig(s):s.j_.set("Unknown")):(await s.J_.stop(),Ok(s))})),s.J_}function Ln(s){return s.Y_||(s.Y_=function(r,a,n){const l=vt(r);return l.M_(),new mA(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,n)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:kA.bind(null,s),Lo:PA.bind(null,s),D_:IA.bind(null,s),v_:SA.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await bm(s)):(await s.Y_.stop(),s.U_.length>0&&(Xe(wi,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,r,a,n,l){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=n,this.removalCallback=l,this.deferred=new ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,n,l){const o=Date.now()+a,d=new lg(t,r,o,n,l);return d.start(a),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Ie.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(s,t){if(Fa("AsyncQueue",`${t}: ${s}`),Xo(s))return new Ke(Ie.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(t){return new No(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||mt.comparator(r.key,a.key):(r,a)=>mt.comparator(r.key,a.key),this.keyedMap=Dl(),this.sortedSet=new ls(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof No)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const n=r.getNext().key,l=a.getNext().key;if(!n.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new No;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.Z_=new ls(mt.comparator)}track(t){const r=t.doc.key,a=this.Z_.get(r);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(r,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(r):t.type===1&&a.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):ht():this.Z_=this.Z_.insert(r,t)}X_(){const t=[];return this.Z_.inorderTraversal((r,a)=>{t.push(a)}),t}}class Vo{constructor(t,r,a,n,l,o,d,u,m){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=n,this.mutatedKeys=l,this.fromCache=o,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=m}static fromInitialDocuments(t,r,a,n,l){const o=[];return r.forEach(d=>{o.push({type:0,doc:d})}),new Vo(t,r,No.emptySet(r),o,a,n,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&um(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let n=0;n<r.length;n++)if(r[n].type!==a[n].type||!r[n].doc.isEqual(a[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class TA{constructor(){this.queries=Pj(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,a){const n=vt(r),l=n.queries;n.queries=Pj(),l.forEach((o,d)=>{for(const u of d.ta)u.onError(a)})})(this,new Ke(Ie.ABORTED,"Firestore shutting down"))}}function Pj(){return new Ri(s=>sk(s),um)}async function dg(s,t){const r=vt(s);let a=3;const n=t.query;let l=r.queries.get(n);l?!l.na()&&t.ra()&&(a=2):(l=new CA,a=t.ra()?0:1);try{switch(a){case 0:l.ea=await r.onListen(n,!0);break;case 1:l.ea=await r.onListen(n,!1);break;case 2:await r.onFirstRemoteStoreListen(n)}}catch(o){const d=cg(o,`Initialization of query '${Gi(t.query)}' failed`);return void t.onError(d)}r.queries.set(n,l),l.ta.push(t),t.sa(r.onlineState),l.ea&&t.oa(l.ea)&&xg(r)}async function ug(s,t){const r=vt(s),a=t.query;let n=3;const l=r.queries.get(a);if(l){const o=l.ta.indexOf(t);o>=0&&(l.ta.splice(o,1),l.ta.length===0?n=t.ra()?0:1:!l.na()&&t.ra()&&(n=2))}switch(n){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function _A(s,t){const r=vt(s);let a=!1;for(const n of t){const l=n.query,o=r.queries.get(l);if(o){for(const d of o.ta)d.oa(n)&&(a=!0);o.ea=n}}a&&xg(r)}function DA(s,t,r){const a=vt(s),n=a.queries.get(t);if(n)for(const l of n.ta)l.onError(r);a.queries.delete(t)}function xg(s){s.ia.forEach(t=>{t.next()})}var cp,Ej;(Ej=cp||(cp={}))._a="default",Ej.Cache="cache";class mg{constructor(t,r,a){this.query=t,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const n of t.docChanges)n.type!==3&&a.push(n);t=new Vo(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.ua?this.la(t)&&(this.aa.next(t),r=!0):this.ha(t,this.onlineState)&&(this.Pa(t),r=!0),this.ca=t,r}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),r=!0),r}ha(t,r){if(!t.fromCache||!this.ra())return!0;const a=r!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}la(t){if(t.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(t){t=Vo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(t){this.key=t}}class $k{constructor(t){this.key=t}}class AA{constructor(t,r){this.query=t,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Tt(),this.mutatedKeys=Tt(),this.ya=rk(t),this.wa=new No(this.ya)}get Sa(){return this.fa}ba(t,r){const a=r?r.Da:new Sj,n=r?r.wa:this.wa;let l=r?r.mutatedKeys:this.mutatedKeys,o=n,d=!1;const u=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,m=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((y,j)=>{const N=n.get(y),T=xm(this.query,j)?j:null,g=!!N&&this.mutatedKeys.has(N.key),B=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let D=!1;N&&T?N.data.isEqual(T.data)?g!==B&&(a.track({type:3,doc:T}),D=!0):this.va(N,T)||(a.track({type:2,doc:T}),D=!0,(u&&this.ya(T,u)>0||m&&this.ya(T,m)<0)&&(d=!0)):!N&&T?(a.track({type:0,doc:T}),D=!0):N&&!T&&(a.track({type:1,doc:N}),D=!0,(u||m)&&(d=!0)),D&&(T?(o=o.add(T),l=B?l.add(y):l.delete(y)):(o=o.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const y=this.query.limitType==="F"?o.last():o.first();o=o.delete(y.key),l=l.delete(y.key),a.track({type:1,doc:y})}return{wa:o,Da:a,ls:d,mutatedKeys:l}}va(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,n){const l=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((y,j)=>function(T,g){const B=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return B(T)-B(g)}(y.type,j.type)||this.ya(y.doc,j.doc)),this.Ca(a),n=n!=null&&n;const d=r&&!n?this.Fa():[],u=this.pa.size===0&&this.current&&!n?1:0,m=u!==this.ga;return this.ga=u,o.length!==0||m?{snapshot:new Vo(this.query,t.wa,l,o,t.mutatedKeys,u===0,m,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Sj,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Tt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const r=[];return t.forEach(a=>{this.pa.has(a)||r.push(new $k(a))}),this.pa.forEach(a=>{t.has(a)||r.push(new Bk(a))}),r}Oa(t){this.fa=t.gs,this.pa=Tt();const r=this.ba(t.documents);return this.applyChanges(r,!0)}Na(){return Vo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const hg="SyncEngine";class RA{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class MA{constructor(t){this.key=t,this.Ba=!1}}class OA{constructor(t,r,a,n,l,o){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=n,this.currentUser=l,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Ri(d=>sk(d),um),this.qa=new Map,this.Qa=new Set,this.$a=new ls(mt.comparator),this.Ua=new Map,this.Ka=new Zf,this.Wa={},this.Ga=new Map,this.za=Lo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function LA(s,t,r=!0){const a=Gk(s);let n;const l=a.ka.get(t);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),n=l.view.Na()):n=await Fk(a,t,r,!0),n}async function VA(s,t){const r=Gk(s);await Fk(r,t,!0,!1)}async function Fk(s,t,r,a){const n=await aA(s.localStore,xa(t)),l=n.targetId,o=s.sharedClientState.addLocalQueryTarget(l,r);let d;return a&&(d=await zA(s,t,l,o==="current",n.resumeToken)),s.isPrimaryClient&&r&&Rk(s.remoteStore,n),d}async function zA(s,t,r,a,n){s.Ha=(j,N,T)=>async function(B,D,R,$){let z=D.view.ba(R);z.ls&&(z=await vj(B.localStore,D.query,!1).then(({documents:V})=>D.view.ba(V,z)));const Z=$&&$.targetChanges.get(D.targetId),G=$&&$.targetMismatches.get(D.targetId)!=null,Y=D.view.applyChanges(z,B.isPrimaryClient,Z,G);return Tj(B,D.targetId,Y.Ma),Y.snapshot}(s,j,N,T);const l=await vj(s.localStore,t,!0),o=new AA(t,l.gs),d=o.ba(l.documents),u=ed.createSynthesizedTargetChangeForCurrentChange(r,a&&s.onlineState!=="Offline",n),m=o.applyChanges(d,s.isPrimaryClient,u);Tj(s,r,m.Ma);const y=new RA(t,r,o);return s.ka.set(t,y),s.qa.has(r)?s.qa.get(r).push(t):s.qa.set(r,[t]),m.snapshot}async function BA(s,t,r){const a=vt(s),n=a.ka.get(t),l=a.qa.get(n.targetId);if(l.length>1)return a.qa.set(n.targetId,l.filter(o=>!um(o,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(n.targetId),a.sharedClientState.isActiveQueryTarget(n.targetId)||await op(a.localStore,n.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(n.targetId),r&&ag(a.remoteStore,n.targetId),dp(a,n.targetId)}).catch(Yo)):(dp(a,n.targetId),await op(a.localStore,n.targetId,!0))}async function $A(s,t){const r=vt(s),a=r.ka.get(t),n=r.qa.get(a.targetId);r.isPrimaryClient&&n.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),ag(r.remoteStore,a.targetId))}async function FA(s,t,r){const a=KA(s);try{const n=await function(o,d){const u=vt(o),m=qt.now(),y=d.reduce((T,g)=>T.add(g.key),Tt());let j,N;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let g=Ua(),B=Tt();return u.ds.getEntries(T,y).next(D=>{g=D,g.forEach((R,$)=>{$.isValidDocument()||(B=B.add(R))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,g)).next(D=>{j=D;const R=[];for(const $ of d){const z=iD($,j.get($.key).overlayedDocument);z!=null&&R.push(new qn($.key,z,Q1(z.value.mapValue),As.exists(!0)))}return u.mutationQueue.addMutationBatch(T,m,R,d)}).next(D=>{N=D;const R=D.applyToLocalDocumentSet(j,B);return u.documentOverlayCache.saveOverlays(T,D.batchId,R)})}).then(()=>({batchId:N.batchId,changes:nk(j)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(n.batchId),function(o,d,u){let m=o.Wa[o.currentUser.toKey()];m||(m=new ls(kt)),m=m.insert(d,u),o.Wa[o.currentUser.toKey()]=m}(a,n.batchId,r),await sd(a,n.changes),await bm(a.remoteStore)}catch(n){const l=cg(n,"Failed to persist write");r.reject(l)}}async function Uk(s,t){const r=vt(s);try{const a=await tA(r.localStore,t);t.targetChanges.forEach((n,l)=>{const o=r.Ua.get(l);o&&(At(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?o.Ba=!0:n.modifiedDocuments.size>0?At(o.Ba):n.removedDocuments.size>0&&(At(o.Ba),o.Ba=!1))}),await sd(r,a,t)}catch(a){await Yo(a)}}function Cj(s,t,r){const a=vt(s);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const n=[];a.ka.forEach((l,o)=>{const d=o.view.sa(t);d.snapshot&&n.push(d.snapshot)}),function(o,d){const u=vt(o);u.onlineState=d;let m=!1;u.queries.forEach((y,j)=>{for(const N of j.ta)N.sa(d)&&(m=!0)}),m&&xg(u)}(a.eventManager,t),n.length&&a.La.p_(n),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function UA(s,t,r){const a=vt(s);a.sharedClientState.updateQueryState(t,"rejected",r);const n=a.Ua.get(t),l=n&&n.key;if(l){let o=new ls(mt.comparator);o=o.insert(l,Ss.newNoDocument(l,gt.min()));const d=Tt().add(l),u=new fm(gt.min(),new Map,new ls(kt),o,d);await Uk(a,u),a.$a=a.$a.remove(l),a.Ua.delete(t),pg(a)}else await op(a.localStore,t,!1).then(()=>dp(a,t,r)).catch(Yo)}async function WA(s,t){const r=vt(s),a=t.batch.batchId;try{const n=await eA(r.localStore,t);Hk(r,a,null),Wk(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await sd(r,n)}catch(n){await Yo(n)}}async function HA(s,t,r){const a=vt(s);try{const n=await function(o,d){const u=vt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return u.mutationQueue.lookupMutationBatch(m,d).next(j=>(At(j!==null),y=j.keys(),u.mutationQueue.removeMutationBatch(m,j))).next(()=>u.mutationQueue.performConsistencyCheck(m)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>u.localDocuments.getDocuments(m,y))})}(a.localStore,t);Hk(a,t,r),Wk(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await sd(a,n)}catch(n){await Yo(n)}}function Wk(s,t){(s.Ga.get(t)||[]).forEach(r=>{r.resolve()}),s.Ga.delete(t)}function Hk(s,t,r){const a=vt(s);let n=a.Wa[a.currentUser.toKey()];if(n){const l=n.get(t);l&&(r?l.reject(r):l.resolve(),n=n.remove(t)),a.Wa[a.currentUser.toKey()]=n}}function dp(s,t,r=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.qa.get(t))s.ka.delete(a),r&&s.La.Ja(a,r);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(a=>{s.Ka.containsKey(a)||qk(s,a)})}function qk(s,t){s.Qa.delete(t.path.canonicalString());const r=s.$a.get(t);r!==null&&(ag(s.remoteStore,r),s.$a=s.$a.remove(t),s.Ua.delete(r),pg(s))}function Tj(s,t,r){for(const a of r)a instanceof Bk?(s.Ka.addReference(a.key,t),qA(s,a)):a instanceof $k?(Xe(hg,"Document no longer in limbo: "+a.key),s.Ka.removeReference(a.key,t),s.Ka.containsKey(a.key)||qk(s,a.key)):ht()}function qA(s,t){const r=t.key,a=r.path.canonicalString();s.$a.get(r)||s.Qa.has(a)||(Xe(hg,"New document in limbo: "+r),s.Qa.add(a),pg(s))}function pg(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const r=new mt(Ht.fromString(t)),a=s.za.next();s.Ua.set(a,new MA(r)),s.$a=s.$a.insert(r,a),Rk(s.remoteStore,new pn(xa(dm(r.path)),a,"TargetPurposeLimboResolution",lm.ae))}}async function sd(s,t,r){const a=vt(s),n=[],l=[],o=[];a.ka.isEmpty()||(a.ka.forEach((d,u)=>{o.push(a.Ha(u,t,r).then(m=>{var y;if((m||r)&&a.isPrimaryClient){const j=m?!m.fromCache:(y=r==null?void 0:r.targetChanges.get(u.targetId))===null||y===void 0?void 0:y.current;a.sharedClientState.updateQueryState(u.targetId,j?"current":"not-current")}if(m){n.push(m);const j=tg.Yi(u.targetId,m);l.push(j)}}))}),await Promise.all(o),a.La.p_(n),await async function(u,m){const y=vt(u);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",j=>Ce.forEach(m,N=>Ce.forEach(N.Hi,T=>y.persistence.referenceDelegate.addReference(j,N.targetId,T)).next(()=>Ce.forEach(N.Ji,T=>y.persistence.referenceDelegate.removeReference(j,N.targetId,T)))))}catch(j){if(!Xo(j))throw j;Xe(sg,"Failed to update sequence numbers: "+j)}for(const j of m){const N=j.targetId;if(!j.fromCache){const T=y.Ts.get(N),g=T.snapshotVersion,B=T.withLastLimboFreeSnapshotVersion(g);y.Ts=y.Ts.insert(N,B)}}}(a.localStore,l))}async function GA(s,t){const r=vt(s);if(!r.currentUser.isEqual(t)){Xe(hg,"User change. New user:",t.toKey());const a=await _k(r.localStore,t);r.currentUser=t,function(l,o){l.Ga.forEach(d=>{d.forEach(u=>{u.reject(new Ke(Ie.CANCELLED,o))})}),l.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await sd(r,a.Rs)}}function QA(s,t){const r=vt(s),a=r.Ua.get(t);if(a&&a.Ba)return Tt().add(a.key);{let n=Tt();const l=r.qa.get(t);if(!l)return n;for(const o of l){const d=r.ka.get(o);n=n.unionWith(d.view.Sa)}return n}}function Gk(s){const t=vt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=Uk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=UA.bind(null,t),t.La.p_=_A.bind(null,t.eventManager),t.La.Ja=DA.bind(null,t.eventManager),t}function KA(s){const t=vt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=WA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HA.bind(null,t),t}class gx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=gm(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,r){return null}nu(t,r){return null}eu(t){return ZD(this.persistence,new YD,t.initialUser,this.serializer)}Xa(t){return new Tk(eg.ri,this.serializer)}Za(t){return new iA}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gx.provider={build:()=>new gx};class YA extends gx{constructor(t){super(),this.cacheSizeBytes=t}tu(t,r){At(this.persistence.referenceDelegate instanceof px);const a=this.persistence.referenceDelegate.garbageCollector;return new MD(a,t.asyncQueue,r)}Xa(t){const r=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new Tk(a=>px.ri(a,r),this.serializer)}}class up{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Cj(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=GA.bind(null,this.syncEngine),await EA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new TA}()}createDatastore(t){const r=gm(t.databaseInfo.databaseId),a=function(l){return new uA(l)}(t.databaseInfo);return function(l,o,d,u){return new pA(l,o,d,u)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,n,l,o,d){return new gA(a,n,l,o,d)}(this.localStore,this.datastore,t.asyncQueue,r=>Cj(this.syncEngine,r,0),function(){return wj.D()?new wj:new oA}())}createSyncEngine(t,r){return function(n,l,o,d,u,m,y){const j=new OA(n,l,o,d,u,m);return y&&(j.ja=!0),j}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(n){const l=vt(n);Xe(wi,"RemoteStore shutting down."),l.W_.add(5),await td(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Fa("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ke(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(n,l){const o=vt(n),d={documents:l.map(j=>hx(o.serializer,j))},u=await o.Co("BatchGetDocuments",o.serializer.databaseId,Ht.emptyPath(),d,l.length),m=new Map;u.forEach(j=>{const N=yD(o.serializer,j);m.set(N.key.toString(),N)});const y=[];return l.forEach(j=>{const N=m.get(j.toString());At(!!N),y.push(N)}),y}(this.datastore,t);return r.forEach(a=>this.recordVersion(a)),r}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(t.toString())}delete(t){this.write(new pm(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const n=mt.fromPath(a);this.mutations.push(new fk(n,this.precondition(n)))}),await async function(a,n){const l=vt(a),o={writes:n.map(d=>Ik(l.serializer,d))};await l.So("Commit",l.serializer.databaseId,Ht.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw ht();r=gt.min()}const a=this.readVersions.get(t.key.toString());if(a){if(!r.isEqual(a))throw new Ke(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(gt.min())?As.exists(!1):As.updateTime(r):As.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(gt.min()))throw new Ke(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return As.updateTime(r)}return As.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t,r,a,n,l){this.asyncQueue=t,this.datastore=r,this.options=a,this.updateFunction=n,this.deferred=l,this.Tu=a.maxAttempts,this.a_=new rg(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new XA(this.datastore),r=this.du(t);r&&r.then(a=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(a)}).catch(n=>{this.Au(n)}))}).catch(a=>{this.Au(a)})})}du(t){try{const r=this.updateFunction(t);return!Jc(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const r=t.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!gk(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="FirestoreClient";class ZA{constructor(t,r,a,n,l){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=n,this.user=Hs.UNAUTHENTICATED,this.clientId=L1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,async o=>{Xe(Vn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(Xe(Vn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=cg(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function T0(s,t){s.asyncQueue.verifyOperationInProgress(),Xe(Vn,"Initializing OfflineComponentProvider");const r=s.configuration;await t.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(async n=>{a.isEqual(n)||(await _k(t.localStore,n),a=n)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function _j(s,t){s.asyncQueue.verifyOperationInProgress();const r=await e8(s);Xe(Vn,"Initializing OnlineComponentProvider"),await t.initialize(r,s.configuration),s.setCredentialChangeListener(a=>Ij(t.remoteStore,a)),s.setAppCheckTokenChangeListener((a,n)=>Ij(t.remoteStore,n)),s._onlineComponents=t}async function e8(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Xe(Vn,"Using user provided OfflineComponentProvider");try{await T0(s,s._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(n){return n.name==="FirebaseError"?n.code===Ie.FAILED_PRECONDITION||n.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(r))throw r;Ao("Error using user provided cache. Falling back to memory cache: "+r),await T0(s,new gx)}}else Xe(Vn,"Using default OfflineComponentProvider"),await T0(s,new YA(void 0));return s._offlineComponents}async function gg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Xe(Vn,"Using user provided OnlineComponentProvider"),await _j(s,s._uninitializedComponentsProvider._online)):(Xe(Vn,"Using default OnlineComponentProvider"),await _j(s,new up))),s._onlineComponents}function t8(s){return gg(s).then(t=>t.syncEngine)}function s8(s){return gg(s).then(t=>t.datastore)}async function yx(s){const t=await gg(s),r=t.eventManager;return r.onListen=LA.bind(null,t.syncEngine),r.onUnlisten=BA.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=VA.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=$A.bind(null,t.syncEngine),r}function r8(s,t,r={}){const a=new ua;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,d,u,m){const y=new fg({next:N=>{y.su(),o.enqueueAndForget(()=>ug(l,j));const T=N.docs.has(d);!T&&N.fromCache?m.reject(new Ke(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&N.fromCache&&u&&u.source==="server"?m.reject(new Ke(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(N)},error:N=>m.reject(N)}),j=new mg(dm(d.path),y,{includeMetadataChanges:!0,Ta:!0});return dg(l,j)}(await yx(s),s.asyncQueue,t,r,a)),a.promise}function a8(s,t,r={}){const a=new ua;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,d,u,m){const y=new fg({next:N=>{y.su(),o.enqueueAndForget(()=>ug(l,j)),N.fromCache&&u.source==="server"?m.reject(new Ke(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(N)},error:N=>m.reject(N)}),j=new mg(d,y,{includeMetadataChanges:!0,Ta:!0});return dg(l,j)}(await yx(s),s.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(s,t,r){if(!r)throw new Ke(Ie.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function n8(s,t,r,a){if(t===!0&&a===!0)throw new Ke(Ie.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function Aj(s){if(!mt.isDocumentKey(s))throw new Ke(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Rj(s){if(mt.isDocumentKey(s))throw new Ke(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function vm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ht()}function sr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Ke(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=vm(s);throw new Ke(Ie.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return s}function i8(s,t){if(t<=0)throw new Ke(Ie.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="firestore.googleapis.com",Mj=!0;class Oj{constructor(t){var r,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Ke(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yk,this.ssl=Mj}else this.host=t.host,this.ssl=(r=t.ssl)!==null&&r!==void 0?r:Mj;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ck;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<AD)throw new Ke(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}n8("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qk((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,n){return a.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class jm{constructor(t,r,a,n){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ke(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oj(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new h_;switch(a.type){case"firstParty":return new y_(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ke(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=Dj.get(r);a&&(Xe("ComponentProvider","Removing Datastore"),Dj.delete(r),a.terminate())}(this),Promise.resolve()}}function o8(s,t,r,a={}){var n;const l=(s=sr(s,jm))._getSettings(),o=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),d=`${t}:${r}`;l.host!==Yk&&l.host!==d&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:a});if(!Dn(u,o)&&(s._setSettings(u),a.mockUserToken)){let m,y;if(typeof a.mockUserToken=="string")m=a.mockUserToken,y=Hs.MOCK_USER;else{m=b1(a.mockUserToken,(n=s._app)===null||n===void 0?void 0:n.options.projectId);const j=a.mockUserToken.sub||a.mockUserToken.user_id;if(!j)throw new Ke(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Hs(j)}s._authCredentials=new p_(new M1(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new Xa(this.firestore,t,this._query)}}class Os{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new En(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Os(this.firestore,t,this._key)}}class En extends Xa{constructor(t,r,a){super(t,r,dm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Os(this.firestore,null,new mt(t))}withConverter(t){return new En(this.firestore,t,this._path)}}function ee(s,t,...r){if(s=es(s),Kk("collection","path",t),s instanceof jm){const a=Ht.fromString(t,...r);return Rj(a),new En(s,null,a)}{if(!(s instanceof Os||s instanceof En))throw new Ke(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ht.fromString(t,...r));return Rj(a),new En(s.firestore,null,a)}}function U(s,t,...r){if(s=es(s),arguments.length===1&&(t=L1.newId()),Kk("doc","path",t),s instanceof jm){const a=Ht.fromString(t,...r);return Aj(a),new Os(s,null,new mt(a))}{if(!(s instanceof Os||s instanceof En))throw new Ke(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ht.fromString(t,...r));return Aj(a),new Os(s.firestore,s instanceof En?s.converter:null,new mt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="AsyncQueue";class Vj{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new rg(this,"async_queue_retry"),this.Su=()=>{const a=C0();a&&Xe(Lj,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const r=C0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const r=C0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const r=new ua;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Xo(t))throw t;Xe(Lj,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const r=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const n=function(o){let d=o.message||"";return o.stack&&(d=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),d}(a);throw Fa("INTERNAL UNHANDLED ERROR: ",n),a}).then(a=>(this.pu=!1,a))));return this.bu=r,r}enqueueAfterDelay(t,r,a){this.Du(),this.wu.indexOf(t)>-1&&(r=0);const n=lg.createAndSchedule(this,t,r,a,l=>this.Fu(l));return this.fu.push(n),n}Du(){this.gu&&ht()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const r of this.fu)if(r.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const r=this.fu.indexOf(t);this.fu.splice(r,1)}}function zj(s){return function(r,a){if(typeof r!="object"||r===null)return!1;const n=r;for(const l of a)if(l in n&&typeof n[l]=="function")return!0;return!1}(s,["next","error","complete"])}class va extends jm{constructor(t,r,a,n){super(t,r,a,n),this.type="firestore",this._queue=new Vj,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Vj(t),this._firestoreClient=void 0,await t}}}function l8(s,t){const r=typeof s=="object"?s:om(),a=typeof s=="string"?s:t||cx,n=Wn(r,"firestore").getImmediate({identifier:a});if(!n._initialized){const l=f1("firestore");l&&o8(n,...l)}return n}function rd(s){if(s._terminated)throw new Ke(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||c8(s),s._firestoreClient}function c8(s){var t,r,a;const n=s._freezeSettings(),l=function(d,u,m,y){return new A_(d,u,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Qk(y.experimentalLongPollingOptions),y.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,n);s._componentsProvider||!((r=n.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((a=n.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),s._firestoreClient=new ZA(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ki(Vs.fromBase64String(t))}catch(r){throw new Ke(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new ki(Vs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ke(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ds(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ke(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ke(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return kt(this._lat,t._lat)||kt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,n){if(a.length!==n.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==n[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=/^__.*__$/;class u8{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new qn(t,this.data,this.fieldMask,r,this.fieldTransforms):new Zc(t,this.data,r,this.fieldTransforms)}}class Xk{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new qn(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Jk(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class vg{constructor(t,r,a,n,l,o){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=n,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new vg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),n=this.ku({path:a,Qu:!1});return n.$u(t),n}Uu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),n=this.ku({path:a,Qu:!1});return n.Bu(),n}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return bx(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(Jk(this.Lu)&&d8.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class x8{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||gm(t)}ju(t,r,a,n=!1){return new vg({Lu:t,methodName:r,zu:a,path:Ds.emptyPath(),Qu:!1,Gu:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function id(s){const t=s._freezeSettings(),r=gm(s._databaseId);return new x8(s._databaseId,!!t.ignoreUndefinedProperties,r)}function jg(s,t,r,a,n,l={}){const o=s.ju(l.merge||l.mergeFields?2:0,t,r,n);kg("Data must be an object, but it was:",o,a);const d=t4(a,o);let u,m;if(l.merge)u=new kr(o.fieldMask),m=o.fieldTransforms;else if(l.mergeFields){const y=[];for(const j of l.mergeFields){const N=xp(t,j,r);if(!o.contains(N))throw new Ke(Ie.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);r4(y,N)||y.push(N)}u=new kr(y),m=o.fieldTransforms.filter(j=>u.covers(j.field))}else u=null,m=o.fieldTransforms;return new u8(new Js(d),u,m)}class Nm extends nd{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Nm}}class Ng extends nd{_toFieldTransform(t){return new mk(t.path,new Tc)}isEqual(t){return t instanceof Ng}}class wg extends nd{constructor(t,r){super(t),this.Ju=r}_toFieldTransform(t){const r=new Ac(t.serializer,lk(t.serializer,this.Ju));return new mk(t.path,r)}isEqual(t){return t instanceof wg&&this.Ju===t.Ju}}function Zk(s,t,r,a){const n=s.ju(1,t,r);kg("Data must be an object, but it was:",n,a);const l=[],o=Js.empty();Hn(a,(u,m)=>{const y=Ig(t,u,r);m=es(m);const j=n.Uu(y);if(m instanceof Nm)l.push(y);else{const N=od(m,j);N!=null&&(l.push(y),o.set(y,N))}});const d=new kr(l);return new Xk(o,d,n.fieldTransforms)}function e4(s,t,r,a,n,l){const o=s.ju(1,t,r),d=[xp(t,a,r)],u=[n];if(l.length%2!=0)throw new Ke(Ie.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<l.length;N+=2)d.push(xp(t,l[N])),u.push(l[N+1]);const m=[],y=Js.empty();for(let N=d.length-1;N>=0;--N)if(!r4(m,d[N])){const T=d[N];let g=u[N];g=es(g);const B=o.Uu(T);if(g instanceof Nm)m.push(T);else{const D=od(g,B);D!=null&&(m.push(T),y.set(T,D))}}const j=new kr(m);return new Xk(y,j,o.fieldTransforms)}function m8(s,t,r,a=!1){return od(r,s.ju(a?4:3,t))}function od(s,t){if(s4(s=es(s)))return kg("Unsupported field value:",t,s),t4(s,t);if(s instanceof nd)return function(a,n){if(!Jk(n.Lu))throw n.Wu(`${a._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Wu(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(n);l&&n.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,n){const l=[];let o=0;for(const d of a){let u=od(d,n.Ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),l.push(u),o++}return{arrayValue:{values:l}}}(s,t)}return function(a,n){if((a=es(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return lk(n.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=qt.fromDate(a);return{timestampValue:mx(n.serializer,l)}}if(a instanceof qt){const l=new qt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:mx(n.serializer,l)}}if(a instanceof yg)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ki)return{bytesValue:jk(n.serializer,a._byteString)};if(a instanceof Os){const l=n.databaseId,o=a.firestore._databaseId;if(!o.isEqual(l))throw n.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jf(a.firestore._databaseId||n.databaseId,a._key.path)}}if(a instanceof bg)return function(o,d){return{mapValue:{fields:{[H1]:{stringValue:G1},[dx]:{arrayValue:{values:o.toArray().map(m=>{if(typeof m!="number")throw d.Wu("VectorValues must only contain numeric values.");return Kf(d.serializer,m)})}}}}}}(a,n);throw n.Wu(`Unsupported field value: ${vm(a)}`)}(s,t)}function t4(s,t){const r={};return z1(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hn(s,(a,n)=>{const l=od(n,t.qu(a));l!=null&&(r[a]=l)}),{mapValue:{fields:r}}}function s4(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof qt||s instanceof yg||s instanceof ki||s instanceof Os||s instanceof nd||s instanceof bg)}function kg(s,t,r){if(!s4(r)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(r)){const a=vm(r);throw a==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+a)}}function xp(s,t,r){if((t=es(t))instanceof ad)return t._internalPath;if(typeof t=="string")return Ig(s,t);throw bx("Field path arguments must be of type string or ",s,!1,void 0,r)}const h8=new RegExp("[~\\*/\\[\\]]");function Ig(s,t,r){if(t.search(h8)>=0)throw bx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new ad(...t.split("."))._internalPath}catch{throw bx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function bx(s,t,r,a,n){const l=a&&!a.isEmpty(),o=n!==void 0;let d=`Function ${t}() called with invalid data`;r&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(l||o)&&(u+=" (found",l&&(u+=` in field ${a}`),o&&(u+=` in document ${n}`),u+=")"),new Ke(Ie.INVALID_ARGUMENT,d+s+u)}function r4(s,t){return s.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t,r,a,n,l){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=n,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Os(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new p8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(wm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class p8 extends vx{data(){return super.data()}}function wm(s,t){return typeof t=="string"?Ig(s,t):t instanceof ad?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ke(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class Pg extends Sg{}function xe(s,t,...r){let a=[];t instanceof Sg&&a.push(t),a=a.concat(r),function(l){const o=l.filter(u=>u instanceof Eg).length,d=l.filter(u=>u instanceof km).length;if(o>1||o>0&&d>0)throw new Ke(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const n of a)s=n._apply(s);return s}class km extends Pg{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new km(t,r,a)}_apply(t){const r=this._parse(t);return n4(t._query,r),new Xa(t.firestore,t.converter,rp(t._query,r))}_parse(t){const r=id(t.firestore);return function(l,o,d,u,m,y,j){let N;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ke(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){$j(j,y);const g=[];for(const B of j)g.push(Bj(u,l,B));N={arrayValue:{values:g}}}else N=Bj(u,l,j)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||$j(j,y),N=m8(d,o,j,y==="in"||y==="not-in");return vs.create(m,y,N)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function fe(s,t,r){const a=t,n=wm("where",s);return km._create(n,a,r)}class Eg extends Sg{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Eg(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:sa.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(n,l){let o=n;const d=l.getFlattenedFilters();for(const u of d)n4(o,u),o=rp(o,u)}(t._query,r),new Xa(t.firestore,t.converter,rp(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cg extends Pg{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new Cg(t,r)}_apply(t){const r=function(n,l,o){if(n.startAt!==null)throw new Ke(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new Ke(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cc(l,o)}(t._query,this._field,this._direction);return new Xa(t.firestore,t.converter,function(n,l){const o=n.explicitOrderBy.concat([l]);return new Jo(n.path,n.collectionGroup,o,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(t._query,r))}}function f8(s,t="asc"){const r=t,a=wm("orderBy",s);return Cg._create(a,r)}class Tg extends Pg{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new Tg(t,r,a)}_apply(t){return new Xa(t.firestore,t.converter,xx(t._query,this._limit,this._limitType))}}function Vt(s){return i8("limit",s),Tg._create("limit",s,"F")}function Bj(s,t,r){if(typeof(r=es(r))=="string"){if(r==="")throw new Ke(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tk(t)&&r.indexOf("/")!==-1)throw new Ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(Ht.fromString(r));if(!mt.isDocumentKey(a))throw new Ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return tj(s,new mt(a))}if(r instanceof Os)return tj(s,r._key);throw new Ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(r)}.`)}function $j(s,t){if(!Array.isArray(s)||s.length===0)throw new Ke(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function n4(s,t){const r=function(n,l){for(const o of n)for(const d of o.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Ke(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ke(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class i4{convertValue(t,r="none"){switch(On(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ps(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Mn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw ht()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return Hn(t,(n,l)=>{a[n]=this.convertValue(l,r)}),a}convertVectorValue(t){var r,a,n;const l=(n=(a=(r=t.fields)===null||r===void 0?void 0:r[dx].arrayValue)===null||a===void 0?void 0:a.values)===null||n===void 0?void 0:n.map(o=>ps(o.doubleValue));return new bg(l)}convertGeoPoint(t){return new yg(ps(t.latitude),ps(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=cm(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Sc(t));default:return null}}convertTimestamp(t){const r=Rn(t);return new qt(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=Ht.fromString(t);At(Ek(a));const n=new Pc(a.get(1),a.get(3)),l=new mt(a.popFirst(5));return n.isEqual(r)||Fa(`Document ${l} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(s,t,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(t,r):s.toFirestore(t):t,a}class g8 extends i4{constructor(t){super(),this.firestore=t}convertBytes(t){return new ki(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Os(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Dg extends vx{constructor(t,r,a,n,l,o){super(t,r,a,n,o),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(wm("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Iu extends Dg{data(t={}){return super.data(t)}}class o4{constructor(t,r,a,n){this._firestore=t,this._userDataWriter=r,this._snapshot=n,this.metadata=new lo(n.hasPendingWrites,n.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new Iu(this._firestore,this._userDataWriter,a.key,a,new lo(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ke(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,l){if(n._snapshot.oldDocs.isEmpty()){let o=0;return n._snapshot.docChanges.map(d=>{const u=new Iu(n._firestore,n._userDataWriter,d.doc.key,d.doc,new lo(n._snapshot.mutatedKeys.has(d.doc.key),n._snapshot.fromCache),n.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const u=new Iu(n._firestore,n._userDataWriter,d.doc.key,d.doc,new lo(n._snapshot.mutatedKeys.has(d.doc.key),n._snapshot.fromCache),n.query.converter);let m=-1,y=-1;return d.type!==0&&(m=o.indexOf(d.doc.key),o=o.delete(d.doc.key)),d.type!==1&&(o=o.add(d.doc),y=o.indexOf(d.doc.key)),{type:y8(d.type),doc:u,oldIndex:m,newIndex:y}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function y8(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(s){s=sr(s,Os);const t=sr(s.firestore,va);return r8(rd(t),s._key).then(r=>l4(t,s,r))}class Im extends i4{constructor(t){super(),this.firestore=t}convertBytes(t){return new ki(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Os(this.firestore,null,r)}}function jt(s){s=sr(s,Xa);const t=sr(s.firestore,va),r=rd(t),a=new Im(t);return a4(s._query),a8(r,s._query).then(n=>new o4(t,a,s,n))}function Xl(s,t,r){s=sr(s,Os);const a=sr(s.firestore,va),n=_g(s.converter,t,r);return Sm(a,[jg(id(a),"setDoc",s._key,n,s.converter!==null,r).toMutation(s._key,As.none())])}function Zs(s,t,r,...a){s=sr(s,Os);const n=sr(s.firestore,va),l=id(n);let o;return o=typeof(t=es(t))=="string"||t instanceof ad?e4(l,"updateDoc",s._key,t,r,a):Zk(l,"updateDoc",s._key,t),Sm(n,[o.toMutation(s._key,As.exists(!0))])}function Su(s){return Sm(sr(s.firestore,va),[new pm(s._key,As.none())])}function Cn(s,t){const r=sr(s.firestore,va),a=U(s),n=_g(s.converter,t);return Sm(r,[jg(id(s.firestore),"addDoc",a._key,n,s.converter!==null,{}).toMutation(a._key,As.exists(!1))]).then(()=>a)}function ge(s,...t){var r,a,n;s=es(s);let l={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||zj(t[o])||(l=t[o],o++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(zj(t[o])){const j=t[o];t[o]=(r=j.next)===null||r===void 0?void 0:r.bind(j),t[o+1]=(a=j.error)===null||a===void 0?void 0:a.bind(j),t[o+2]=(n=j.complete)===null||n===void 0?void 0:n.bind(j)}let u,m,y;if(s instanceof Os)m=sr(s.firestore,va),y=dm(s._key.path),u={next:j=>{t[o]&&t[o](l4(m,s,j))},error:t[o+1],complete:t[o+2]};else{const j=sr(s,Xa);m=sr(j.firestore,va),y=j._query;const N=new Im(m);u={next:T=>{t[o]&&t[o](new o4(m,N,j,T))},error:t[o+1],complete:t[o+2]},a4(s._query)}return function(N,T,g,B){const D=new fg(B),R=new mg(T,D,g);return N.asyncQueue.enqueueAndForget(async()=>dg(await yx(N),R)),()=>{D.su(),N.asyncQueue.enqueueAndForget(async()=>ug(await yx(N),R))}}(rd(m),y,d,u)}function Sm(s,t){return function(a,n){const l=new ua;return a.asyncQueue.enqueueAndForget(async()=>FA(await t8(a),n,l)),l.promise}(rd(s),t)}function l4(s,t,r){const a=r.docs.get(t._key),n=new Im(s);return new Dg(s,n,t._key,a,new lo(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8={maxAttempts:5};function Rl(s,t){if((s=es(s)).firestore!==t)throw new Ke(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=id(t)}get(t){const r=Rl(t,this._firestore),a=new g8(this._firestore);return this._transaction.lookup([r._key]).then(n=>{if(!n||n.length!==1)return ht();const l=n[0];if(l.isFoundDocument())return new vx(this._firestore,a,l.key,l,r.converter);if(l.isNoDocument())return new vx(this._firestore,a,r._key,null,r.converter);throw ht()})}set(t,r,a){const n=Rl(t,this._firestore),l=_g(n.converter,r,a),o=jg(this._dataReader,"Transaction.set",n._key,l,n.converter!==null,a);return this._transaction.set(n._key,o),this}update(t,r,a,...n){const l=Rl(t,this._firestore);let o;return o=typeof(r=es(r))=="string"||r instanceof ad?e4(this._dataReader,"Transaction.update",l._key,r,a,n):Zk(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,o),this}delete(t){const r=Rl(t,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8 extends v8{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=Rl(t,this._firestore),a=new Im(this._firestore);return super.get(t).then(n=>new Dg(this._firestore,a,r._key,n._document,new lo(!1,!1),r.converter))}}function nt(s,t,r){s=sr(s,va);const a=Object.assign(Object.assign({},b8),r);return function(l){if(l.maxAttempts<1)throw new Ke(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(l,o,d){const u=new ua;return l.asyncQueue.enqueueAndForget(async()=>{const m=await s8(l);new JA(l.asyncQueue,m,d,o,u).Iu()}),u.promise}(rd(s),n=>t(new j8(s,n)),a)}function ve(){return new Ng("serverTimestamp")}function it(s){return new wg("increment",s)}(function(t,r=!0){(function(n){Ko=n})(Ai),ta(new $r("firestore",(a,{instanceIdentifier:n,options:l})=>{const o=a.getProvider("app").getImmediate(),d=new va(new f_(a.getProvider("auth-internal")),new b_(o,a.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ke(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pc(m.options.projectId,y)}(o,n),o);return l=Object.assign({useFetchStreams:r},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),pr(Uv,Wv,t),pr(Uv,Wv,"esm2017")})();var N8="firebase",w8="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(N8,w8,"app");const c4="@firebase/installations",Ag="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=1e4,u4=`w:${Ag}`,x4="FIS_v2",k8="https://firebaseinstallations.googleapis.com/v1",I8=60*60*1e3,S8="installations",P8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ii=new Di(S8,P8,E8);function m4(s){return s instanceof Fr&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4({projectId:s}){return`${k8}/projects/${s}/installations`}function p4(s){return{token:s.token,requestStatus:2,expiresIn:T8(s.expiresIn),creationTime:Date.now()}}async function f4(s,t){const a=(await t.json()).error;return Ii.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function g4({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function C8(s,{refreshToken:t}){const r=g4(s);return r.append("Authorization",_8(t)),r}async function y4(s){const t=await s();return t.status>=500&&t.status<600?s():t}function T8(s){return Number(s.replace("s","000"))}function _8(s){return`${x4} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D8({appConfig:s,heartbeatServiceProvider:t},{fid:r}){const a=h4(s),n=g4(s),l=t.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&n.append("x-firebase-client",m)}const o={fid:r,authVersion:x4,appId:s.appId,sdkVersion:u4},d={method:"POST",headers:n,body:JSON.stringify(o)},u=await y4(()=>fetch(a,d));if(u.ok){const m=await u.json();return{fid:m.fid||r,registrationStatus:2,refreshToken:m.refreshToken,authToken:p4(m.authToken)}}else throw await f4("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=/^[cdef][\w-]{21}$/,mp="";function M8(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const r=O8(s);return R8.test(r)?r:mp}catch{return mp}}function O8(s){return A8(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=new Map;function j4(s,t){const r=Pm(s);N4(r,t),L8(r,t)}function N4(s,t){const r=v4.get(s);if(r)for(const a of r)a(t)}function L8(s,t){const r=V8();r&&r.postMessage({key:s,fid:t}),z8()}let ci=null;function V8(){return!ci&&"BroadcastChannel"in self&&(ci=new BroadcastChannel("[Firebase] FID Change"),ci.onmessage=s=>{N4(s.data.key,s.data.fid)}),ci}function z8(){v4.size===0&&ci&&(ci.close(),ci=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8="firebase-installations-database",$8=1,Si="firebase-installations-store";let _0=null;function Rg(){return _0||(_0=I1(B8,$8,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Si)}}})),_0}async function jx(s,t){const r=Pm(s),n=(await Rg()).transaction(Si,"readwrite"),l=n.objectStore(Si),o=await l.get(r);return await l.put(t,r),await n.done,(!o||o.fid!==t.fid)&&j4(s,t.fid),t}async function w4(s){const t=Pm(s),a=(await Rg()).transaction(Si,"readwrite");await a.objectStore(Si).delete(t),await a.done}async function Em(s,t){const r=Pm(s),n=(await Rg()).transaction(Si,"readwrite"),l=n.objectStore(Si),o=await l.get(r),d=t(o);return d===void 0?await l.delete(r):await l.put(d,r),await n.done,d&&(!o||o.fid!==d.fid)&&j4(s,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(s){let t;const r=await Em(s.appConfig,a=>{const n=F8(a),l=U8(s,n);return t=l.registrationPromise,l.installationEntry});return r.fid===mp?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function F8(s){const t=s||{fid:M8(),registrationStatus:0};return k4(t)}function U8(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(Ii.create("app-offline"));return{installationEntry:t,registrationPromise:n}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=W8(s,r);return{installationEntry:r,registrationPromise:a}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:H8(s)}:{installationEntry:t}}async function W8(s,t){try{const r=await D8(s,t);return jx(s.appConfig,r)}catch(r){throw m4(r)&&r.customData.serverCode===409?await w4(s.appConfig):await jx(s.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function H8(s){let t=await Fj(s.appConfig);for(;t.registrationStatus===1;)await b4(100),t=await Fj(s.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await Mg(s);return a||r}return t}function Fj(s){return Em(s,t=>{if(!t)throw Ii.create("installation-not-found");return k4(t)})}function k4(s){return q8(s)?{fid:s.fid,registrationStatus:0}:s}function q8(s){return s.registrationStatus===1&&s.registrationTime+d4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G8({appConfig:s,heartbeatServiceProvider:t},r){const a=Q8(s,r),n=C8(s,r),l=t.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&n.append("x-firebase-client",m)}const o={installation:{sdkVersion:u4,appId:s.appId}},d={method:"POST",headers:n,body:JSON.stringify(o)},u=await y4(()=>fetch(a,d));if(u.ok){const m=await u.json();return p4(m)}else throw await f4("Generate Auth Token",u)}function Q8(s,{fid:t}){return`${h4(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Og(s,t=!1){let r;const a=await Em(s.appConfig,l=>{if(!I4(l))throw Ii.create("not-registered");const o=l.authToken;if(!t&&X8(o))return l;if(o.requestStatus===1)return r=K8(s,t),l;{if(!navigator.onLine)throw Ii.create("app-offline");const d=Z8(l);return r=Y8(s,d),d}});return r?await r:a.authToken}async function K8(s,t){let r=await Uj(s.appConfig);for(;r.authToken.requestStatus===1;)await b4(100),r=await Uj(s.appConfig);const a=r.authToken;return a.requestStatus===0?Og(s,t):a}function Uj(s){return Em(s,t=>{if(!I4(t))throw Ii.create("not-registered");const r=t.authToken;return eR(r)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function Y8(s,t){try{const r=await G8(s,t),a=Object.assign(Object.assign({},t),{authToken:r});return await jx(s.appConfig,a),r}catch(r){if(m4(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await w4(s.appConfig);else{const a=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await jx(s.appConfig,a)}throw r}}function I4(s){return s!==void 0&&s.registrationStatus===2}function X8(s){return s.requestStatus===2&&!J8(s)}function J8(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+I8}function Z8(s){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:t})}function eR(s){return s.requestStatus===1&&s.requestTime+d4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(s){const t=s,{installationEntry:r,registrationPromise:a}=await Mg(t);return a?a.catch(console.error):Og(t).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(s,t=!1){const r=s;return await rR(r),(await Og(r,t)).token}async function rR(s){const{registrationPromise:t}=await Mg(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(s){if(!s||!s.options)throw D0("App Configuration");if(!s.name)throw D0("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!s.options[r])throw D0(r);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function D0(s){return Ii.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4="installations",nR="installations-internal",iR=s=>{const t=s.getProvider("app").getImmediate(),r=aR(t),a=Wn(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},oR=s=>{const t=s.getProvider("app").getImmediate(),r=Wn(t,S4).getImmediate();return{getId:()=>tR(r),getToken:n=>sR(r,n)}};function lR(){ta(new $r(S4,iR,"PUBLIC")),ta(new $r(nR,oR,"PRIVATE"))}lR();pr(c4,Ag);pr(c4,Ag,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="analytics",cR="firebase_id",dR="origin",uR=60*1e3,xR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new im("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pr=new Di("analytics","Analytics",mR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(s){if(!s.startsWith(Lg)){const t=Pr.create("invalid-gtag-resource",{gtagURL:s});return fr.warn(t.message),""}return s}function P4(s){return Promise.all(s.map(t=>t.catch(r=>r)))}function pR(s,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(s,t)),r}function fR(s,t){const r=pR("firebase-js-sdk-policy",{createScriptURL:hR}),a=document.createElement("script"),n=`${Lg}?l=${s}&id=${t}`;a.src=r?r==null?void 0:r.createScriptURL(n):n,a.async=!0,document.head.appendChild(a)}function gR(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function yR(s,t,r,a,n,l){const o=a[n];try{if(o)await t[o];else{const u=(await P4(r)).find(m=>m.measurementId===n);u&&await t[u.appId]}}catch(d){fr.error(d)}s("config",n,l)}async function bR(s,t,r,a,n){try{let l=[];if(n&&n.send_to){let o=n.send_to;Array.isArray(o)||(o=[o]);const d=await P4(r);for(const u of o){const m=d.find(j=>j.measurementId===u),y=m&&t[m.appId];if(y)l.push(y);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),s("event",a,n||{})}catch(l){fr.error(l)}}function vR(s,t,r,a){async function n(l,...o){try{if(l==="event"){const[d,u]=o;await bR(s,t,r,d,u)}else if(l==="config"){const[d,u]=o;await yR(s,t,r,a,d,u)}else if(l==="consent"){const[d,u]=o;s("consent",d,u)}else if(l==="get"){const[d,u,m]=o;s("get",d,u,m)}else if(l==="set"){const[d]=o;s("set",d)}else s(l,...o)}catch(d){fr.error(d)}}return n}function jR(s,t,r,a,n){let l=function(...o){window[a].push(arguments)};return window[n]&&typeof window[n]=="function"&&(l=window[n]),window[n]=vR(l,s,t,r),{gtagCore:l,wrappedGtag:window[n]}}function NR(s){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(Lg)&&r.src.includes(s))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=30,kR=1e3;class IR{constructor(t={},r=kR){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const E4=new IR;function SR(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function PR(s){var t;const{appId:r,apiKey:a}=s,n={method:"GET",headers:SR(a)},l=xR.replace("{app-id}",r),o=await fetch(l,n);if(o.status!==200&&o.status!==304){let d="";try{const u=await o.json();!((t=u.error)===null||t===void 0)&&t.message&&(d=u.error.message)}catch{}throw Pr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:d})}return o.json()}async function ER(s,t=E4,r){const{appId:a,apiKey:n,measurementId:l}=s.options;if(!a)throw Pr.create("no-app-id");if(!n){if(l)return{measurementId:l,appId:a};throw Pr.create("no-api-key")}const o=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new _R;return setTimeout(async()=>{d.abort()},r!==void 0?r:uR),C4({appId:a,apiKey:n,measurementId:l},o,d,t)}async function C4(s,{throttleEndTimeMillis:t,backoffCount:r},a,n=E4){var l;const{appId:o,measurementId:d}=s;try{await CR(a,t)}catch(u){if(d)return fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:d};throw u}try{const u=await PR(s);return n.deleteThrottleMetadata(o),u}catch(u){const m=u;if(!TR(m)){if(n.deleteThrottleMetadata(o),d)return fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:o,measurementId:d};throw u}const y=Number((l=m==null?void 0:m.customData)===null||l===void 0?void 0:l.httpStatus)===503?Av(r,n.intervalMillis,wR):Av(r,n.intervalMillis),j={throttleEndTimeMillis:Date.now()+y,backoffCount:r+1};return n.setThrottleMetadata(o,j),fr.debug(`Calling attemptFetch again in ${y} millis`),C4(s,j,a,n)}}function CR(s,t){return new Promise((r,a)=>{const n=Math.max(t-Date.now(),0),l=setTimeout(r,n);s.addEventListener(()=>{clearTimeout(l),a(Pr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function TR(s){if(!(s instanceof Fr)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class _R{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function DR(s,t,r,a,n){if(n&&n.global){s("event",r,a);return}else{const l=await t,o=Object.assign(Object.assign({},a),{send_to:l});s("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(){if(j1())try{await N1()}catch(s){return fr.warn(Pr.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return fr.warn(Pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function RR(s,t,r,a,n,l,o){var d;const u=ER(s);u.then(T=>{r[T.measurementId]=T.appId,s.options.measurementId&&T.measurementId!==s.options.measurementId&&fr.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>fr.error(T)),t.push(u);const m=AR().then(T=>{if(T)return a.getId()}),[y,j]=await Promise.all([u,m]);NR(l)||fR(l,y.measurementId),n("js",new Date);const N=(d=o==null?void 0:o.config)!==null&&d!==void 0?d:{};return N[dR]="firebase",N.update=!0,j!=null&&(N[cR]=j),n("config",y.measurementId,N),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t){this.app=t}_delete(){return delete Jl[this.app.options.appId],Promise.resolve()}}let Jl={},Wj=[];const Hj={};let A0="dataLayer",OR="gtag",qj,T4,Gj=!1;function LR(){const s=[];if(v1()&&s.push("This is a browser extension environment."),KT()||s.push("Cookies are not available."),s.length>0){const t=s.map((a,n)=>`(${n+1}) ${a}`).join(" "),r=Pr.create("invalid-analytics-context",{errorInfo:t});fr.warn(r.message)}}function VR(s,t,r){LR();const a=s.options.appId;if(!a)throw Pr.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pr.create("no-api-key");if(Jl[a]!=null)throw Pr.create("already-exists",{id:a});if(!Gj){gR(A0);const{wrappedGtag:l,gtagCore:o}=jR(Jl,Wj,Hj,A0,OR);T4=l,qj=o,Gj=!0}return Jl[a]=RR(s,Wj,Hj,t,qj,A0,r),new MR(s)}function zR(s=om()){s=es(s);const t=Wn(s,Nx);return t.isInitialized()?t.getImmediate():BR(s)}function BR(s,t={}){const r=Wn(s,Nx);if(r.isInitialized()){const n=r.getImmediate();if(Dn(t,r.getOptions()))return n;throw Pr.create("already-initialized")}return r.initialize({options:t})}function $R(s,t,r,a){s=es(s),DR(T4,Jl[s.app.options.appId],t,r,a).catch(n=>fr.error(n))}const Qj="@firebase/analytics",Kj="0.10.12";function FR(){ta(new $r(Nx,(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),n=t.getProvider("installations-internal").getImmediate();return VR(a,n,r)},"PUBLIC")),ta(new $r("analytics-internal",s,"PRIVATE")),pr(Qj,Kj),pr(Qj,Kj,"esm2017");function s(t){try{const r=t.getProvider(Nx).getImmediate();return{logEvent:(a,n,l)=>$R(r,a,n,l)}}catch(r){throw Pr.create("interop-component-reg-failed",{reason:r})}}}FR();function Vg(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r}function _4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UR=_4,D4=new Di("auth","Firebase",_4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new im("@firebase/auth");function WR(s,...t){wx.logLevel<=Ct.WARN&&wx.warn(`Auth (${Ai}): ${s}`,...t)}function Pu(s,...t){wx.logLevel<=Ct.ERROR&&wx.error(`Auth (${Ai}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(s,...t){throw zg(s,...t)}function ma(s,...t){return zg(s,...t)}function A4(s,t,r){const a=Object.assign(Object.assign({},UR()),{[t]:r});return new Di("auth","Firebase",a).create(t,{appName:s.name})}function Ma(s){return A4(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zg(s,...t){if(typeof s!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(r,...a)}return D4.create(s,...t)}function yt(s,t,...r){if(!s)throw zg(t,...r)}function _a(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Pu(t),new Error(t)}function Wa(s,t){s||_a(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function HR(){return Yj()==="http:"||Yj()==="https:"}function Yj(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HR()||v1()||"connection"in navigator)?navigator.onLine:!0}function GR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,r){this.shortDelay=t,this.longDelay=r,Wa(r>t,"Short delay should be less than long delay!"),this.isMobile=UT()||qT()}get(){return qR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(s,t){Wa(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YR=new ld(3e4,6e4);function Gn(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Ja(s,t,r,a,n={}){return M4(s,n,async()=>{let l={},o={};a&&(t==="GET"?o=a:l={body:JSON.stringify(a)});const d=Xc(Object.assign({key:s.config.apiKey},o)).slice(1),u=await s._getAdditionalHeaders();u["Content-Type"]="application/json",s.languageCode&&(u["X-Firebase-Locale"]=s.languageCode);const m=Object.assign({method:t,headers:u},l);return HT()||(m.referrerPolicy="no-referrer"),R4.fetch()(await O4(s,s.config.apiHost,r,d),m)})}async function M4(s,t,r){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},QR),t);try{const n=new JR(s),l=await Promise.race([r(),n.promise]);n.clearNetworkTimeout();const o=await l.json();if("needConfirmation"in o)throw eu(s,"account-exists-with-different-credential",o);if(l.ok&&!("errorMessage"in o))return o;{const d=l.ok?o.errorMessage:o.error.message,[u,m]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw eu(s,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw eu(s,"email-already-in-use",o);if(u==="USER_DISABLED")throw eu(s,"user-disabled",o);const y=a[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw A4(s,y,m);ra(s,y)}}catch(n){if(n instanceof Fr)throw n;ra(s,"network-request-failed",{message:String(n)})}}async function cd(s,t,r,a,n={}){const l=await Ja(s,t,r,a,n);return"mfaPendingCredential"in l&&ra(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function O4(s,t,r,a){const n=`${t}${r}?${a}`,l=s,o=l.config.emulator?Bg(s.config,n):`${s.config.apiScheme}://${n}`;return KR.includes(r)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(o).toString():o}function XR(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(ma(this.auth,"network-request-failed")),YR.get())})}}function eu(s,t,r){const a={appName:s.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const n=ma(s,t,a);return n.customData._tokenResponse=r,n}function Xj(s){return s!==void 0&&s.enterprise!==void 0}class ZR{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return XR(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eM(s,t){return Ja(s,"GET","/v2/recaptchaConfig",Gn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(s,t){return Ja(s,"POST","/v1/accounts:delete",t)}async function kx(s,t){return Ja(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function sM(s,t=!1){const r=es(s),a=await r.getIdToken(t),n=$g(a);yt(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");const l=typeof n.firebase=="object"?n.firebase:void 0,o=l==null?void 0:l.sign_in_provider;return{claims:n,token:a,authTime:Zl(R0(n.auth_time)),issuedAtTime:Zl(R0(n.iat)),expirationTime:Zl(R0(n.exp)),signInProvider:o||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function R0(s){return Number(s)*1e3}function $g(s){const[t,r,a]=s.split(".");if(t===void 0||r===void 0||a===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const n=h1(r);return n?JSON.parse(n):(Pu("Failed to decode base64 JWT payload"),null)}catch(n){return Pu("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function Jj(s){const t=$g(s);return yt(t,"internal-error"),yt(typeof t.exp<"u","internal-error"),yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(s,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof Fr&&rM(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function rM({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const n=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(s){var t;const r=s.auth,a=await s.getIdToken(),n=await zo(s,kx(r,{idToken:a}));yt(n==null?void 0:n.users.length,r,"internal-error");const l=n.users[0];s._notifyReloadListener(l);const o=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?L4(l.providerUserInfo):[],d=iM(s.providerData,o),u=s.isAnonymous,m=!(s.email&&l.passwordHash)&&!(d!=null&&d.length),y=u?m:!1,j={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new pp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,j)}async function nM(s){const t=es(s);await Ix(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function iM(s,t){return[...s.filter(a=>!t.some(n=>n.providerId===a.providerId)),...t]}function L4(s){return s.map(t=>{var{providerId:r}=t,a=Vg(t,["providerId"]);return{providerId:r,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(s,t){const r=await M4(s,{},async()=>{const a=Xc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:l}=s.config,o=await O4(s,n,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",R4.fetch()(o,{method:"POST",headers:d,body:a})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function lM(s,t){return Ja(s,"POST","/v2/accounts:revokeToken",Gn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){yt(t.idToken,"internal-error"),yt(typeof t.idToken<"u","internal-error"),yt(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Jj(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){yt(t.length!==0,"internal-error");const r=Jj(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:n,expiresIn:l}=await oM(t,r);this.updateTokensAndExpiration(a,n,Number(l))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:n,expirationTime:l}=r,o=new wo;return a&&(yt(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),n&&(yt(typeof n=="string","internal-error",{appName:t}),o.accessToken=n),l&&(yt(typeof l=="number","internal-error",{appName:t}),o.expirationTime=l),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new wo,this.toJSON())}_performRefresh(){return _a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(s,t){yt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Yr{constructor(t){var{uid:r,auth:a,stsTokenManager:n}=t,l=Vg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=a,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new pp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const r=await zo(this,this.stsTokenManager.getToken(this.auth,t));return yt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return sM(this,t)}reload(){return nM(this)}_assign(t){this!==t&&(yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Yr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await Ix(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(Ma(this.auth));const t=await this.getIdToken();return await zo(this,tM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var a,n,l,o,d,u,m,y;const j=(a=r.displayName)!==null&&a!==void 0?a:void 0,N=(n=r.email)!==null&&n!==void 0?n:void 0,T=(l=r.phoneNumber)!==null&&l!==void 0?l:void 0,g=(o=r.photoURL)!==null&&o!==void 0?o:void 0,B=(d=r.tenantId)!==null&&d!==void 0?d:void 0,D=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,R=(m=r.createdAt)!==null&&m!==void 0?m:void 0,$=(y=r.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:z,emailVerified:Z,isAnonymous:G,providerData:Y,stsTokenManager:V}=r;yt(z&&V,t,"internal-error");const x=wo.fromJSON(this.name,V);yt(typeof z=="string",t,"internal-error"),sn(j,t.name),sn(N,t.name),yt(typeof Z=="boolean",t,"internal-error"),yt(typeof G=="boolean",t,"internal-error"),sn(T,t.name),sn(g,t.name),sn(B,t.name),sn(D,t.name),sn(R,t.name),sn($,t.name);const q=new Yr({uid:z,auth:t,email:N,emailVerified:Z,displayName:j,isAnonymous:G,photoURL:g,phoneNumber:T,tenantId:B,stsTokenManager:x,createdAt:R,lastLoginAt:$});return Y&&Array.isArray(Y)&&(q.providerData=Y.map(W=>Object.assign({},W))),D&&(q._redirectEventId=D),q}static async _fromIdTokenResponse(t,r,a=!1){const n=new wo;n.updateFromServerResponse(r);const l=new Yr({uid:r.localId,auth:t,stsTokenManager:n,isAnonymous:a});return await Ix(l),l}static async _fromGetAccountInfoResponse(t,r,a){const n=r.users[0];yt(n.localId!==void 0,"internal-error");const l=n.providerUserInfo!==void 0?L4(n.providerUserInfo):[],o=!(n.email&&n.passwordHash)&&!(l!=null&&l.length),d=new wo;d.updateFromIdToken(a);const u=new Yr({uid:n.localId,auth:t,stsTokenManager:d,isAnonymous:o}),m={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:l,metadata:new pp(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(l!=null&&l.length)};return Object.assign(u,m),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=new Map;function Da(s){Wa(s instanceof Function,"Expected a class definition");let t=Zj.get(s);return t?(Wa(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,Zj.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}V4.type="NONE";const eN=V4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(s,t,r){return`firebase:${s}:${t}:${r}`}class ko{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:n,name:l}=this.auth;this.fullUserKey=Eu(this.userKey,n.apiKey,l),this.fullPersistenceKey=Eu("persistence",n.apiKey,l),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await kx(this.auth,{idToken:t}).catch(()=>{});return r?Yr._fromGetAccountInfoResponse(this.auth,r,t):null}return Yr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new ko(Da(eN),t,a);const n=(await Promise.all(r.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=n[0]||Da(eN);const o=Eu(a,t.config.apiKey,t.name);let d=null;for(const m of r)try{const y=await m._get(o);if(y){let j;if(typeof y=="string"){const N=await kx(t,{idToken:y}).catch(()=>{});if(!N)break;j=await Yr._fromGetAccountInfoResponse(t,N,y)}else j=Yr._fromJSON(t,y);m!==l&&(d=j),l=m;break}}catch{}const u=n.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!u.length?new ko(l,t,a):(l=u[0],d&&await l._set(o,d.toJSON()),await Promise.all(r.map(async m=>{if(m!==l)try{await m._remove(o)}catch{}})),new ko(l,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(F4(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(z4(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(W4(t))return"Blackberry";if(H4(t))return"Webos";if(B4(t))return"Safari";if((t.includes("chrome/")||$4(t))&&!t.includes("edge/"))return"Chrome";if(U4(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function z4(s=Ks()){return/firefox\//i.test(s)}function B4(s=Ks()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $4(s=Ks()){return/crios\//i.test(s)}function F4(s=Ks()){return/iemobile/i.test(s)}function U4(s=Ks()){return/android/i.test(s)}function W4(s=Ks()){return/blackberry/i.test(s)}function H4(s=Ks()){return/webos/i.test(s)}function Fg(s=Ks()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function cM(s=Ks()){var t;return Fg(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function dM(){return GT()&&document.documentMode===10}function q4(s=Ks()){return Fg(s)||U4(s)||H4(s)||W4(s)||/windows phone/i.test(s)||F4(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(s,t=[]){let r;switch(s){case"Browser":r=tN(Ks());break;case"Worker":r=`${tN(Ks())}-${s}`;break;default:r=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ai}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=l=>new Promise((o,d)=>{try{const u=t(l);o(u)}catch(u){d(u)}});a.onAbort=r,this.queue.push(a);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const n of r)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(s,t={}){return Ja(s,"GET","/v2/passwordPolicy",Gn(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=6;class hM{constructor(t){var r,a,n,l;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:mM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,a,n,l,o,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(n=u.containsLowercaseLetter)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(l=u.containsUppercaseLetter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),n&&(r.meetsMaxPasswordLength=t.length<=n)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let n=0;n<t.length;n++)a=t.charAt(n),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,n,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(t,r,a,n){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sN(this),this.idTokenSubscription=new sN(this),this.beforeStateQueue=new uM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Da(r)),this._initializationPromise=this.queue(async()=>{var a,n,l;if(!this._deleted&&(this.persistenceManager=await ko.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await kx(this,{idToken:t}),a=await Yr._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(jr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(d,d))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let n=a,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,d=n==null?void 0:n._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===d)&&(u!=null&&u.user)&&(n=u.user,l=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Ix(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=GR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jr(this.app))return Promise.reject(Ma(this));const r=t?es(t):null;return r&&yt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(Ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jr(this.app)?Promise.reject(Ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Da(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await xM(this),r=new hM(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Di("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await lM(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Da(t)||this._popupRedirectResolver;yt(r,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Da(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,n){if(this._deleted)return()=>{};const l=typeof r=="function"?r:r.next.bind(r);let o=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(d,this,"internal-error"),d.then(()=>{o||l(this.currentUser)}),typeof r=="function"){const u=t.addObserver(r,a,n);return()=>{o=!0,u()}}else{const u=t.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=G4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(r["X-Firebase-Client"]=a);const n=await this._getAppCheckToken();return n&&(r["X-Firebase-AppCheck"]=n),r}async _getAppCheckToken(){var t;if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&WR(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Oi(s){return es(s)}class sN{constructor(t){this.auth=t,this.observer=null,this.addObserver=e6(r=>this.observer=r)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fM(s){Cm=s}function Q4(s){return Cm.loadJS(s)}function gM(){return Cm.recaptchaEnterpriseScript}function yM(){return Cm.gapiScript}function bM(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class vM{constructor(){this.enterprise=new jM}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class jM{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const NM="recaptcha-enterprise",K4="NO_RECAPTCHA";class wM{constructor(t){this.type=NM,this.auth=Oi(t)}async verify(t="verify",r=!1){async function a(l){if(!r){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(o,d)=>{eM(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new ZR(u);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,o(m.siteKey)}}).catch(u=>{d(u)})})}function n(l,o,d){const u=window.grecaptcha;Xj(u)?u.enterprise.ready(()=>{u.enterprise.execute(l,{action:t}).then(m=>{o(m)}).catch(()=>{o(K4)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vM().execute("siteKey",{action:"verify"}):new Promise((l,o)=>{a(this.auth).then(d=>{if(!r&&Xj(window.grecaptcha))n(d,l,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=gM();u.length!==0&&(u+=d),Q4(u).then(()=>{n(d,l,o)}).catch(m=>{o(m)})}}).catch(d=>{o(d)})})}}async function wl(s,t,r,a=!1,n=!1){const l=new wM(s);let o;if(n)o=K4;else try{o=await l.verify(r)}catch{o=await l.verify(r,!0)}const d=Object.assign({},t);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const u=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:m,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const u=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return a?Object.assign(d,{captchaResp:o}):Object.assign(d,{captchaResponse:o}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function fp(s,t,r,a,n){var l,o;if(n==="EMAIL_PASSWORD_PROVIDER")if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await wl(s,t,r,r==="getOobCode");return a(s,d)}else return a(s,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await wl(s,t,r,r==="getOobCode");return a(s,u)}else return Promise.reject(d)});else if(n==="PHONE_PROVIDER")if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const d=await wl(s,t,r);return a(s,d).catch(async u=>{var m;if(((m=s._getRecaptchaConfig())===null||m===void 0?void 0:m.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const y=await wl(s,t,r,!1,!0);return a(s,y)}return Promise.reject(u)})}else{const d=await wl(s,t,r,!1,!0);return a(s,d)}else return Promise.reject(n+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(s,t){const r=Wn(s,"auth");if(r.isInitialized()){const n=r.getImmediate(),l=r.getOptions();if(Dn(l,t??{}))return n;ra(n,"already-initialized")}return r.initialize({options:t})}function IM(s,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(Da);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function SM(s,t,r){const a=Oi(s);yt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const n=!!(r!=null&&r.disableWarnings),l=Y4(t),{host:o,port:d}=PM(t),u=d===null?"":`:${d}`,m={url:`${l}//${o}${u}/`},y=Object.freeze({host:o,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!a._canInitEmulator){yt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),yt(Dn(m,a.config.emulator)&&Dn(y,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=m,a.emulatorConfig=y,a.settings.appVerificationDisabledForTesting=!0,n||EM()}function Y4(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function PM(s){const t=Y4(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(a);if(n){const l=n[1];return{host:l,port:rN(a.substr(l.length+1))}}else{const[l,o]=a.split(":");return{host:l,port:rN(o)}}}function rN(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function EM(){function s(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return _a("not implemented")}_getIdTokenResponse(t){return _a("not implemented")}_linkToIdToken(t,r){return _a("not implemented")}_getReauthenticationResolver(t){return _a("not implemented")}}async function CM(s,t){return Ja(s,"POST","/v1/accounts:update",t)}async function TM(s,t){return Ja(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(s,t){return cd(s,"POST","/v1/accounts:signInWithPassword",Gn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(s,t){return cd(s,"POST","/v1/accounts:signInWithEmailLink",Gn(s,t))}async function AM(s,t){return cd(s,"POST","/v1/accounts:signInWithEmailLink",Gn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Ug{constructor(t,r,a,n=null){super("password",a),this._email=t,this._password=r,this._tenantId=n}static _fromEmailAndPassword(t,r){return new Rc(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new Rc(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fp(t,r,"signInWithPassword",_M,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return DM(t,{email:this._email,oobCode:this._password});default:ra(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fp(t,a,"signUpPassword",TM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return AM(t,{idToken:r,email:this._email,oobCode:this._password});default:ra(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(s,t){return cd(s,"POST","/v1/accounts:signInWithIdp",Gn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="http://localhost";class Pi extends Ug{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Pi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):ra("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:n}=r,l=Vg(r,["providerId","signInMethod"]);if(!a||!n)return null;const o=new Pi(a,n);return o.idToken=l.idToken||void 0,o.accessToken=l.accessToken||void 0,o.secret=l.secret,o.nonce=l.nonce,o.pendingToken=l.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return Io(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,Io(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Io(t,r)}buildRequest(){const t={requestUri:RM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Xc(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OM(s){const t=Cl(Tl(s)).link,r=t?Cl(Tl(t)).deep_link_id:null,a=Cl(Tl(s)).deep_link_id;return(a?Cl(Tl(a)).link:null)||a||r||t||s}class Wg{constructor(t){var r,a,n,l,o,d;const u=Cl(Tl(t)),m=(r=u.apiKey)!==null&&r!==void 0?r:null,y=(a=u.oobCode)!==null&&a!==void 0?a:null,j=MM((n=u.mode)!==null&&n!==void 0?n:null);yt(m&&y&&j,"argument-error"),this.apiKey=m,this.operation=j,this.code=y,this.continueUrl=(l=u.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(d=u.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const r=OM(t);try{return new Wg(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(t,r){return Rc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=Wg.parseLink(r);return yt(a,"argument-error"),Rc._fromEmailAndCode(t,a.code,a.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends X4{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends dd{constructor(){super("facebook.com")}static credential(t){return Pi._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return cn.credentialFromTaggedObject(t)}static credentialFromError(t){return cn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return cn.credential(t.oauthAccessToken)}catch{return null}}}cn.FACEBOOK_SIGN_IN_METHOD="facebook.com";cn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Pi._fromParams({providerId:dn.PROVIDER_ID,signInMethod:dn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return dn.credentialFromTaggedObject(t)}static credentialFromError(t){return dn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return dn.credential(r,a)}catch{return null}}}dn.GOOGLE_SIGN_IN_METHOD="google.com";dn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends dd{constructor(){super("github.com")}static credential(t){return Pi._fromParams({providerId:un.PROVIDER_ID,signInMethod:un.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return un.credentialFromTaggedObject(t)}static credentialFromError(t){return un.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return un.credential(t.oauthAccessToken)}catch{return null}}}un.GITHUB_SIGN_IN_METHOD="github.com";un.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends dd{constructor(){super("twitter.com")}static credential(t,r){return Pi._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return xn.credentialFromTaggedObject(t)}static credentialFromError(t){return xn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return xn.credential(r,a)}catch{return null}}}xn.TWITTER_SIGN_IN_METHOD="twitter.com";xn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(s,t){return cd(s,"POST","/v1/accounts:signUp",Gn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,n=!1){const l=await Yr._fromIdTokenResponse(t,a,n),o=aN(a);return new Ei({user:l,providerId:o,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const n=aN(a);return new Ei({user:t,providerId:n,_tokenResponse:a,operationType:r})}}function aN(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx extends Fr{constructor(t,r,a,n){var l;super(r.code,r.message),this.operationType=a,this.user=n,Object.setPrototypeOf(this,Sx.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,n){return new Sx(t,r,a,n)}}function J4(s,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sx._fromErrorAndOperation(s,l,t,a):l})}async function VM(s,t,r=!1){const a=await zo(s,t._linkToIdToken(s.auth,await s.getIdToken()),r);return Ei._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(s,t,r=!1){const{auth:a}=s;if(jr(a.app))return Promise.reject(Ma(a));const n="reauthenticate";try{const l=await zo(s,J4(a,n,t,s),r);yt(l.idToken,a,"internal-error");const o=$g(l.idToken);yt(o,a,"internal-error");const{sub:d}=o;return yt(s.uid===d,a,"user-mismatch"),Ei._forOperation(s,n,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ra(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4(s,t,r=!1){if(jr(s.app))return Promise.reject(Ma(s));const a="signIn",n=await J4(s,a,t),l=await Ei._fromIdTokenResponse(s,a,n);return r||await s._updateCurrentUser(l.user),l}async function BM(s,t){return Z4(Oi(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(s){const t=Oi(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function $M(s,t,r){if(jr(s.app))return Promise.reject(Ma(s));const a=Oi(s),o=await fp(a,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LM,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&e3(s),u}),d=await Ei._fromIdTokenResponse(a,"signIn",o);return await a._updateCurrentUser(d.user),d}function FM(s,t,r){return jr(s.app)?Promise.reject(Ma(s)):BM(es(s),el.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&e3(s),a})}function Hg(s,t){return UM(es(s),null,t)}async function UM(s,t,r){const{auth:a}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(l.email=t),r&&(l.password=r);const o=await zo(s,CM(a,l));await s._updateTokensIfNecessary(o,!0)}function WM(s,t,r,a){return es(s).onIdTokenChanged(t,r,a)}function HM(s,t,r){return es(s).beforeAuthStateChanged(t,r)}function _t(s,t,r,a){return es(s).onAuthStateChanged(t,r,a)}function Tm(s){return es(s).signOut()}const Px="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Px,"1"),this.storage.removeItem(Px),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=1e3,GM=10;class s3 extends t3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),n=this.localCache[r];a!==n&&t(r,n,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,d,u)=>{this.notifyListeners(o,u)});return}const a=t.key;r?this.detachListener():this.stopPolling();const n=()=>{const o=this.storage.getItem(a);!r&&this.localCache[a]===o||this.notifyListeners(a,o)},l=this.storage.getItem(a);dM()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(n,GM):n()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},qM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}s3.type="LOCAL";const QM=s3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3 extends t3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}r3.type="SESSION";const a3=r3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(n=>n.isListeningto(t));if(r)return r;const a=new _m(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:n,data:l}=r.data,o=this.handlersMap[n];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:n});const d=Array.from(o).map(async m=>m(r.origin,l)),u=await KM(d);r.ports[0].postMessage({status:"done",eventId:a,eventType:n,response:u})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_m.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(s="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let l,o;return new Promise((d,u)=>{const m=qg("",20);n.port1.start();const y=setTimeout(()=>{u(new Error("unsupported_event"))},a);o={messageChannel:n,onMessage(j){const N=j;if(N.data.eventId===m)switch(N.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(N.data.response);break;default:clearTimeout(y),clearTimeout(l),u(new Error("invalid_response"));break}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:m,data:r},[n.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(){return window}function XM(s){ha().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(){return typeof ha().WorkerGlobalScope<"u"&&typeof ha().importScripts=="function"}async function JM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZM(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function e7(){return n3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="firebaseLocalStorageDb",t7=1,Ex="firebaseLocalStorage",o3="fbase_key";class ud{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Dm(s,t){return s.transaction([Ex],t?"readwrite":"readonly").objectStore(Ex)}function s7(){const s=indexedDB.deleteDatabase(i3);return new ud(s).toPromise()}function gp(){const s=indexedDB.open(i3,t7);return new Promise((t,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Ex,{keyPath:o3})}catch(n){r(n)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Ex)?t(a):(a.close(),await s7(),t(await gp()))})})}async function nN(s,t,r){const a=Dm(s,!0).put({[o3]:t,value:r});return new ud(a).toPromise()}async function r7(s,t){const r=Dm(s,!1).get(t),a=await new ud(r).toPromise();return a===void 0?null:a.value}function iN(s,t){const r=Dm(s,!0).delete(t);return new ud(r).toPromise()}const a7=800,n7=3;class l3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>n7)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_m._getInstance(e7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await JM(),!this.activeServiceWorker)return;this.sender=new YM(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((r=a[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ZM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await gp();return await nN(t,Px,"1"),await iN(t,Px),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>nN(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>r7(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>iN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(n=>{const l=Dm(n,!1).getAll();return new ud(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:n,value:l}of t)a.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(l)&&(this.notifyListeners(n,l),r.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!a.has(n)&&(this.notifyListeners(n,null),r.push(n));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l3.type="LOCAL";const i7=l3;new ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(s,t){return t?Da(t):(yt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends Ug{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Io(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Io(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Io(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function l7(s){return Z4(s.auth,new Gg(s),s.bypassAuthState)}function c7(s){const{auth:t,user:r}=s;return yt(r,t,"internal-error"),zM(r,new Gg(s),s.bypassAuthState)}async function d7(s){const{auth:t,user:r}=s;return yt(r,t,"internal-error"),VM(r,new Gg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(t,r,a,n,l=!1){this.auth=t,this.resolver=a,this.user=n,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:n,tenantId:l,error:o,type:d}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:a,tenantId:l||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return l7;case"linkViaPopup":case"linkViaRedirect":return d7;case"reauthViaPopup":case"reauthViaRedirect":return c7;default:ra(this.auth,"internal-error")}}resolve(t){Wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=new ld(2e3,1e4);class co extends c3{constructor(t,r,a,n,l){super(t,r,n,l),this.provider=a,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return yt(t,this.auth,"internal-error"),t}async onExecution(){Wa(this.filter.length===1,"Popup operations only handle one event");const t=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ma(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ma(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if(!((a=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ma(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,u7.get())};t()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7="pendingRedirect",Cu=new Map;class m7 extends c3{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=Cu.get(this.auth._key());if(!t){try{const a=await h7(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}Cu.set(this.auth._key(),t)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h7(s,t){const r=g7(t),a=f7(s);if(!await a._isAvailable())return!1;const n=await a._get(r)==="true";return await a._remove(r),n}function p7(s,t){Cu.set(s._key(),t)}function f7(s){return Da(s._redirectPersistence)}function g7(s){return Eu(x7,s.config.apiKey,s.name)}async function y7(s,t,r=!1){if(jr(s.app))return Promise.reject(Ma(s));const a=Oi(s),n=o7(a,t),o=await new m7(a,n,r).execute();return o&&!r&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=10*60*1e3;class v7{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!j7(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!d3(t)){const n=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";r.onError(ma(this.auth,n))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=b7&&this.cachedEventUids.clear(),this.cachedEventUids.has(oN(t))}saveEventToCache(t){this.cachedEventUids.add(oN(t)),this.lastProcessedEventTime=Date.now()}}function oN(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function d3({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function j7(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d3(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N7(s,t={}){return Ja(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k7=/^https?/;async function I7(s){if(s.config.emulator)return;const{authorizedDomains:t}=await N7(s);for(const r of t)try{if(S7(r))return}catch{}ra(s,"unauthorized-domain")}function S7(s){const t=hp(),{protocol:r,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&a===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===a}if(!k7.test(r))return!1;if(w7.test(s))return a===s;const n=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=new ld(3e4,6e4);function lN(){const s=ha().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function E7(s){return new Promise((t,r)=>{var a,n,l;function o(){lN(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{lN(),r(ma(s,"network-request-failed"))},timeout:P7.get()})}if(!((n=(a=ha().gapi)===null||a===void 0?void 0:a.iframes)===null||n===void 0)&&n.Iframe)t(gapi.iframes.getContext());else if(!((l=ha().gapi)===null||l===void 0)&&l.load)o();else{const d=bM("iframefcb");return ha()[d]=()=>{gapi.load?o():r(ma(s,"network-request-failed"))},Q4(`${yM()}?onload=${d}`).catch(u=>r(u))}}).catch(t=>{throw Tu=null,t})}let Tu=null;function C7(s){return Tu=Tu||E7(s),Tu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=new ld(5e3,15e3),_7="__/auth/iframe",D7="emulator/auth/iframe",A7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M7(s){const t=s.config;yt(t.authDomain,s,"auth-domain-config-required");const r=t.emulator?Bg(t,D7):`https://${s.config.authDomain}/${_7}`,a={apiKey:t.apiKey,appName:s.name,v:Ai},n=R7.get(s.config.apiHost);n&&(a.eid=n);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${r}?${Xc(a).slice(1)}`}async function O7(s){const t=await C7(s),r=ha().gapi;return yt(r,s,"internal-error"),t.open({where:document.body,url:M7(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A7,dontclear:!0},a=>new Promise(async(n,l)=>{await a.restyle({setHideOnLeave:!1});const o=ma(s,"network-request-failed"),d=ha().setTimeout(()=>{l(o)},T7.get());function u(){ha().clearTimeout(d),n(a)}a.ping(u).then(u,()=>{l(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V7=500,z7=600,B7="_blank",$7="http://localhost";class cN{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F7(s,t,r,a=V7,n=z7){const l=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const u=Object.assign(Object.assign({},L7),{width:a.toString(),height:n.toString(),top:l,left:o}),m=Ks().toLowerCase();r&&(d=$4(m)?B7:r),z4(m)&&(t=t||$7,u.scrollbars="yes");const y=Object.entries(u).reduce((N,[T,g])=>`${N}${T}=${g},`,"");if(cM(m)&&d!=="_self")return U7(t||"",d),new cN(null);const j=window.open(t||"",d,y);yt(j,s,"popup-blocked");try{j.focus()}catch{}return new cN(j)}function U7(s,t){const r=document.createElement("a");r.href=s,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7="__/auth/handler",H7="emulator/auth/handler",q7=encodeURIComponent("fac");async function dN(s,t,r,a,n,l){yt(s.config.authDomain,s,"auth-domain-config-required"),yt(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:a,v:Ai,eventId:n};if(t instanceof X4){t.setDefaultLanguage(s.languageCode),o.providerId=t.providerId||"",ZT(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,j]of Object.entries(l||{}))o[y]=j}if(t instanceof dd){const y=t.getScopes().filter(j=>j!=="");y.length>0&&(o.scopes=y.join(","))}s.tenantId&&(o.tid=s.tenantId);const d=o;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const u=await s._getAppCheckToken(),m=u?`#${q7}=${encodeURIComponent(u)}`:"";return`${G7(s)}?${Xc(d).slice(1)}${m}`}function G7({config:s}){return s.emulator?Bg(s,H7):`https://${s.authDomain}/${W7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="webStorageSupport";class Q7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a3,this._completeRedirectFn=y7,this._overrideRedirectResult=p7}async _openPopup(t,r,a,n){var l;Wa((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await dN(t,r,a,hp(),n);return F7(t,o,qg())}async _openRedirect(t,r,a,n){await this._originValidation(t);const l=await dN(t,r,a,hp(),n);return XM(l),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:n,promise:l}=this.eventManagers[r];return n?Promise.resolve(n):(Wa(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await O7(t),a=new v7(t);return r.register("authEvent",n=>(yt(n==null?void 0:n.authEvent,t,"invalid-auth-event"),{status:a.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(M0,{type:M0},n=>{var l;const o=(l=n==null?void 0:n[0])===null||l===void 0?void 0:l[M0];o!==void 0&&r(!!o),ra(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=I7(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return q4()||B4()||Fg()}}const K7=Q7;var uN="@firebase/auth",xN="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J7(s){ta(new $r("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:o,authDomain:d}=a.options;yt(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const u={apiKey:o,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G4(s)},m=new pM(a,n,l,u);return IM(m,r),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),ta(new $r("auth-internal",t=>{const r=Oi(t.getProvider("auth").getImmediate());return(a=>new Y7(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(uN,xN,X7(s)),pr(uN,xN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=5*60,e9=y1("authIdTokenMaxAge")||Z7;let mN=null;const t9=s=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>e9)return;const n=r==null?void 0:r.token;mN!==n&&(mN=n,await fetch(s,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function Qg(s=om()){const t=Wn(s,"auth");if(t.isInitialized())return t.getImmediate();const r=kM(s,{popupRedirectResolver:K7,persistence:[i7,QM,a3]}),a=y1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const o=t9(l.toString());HM(r,o,()=>o(r.currentUser)),WM(r,d=>o(d))}}const n=p1("auth");return n&&SM(r,`http://${n}`),r}function s9(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}fM({loadJS(s){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=n=>{const l=ma("internal-error");l.customData=n,r(l)},a.type="text/javascript",a.charset="UTF-8",s9().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J7("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="firebasestorage.googleapis.com",r9="storageBucket",a9=2*60*1e3,n9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Fr{constructor(t,r,a=0){super(O0(t),`Firebase Storage: ${r} (${O0(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wa.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return O0(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ja;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ja||(ja={}));function O0(s){return"storage/"+s}function i9(){const s="An unknown error occurred, please check the error payload for server response.";return new wa(ja.UNKNOWN,s)}function o9(){return new wa(ja.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function l9(){return new wa(ja.CANCELED,"User canceled the upload/download.")}function c9(s){return new wa(ja.INVALID_URL,"Invalid URL '"+s+"'.")}function d9(s){return new wa(ja.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function hN(s){return new wa(ja.INVALID_ARGUMENT,s)}function x3(){return new wa(ja.APP_DELETED,"The Firebase app was deleted.")}function u9(s){return new wa(ja.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=Xr.makeFromUrl(t,r)}catch{return new Xr(t,"")}if(a.path==="")return a;throw d9(t)}static makeFromUrl(t,r){let a=null;const n="([A-Za-z0-9.\\-_]+)";function l(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const o="(/(.*))?$",d=new RegExp("^gs://"+n+o,"i"),u={bucket:1,path:3};function m(Z){Z.path_=decodeURIComponent(Z.path)}const y="v[A-Za-z0-9_]+",j=r.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",T=new RegExp(`^https?://${j}/${y}/b/${n}/o${N}`,"i"),g={bucket:1,path:3},B=r===u3?"(?:storage.googleapis.com|storage.cloud.google.com)":r,D="([^?#]*)",R=new RegExp(`^https?://${B}/${n}/${D}`,"i"),z=[{regex:d,indices:u,postModify:l},{regex:T,indices:g,postModify:m},{regex:R,indices:{bucket:1,path:2},postModify:m}];for(let Z=0;Z<z.length;Z++){const G=z[Z],Y=G.regex.exec(t);if(Y){const V=Y[G.indices.bucket];let x=Y[G.indices.path];x||(x=""),a=new Xr(V,x),G.postModify(a);break}}if(a==null)throw c9(t);return a}}class x9{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(s,t,r){let a=1,n=null,l=null,o=!1,d=0;function u(){return d===2}let m=!1;function y(...D){m||(m=!0,t.apply(null,D))}function j(D){n=setTimeout(()=>{n=null,s(T,u())},D)}function N(){l&&clearTimeout(l)}function T(D,...R){if(m){N();return}if(D){N(),y.call(null,D,...R);return}if(u()||o){N(),y.call(null,D,...R);return}a<64&&(a*=2);let z;d===1?(d=2,z=0):z=(a+Math.random())*1e3,j(z)}let g=!1;function B(D){g||(g=!0,N(),!m&&(n!==null?(D||(d=2),clearTimeout(n),j(0)):D||(d=1)))}return j(0),l=setTimeout(()=>{o=!0,B(!0)},r),B}function h9(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(s){return s!==void 0}function pN(s,t,r,a){if(a<t)throw hN(`Invalid value for '${s}'. Expected ${t} or greater.`);if(a>r)throw hN(`Invalid value for '${s}'. Expected ${r} or less.`)}function f9(s){const t=encodeURIComponent;let r="?";for(const a in s)if(s.hasOwnProperty(a)){const n=t(a)+"="+t(s[a]);r=r+n+"&"}return r=r.slice(0,-1),r}var Cx;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Cx||(Cx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(s,t){const r=s>=500&&s<600,n=[408,429].indexOf(s)!==-1,l=t.indexOf(s)!==-1;return r||n||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(t,r,a,n,l,o,d,u,m,y,j,N=!0){this.url_=t,this.method_=r,this.headers_=a,this.body_=n,this.successCodes_=l,this.additionalRetryCodes_=o,this.callback_=d,this.errorCallback_=u,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=j,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,g)=>{this.resolve_=T,this.reject_=g,this.start_()})}start_(){const t=(a,n)=>{if(n){a(!1,new tu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const o=d=>{const u=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,m)};this.progressCallback_!==null&&l.addUploadProgressListener(o),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(o),this.pendingConnection_=null;const d=l.getErrorCode()===Cx.NO_ERROR,u=l.getStatus();if(!d||g9(u,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Cx.ABORT;a(!1,new tu(!1,null,y));return}const m=this.successCodes_.indexOf(u)!==-1;a(!0,new tu(m,l))})},r=(a,n)=>{const l=this.resolve_,o=this.reject_,d=n.connection;if(n.wasSuccessCode)try{const u=this.callback_(d,d.getResponse());p9(u)?l(u):l()}catch(u){o(u)}else if(d!==null){const u=i9();u.serverResponse=d.getErrorText(),this.errorCallback_?o(this.errorCallback_(d,u)):o(u)}else if(n.canceled){const u=this.appDelete_?x3():l9();o(u)}else{const u=o9();o(u)}};this.canceled_?r(!1,new tu(!1,null,!0)):this.backoffId_=m9(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&h9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tu{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function b9(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function v9(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function j9(s,t){t&&(s["X-Firebase-GMPID"]=t)}function N9(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function w9(s,t,r,a,n,l,o=!0){const d=f9(s.urlParams),u=s.url+d,m=Object.assign({},s.headers);return j9(m,t),b9(m,r),v9(m,l),N9(m,a),new y9(u,s.method,m,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function I9(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(t,r){this._service=t,r instanceof Xr?this._location=r:this._location=Xr.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Tx(t,r)}get root(){const t=new Xr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return I9(this._location.path)}get storage(){return this._service}get parent(){const t=k9(this._location.path);if(t===null)return null;const r=new Xr(this._location.bucket,t);return new Tx(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw u9(t)}}function fN(s,t){const r=t==null?void 0:t[r9];return r==null?null:Xr.makeFromBucketSpec(r,s)}function S9(s,t,r,a={}){s.host=`${t}:${r}`,s._protocol="http";const{mockUserToken:n}=a;n&&(s._overrideAuthToken=typeof n=="string"?n:b1(n,s.app.options.projectId))}class P9{constructor(t,r,a,n,l){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=n,this._firebaseVersion=l,this._bucket=null,this._host=u3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a9,this._maxUploadRetryTime=n9,this._requests=new Set,n!=null?this._bucket=Xr.makeFromBucketSpec(n,this._host):this._bucket=fN(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Xr.makeFromBucketSpec(this._url,t):this._bucket=fN(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){pN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){pN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Tx(this,t)}_makeRequest(t,r,a,n,l=!0){if(this._deleted)return new x9(x3());{const o=w9(t,this._appId,a,n,r,this._firebaseVersion,l);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[a,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,n).getPromise()}}const gN="@firebase/storage",yN="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="storage";function E9(s=om(),t){s=es(s);const a=Wn(s,m3).getImmediate({identifier:t}),n=f1("storage");return n&&C9(a,...n),a}function C9(s,t,r,a={}){S9(s,t,r,a)}function T9(s,{instanceIdentifier:t}){const r=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),n=s.getProvider("app-check-internal");return new P9(r,a,n,t,Ai)}function _9(){ta(new $r(m3,T9,"PUBLIC").setMultipleInstances(!0)),pr(gN,yN,""),pr(gN,yN,"esm2017")}_9();const D9={apiKey:"AIzaSyCh4KyvqB6d_uBpvZ6unY6BSqBAPFGAov4",authDomain:"sz-streaming.firebaseapp.com",projectId:"sz-streaming",storageBucket:"sz-streaming.firebasestorage.app",messagingSenderId:"883785518084",appId:"1:883785518084:web:92cdd90812b5e200277951",measurementId:"G-1R5T5PGGG0"},xd=S1(D9);zR(xd);const S=l8(xd);E9(xd);const Ge=Qg(xd),Kg=v.createContext({});function Yg(s){const t=v.useRef(null);return t.current===null&&(t.current=s()),t.current}const Xg=typeof window<"u",h3=Xg?v.useLayoutEffect:v.useEffect,Am=v.createContext(null);function Jg(s,t){s.indexOf(t)===-1&&s.push(t)}function Zg(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}const Ha=(s,t,r)=>r>t?t:r<s?s:r;let ey=()=>{};const qa={},p3=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function f3(s){return typeof s=="object"&&s!==null}const g3=s=>/^0[^.\s]+$/u.test(s);function ty(s){let t;return()=>(t===void 0&&(t=s()),t)}const Vr=s=>s,A9=(s,t)=>r=>t(s(r)),md=(...s)=>s.reduce(A9),Mc=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a};class sy{constructor(){this.subscriptions=[]}add(t){return Jg(this.subscriptions,t),()=>Zg(this.subscriptions,t)}notify(t,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,a);else for(let l=0;l<n;l++){const o=this.subscriptions[l];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pa=s=>s*1e3,fa=s=>s/1e3;function y3(s,t){return t?s*(1e3/t):0}const b3=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,R9=1e-7,M9=12;function O9(s,t,r,a,n){let l,o,d=0;do o=t+(r-t)/2,l=b3(o,a,n)-s,l>0?r=o:t=o;while(Math.abs(l)>R9&&++d<M9);return o}function hd(s,t,r,a){if(s===t&&r===a)return Vr;const n=l=>O9(l,0,1,s,r);return l=>l===0||l===1?l:b3(n(l),t,a)}const v3=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,j3=s=>t=>1-s(1-t),N3=hd(.33,1.53,.69,.99),ry=j3(N3),w3=v3(ry),k3=s=>(s*=2)<1?.5*ry(s):.5*(2-Math.pow(2,-10*(s-1))),ay=s=>1-Math.sin(Math.acos(s)),I3=j3(ay),S3=v3(ay),L9=hd(.42,0,1,1),V9=hd(0,0,.58,1),P3=hd(.42,0,.58,1),z9=s=>Array.isArray(s)&&typeof s[0]!="number",E3=s=>Array.isArray(s)&&typeof s[0]=="number",B9={linear:Vr,easeIn:L9,easeInOut:P3,easeOut:V9,circIn:ay,circInOut:S3,circOut:I3,backIn:ry,backInOut:w3,backOut:N3,anticipate:k3},$9=s=>typeof s=="string",bN=s=>{if(E3(s)){ey(s.length===4);const[t,r,a,n]=s;return hd(t,r,a,n)}else if($9(s))return B9[s];return s},su=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],vN={value:null,addProjectionMetrics:null};function F9(s,t){let r=new Set,a=new Set,n=!1,l=!1;const o=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1},u=0;function m(j){o.has(j)&&(y.schedule(j),s()),u++,j(d)}const y={schedule:(j,N=!1,T=!1)=>{const B=T&&n?r:a;return N&&o.add(j),B.has(j)||B.add(j),j},cancel:j=>{a.delete(j),o.delete(j)},process:j=>{if(d=j,n){l=!0;return}n=!0,[r,a]=[a,r],r.forEach(m),t&&vN.value&&vN.value.frameloop[t].push(u),u=0,r.clear(),n=!1,l&&(l=!1,y.process(j))}};return y}const U9=40;function C3(s,t){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},l=()=>r=!0,o=su.reduce((z,Z)=>(z[Z]=F9(l,t?Z:void 0),z),{}),{setup:d,read:u,resolveKeyframes:m,preUpdate:y,update:j,preRender:N,render:T,postRender:g}=o,B=()=>{const z=qa.useManualTiming?n.timestamp:performance.now();r=!1,qa.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(z-n.timestamp,U9),1)),n.timestamp=z,n.isProcessing=!0,d.process(n),u.process(n),m.process(n),y.process(n),j.process(n),N.process(n),T.process(n),g.process(n),n.isProcessing=!1,r&&t&&(a=!1,s(B))},D=()=>{r=!0,a=!0,n.isProcessing||s(B)};return{schedule:su.reduce((z,Z)=>{const G=o[Z];return z[Z]=(Y,V=!1,x=!1)=>(r||D(),G.schedule(Y,V,x)),z},{}),cancel:z=>{for(let Z=0;Z<su.length;Z++)o[su[Z]].cancel(z)},state:n,steps:o}}const{schedule:is,cancel:zn,state:Ts,steps:L0}=C3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vr,!0);let _u;function W9(){_u=void 0}const ur={now:()=>(_u===void 0&&ur.set(Ts.isProcessing||qa.useManualTiming?Ts.timestamp:performance.now()),_u),set:s=>{_u=s,queueMicrotask(W9)}},T3=s=>t=>typeof t=="string"&&t.startsWith(s),ny=T3("--"),H9=T3("var(--"),iy=s=>H9(s)?q9.test(s.split("/*")[0].trim()):!1,q9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tl={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Oc={...tl,transform:s=>Ha(0,1,s)},ru={...tl,default:1},ec=s=>Math.round(s*1e5)/1e5,oy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function G9(s){return s==null}const Q9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ly=(s,t)=>r=>!!(typeof r=="string"&&Q9.test(r)&&r.startsWith(s)||t&&!G9(r)&&Object.prototype.hasOwnProperty.call(r,t)),_3=(s,t,r)=>a=>{if(typeof a!="string")return a;const[n,l,o,d]=a.match(oy);return{[s]:parseFloat(n),[t]:parseFloat(l),[r]:parseFloat(o),alpha:d!==void 0?parseFloat(d):1}},K9=s=>Ha(0,255,s),V0={...tl,transform:s=>Math.round(K9(s))},di={test:ly("rgb","red"),parse:_3("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+V0.transform(s)+", "+V0.transform(t)+", "+V0.transform(r)+", "+ec(Oc.transform(a))+")"};function Y9(s){let t="",r="",a="",n="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),n=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),n=s.substring(4,5),t+=t,r+=r,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const yp={test:ly("#"),parse:Y9,transform:di.transform},pd=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),rn=pd("deg"),ga=pd("%"),bt=pd("px"),X9=pd("vh"),J9=pd("vw"),jN=(()=>({...ga,parse:s=>ga.parse(s)/100,transform:s=>ga.transform(s*100)}))(),uo={test:ly("hsl","hue"),parse:_3("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+ga.transform(ec(t))+", "+ga.transform(ec(r))+", "+ec(Oc.transform(a))+")"},Ws={test:s=>di.test(s)||yp.test(s)||uo.test(s),parse:s=>di.test(s)?di.parse(s):uo.test(s)?uo.parse(s):yp.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?di.transform(s):uo.transform(s)},Z9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eO(s){var t,r;return isNaN(s)&&typeof s=="string"&&(((t=s.match(oy))==null?void 0:t.length)||0)+(((r=s.match(Z9))==null?void 0:r.length)||0)>0}const D3="number",A3="color",tO="var",sO="var(",NN="${}",rO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lc(s){const t=s.toString(),r=[],a={color:[],number:[],var:[]},n=[];let l=0;const d=t.replace(rO,u=>(Ws.test(u)?(a.color.push(l),n.push(A3),r.push(Ws.parse(u))):u.startsWith(sO)?(a.var.push(l),n.push(tO),r.push(u)):(a.number.push(l),n.push(D3),r.push(parseFloat(u))),++l,NN)).split(NN);return{values:r,split:d,indexes:a,types:n}}function R3(s){return Lc(s).values}function M3(s){const{split:t,types:r}=Lc(s),a=t.length;return n=>{let l="";for(let o=0;o<a;o++)if(l+=t[o],n[o]!==void 0){const d=r[o];d===D3?l+=ec(n[o]):d===A3?l+=Ws.transform(n[o]):l+=n[o]}return l}}const aO=s=>typeof s=="number"?0:s;function nO(s){const t=R3(s);return M3(s)(t.map(aO))}const Bn={test:eO,parse:R3,createTransformer:M3,getAnimatableNone:nO};function z0(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function iO({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let n=0,l=0,o=0;if(!t)n=l=o=r;else{const d=r<.5?r*(1+t):r+t-r*t,u=2*r-d;n=z0(u,d,s+1/3),l=z0(u,d,s),o=z0(u,d,s-1/3)}return{red:Math.round(n*255),green:Math.round(l*255),blue:Math.round(o*255),alpha:a}}function _x(s,t){return r=>r>0?t:s}const rs=(s,t,r)=>s+(t-s)*r,B0=(s,t,r)=>{const a=s*s,n=r*(t*t-a)+a;return n<0?0:Math.sqrt(n)},oO=[yp,di,uo],lO=s=>oO.find(t=>t.test(s));function wN(s){const t=lO(s);if(!t)return!1;let r=t.parse(s);return t===uo&&(r=iO(r)),r}const kN=(s,t)=>{const r=wN(s),a=wN(t);if(!r||!a)return _x(s,t);const n={...r};return l=>(n.red=B0(r.red,a.red,l),n.green=B0(r.green,a.green,l),n.blue=B0(r.blue,a.blue,l),n.alpha=rs(r.alpha,a.alpha,l),di.transform(n))},bp=new Set(["none","hidden"]);function cO(s,t){return bp.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function dO(s,t){return r=>rs(s,t,r)}function cy(s){return typeof s=="number"?dO:typeof s=="string"?iy(s)?_x:Ws.test(s)?kN:mO:Array.isArray(s)?O3:typeof s=="object"?Ws.test(s)?kN:uO:_x}function O3(s,t){const r=[...s],a=r.length,n=s.map((l,o)=>cy(l)(l,t[o]));return l=>{for(let o=0;o<a;o++)r[o]=n[o](l);return r}}function uO(s,t){const r={...s,...t},a={};for(const n in r)s[n]!==void 0&&t[n]!==void 0&&(a[n]=cy(s[n])(s[n],t[n]));return n=>{for(const l in a)r[l]=a[l](n);return r}}function xO(s,t){const r=[],a={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const l=t.types[n],o=s.indexes[l][a[l]],d=s.values[o]??0;r[n]=d,a[l]++}return r}const mO=(s,t)=>{const r=Bn.createTransformer(t),a=Lc(s),n=Lc(t);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?bp.has(s)&&!n.values.length||bp.has(t)&&!a.values.length?cO(s,t):md(O3(xO(a,n),n.values),r):_x(s,t)};function L3(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?rs(s,t,r):cy(s)(s,t)}const hO=s=>{const t=({timestamp:r})=>s(r);return{start:(r=!0)=>is.update(t,r),stop:()=>zn(t),now:()=>Ts.isProcessing?Ts.timestamp:ur.now()}},V3=(s,t,r=10)=>{let a="";const n=Math.max(Math.round(t/r),2);for(let l=0;l<n;l++)a+=s(l/(n-1))+", ";return`linear(${a.substring(0,a.length-2)})`},Dx=2e4;function dy(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<Dx;)t+=r,a=s.next(t);return t>=Dx?1/0:t}function pO(s,t=100,r){const a=r({...s,keyframes:[0,t]}),n=Math.min(dy(a),Dx);return{type:"keyframes",ease:l=>a.next(n*l).value/t,duration:fa(n)}}const fO=5;function z3(s,t,r){const a=Math.max(t-fO,0);return y3(r-s(a),t-a)}const xs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$0=.001;function gO({duration:s=xs.duration,bounce:t=xs.bounce,velocity:r=xs.velocity,mass:a=xs.mass}){let n,l,o=1-t;o=Ha(xs.minDamping,xs.maxDamping,o),s=Ha(xs.minDuration,xs.maxDuration,fa(s)),o<1?(n=m=>{const y=m*o,j=y*s,N=y-r,T=vp(m,o),g=Math.exp(-j);return $0-N/T*g},l=m=>{const j=m*o*s,N=j*r+r,T=Math.pow(o,2)*Math.pow(m,2)*s,g=Math.exp(-j),B=vp(Math.pow(m,2),o);return(-n(m)+$0>0?-1:1)*((N-T)*g)/B}):(n=m=>{const y=Math.exp(-m*s),j=(m-r)*s+1;return-$0+y*j},l=m=>{const y=Math.exp(-m*s),j=(r-m)*(s*s);return y*j});const d=5/s,u=bO(n,l,d);if(s=pa(s),isNaN(u))return{stiffness:xs.stiffness,damping:xs.damping,duration:s};{const m=Math.pow(u,2)*a;return{stiffness:m,damping:o*2*Math.sqrt(a*m),duration:s}}}const yO=12;function bO(s,t,r){let a=r;for(let n=1;n<yO;n++)a=a-s(a)/t(a);return a}function vp(s,t){return s*Math.sqrt(1-t*t)}const vO=["duration","bounce"],jO=["stiffness","damping","mass"];function IN(s,t){return t.some(r=>s[r]!==void 0)}function NO(s){let t={velocity:xs.velocity,stiffness:xs.stiffness,damping:xs.damping,mass:xs.mass,isResolvedFromDuration:!1,...s};if(!IN(s,jO)&&IN(s,vO))if(s.visualDuration){const r=s.visualDuration,a=2*Math.PI/(r*1.2),n=a*a,l=2*Ha(.05,1,1-(s.bounce||0))*Math.sqrt(n);t={...t,mass:xs.mass,stiffness:n,damping:l}}else{const r=gO(s);t={...t,...r,mass:xs.mass},t.isResolvedFromDuration=!0}return t}function Ax(s=xs.visualDuration,t=xs.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:a,restDelta:n}=r;const l=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],d={done:!1,value:l},{stiffness:u,damping:m,mass:y,duration:j,velocity:N,isResolvedFromDuration:T}=NO({...r,velocity:-fa(r.velocity||0)}),g=N||0,B=m/(2*Math.sqrt(u*y)),D=o-l,R=fa(Math.sqrt(u/y)),$=Math.abs(D)<5;a||(a=$?xs.restSpeed.granular:xs.restSpeed.default),n||(n=$?xs.restDelta.granular:xs.restDelta.default);let z;if(B<1){const G=vp(R,B);z=Y=>{const V=Math.exp(-B*R*Y);return o-V*((g+B*R*D)/G*Math.sin(G*Y)+D*Math.cos(G*Y))}}else if(B===1)z=G=>o-Math.exp(-R*G)*(D+(g+R*D)*G);else{const G=R*Math.sqrt(B*B-1);z=Y=>{const V=Math.exp(-B*R*Y),x=Math.min(G*Y,300);return o-V*((g+B*R*D)*Math.sinh(x)+G*D*Math.cosh(x))/G}}const Z={calculatedDuration:T&&j||null,next:G=>{const Y=z(G);if(T)d.done=G>=j;else{let V=G===0?g:0;B<1&&(V=G===0?pa(g):z3(z,G,Y));const x=Math.abs(V)<=a,q=Math.abs(o-Y)<=n;d.done=x&&q}return d.value=d.done?o:Y,d},toString:()=>{const G=Math.min(dy(Z),Dx),Y=V3(V=>Z.next(G*V).value,G,30);return G+"ms "+Y},toTransition:()=>{}};return Z}Ax.applyToOptions=s=>{const t=pO(s,100,Ax);return s.ease=t.ease,s.duration=pa(t.duration),s.type="keyframes",s};function jp({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:l=500,modifyTarget:o,min:d,max:u,restDelta:m=.5,restSpeed:y}){const j=s[0],N={done:!1,value:j},T=x=>d!==void 0&&x<d||u!==void 0&&x>u,g=x=>d===void 0?u:u===void 0||Math.abs(d-x)<Math.abs(u-x)?d:u;let B=r*t;const D=j+B,R=o===void 0?D:o(D);R!==D&&(B=R-j);const $=x=>-B*Math.exp(-x/a),z=x=>R+$(x),Z=x=>{const q=$(x),W=z(x);N.done=Math.abs(q)<=m,N.value=N.done?R:W};let G,Y;const V=x=>{T(N.value)&&(G=x,Y=Ax({keyframes:[N.value,g(N.value)],velocity:z3(z,x,N.value),damping:n,stiffness:l,restDelta:m,restSpeed:y}))};return V(0),{calculatedDuration:null,next:x=>{let q=!1;return!Y&&G===void 0&&(q=!0,Z(x),V(x)),G!==void 0&&x>=G?Y.next(x-G):(!q&&Z(x),N)}}}function wO(s,t,r){const a=[],n=r||qa.mix||L3,l=s.length-1;for(let o=0;o<l;o++){let d=n(s[o],s[o+1]);if(t){const u=Array.isArray(t)?t[o]||Vr:t;d=md(u,d)}a.push(d)}return a}function kO(s,t,{clamp:r=!0,ease:a,mixer:n}={}){const l=s.length;if(ey(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[l-1]&&(s=[...s].reverse(),t=[...t].reverse());const d=wO(t,a,n),u=d.length,m=y=>{if(o&&y<s[0])return t[0];let j=0;if(u>1)for(;j<s.length-2&&!(y<s[j+1]);j++);const N=Mc(s[j],s[j+1],y);return d[j](N)};return r?y=>m(Ha(s[0],s[l-1],y)):m}function IO(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const n=Mc(0,t,a);s.push(rs(r,1,n))}}function SO(s){const t=[0];return IO(t,s.length-1),t}function PO(s,t){return s.map(r=>r*t)}function EO(s,t){return s.map(()=>t||P3).splice(0,s.length-1)}function tc({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const n=z9(a)?a.map(bN):bN(a),l={done:!1,value:t[0]},o=PO(r&&r.length===t.length?r:SO(t),s),d=kO(o,t,{ease:Array.isArray(n)?n:EO(t,n)});return{calculatedDuration:s,next:u=>(l.value=d(u),l.done=u>=s,l)}}const CO=s=>s!==null;function uy(s,{repeat:t,repeatType:r="loop"},a,n=1){const l=s.filter(CO),d=n<0||t&&r!=="loop"&&t%2===1?0:l.length-1;return!d||a===void 0?l[d]:a}const TO={decay:jp,inertia:jp,tween:tc,keyframes:tc,spring:Ax};function B3(s){typeof s.type=="string"&&(s.type=TO[s.type])}class xy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const _O=s=>s/100;class my extends xy{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(r=!0)=>{var a,n;if(r){const{motionValue:l}=this.options;l&&l.updatedAt!==ur.now()&&this.tick(ur.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(a=this.options).onStop)==null||n.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;B3(t);const{type:r=tc,repeat:a=0,repeatDelay:n=0,repeatType:l,velocity:o=0}=t;let{keyframes:d}=t;const u=r||tc;u!==tc&&typeof d[0]!="number"&&(this.mixKeyframes=md(_O,L3(d[0],d[1])),d=[0,100]);const m=u({...t,keyframes:d});l==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...d].reverse(),velocity:-o})),m.calculatedDuration===null&&(m.calculatedDuration=dy(m));const{calculatedDuration:y}=m;this.calculatedDuration=y,this.resolvedDuration=y+n,this.totalDuration=this.resolvedDuration*(a+1)-n,this.generator=m}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:n,mixKeyframes:l,mirroredGenerator:o,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return a.next(0);const{delay:m=0,keyframes:y,repeat:j,repeatType:N,repeatDelay:T,type:g,onUpdate:B,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const R=this.currentTime-m*(this.playbackSpeed>=0?1:-1),$=this.playbackSpeed>=0?R<0:R>n;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let z=this.currentTime,Z=a;if(j){const x=Math.min(this.currentTime,n)/d;let q=Math.floor(x),W=x%1;!W&&x>=1&&(W=1),W===1&&q--,q=Math.min(q,j+1),!!(q%2)&&(N==="reverse"?(W=1-W,T&&(W-=T/d)):N==="mirror"&&(Z=o)),z=Ha(0,1,W)*d}const G=$?{done:!1,value:y[0]}:Z.next(z);l&&(G.value=l(G.value));let{done:Y}=G;!$&&u!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return V&&g!==jp&&(G.value=uy(y,this.options,D,this.speed)),B&&B(G.value),V&&this.finish(),G}then(t,r){return this.finished.then(t,r)}get duration(){return fa(this.calculatedDuration)}get time(){return fa(this.currentTime)}set time(t){var r;t=pa(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ur.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=fa(this.currentTime))}play(){var n,l;if(this.isStopped)return;const{driver:t=hO,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(l=(n=this.options).onPlay)==null||l.call(n);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ur.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function DO(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const ui=s=>s*180/Math.PI,Np=s=>{const t=ui(Math.atan2(s[1],s[0]));return wp(t)},AO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Np,rotateZ:Np,skewX:s=>ui(Math.atan(s[1])),skewY:s=>ui(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},wp=s=>(s=s%360,s<0&&(s+=360),s),SN=Np,PN=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),EN=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),RO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:PN,scaleY:EN,scale:s=>(PN(s)+EN(s))/2,rotateX:s=>wp(ui(Math.atan2(s[6],s[5]))),rotateY:s=>wp(ui(Math.atan2(-s[2],s[0]))),rotateZ:SN,rotate:SN,skewX:s=>ui(Math.atan(s[4])),skewY:s=>ui(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function kp(s){return s.includes("scale")?1:0}function Ip(s,t){if(!s||s==="none")return kp(t);const r=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,n;if(r)a=RO,n=r;else{const d=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=AO,n=d}if(!n)return kp(t);const l=a[t],o=n[1].split(",").map(OO);return typeof l=="function"?l(o):o[l]}const MO=(s,t)=>{const{transform:r="none"}=getComputedStyle(s);return Ip(r,t)};function OO(s){return parseFloat(s.trim())}const sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rl=(()=>new Set(sl))(),CN=s=>s===tl||s===bt,LO=new Set(["x","y","z"]),VO=sl.filter(s=>!LO.has(s));function zO(s){const t=[];return VO.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const pi={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>Ip(t,"x"),y:(s,{transform:t})=>Ip(t,"y")};pi.translateX=pi.x;pi.translateY=pi.y;const fi=new Set;let Sp=!1,Pp=!1,Ep=!1;function $3(){if(Pp){const s=Array.from(fi).filter(a=>a.needsMeasurement),t=new Set(s.map(a=>a.element)),r=new Map;t.forEach(a=>{const n=zO(a);n.length&&(r.set(a,n),a.render())}),s.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const n=r.get(a);n&&n.forEach(([l,o])=>{var d;(d=a.getValue(l))==null||d.set(o)})}),s.forEach(a=>a.measureEndState()),s.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Pp=!1,Sp=!1,fi.forEach(s=>s.complete(Ep)),fi.clear()}function F3(){fi.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Pp=!0)})}function BO(){Ep=!0,F3(),$3(),Ep=!1}class hy{constructor(t,r,a,n,l,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=n,this.element=l,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(fi.add(this),Sp||(Sp=!0,is.read(F3),is.resolveKeyframes($3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:n}=this;if(t[0]===null){const l=n==null?void 0:n.get(),o=t[t.length-1];if(l!==void 0)t[0]=l;else if(a&&r){const d=a.readValue(r,o);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=o),n&&l===void 0&&n.set(t[0])}DO(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),fi.delete(this)}cancel(){this.state==="scheduled"&&(fi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $O=s=>s.startsWith("--");function FO(s,t,r){$O(t)?s.style.setProperty(t,r):s.style[t]=r}const UO=ty(()=>window.ScrollTimeline!==void 0),WO={};function HO(s,t){const r=ty(s);return()=>WO[t]??r()}const U3=HO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ml=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,TN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ml([0,.65,.55,1]),circOut:Ml([.55,0,1,.45]),backIn:Ml([.31,.01,.66,-.59]),backOut:Ml([.33,1.53,.69,.99])};function W3(s,t){if(s)return typeof s=="function"?U3()?V3(s,t):"ease-out":E3(s)?Ml(s):Array.isArray(s)?s.map(r=>W3(r,t)||TN.easeOut):TN[s]}function qO(s,t,r,{delay:a=0,duration:n=300,repeat:l=0,repeatType:o="loop",ease:d="easeOut",times:u}={},m=void 0){const y={[t]:r};u&&(y.offset=u);const j=W3(d,n);Array.isArray(j)&&(y.easing=j);const N={delay:a,duration:n,easing:Array.isArray(j)?"linear":j,fill:"both",iterations:l+1,direction:o==="reverse"?"alternate":"normal"};return m&&(N.pseudoElement=m),s.animate(y,N)}function H3(s){return typeof s=="function"&&"applyToOptions"in s}function GO({type:s,...t}){return H3(s)&&U3()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class QO extends xy{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:n,pseudoElement:l,allowFlatten:o=!1,finalKeyframe:d,onComplete:u}=t;this.isPseudoElement=!!l,this.allowFlatten=o,this.options=t,ey(typeof t.type!="string");const m=GO(t);this.animation=qO(r,a,n,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const y=uy(n,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(y):FO(r,a,y),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,a;const t=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return fa(Number(t))}get time(){return fa(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=pa(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&UO()?(this.animation.timeline=t,Vr):r(this)}}const q3={anticipate:k3,backInOut:w3,circInOut:S3};function KO(s){return s in q3}function YO(s){typeof s.ease=="string"&&KO(s.ease)&&(s.ease=q3[s.ease])}const _N=10;class XO extends QO{constructor(t){YO(t),B3(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:n,element:l,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const d=new my({...o,autoplay:!1}),u=pa(this.finishedTime??this.time);r.setWithVelocity(d.sample(u-_N).value,d.sample(u).value,_N),d.stop()}}const DN=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Bn.test(s)||s==="0")&&!s.startsWith("url("));function JO(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function ZO(s,t,r,a){const n=s[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const l=s[s.length-1],o=DN(n,t),d=DN(l,t);return!o||!d?!1:JO(s)||(r==="spring"||H3(r))&&a}function py(s){return f3(s)&&"offsetHeight"in s}const eL=new Set(["opacity","clipPath","filter","transform"]),tL=ty(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sL(s){var m;const{motionValue:t,name:r,repeatDelay:a,repeatType:n,damping:l,type:o}=s;if(!py((m=t==null?void 0:t.owner)==null?void 0:m.current))return!1;const{onUpdate:d,transformTemplate:u}=t.owner.getProps();return tL()&&r&&eL.has(r)&&(r!=="transform"||!u)&&!d&&!a&&n!=="mirror"&&l!==0&&o!=="inertia"}const rL=40;class aL extends xy{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:n=0,repeatDelay:l=0,repeatType:o="loop",keyframes:d,name:u,motionValue:m,element:y,...j}){var g;super(),this.stop=()=>{var B,D;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(D=this.keyframeResolver)==null||D.cancel()},this.createdAt=ur.now();const N={autoplay:t,delay:r,type:a,repeat:n,repeatDelay:l,repeatType:o,name:u,motionValue:m,element:y,...j},T=(y==null?void 0:y.KeyframeResolver)||hy;this.keyframeResolver=new T(d,(B,D,R)=>this.onKeyframesResolved(B,D,N,!R),u,m,y),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,r,a,n){this.keyframeResolver=void 0;const{name:l,type:o,velocity:d,delay:u,isHandoff:m,onUpdate:y}=a;this.resolvedAt=ur.now(),ZO(t,l,o,d)||((qa.instantAnimations||!u)&&(y==null||y(uy(t,a,r))),t[0]=t[t.length-1],a.duration=0,a.repeat=0);const N={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>rL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},T=!m&&sL(N)?new XO({...N,element:N.motionValue.owner.current}):new my(N);T.finished.then(()=>this.notifyFinished()).catch(Vr),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),BO()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const nL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function iL(s){const t=nL.exec(s);if(!t)return[,];const[,r,a,n]=t;return[`--${r??a}`,n]}function G3(s,t,r=1){const[a,n]=iL(s);if(!a)return;const l=window.getComputedStyle(t).getPropertyValue(a);if(l){const o=l.trim();return p3(o)?parseFloat(o):o}return iy(n)?G3(n,t,r+1):n}function fy(s,t){return(s==null?void 0:s[t])??(s==null?void 0:s.default)??s}const Q3=new Set(["width","height","top","left","right","bottom",...sl]),oL={test:s=>s==="auto",parse:s=>s},K3=s=>t=>t.test(s),Y3=[tl,bt,ga,rn,J9,X9,oL],AN=s=>Y3.find(K3(s));function lL(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||g3(s):!0}const cL=new Set(["brightness","contrast","saturate","opacity"]);function dL(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(oy)||[];if(!a)return s;const n=r.replace(a,"");let l=cL.has(t)?1:0;return a!==r&&(l*=100),t+"("+l+n+")"}const uL=/\b([a-z-]*)\(.*?\)/gu,Cp={...Bn,getAnimatableNone:s=>{const t=s.match(uL);return t?t.map(dL).join(" "):s}},RN={...tl,transform:Math.round},xL={rotate:rn,rotateX:rn,rotateY:rn,rotateZ:rn,scale:ru,scaleX:ru,scaleY:ru,scaleZ:ru,skew:rn,skewX:rn,skewY:rn,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Oc,originX:jN,originY:jN,originZ:bt},gy={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...xL,zIndex:RN,fillOpacity:Oc,strokeOpacity:Oc,numOctaves:RN},mL={...gy,color:Ws,backgroundColor:Ws,outlineColor:Ws,fill:Ws,stroke:Ws,borderColor:Ws,borderTopColor:Ws,borderRightColor:Ws,borderBottomColor:Ws,borderLeftColor:Ws,filter:Cp,WebkitFilter:Cp},X3=s=>mL[s];function J3(s,t){let r=X3(s);return r!==Cp&&(r=Bn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const hL=new Set(["auto","none","0"]);function pL(s,t,r){let a=0,n;for(;a<s.length&&!n;){const l=s[a];typeof l=="string"&&!hL.has(l)&&Lc(l).values.length&&(n=s[a]),a++}if(n&&r)for(const l of t)s[l]=J3(r,n)}class fL extends hy{constructor(t,r,a,n,l){super(t,r,a,n,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let m=t[u];if(typeof m=="string"&&(m=m.trim(),iy(m))){const y=G3(m,r.current);y!==void 0&&(t[u]=y),u===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!Q3.has(a)||t.length!==2)return;const[n,l]=t,o=AN(n),d=AN(l);if(o!==d)if(CN(o)&&CN(d))for(let u=0;u<t.length;u++){const m=t[u];typeof m=="string"&&(t[u]=parseFloat(m))}else pi[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let n=0;n<t.length;n++)(t[n]===null||lL(t[n]))&&a.push(n);a.length&&pL(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pi[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&t.getValue(a,n).jump(n,!1)}measureEndState(){var d;const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);const l=a.length-1,o=a[l];a[l]=pi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([u,m])=>{t.getValue(u).set(m)}),this.resolveNoneKeyframes()}}function gL(s,t,r){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let a=document;t&&(a=t.current);const n=(r==null?void 0:r[s])??a.querySelectorAll(s);return n?Array.from(n):[]}return Array.from(s)}const MN=30,yL=s=>!isNaN(parseFloat(s));class bL{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,n=!0)=>{var o,d;const l=ur.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();n&&((d=this.events.renderRequest)==null||d.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=ur.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=yL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new sy);const a=this.events[t].add(r);return t==="change"?()=>{a(),is.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ur.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>MN)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,MN);return y3(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bo(s,t){return new bL(s,t)}const Z3=(s,t)=>t&&typeof s=="number"?t.transform(s):s,{schedule:yy,cancel:qF}=C3(queueMicrotask,!1),qr={x:!1,y:!1};function eI(){return qr.x||qr.y}function vL(s){return s==="x"||s==="y"?qr[s]?null:(qr[s]=!0,()=>{qr[s]=!1}):qr.x||qr.y?null:(qr.x=qr.y=!0,()=>{qr.x=qr.y=!1})}function tI(s,t){const r=gL(s),a=new AbortController,n={passive:!0,...t,signal:a.signal};return[r,n,()=>a.abort()]}function ON(s){return!(s.pointerType==="touch"||eI())}function jL(s,t,r={}){const[a,n,l]=tI(s,r),o=d=>{if(!ON(d))return;const{target:u}=d,m=t(u,d);if(typeof m!="function"||!u)return;const y=j=>{ON(j)&&(m(j),u.removeEventListener("pointerleave",y))};u.addEventListener("pointerleave",y,n)};return a.forEach(d=>{d.addEventListener("pointerenter",o,n)}),l}const sI=(s,t)=>t?s===t?!0:sI(s,t.parentElement):!1,by=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,NL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wL(s){return NL.has(s.tagName)||s.tabIndex!==-1}const Du=new WeakSet;function LN(s){return t=>{t.key==="Enter"&&s(t)}}function F0(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const kL=(s,t)=>{const r=s.currentTarget;if(!r)return;const a=LN(()=>{if(Du.has(r))return;F0(r,"down");const n=LN(()=>{F0(r,"up")}),l=()=>F0(r,"cancel");r.addEventListener("keyup",n,t),r.addEventListener("blur",l,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function VN(s){return by(s)&&!eI()}function IL(s,t,r={}){const[a,n,l]=tI(s,r),o=d=>{const u=d.currentTarget;if(!VN(d))return;Du.add(u);const m=t(u,d),y=(T,g)=>{window.removeEventListener("pointerup",j),window.removeEventListener("pointercancel",N),Du.has(u)&&Du.delete(u),VN(T)&&typeof m=="function"&&m(T,{success:g})},j=T=>{y(T,u===window||u===document||r.useGlobalTarget||sI(u,T.target))},N=T=>{y(T,!1)};window.addEventListener("pointerup",j,n),window.addEventListener("pointercancel",N,n)};return a.forEach(d=>{(r.useGlobalTarget?window:d).addEventListener("pointerdown",o,n),py(d)&&(d.addEventListener("focus",m=>kL(m,n)),!wL(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function rI(s){return f3(s)&&"ownerSVGElement"in s}function SL(s){return rI(s)&&s.tagName==="svg"}const Gs=s=>!!(s&&s.getVelocity),PL=[...Y3,Ws,Bn],EL=s=>PL.find(K3(s)),vy=v.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class CL extends v.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=r.offsetParent,n=py(a)&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=r.offsetHeight||0,l.width=r.offsetWidth||0,l.top=r.offsetTop,l.left=r.offsetLeft,l.right=n-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function TL({children:s,isPresent:t,anchorX:r}){const a=v.useId(),n=v.useRef(null),l=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=v.useContext(vy);return v.useInsertionEffect(()=>{const{width:d,height:u,top:m,left:y,right:j}=l.current;if(t||!n.current||!d||!u)return;const N=r==="left"?`left: ${y}`:`right: ${j}`;n.current.dataset.motionPopId=a;const T=document.createElement("style");return o&&(T.nonce=o),document.head.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${u}px !important;
            ${N}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.contains(T)&&document.head.removeChild(T)}},[t]),e.jsx(CL,{isPresent:t,childRef:n,sizeRef:l,children:v.cloneElement(s,{ref:n})})}const _L=({children:s,initial:t,isPresent:r,onExitComplete:a,custom:n,presenceAffectsLayout:l,mode:o,anchorX:d})=>{const u=Yg(DL),m=v.useId();let y=!0,j=v.useMemo(()=>(y=!1,{id:m,initial:t,isPresent:r,custom:n,onExitComplete:N=>{u.set(N,!0);for(const T of u.values())if(!T)return;a&&a()},register:N=>(u.set(N,!1),()=>u.delete(N))}),[r,u,a]);return l&&y&&(j={...j}),v.useMemo(()=>{u.forEach((N,T)=>u.set(T,!1))},[r]),v.useEffect(()=>{!r&&!u.size&&a&&a()},[r]),o==="popLayout"&&(s=e.jsx(TL,{isPresent:r,anchorX:d,children:s})),e.jsx(Am.Provider,{value:j,children:s})};function DL(){return new Map}function aI(s=!0){const t=v.useContext(Am);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:n}=t,l=v.useId();v.useEffect(()=>{if(s)return n(l)},[s]);const o=v.useCallback(()=>s&&a&&a(l),[l,a,s]);return!r&&a?[!1,o]:[!0]}const au=s=>s.key||"";function zN(s){const t=[];return v.Children.forEach(s,r=>{v.isValidElement(r)&&t.push(r)}),t}const jy=({children:s,custom:t,initial:r=!0,onExitComplete:a,presenceAffectsLayout:n=!0,mode:l="sync",propagate:o=!1,anchorX:d="left"})=>{const[u,m]=aI(o),y=v.useMemo(()=>zN(s),[s]),j=o&&!u?[]:y.map(au),N=v.useRef(!0),T=v.useRef(y),g=Yg(()=>new Map),[B,D]=v.useState(y),[R,$]=v.useState(y);h3(()=>{N.current=!1,T.current=y;for(let G=0;G<R.length;G++){const Y=au(R[G]);j.includes(Y)?g.delete(Y):g.get(Y)!==!0&&g.set(Y,!1)}},[R,j.length,j.join("-")]);const z=[];if(y!==B){let G=[...y];for(let Y=0;Y<R.length;Y++){const V=R[Y],x=au(V);j.includes(x)||(G.splice(Y,0,V),z.push(V))}return l==="wait"&&z.length&&(G=z),$(zN(G)),D(y),null}const{forceRender:Z}=v.useContext(Kg);return e.jsx(e.Fragment,{children:R.map(G=>{const Y=au(G),V=o&&!u?!1:y===R||j.includes(Y),x=()=>{if(g.has(Y))g.set(Y,!0);else return;let q=!0;g.forEach(W=>{W||(q=!1)}),q&&(Z==null||Z(),$(T.current),o&&(m==null||m()),a&&a())};return e.jsx(_L,{isPresent:V,initial:!N.current||r?void 0:!1,custom:t,presenceAffectsLayout:n,mode:l,onExitComplete:V?void 0:x,anchorX:d,children:G},Y)})})},nI=v.createContext({strict:!1}),BN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$o={};for(const s in BN)$o[s]={isEnabled:t=>BN[s].some(r=>!!t[r])};function AL(s){for(const t in s)$o[t]={...$o[t],...s[t]}}const RL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rx(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||RL.has(s)}let iI=s=>!Rx(s);function ML(s){s&&(iI=t=>t.startsWith("on")?!Rx(t):s(t))}try{ML(require("@emotion/is-prop-valid").default)}catch{}function OL(s,t,r){const a={};for(const n in s)n==="values"&&typeof s.values=="object"||(iI(n)||r===!0&&Rx(n)||!t&&!Rx(n)||s.draggable&&n.startsWith("onDrag"))&&(a[n]=s[n]);return a}function LL(s){if(typeof Proxy>"u")return s;const t=new Map,r=(...a)=>s(...a);return new Proxy(r,{get:(a,n)=>n==="create"?s:(t.has(n)||t.set(n,s(n)),t.get(n))})}const Rm=v.createContext({});function Mm(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Vc(s){return typeof s=="string"||Array.isArray(s)}const Ny=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wy=["initial",...Ny];function Om(s){return Mm(s.animate)||wy.some(t=>Vc(s[t]))}function oI(s){return!!(Om(s)||s.variants)}function VL(s,t){if(Om(s)){const{initial:r,animate:a}=s;return{initial:r===!1||Vc(r)?r:void 0,animate:Vc(a)?a:void 0}}return s.inherit!==!1?t:{}}function zL(s){const{initial:t,animate:r}=VL(s,v.useContext(Rm));return v.useMemo(()=>({initial:t,animate:r}),[$N(t),$N(r)])}function $N(s){return Array.isArray(s)?s.join(" "):s}const BL=Symbol.for("motionComponentSymbol");function xo(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function $L(s,t,r){return v.useCallback(a=>{a&&s.onMount&&s.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):xo(r)&&(r.current=a))},[t])}const ky=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),FL="framerAppearId",lI="data-"+ky(FL),cI=v.createContext({});function UL(s,t,r,a,n){var B,D;const{visualElement:l}=v.useContext(Rm),o=v.useContext(nI),d=v.useContext(Am),u=v.useContext(vy).reducedMotion,m=v.useRef(null);a=a||o.renderer,!m.current&&a&&(m.current=a(s,{visualState:t,parent:l,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const y=m.current,j=v.useContext(cI);y&&!y.projection&&n&&(y.type==="html"||y.type==="svg")&&WL(m.current,r,n,j);const N=v.useRef(!1);v.useInsertionEffect(()=>{y&&N.current&&y.update(r,d)});const T=r[lI],g=v.useRef(!!T&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,T))&&((D=window.MotionHasOptimisedAnimation)==null?void 0:D.call(window,T)));return h3(()=>{y&&(N.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),yy.render(y.render),g.current&&y.animationState&&y.animationState.animateChanges())}),v.useEffect(()=>{y&&(!g.current&&y.animationState&&y.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,T)}),g.current=!1))}),y}function WL(s,t,r,a){const{layoutId:n,layout:l,drag:o,dragConstraints:d,layoutScroll:u,layoutRoot:m,layoutCrossfade:y}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:dI(s.parent)),s.projection.setOptions({layoutId:n,layout:l,alwaysMeasureLayout:!!o||d&&xo(d),visualElement:s,animationType:typeof l=="string"?l:"both",initialPromotionConfig:a,crossfade:y,layoutScroll:u,layoutRoot:m})}function dI(s){if(s)return s.options.allowProjection!==!1?s.projection:dI(s.parent)}function HL({preloadedFeatures:s,createVisualElement:t,useRender:r,useVisualState:a,Component:n}){s&&AL(s);function l(d,u){let m;const y={...v.useContext(vy),...d,layoutId:qL(d)},{isStatic:j}=y,N=zL(d),T=a(d,j);if(!j&&Xg){GL();const g=QL(y);m=g.MeasureLayout,N.visualElement=UL(n,T,y,t,g.ProjectionNode)}return e.jsxs(Rm.Provider,{value:N,children:[m&&N.visualElement?e.jsx(m,{visualElement:N.visualElement,...y}):null,r(n,d,$L(T,N.visualElement,u),T,j,N.visualElement)]})}l.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=v.forwardRef(l);return o[BL]=n,o}function qL({layoutId:s}){const t=v.useContext(Kg).id;return t&&s!==void 0?t+"-"+s:s}function GL(s,t){v.useContext(nI).strict}function QL(s){const{drag:t,layout:r}=$o;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(s)||r!=null&&r.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const zc={};function KL(s){for(const t in s)zc[t]=s[t],ny(t)&&(zc[t].isCSSVariable=!0)}function uI(s,{layout:t,layoutId:r}){return rl.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!zc[s]||s==="opacity")}const YL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XL=sl.length;function JL(s,t,r){let a="",n=!0;for(let l=0;l<XL;l++){const o=sl[l],d=s[o];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(o.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||r){const m=Z3(d,gy[o]);if(!u){n=!1;const y=YL[o]||o;a+=`${y}(${m}) `}r&&(t[o]=m)}}return a=a.trim(),r?a=r(t,n?"":a):n&&(a="none"),a}function Iy(s,t,r){const{style:a,vars:n,transformOrigin:l}=s;let o=!1,d=!1;for(const u in t){const m=t[u];if(rl.has(u)){o=!0;continue}else if(ny(u)){n[u]=m;continue}else{const y=Z3(m,gy[u]);u.startsWith("origin")?(d=!0,l[u]=y):a[u]=y}}if(t.transform||(o||r?a.transform=JL(t,s.transform,r):a.transform&&(a.transform="none")),d){const{originX:u="50%",originY:m="50%",originZ:y=0}=l;a.transformOrigin=`${u} ${m} ${y}`}}const Sy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xI(s,t,r){for(const a in t)!Gs(t[a])&&!uI(a,r)&&(s[a]=t[a])}function ZL({transformTemplate:s},t){return v.useMemo(()=>{const r=Sy();return Iy(r,t,s),Object.assign({},r.vars,r.style)},[t])}function eV(s,t){const r=s.style||{},a={};return xI(a,r,s),Object.assign(a,ZL(s,t)),a}function tV(s,t){const r={},a=eV(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=a,r}const sV={offset:"stroke-dashoffset",array:"stroke-dasharray"},rV={offset:"strokeDashoffset",array:"strokeDasharray"};function aV(s,t,r=1,a=0,n=!0){s.pathLength=1;const l=n?sV:rV;s[l.offset]=bt.transform(-a);const o=bt.transform(t),d=bt.transform(r);s[l.array]=`${o} ${d}`}function mI(s,{attrX:t,attrY:r,attrScale:a,pathLength:n,pathSpacing:l=1,pathOffset:o=0,...d},u,m,y){if(Iy(s,d,m),u){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:j,style:N}=s;j.transform&&(N.transform=j.transform,delete j.transform),(N.transform||j.transformOrigin)&&(N.transformOrigin=j.transformOrigin??"50% 50%",delete j.transformOrigin),N.transform&&(N.transformBox=(y==null?void 0:y.transformBox)??"fill-box",delete j.transformBox),t!==void 0&&(j.x=t),r!==void 0&&(j.y=r),a!==void 0&&(j.scale=a),n!==void 0&&aV(j,n,l,o,!1)}const hI=()=>({...Sy(),attrs:{}}),pI=s=>typeof s=="string"&&s.toLowerCase()==="svg";function nV(s,t,r,a){const n=v.useMemo(()=>{const l=hI();return mI(l,t,pI(a),s.transformTemplate,s.style),{...l.attrs,style:{...l.style}}},[t]);if(s.style){const l={};xI(l,s.style,s),n.style={...l,...n.style}}return n}const iV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Py(s){return typeof s!="string"||s.includes("-")?!1:!!(iV.indexOf(s)>-1||/[A-Z]/u.test(s))}function oV(s=!1){return(r,a,n,{latestValues:l},o)=>{const u=(Py(r)?nV:tV)(a,l,o,r),m=OL(a,typeof r=="string",s),y=r!==v.Fragment?{...m,...u,ref:n}:{},{children:j}=a,N=v.useMemo(()=>Gs(j)?j.get():j,[j]);return v.createElement(r,{...y,children:N})}}function FN(s){const t=[{},{}];return s==null||s.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function Ey(s,t,r,a){if(typeof t=="function"){const[n,l]=FN(a);t=t(r!==void 0?r:s.custom,n,l)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[n,l]=FN(a);t=t(r!==void 0?r:s.custom,n,l)}return t}function Au(s){return Gs(s)?s.get():s}function lV({scrapeMotionValuesFromProps:s,createRenderState:t},r,a,n){return{latestValues:cV(r,a,n,s),renderState:t()}}const fI=s=>(t,r)=>{const a=v.useContext(Rm),n=v.useContext(Am),l=()=>lV(s,t,a,n);return r?l():Yg(l)};function cV(s,t,r,a){const n={},l=a(s,{});for(const N in l)n[N]=Au(l[N]);let{initial:o,animate:d}=s;const u=Om(s),m=oI(s);t&&m&&!u&&s.inherit!==!1&&(o===void 0&&(o=t.initial),d===void 0&&(d=t.animate));let y=r?r.initial===!1:!1;y=y||o===!1;const j=y?d:o;if(j&&typeof j!="boolean"&&!Mm(j)){const N=Array.isArray(j)?j:[j];for(let T=0;T<N.length;T++){const g=Ey(s,N[T]);if(g){const{transitionEnd:B,transition:D,...R}=g;for(const $ in R){let z=R[$];if(Array.isArray(z)){const Z=y?z.length-1:0;z=z[Z]}z!==null&&(n[$]=z)}for(const $ in B)n[$]=B[$]}}}return n}function Cy(s,t,r){var l;const{style:a}=s,n={};for(const o in a)(Gs(a[o])||t.style&&Gs(t.style[o])||uI(o,s)||((l=r==null?void 0:r.getValue(o))==null?void 0:l.liveStyle)!==void 0)&&(n[o]=a[o]);return n}const dV={useVisualState:fI({scrapeMotionValuesFromProps:Cy,createRenderState:Sy})};function gI(s,t,r){const a=Cy(s,t,r);for(const n in s)if(Gs(s[n])||Gs(t[n])){const l=sl.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;a[l]=s[n]}return a}const uV={useVisualState:fI({scrapeMotionValuesFromProps:gI,createRenderState:hI})};function xV(s,t){return function(a,{forwardMotionProps:n}={forwardMotionProps:!1}){const o={...Py(a)?uV:dV,preloadedFeatures:s,useRender:oV(n),createVisualElement:t,Component:a};return HL(o)}}function Bc(s,t,r){const a=s.getProps();return Ey(a,t,r!==void 0?r:a.custom,s)}const Tp=s=>Array.isArray(s);function mV(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,Bo(r))}function hV(s){return Tp(s)?s[s.length-1]||0:s}function pV(s,t){const r=Bc(s,t);let{transitionEnd:a={},transition:n={},...l}=r||{};l={...l,...a};for(const o in l){const d=hV(l[o]);mV(s,o,d)}}function fV(s){return!!(Gs(s)&&s.add)}function _p(s,t){const r=s.getValue("willChange");if(fV(r))return r.add(t);if(!r&&qa.WillChange){const a=new qa.WillChange("auto");s.addValue("willChange",a),a.add(t)}}function yI(s){return s.props[lI]}const gV=s=>s!==null;function yV(s,{repeat:t,repeatType:r="loop"},a){const n=s.filter(gV),l=t&&r!=="loop"&&t%2===1?0:n.length-1;return!l||a===void 0?n[l]:a}const bV={type:"spring",stiffness:500,damping:25,restSpeed:10},vV=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),jV={type:"keyframes",duration:.8},NV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wV=(s,{keyframes:t})=>t.length>2?jV:rl.has(s)?s.startsWith("scale")?vV(t[1]):bV:NV;function kV({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:l,repeatType:o,repeatDelay:d,from:u,elapsed:m,...y}){return!!Object.keys(y).length}const Ty=(s,t,r,a={},n,l)=>o=>{const d=fy(a,s)||{},u=d.delay||a.delay||0;let{elapsed:m=0}=a;m=m-pa(u);const y={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...d,delay:-m,onUpdate:N=>{t.set(N),d.onUpdate&&d.onUpdate(N)},onComplete:()=>{o(),d.onComplete&&d.onComplete()},name:s,motionValue:t,element:l?void 0:n};kV(d)||Object.assign(y,wV(s,y)),y.duration&&(y.duration=pa(y.duration)),y.repeatDelay&&(y.repeatDelay=pa(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let j=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(j=!0)),(qa.instantAnimations||qa.skipAnimations)&&(j=!0,y.duration=0,y.delay=0),y.allowFlatten=!d.type&&!d.ease,j&&!l&&t.get()!==void 0){const N=yV(y.keyframes,d);if(N!==void 0){is.update(()=>{y.onUpdate(N),y.onComplete()});return}}return d.isSync?new my(y):new aL(y)};function IV({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function bI(s,t,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:l=s.getDefaultTransition(),transitionEnd:o,...d}=t;a&&(l=a);const u=[],m=n&&s.animationState&&s.animationState.getState()[n];for(const y in d){const j=s.getValue(y,s.latestValues[y]??null),N=d[y];if(N===void 0||m&&IV(m,y))continue;const T={delay:r,...fy(l||{},y)},g=j.get();if(g!==void 0&&!j.isAnimating&&!Array.isArray(N)&&N===g&&!T.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const R=yI(s);if(R){const $=window.MotionHandoffAnimation(R,y,is);$!==null&&(T.startTime=$,B=!0)}}_p(s,y),j.start(Ty(y,j,N,s.shouldReduceMotion&&Q3.has(y)?{type:!1}:T,s,B));const D=j.animation;D&&u.push(D)}return o&&Promise.all(u).then(()=>{is.update(()=>{o&&pV(s,o)})}),u}function Dp(s,t,r={}){var u;const a=Bc(s,t,r.type==="exit"?(u=s.presenceContext)==null?void 0:u.custom:void 0);let{transition:n=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const l=a?()=>Promise.all(bI(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(m=0)=>{const{delayChildren:y=0,staggerChildren:j,staggerDirection:N}=n;return SV(s,t,y+m,j,N,r)}:()=>Promise.resolve(),{when:d}=n;if(d){const[m,y]=d==="beforeChildren"?[l,o]:[o,l];return m().then(()=>y())}else return Promise.all([l(),o(r.delay)])}function SV(s,t,r=0,a=0,n=1,l){const o=[],d=(s.variantChildren.size-1)*a,u=n===1?(m=0)=>m*a:(m=0)=>d-m*a;return Array.from(s.variantChildren).sort(PV).forEach((m,y)=>{m.notify("AnimationStart",t),o.push(Dp(m,t,{...l,delay:r+u(y)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(o)}function PV(s,t){return s.sortNodePosition(t)}function EV(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const n=t.map(l=>Dp(s,l,r));a=Promise.all(n)}else if(typeof t=="string")a=Dp(s,t,r);else{const n=typeof t=="function"?Bc(s,t,r.custom):t;a=Promise.all(bI(s,n,r))}return a.then(()=>{s.notify("AnimationComplete",t)})}function vI(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}const CV=wy.length;function jI(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?jI(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<CV;r++){const a=wy[r],n=s.props[a];(Vc(n)||n===!1)&&(t[a]=n)}return t}const TV=[...Ny].reverse(),_V=Ny.length;function DV(s){return t=>Promise.all(t.map(({animation:r,options:a})=>EV(s,r,a)))}function AV(s){let t=DV(s),r=UN(),a=!0;const n=u=>(m,y)=>{var N;const j=Bc(s,y,u==="exit"?(N=s.presenceContext)==null?void 0:N.custom:void 0);if(j){const{transition:T,transitionEnd:g,...B}=j;m={...m,...B,...g}}return m};function l(u){t=u(s)}function o(u){const{props:m}=s,y=jI(s.parent)||{},j=[],N=new Set;let T={},g=1/0;for(let D=0;D<_V;D++){const R=TV[D],$=r[R],z=m[R]!==void 0?m[R]:y[R],Z=Vc(z),G=R===u?$.isActive:null;G===!1&&(g=D);let Y=z===y[R]&&z!==m[R]&&Z;if(Y&&a&&s.manuallyAnimateOnMount&&(Y=!1),$.protectedKeys={...T},!$.isActive&&G===null||!z&&!$.prevProp||Mm(z)||typeof z=="boolean")continue;const V=RV($.prevProp,z);let x=V||R===u&&$.isActive&&!Y&&Z||D>g&&Z,q=!1;const W=Array.isArray(z)?z:[z];let J=W.reduce(n(R),{});G===!1&&(J={});const{prevResolvedValues:re={}}=$,X={...re,...J},Q=Ne=>{x=!0,N.has(Ne)&&(q=!0,N.delete(Ne)),$.needsAnimating[Ne]=!0;const ue=s.getValue(Ne);ue&&(ue.liveStyle=!1)};for(const Ne in X){const ue=J[Ne],je=re[Ne];if(T.hasOwnProperty(Ne))continue;let pe=!1;Tp(ue)&&Tp(je)?pe=!vI(ue,je):pe=ue!==je,pe?ue!=null?Q(Ne):N.add(Ne):ue!==void 0&&N.has(Ne)?Q(Ne):$.protectedKeys[Ne]=!0}$.prevProp=z,$.prevResolvedValues=J,$.isActive&&(T={...T,...J}),a&&s.blockInitialAnimation&&(x=!1),x&&(!(Y&&V)||q)&&j.push(...W.map(Ne=>({animation:Ne,options:{type:R}})))}if(N.size){const D={};if(typeof m.initial!="boolean"){const R=Bc(s,Array.isArray(m.initial)?m.initial[0]:m.initial);R&&R.transition&&(D.transition=R.transition)}N.forEach(R=>{const $=s.getBaseTarget(R),z=s.getValue(R);z&&(z.liveStyle=!0),D[R]=$??null}),j.push({animation:D})}let B=!!j.length;return a&&(m.initial===!1||m.initial===m.animate)&&!s.manuallyAnimateOnMount&&(B=!1),a=!1,B?t(j):Promise.resolve()}function d(u,m){var j;if(r[u].isActive===m)return Promise.resolve();(j=s.variantChildren)==null||j.forEach(N=>{var T;return(T=N.animationState)==null?void 0:T.setActive(u,m)}),r[u].isActive=m;const y=o(u);for(const N in r)r[N].protectedKeys={};return y}return{animateChanges:o,setActive:d,setAnimateFunction:l,getState:()=>r,reset:()=>{r=UN(),a=!0}}}function RV(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!vI(t,s):!1}function ei(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function UN(){return{animate:ei(!0),whileInView:ei(),whileHover:ei(),whileTap:ei(),whileDrag:ei(),whileFocus:ei(),exit:ei()}}class Qn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class MV extends Qn{constructor(t){super(t),t.animationState||(t.animationState=AV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Mm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let OV=0;class LV extends Qn{constructor(){super(...arguments),this.id=OV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const n=this.node.animationState.setActive("exit",!t);r&&!t&&n.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const VV={animation:{Feature:MV},exit:{Feature:LV}};function $c(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}function fd(s){return{point:{x:s.pageX,y:s.pageY}}}const zV=s=>t=>by(t)&&s(t,fd(t));function sc(s,t,r,a){return $c(s,t,zV(r),a)}function NI({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function BV({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function $V(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}const wI=1e-4,FV=1-wI,UV=1+wI,kI=.01,WV=0-kI,HV=0+kI;function er(s){return s.max-s.min}function qV(s,t,r){return Math.abs(s-t)<=r}function WN(s,t,r,a=.5){s.origin=a,s.originPoint=rs(t.min,t.max,s.origin),s.scale=er(r)/er(t),s.translate=rs(r.min,r.max,s.origin)-s.originPoint,(s.scale>=FV&&s.scale<=UV||isNaN(s.scale))&&(s.scale=1),(s.translate>=WV&&s.translate<=HV||isNaN(s.translate))&&(s.translate=0)}function rc(s,t,r,a){WN(s.x,t.x,r.x,a?a.originX:void 0),WN(s.y,t.y,r.y,a?a.originY:void 0)}function HN(s,t,r){s.min=r.min+t.min,s.max=s.min+er(t)}function GV(s,t,r){HN(s.x,t.x,r.x),HN(s.y,t.y,r.y)}function qN(s,t,r){s.min=t.min-r.min,s.max=s.min+er(t)}function ac(s,t,r){qN(s.x,t.x,r.x),qN(s.y,t.y,r.y)}const GN=()=>({translate:0,scale:1,origin:0,originPoint:0}),mo=()=>({x:GN(),y:GN()}),QN=()=>({min:0,max:0}),hs=()=>({x:QN(),y:QN()});function Ar(s){return[s("x"),s("y")]}function U0(s){return s===void 0||s===1}function Ap({scale:s,scaleX:t,scaleY:r}){return!U0(s)||!U0(t)||!U0(r)}function ai(s){return Ap(s)||II(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function II(s){return KN(s.x)||KN(s.y)}function KN(s){return s&&s!=="0%"}function Mx(s,t,r){const a=s-r,n=t*a;return r+n}function YN(s,t,r,a,n){return n!==void 0&&(s=Mx(s,n,a)),Mx(s,r,a)+t}function Rp(s,t=0,r=1,a,n){s.min=YN(s.min,t,r,a,n),s.max=YN(s.max,t,r,a,n)}function SI(s,{x:t,y:r}){Rp(s.x,t.translate,t.scale,t.originPoint),Rp(s.y,r.translate,r.scale,r.originPoint)}const XN=.999999999999,JN=1.0000000000001;function QV(s,t,r,a=!1){const n=r.length;if(!n)return;t.x=t.y=1;let l,o;for(let d=0;d<n;d++){l=r[d],o=l.projectionDelta;const{visualElement:u}=l.options;u&&u.props.style&&u.props.style.display==="contents"||(a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&po(s,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,SI(s,o)),a&&ai(l.latestValues)&&po(s,l.latestValues))}t.x<JN&&t.x>XN&&(t.x=1),t.y<JN&&t.y>XN&&(t.y=1)}function ho(s,t){s.min=s.min+t,s.max=s.max+t}function ZN(s,t,r,a,n=.5){const l=rs(s.min,s.max,n);Rp(s,t,r,l,a)}function po(s,t){ZN(s.x,t.x,t.scaleX,t.scale,t.originX),ZN(s.y,t.y,t.scaleY,t.scale,t.originY)}function PI(s,t){return NI($V(s.getBoundingClientRect(),t))}function KV(s,t,r){const a=PI(s,r),{scroll:n}=t;return n&&(ho(a.x,n.offset.x),ho(a.y,n.offset.y)),a}const EI=({current:s})=>s?s.ownerDocument.defaultView:null,ew=(s,t)=>Math.abs(s-t);function YV(s,t){const r=ew(s.x,t.x),a=ew(s.y,t.y);return Math.sqrt(r**2+a**2)}class CI{constructor(t,r,{transformPagePoint:a,contextWindow:n,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=H0(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,T=YV(j.offset,{x:0,y:0})>=3;if(!N&&!T)return;const{point:g}=j,{timestamp:B}=Ts;this.history.push({...g,timestamp:B});const{onStart:D,onMove:R}=this.handlers;N||(D&&D(this.lastMoveEvent,j),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,j)},this.handlePointerMove=(j,N)=>{this.lastMoveEvent=j,this.lastMoveEventInfo=W0(N,this.transformPagePoint),is.update(this.updatePoint,!0)},this.handlePointerUp=(j,N)=>{this.end();const{onEnd:T,onSessionEnd:g,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=H0(j.type==="pointercancel"?this.lastMoveEventInfo:W0(N,this.transformPagePoint),this.history);this.startEvent&&T&&T(j,D),g&&g(j,D)},!by(t))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=a,this.contextWindow=n||window;const o=fd(t),d=W0(o,this.transformPagePoint),{point:u}=d,{timestamp:m}=Ts;this.history=[{...u,timestamp:m}];const{onSessionStart:y}=r;y&&y(t,H0(d,this.history)),this.removeListeners=md(sc(this.contextWindow,"pointermove",this.handlePointerMove),sc(this.contextWindow,"pointerup",this.handlePointerUp),sc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zn(this.updatePoint)}}function W0(s,t){return t?{point:t(s.point)}:s}function tw(s,t){return{x:s.x-t.x,y:s.y-t.y}}function H0({point:s},t){return{point:s,delta:tw(s,TI(t)),offset:tw(s,XV(t)),velocity:JV(t,.1)}}function XV(s){return s[0]}function TI(s){return s[s.length-1]}function JV(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const n=TI(s);for(;r>=0&&(a=s[r],!(n.timestamp-a.timestamp>pa(t)));)r--;if(!a)return{x:0,y:0};const l=fa(n.timestamp-a.timestamp);if(l===0)return{x:0,y:0};const o={x:(n.x-a.x)/l,y:(n.y-a.y)/l};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ZV(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?rs(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?rs(r,s,a.max):Math.min(s,r)),s}function sw(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function ez(s,{top:t,left:r,bottom:a,right:n}){return{x:sw(s.x,r,n),y:sw(s.y,t,a)}}function rw(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function tz(s,t){return{x:rw(s.x,t.x),y:rw(s.y,t.y)}}function sz(s,t){let r=.5;const a=er(s),n=er(t);return n>a?r=Mc(t.min,t.max-a,s.min):a>n&&(r=Mc(s.min,s.max-n,t.min)),Ha(0,1,r)}function rz(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const Mp=.35;function az(s=Mp){return s===!1?s=0:s===!0&&(s=Mp),{x:aw(s,"left","right"),y:aw(s,"top","bottom")}}function aw(s,t,r){return{min:nw(s,t),max:nw(s,r)}}function nw(s,t){return typeof s=="number"?s:s[t]||0}const nz=new WeakMap;class iz{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hs(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const n=y=>{const{dragSnapToOrigin:j}=this.getProps();j?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(fd(y).point)},l=(y,j)=>{const{drag:N,dragPropagation:T,onDragStart:g}=this.getProps();if(N&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vL(N),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ar(D=>{let R=this.getAxisMotionValue(D).get()||0;if(ga.test(R)){const{projection:$}=this.visualElement;if($&&$.layout){const z=$.layout.layoutBox[D];z&&(R=er(z)*(parseFloat(R)/100))}}this.originPoint[D]=R}),g&&is.postRender(()=>g(y,j)),_p(this.visualElement,"transform");const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},o=(y,j)=>{const{dragPropagation:N,dragDirectionLock:T,onDirectionLock:g,onDrag:B}=this.getProps();if(!N&&!this.openDragLock)return;const{offset:D}=j;if(T&&this.currentDirection===null){this.currentDirection=oz(D),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",j.point,D),this.updateAxis("y",j.point,D),this.visualElement.render(),B&&B(y,j)},d=(y,j)=>this.stop(y,j),u=()=>Ar(y=>{var j;return this.getAnimationState(y)==="paused"&&((j=this.getAxisMotionValue(y).animation)==null?void 0:j.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new CI(t,{onSessionStart:n,onStart:l,onMove:o,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:EI(this.visualElement)})}stop(t,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:n}=r;this.startAnimation(n);const{onDragEnd:l}=this.getProps();l&&is.postRender(()=>l(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:n}=this.getProps();if(!a||!nu(t,n,this.currentDirection))return;const l=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=ZV(o,this.constraints[t],this.elastic[t])),l.set(o)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,n=this.constraints;t&&xo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=ez(a.layoutBox,t):this.constraints=!1,this.elastic=az(r),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Ar(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rz(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!xo(t))return!1;const a=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const l=KV(a,n.root,this.visualElement.getTransformPagePoint());let o=tz(n.layout.layoutBox,l);if(r){const d=r(BV(o));this.hasMutatedConstraints=!!d,d&&(o=NI(d))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:l,dragSnapToOrigin:o,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},m=Ar(y=>{if(!nu(y,r,this.currentDirection))return;let j=u&&u[y]||{};o&&(j={min:0,max:0});const N=n?200:1e6,T=n?40:1e7,g={type:"inertia",velocity:a?t[y]:0,bounceStiffness:N,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...l,...j};return this.startAxisValueAnimation(y,g)});return Promise.all(m).then(d)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return _p(this.visualElement,t),a.start(Ty(t,a,0,r,this.visualElement,!1))}stopAnimation(){Ar(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ar(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Ar(r=>{const{drag:a}=this.getProps();if(!nu(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,l=this.getAxisMotionValue(r);if(n&&n.layout){const{min:o,max:d}=n.layout.layoutBox[r];l.set(t[r]-rs(o,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!xo(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Ar(o=>{const d=this.getAxisMotionValue(o);if(d&&this.constraints!==!1){const u=d.get();n[o]=sz({min:u,max:u},this.constraints[o])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Ar(o=>{if(!nu(o,t,null))return;const d=this.getAxisMotionValue(o),{min:u,max:m}=this.constraints[o];d.set(rs(u,m,n[o]))})}addListeners(){if(!this.visualElement.current)return;nz.set(this.visualElement,this);const t=this.visualElement.current,r=sc(t,"pointerdown",u=>{const{drag:m,dragListener:y=!0}=this.getProps();m&&y&&this.start(u)}),a=()=>{const{dragConstraints:u}=this.getProps();xo(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,l=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),is.read(a);const o=$c(window,"resize",()=>this.scalePositionWithinConstraints()),d=n.addEventListener("didUpdate",({delta:u,hasLayoutChanged:m})=>{this.isDragging&&m&&(Ar(y=>{const j=this.getAxisMotionValue(y);j&&(this.originPoint[y]+=u[y].translate,j.set(j.get()+u[y].translate))}),this.visualElement.render())});return()=>{o(),r(),l(),d&&d()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:l=!1,dragElastic:o=Mp,dragMomentum:d=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:l,dragElastic:o,dragMomentum:d}}}function nu(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function oz(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class lz extends Qn{constructor(t){super(t),this.removeGroupControls=Vr,this.removeListeners=Vr,this.controls=new iz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vr}unmount(){this.removeGroupControls(),this.removeListeners()}}const iw=s=>(t,r)=>{s&&is.postRender(()=>s(t,r))};class cz extends Qn{constructor(){super(...arguments),this.removePointerDownListener=Vr}onPointerDown(t){this.session=new CI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:EI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:iw(t),onStart:iw(r),onMove:a,onEnd:(l,o)=>{delete this.session,n&&is.postRender(()=>n(l,o))}}}mount(){this.removePointerDownListener=sc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ru={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ow(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const kl={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(bt.test(s))s=parseFloat(s);else return s;const r=ow(s,t.target.x),a=ow(s,t.target.y);return`${r}% ${a}%`}},dz={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,n=Bn.parse(s);if(n.length>5)return a;const l=Bn.createTransformer(s),o=typeof n[0]!="number"?1:0,d=r.x.scale*t.x,u=r.y.scale*t.y;n[0+o]/=d,n[1+o]/=u;const m=rs(d,u,.5);return typeof n[2+o]=="number"&&(n[2+o]/=m),typeof n[3+o]=="number"&&(n[3+o]/=m),l(n)}};class uz extends v.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:l}=t;KL(xz),l&&(r.group&&r.group.add(l),a&&a.register&&n&&a.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Ru.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:n,isPresent:l}=this.props,{projection:o}=a;return o&&(o.isPresent=l,n||t.layoutDependency!==r||r===void 0||t.isPresent!==l?o.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?o.promote():o.relegate()||is.postRender(()=>{const d=o.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),yy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function _I(s){const[t,r]=aI(),a=v.useContext(Kg);return e.jsx(uz,{...s,layoutGroup:a,switchLayoutGroup:v.useContext(cI),isPresent:t,safeToRemove:r})}const xz={borderRadius:{...kl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kl,borderTopRightRadius:kl,borderBottomLeftRadius:kl,borderBottomRightRadius:kl,boxShadow:dz};function mz(s,t,r){const a=Gs(s)?s:Bo(s);return a.start(Ty("",a,t,r)),a.animation}const hz=(s,t)=>s.depth-t.depth;class pz{constructor(){this.children=[],this.isDirty=!1}add(t){Jg(this.children,t),this.isDirty=!0}remove(t){Zg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(hz),this.isDirty=!1,this.children.forEach(t)}}function fz(s,t){const r=ur.now(),a=({timestamp:n})=>{const l=n-r;l>=t&&(zn(a),s(l-t))};return is.setup(a,!0),()=>zn(a)}const DI=["TopLeft","TopRight","BottomLeft","BottomRight"],gz=DI.length,lw=s=>typeof s=="string"?parseFloat(s):s,cw=s=>typeof s=="number"||bt.test(s);function yz(s,t,r,a,n,l){n?(s.opacity=rs(0,r.opacity??1,bz(a)),s.opacityExit=rs(t.opacity??1,0,vz(a))):l&&(s.opacity=rs(t.opacity??1,r.opacity??1,a));for(let o=0;o<gz;o++){const d=`border${DI[o]}Radius`;let u=dw(t,d),m=dw(r,d);if(u===void 0&&m===void 0)continue;u||(u=0),m||(m=0),u===0||m===0||cw(u)===cw(m)?(s[d]=Math.max(rs(lw(u),lw(m),a),0),(ga.test(m)||ga.test(u))&&(s[d]+="%")):s[d]=m}(t.rotate||r.rotate)&&(s.rotate=rs(t.rotate||0,r.rotate||0,a))}function dw(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const bz=AI(0,.5,I3),vz=AI(.5,.95,Vr);function AI(s,t,r){return a=>a<s?0:a>t?1:r(Mc(s,t,a))}function uw(s,t){s.min=t.min,s.max=t.max}function Dr(s,t){uw(s.x,t.x),uw(s.y,t.y)}function xw(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function mw(s,t,r,a,n){return s-=t,s=Mx(s,1/r,a),n!==void 0&&(s=Mx(s,1/n,a)),s}function jz(s,t=0,r=1,a=.5,n,l=s,o=s){if(ga.test(t)&&(t=parseFloat(t),t=rs(o.min,o.max,t/100)-o.min),typeof t!="number")return;let d=rs(l.min,l.max,a);s===l&&(d-=t),s.min=mw(s.min,t,r,d,n),s.max=mw(s.max,t,r,d,n)}function hw(s,t,[r,a,n],l,o){jz(s,t[r],t[a],t[n],t.scale,l,o)}const Nz=["x","scaleX","originX"],wz=["y","scaleY","originY"];function pw(s,t,r,a){hw(s.x,t,Nz,r?r.x:void 0,a?a.x:void 0),hw(s.y,t,wz,r?r.y:void 0,a?a.y:void 0)}function fw(s){return s.translate===0&&s.scale===1}function RI(s){return fw(s.x)&&fw(s.y)}function gw(s,t){return s.min===t.min&&s.max===t.max}function kz(s,t){return gw(s.x,t.x)&&gw(s.y,t.y)}function yw(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function MI(s,t){return yw(s.x,t.x)&&yw(s.y,t.y)}function bw(s){return er(s.x)/er(s.y)}function vw(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class Iz{constructor(){this.members=[]}add(t){Jg(this.members,t),t.scheduleRender()}remove(t){if(Zg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const l=this.members[n];if(l.isPresent!==!1){a=l;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Sz(s,t,r){let a="";const n=s.x.translate/t.x,l=s.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((n||l||o)&&(a=`translate3d(${n}px, ${l}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:m,rotate:y,rotateX:j,rotateY:N,skewX:T,skewY:g}=r;m&&(a=`perspective(${m}px) ${a}`),y&&(a+=`rotate(${y}deg) `),j&&(a+=`rotateX(${j}deg) `),N&&(a+=`rotateY(${N}deg) `),T&&(a+=`skewX(${T}deg) `),g&&(a+=`skewY(${g}deg) `)}const d=s.x.scale*t.x,u=s.y.scale*t.y;return(d!==1||u!==1)&&(a+=`scale(${d}, ${u})`),a||"none"}const q0=["","X","Y","Z"],Pz={visibility:"hidden"},Ez=1e3;let Cz=0;function G0(s,t,r,a){const{latestValues:n}=t;n[s]&&(r[s]=n[s],t.setStaticValue(s,0),a&&(a[s]=0))}function OI(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=yI(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:l}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",is,!(n||l))}const{parent:a}=s;a&&!a.hasCheckedOptimisedAppear&&OI(a)}function LI({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(o={},d=t==null?void 0:t()){this.id=Cz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Dz),this.nodes.forEach(Lz),this.nodes.forEach(Vz),this.nodes.forEach(Az)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new pz)}addEventListener(o,d){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new sy),this.eventHandlers.get(o).add(d)}notifyListeners(o,...d){const u=this.eventHandlers.get(o);u&&u.notify(...d)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=rI(o)&&!SL(o),this.instance=o;const{layoutId:d,layout:u,visualElement:m}=this.options;if(m&&!m.current&&m.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),s){let y;const j=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=fz(j,250),Ru.hasAnimatedSinceResize&&(Ru.hasAnimatedSinceResize=!1,this.nodes.forEach(Nw))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||u)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:j,hasRelativeLayoutChanged:N,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||m.getDefaultTransition()||Uz,{onLayoutAnimationStart:B,onLayoutAnimationComplete:D}=m.getProps(),R=!this.targetLayout||!MI(this.targetLayout,T),$=!j&&N;if(this.options.layoutRoot||this.resumeFrom||$||j&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,$);const z={...fy(g,"layout"),onPlay:B,onComplete:D};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else j||Nw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&OI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const j=this.path[y];j.shouldResetTransform=!0,j.updateScroll("snapshot"),j.options.layoutRoot&&j.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jw);return}this.isUpdating||this.nodes.forEach(Mz),this.isUpdating=!1,this.nodes.forEach(Oz),this.nodes.forEach(Tz),this.nodes.forEach(_z),this.clearAllSnapshots();const d=ur.now();Ts.delta=Ha(0,1e3/60,d-Ts.timestamp),Ts.timestamp=d,Ts.isProcessing=!0,L0.update.process(Ts),L0.preRender.process(Ts),L0.render.process(Ts),Ts.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Rz),this.sharedNodes.forEach(Bz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,is.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){is.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!er(this.snapshot.measuredBox.x)&&!er(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(d=!1),d&&this.instance){const u=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!RI(this.projectionDelta),u=this.getTransformTemplate(),m=u?u(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;o&&this.instance&&(d||ai(this.latestValues)||y)&&(n(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return o&&(u=this.removeTransform(u)),Wz(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:o}=this.options;if(!o)return hs();const d=o.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(Hz))){const{scroll:y}=this.root;y&&(ho(d.x,y.offset.x),ho(d.y,y.offset.y))}return d}removeElementScroll(o){var u;const d=hs();if(Dr(d,o),(u=this.scroll)!=null&&u.wasRoot)return d;for(let m=0;m<this.path.length;m++){const y=this.path[m],{scroll:j,options:N}=y;y!==this.root&&j&&N.layoutScroll&&(j.wasRoot&&Dr(d,o),ho(d.x,j.offset.x),ho(d.y,j.offset.y))}return d}applyTransform(o,d=!1){const u=hs();Dr(u,o);for(let m=0;m<this.path.length;m++){const y=this.path[m];!d&&y.options.layoutScroll&&y.scroll&&y!==y.root&&po(u,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),ai(y.latestValues)&&po(u,y.latestValues)}return ai(this.latestValues)&&po(u,this.latestValues),u}removeTransform(o){const d=hs();Dr(d,o);for(let u=0;u<this.path.length;u++){const m=this.path[u];if(!m.instance||!ai(m.latestValues))continue;Ap(m.latestValues)&&m.updateSnapshot();const y=hs(),j=m.measurePageBox();Dr(y,j),pw(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return ai(this.latestValues)&&pw(d,this.latestValues),d}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ts.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var N;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:j}=this.options;if(!(!this.layout||!(y||j))){if(this.resolvedRelativeTargetAt=Ts.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hs(),this.relativeTargetOrigin=hs(),ac(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hs(),this.targetWithTransforms=hs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dr(this.target,this.layout.layoutBox),SI(this.target,this.targetDelta)):Dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hs(),this.relativeTargetOrigin=hs(),ac(this.relativeTargetOrigin,this.target,T.target),Dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ap(this.parent.latestValues)||II(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),d=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ts.timestamp&&(u=!1),u)return;const{layout:m,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||y))return;Dr(this.layoutCorrected,this.layout.layoutBox);const j=this.treeScale.x,N=this.treeScale.y;QV(this.layoutCorrected,this.treeScale,this.path,d),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=hs());const{target:T}=o;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xw(this.prevProjectionDelta.x,this.projectionDelta.x),xw(this.prevProjectionDelta.y,this.projectionDelta.y)),rc(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==j||this.treeScale.y!==N||!vw(this.projectionDelta.x,this.prevProjectionDelta.x)||!vw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mo(),this.projectionDelta=mo(),this.projectionDeltaWithTransform=mo()}setAnimationOrigin(o,d=!1){const u=this.snapshot,m=u?u.latestValues:{},y={...this.latestValues},j=mo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const N=hs(),T=u?u.source:void 0,g=this.layout?this.layout.source:void 0,B=T!==g,D=this.getStack(),R=!D||D.members.length<=1,$=!!(B&&!R&&this.options.crossfade===!0&&!this.path.some(Fz));this.animationProgress=0;let z;this.mixTargetDelta=Z=>{const G=Z/1e3;ww(j.x,o.x,G),ww(j.y,o.y,G),this.setTargetDelta(j),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ac(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$z(this.relativeTarget,this.relativeTargetOrigin,N,G),z&&kz(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=hs()),Dr(z,this.relativeTarget)),B&&(this.animationValues=y,yz(y,m,this.latestValues,G,$,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var d,u,m;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(!1),(m=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||m.stop(!1),this.pendingAnimation&&(zn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=is.update(()=>{Ru.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bo(0)),this.currentAnimation=mz(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),o.onUpdate&&o.onUpdate(y)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ez),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:d,target:u,layout:m,latestValues:y}=o;if(!(!d||!u||!m)){if(this!==o&&this.layout&&m&&VI(this.options.animationType,this.layout.layoutBox,m.layoutBox)){u=this.target||hs();const j=er(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+j;const N=er(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+N}Dr(d,u),po(d,y),rc(this.projectionDeltaWithTransform,this.layoutCorrected,d,y)}}registerSharedNode(o,d){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Iz),this.sharedNodes.get(o).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var d;const{layoutId:o}=this.options;return o?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:o}=this.options;return o?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:d,preserveFollowOpacity:u}={}){const m=this.getStack();m&&m.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let d=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const m={};u.z&&G0("z",o,m,this.animationValues);for(let y=0;y<q0.length;y++)G0(`rotate${q0[y]}`,o,m,this.animationValues),G0(`skew${q0[y]}`,o,m,this.animationValues);o.render();for(const y in m)o.setStaticValue(y,m[y]),this.animationValues&&(this.animationValues[y]=m[y]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Pz;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Au(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Au(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ai(this.latestValues)&&(T.transform=u?u({},""):"none",this.hasProjected=!1),T}const y=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=Sz(this.projectionDeltaWithTransform,this.treeScale,y),u&&(d.transform=u(y,d.transform));const{x:j,y:N}=this.projectionDelta;d.transformOrigin=`${j.origin*100}% ${N.origin*100}% 0`,m.animationValues?d.opacity=m===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:d.opacity=m===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const T in zc){if(y[T]===void 0)continue;const{correct:g,applyTo:B,isCSSVariable:D}=zc[T],R=d.transform==="none"?y[T]:g(y[T],m);if(B){const $=B.length;for(let z=0;z<$;z++)d[B[z]]=R}else D?this.options.visualElement.renderState.vars[T]=R:d[T]=R}return this.options.layoutId&&(d.pointerEvents=m===this?Au(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var d;return(d=o.currentAnimation)==null?void 0:d.stop(!1)}),this.root.nodes.forEach(jw),this.root.sharedNodes.clear()}}}function Tz(s){s.updateLayout()}function _z(s){var r;const t=((r=s.resumeFrom)==null?void 0:r.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=s.layout,{animationType:l}=s.options,o=t.source!==s.layout.source;l==="size"?Ar(j=>{const N=o?t.measuredBox[j]:t.layoutBox[j],T=er(N);N.min=a[j].min,N.max=N.min+T}):VI(l,t.layoutBox,a)&&Ar(j=>{const N=o?t.measuredBox[j]:t.layoutBox[j],T=er(a[j]);N.max=N.min+T,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[j].max=s.relativeTarget[j].min+T)});const d=mo();rc(d,a,t.layoutBox);const u=mo();o?rc(u,s.applyTransform(n,!0),t.measuredBox):rc(u,a,t.layoutBox);const m=!RI(d);let y=!1;if(!s.resumeFrom){const j=s.getClosestProjectingParent();if(j&&!j.resumeFrom){const{snapshot:N,layout:T}=j;if(N&&T){const g=hs();ac(g,t.layoutBox,N.layoutBox);const B=hs();ac(B,a,T.layoutBox),MI(g,B)||(y=!0),j.options.layoutRoot&&(s.relativeTarget=B,s.relativeTargetOrigin=g,s.relativeParent=j)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:u,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:y})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function Dz(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function Az(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function Rz(s){s.clearSnapshot()}function jw(s){s.clearMeasurements()}function Mz(s){s.isLayoutDirty=!1}function Oz(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Nw(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function Lz(s){s.resolveTargetDelta()}function Vz(s){s.calcProjection()}function zz(s){s.resetSkewAndRotation()}function Bz(s){s.removeLeadSnapshot()}function ww(s,t,r){s.translate=rs(t.translate,0,r),s.scale=rs(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function kw(s,t,r,a){s.min=rs(t.min,r.min,a),s.max=rs(t.max,r.max,a)}function $z(s,t,r,a){kw(s.x,t.x,r.x,a),kw(s.y,t.y,r.y,a)}function Fz(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const Uz={duration:.45,ease:[.4,0,.1,1]},Iw=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Sw=Iw("applewebkit/")&&!Iw("chrome/")?Math.round:Vr;function Pw(s){s.min=Sw(s.min),s.max=Sw(s.max)}function Wz(s){Pw(s.x),Pw(s.y)}function VI(s,t,r){return s==="position"||s==="preserve-aspect"&&!qV(bw(t),bw(r),.2)}function Hz(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const qz=LI({attachResizeListener:(s,t)=>$c(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Q0={current:void 0},zI=LI({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Q0.current){const s=new qz({});s.mount(window),s.setOptions({layoutScroll:!0}),Q0.current=s}return Q0.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),Gz={pan:{Feature:cz},drag:{Feature:lz,ProjectionNode:zI,MeasureLayout:_I}};function Ew(s,t,r){const{props:a}=s;s.animationState&&a.whileHover&&s.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,l=a[n];l&&is.postRender(()=>l(t,fd(t)))}class Qz extends Qn{mount(){const{current:t}=this.node;t&&(this.unmount=jL(t,(r,a)=>(Ew(this.node,a,"Start"),n=>Ew(this.node,n,"End"))))}unmount(){}}class Kz extends Qn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=md($c(this.node.current,"focus",()=>this.onFocus()),$c(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Cw(s,t,r){const{props:a}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&a.whileTap&&s.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),l=a[n];l&&is.postRender(()=>l(t,fd(t)))}class Yz extends Qn{mount(){const{current:t}=this.node;t&&(this.unmount=IL(t,(r,a)=>(Cw(this.node,a,"Start"),(n,{success:l})=>Cw(this.node,n,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Op=new WeakMap,K0=new WeakMap,Xz=s=>{const t=Op.get(s.target);t&&t(s)},Jz=s=>{s.forEach(Xz)};function Zz({root:s,...t}){const r=s||document;K0.has(r)||K0.set(r,{});const a=K0.get(r),n=JSON.stringify(t);return a[n]||(a[n]=new IntersectionObserver(Jz,{root:s,...t})),a[n]}function eB(s,t,r){const a=Zz(t);return Op.set(s,r),a.observe(s),()=>{Op.delete(s),a.unobserve(s)}}const tB={some:0,all:1};class sB extends Qn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:l}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:tB[n]},d=u=>{const{isIntersecting:m}=u;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:j}=this.node.getProps(),N=m?y:j;N&&N(u)};return eB(this.node.current,o,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(rB(t,r))&&this.startObserver()}unmount(){}}function rB({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const aB={inView:{Feature:sB},tap:{Feature:Yz},focus:{Feature:Kz},hover:{Feature:Qz}},nB={layout:{ProjectionNode:zI,MeasureLayout:_I}},Lp={current:null},BI={current:!1};function iB(){if(BI.current=!0,!!Xg)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>Lp.current=s.matches;s.addListener(t),t()}else Lp.current=!1}const oB=new WeakMap;function lB(s,t,r){for(const a in t){const n=t[a],l=r[a];if(Gs(n))s.addValue(a,n);else if(Gs(l))s.addValue(a,Bo(n,{owner:s}));else if(l!==n)if(s.hasValue(a)){const o=s.getValue(a);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=s.getStaticValue(a);s.addValue(a,Bo(o!==void 0?o:n,{owner:s}))}}for(const a in r)t[a]===void 0&&s.removeValue(a);return t}const Tw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class cB{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:n,blockInitialAnimation:l,visualState:o},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=ur.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,is.render(this.render,!1,!0))};const{latestValues:u,renderState:m}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=m,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Om(r),this.isVariantNode=oI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...j}=this.scrapeMotionValuesFromProps(r,{},this);for(const N in j){const T=j[N];u[N]!==void 0&&Gs(T)&&T.set(u[N],!1)}}mount(t){this.current=t,oB.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),BI.current||iB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Lp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zn(this.notifyUpdate),zn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=rl.has(t);a&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&is.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{n(),l(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in $o){const r=$o[t];if(!r)continue;const{isEnabled:a,Feature:n}=r;if(!this.features[t]&&n&&a(this.props)&&(this.features[t]=new n(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<Tw.length;a++){const n=Tw[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const l="on"+n,o=t[l];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=lB(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=Bo(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(p3(a)||g3(a))?a=parseFloat(a):!EL(a)&&Bn.test(r)&&(a=J3(t,r)),this.setBaseTarget(t,Gs(a)?a.get():a)),Gs(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var l;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const o=Ey(this.props,r,(l=this.presenceContext)==null?void 0:l.custom);o&&(a=o[t])}if(r&&a!==void 0)return a;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!Gs(n)?n:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new sy),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class $I extends cB{constructor(){super(...arguments),this.KeyframeResolver=fL}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Gs(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function FI(s,{style:t,vars:r},a,n){Object.assign(s.style,t,n&&n.getProjectionStyles(a));for(const l in r)s.style.setProperty(l,r[l])}function dB(s){return window.getComputedStyle(s)}class uB extends $I{constructor(){super(...arguments),this.type="html",this.renderInstance=FI}readValueFromInstance(t,r){var a;if(rl.has(r))return(a=this.projection)!=null&&a.isProjecting?kp(r):MO(t,r);{const n=dB(t),l=(ny(r)?n.getPropertyValue(r):n[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return PI(t,r)}build(t,r,a){Iy(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return Cy(t,r,a)}}const UI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xB(s,t,r,a){FI(s,t,void 0,a);for(const n in t.attrs)s.setAttribute(UI.has(n)?n:ky(n),t.attrs[n])}class mB extends $I{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hs}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(rl.has(r)){const a=X3(r);return a&&a.default||0}return r=UI.has(r)?r:ky(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return gI(t,r,a)}build(t,r,a){mI(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,n){xB(t,r,a,n)}mount(t){this.isSVGTag=pI(t.tagName),super.mount(t)}}const hB=(s,t)=>Py(s)?new mB(t):new uB(t,{allowProjection:s!==v.Fragment}),pB=xV({...VV,...aB,...Gz,...nB},hB),ce=LL(pB);var WI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_w=fn.createContext&&fn.createContext(WI),fB=["attr","size","title"];function gB(s,t){if(s==null)return{};var r=yB(s,t),a,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(n=0;n<l.length;n++)a=l[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function yB(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function Ox(){return Ox=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ox.apply(this,arguments)}function Dw(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function Lx(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dw(Object(r),!0).forEach(function(a){bB(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Dw(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function bB(s,t,r){return t=vB(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function vB(s){var t=jB(s,"string");return typeof t=="symbol"?t:t+""}function jB(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function HI(s){return s&&s.map((t,r)=>fn.createElement(t.tag,Lx({key:r},t.attr),HI(t.child)))}function rt(s){return t=>fn.createElement(NB,Ox({attr:Lx({},s.attr)},t),HI(s.child))}function NB(s){var t=r=>{var{attr:a,size:n,title:l}=s,o=gB(s,fB),d=n||r.size||"1em",u;return r.className&&(u=r.className),s.className&&(u=(u?u+" ":"")+s.className),fn.createElement("svg",Ox({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:u,style:Lx(Lx({color:s.color||r.color},r.style),s.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&fn.createElement("title",null,l),s.children)};return _w!==void 0?fn.createElement(_w.Consumer,null,r=>t(r)):t(WI)}function wB(s){return rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(s)}function Vp(s){return rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(s)}function Aw(s){return rt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(s)}function kB(s){return rt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(s)}function IB(s){return rt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(s)}function Rw(s){return rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"},child:[]}]})(s)}function Ga(s){return rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(s)}function zp(s){return rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM160 368c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V240c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v128zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V144c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v224zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-64c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v64z"},child:[]}]})(s)}function Ol(s){return rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function Vx(s){return rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(s)}function Mw(s){return rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(s)}function Qa(s){return rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(s)}function Ow(s){return rt({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function nc(s){return rt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(s)}const wt="/assets/logo-fb5fa587.png",SB="/assets/brooklyn99-7c1a6c47.png",PB="/assets/stranger-things-31a579dc.png",EB="/assets/breaking-bad-482f4098.png",CB="/assets/naruto-54b60bd0.png",TB="/assets/alice-5ff5523e.png",_B="/assets/netflix-e3c8e0d2.png",DB="/assets/spotify-d09996b4.png",AB="/assets/disney-0c4f0934.png",RB="/assets/max-c00a4c65.png",MB="/assets/prime-video-72b85c51.png",OB="/assets/vix-ee8ed6dc.png",LB="/assets/Canva-e7a7d520.png",VB="/assets/ChatGPT-b8d712b1.png",zB="/assets/crunchyroll-562435fc.png",BB="/assets/redessociales-65298696.png",$B="/assets/dgo-7ac16535.png",FB="/assets/ligamax-7ac6606f.png",UB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",WB="/assets/youtube-49ca55e1.png",HB="/assets/deezer-17be4fc1.png",qB="/assets/tidal-d3f361cb.png",GB="/assets/vpn-62bcb4e7.png",QB="/assets/wintv-4112ccf1.png",KB="/assets/applemusic-67f0cc24.png",YB="/assets/appletv-e2fd6c55.png",XB="/assets/iptv-a55016d0.png",JB="/assets/flujotv-4d1c58b0.png",ZB="/assets/vikirakuten-116faf85.png",e$="/assets/pornhub-46f32d0d.png",t$="/assets/paramount-5ab87b8f.png",s$="/assets/licencias-80ba80ab.png",r$="/assets/capcut-bc65a6c0.png",a$="/assets/duolingo-4d803f89.png",n$="/assets/buscapersonas-88e00efa.png",br=[{src:SB,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:PB,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:EB,title:"Breaking Bad",description:"Un descenso al mundo del crimen"},{src:CB,title:"Naruto",description:"Aventuras ninja épicas"},{src:TB,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],i$=[{name:"Netflix",logo:_B,route:"/netflix",color:"#FF0000"},{name:"Spotify",logo:DB,route:"/spotify",color:"#FF0000"},{name:"Disney+",logo:AB,route:"/disney",color:"#FF0000"},{name:"Max",logo:RB,route:"/max",color:"#FF0000"},{name:"Prime Video",logo:MB,route:"/primevideo",color:"#FF0000"},{name:"Vix",logo:OB,route:"/vix",color:"#FF0000"},{name:"Canva",logo:LB,route:"/canva",color:"#FF0000"},{name:"ChatGPT",logo:VB,route:"/chatgpt",color:"#FF0000"},{name:"Crunchyroll",logo:zB,route:"/crunchyroll",color:"#FF0000"},{name:"Redes Sociales",logo:BB,route:"/redessociales",color:"#FF0000"},{name:"Dgo",logo:$B,route:"/dgo",color:"#FF0000"},{name:"Liga Max",logo:FB,route:"/ligamax",color:"#FF0000"},{name:"Movistar Play",logo:UB,route:"/movistarplay",color:"#FF0000"},{name:"Youtube",logo:WB,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:HB,route:"/deezer",color:"#FF0000"},{name:"Tidal",logo:qB,route:"/tidal",color:"#FF0000"},{name:"Vpn",logo:GB,route:"/vpn",color:"#FF0000"},{name:"Win Tv",logo:QB,route:"/wintv",color:"#FF0000"},{name:"Apple Music",logo:KB,route:"/applemusic",color:"#FF0000"},{name:"Apple Tv",logo:YB,route:"/appletv",color:"#FF0000"},{name:"Iptv",logo:XB,route:"/iptv",color:"#FF0000"},{name:"Flujo Tv",logo:JB,route:"/flujotv",color:"#FF0000"},{name:"Viki Rakuten",logo:ZB,route:"/vikirakuten",color:"#FF0000"},{name:"Pornhub",logo:e$,route:"/pornhub",color:"#FF0000"},{name:"Paramount",logo:t$,route:"/paramount",color:"#FF0000"},{name:"Licencias",logo:s$,route:"/licencias",color:"#FF0000"},{name:"Cap cut",logo:r$,route:"/capcut",color:"#FF0000"},{name:"Duolingo",logo:a$,route:"/duolingo",color:"#FF0000"},{name:"Busca Personas",logo:n$,route:"/buscapersonas",color:"#FF0000"}],qI=v.createContext({theme:"dark",toggleTheme:()=>{}}),o$=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const n=t==="dark"?"light":"dark";r(n),localStorage.setItem("theme",n)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(qI.Provider,{value:{theme:t,toggleTheme:a},children:e.jsx("div",{className:`min-h-screen font-inter transition-colors duration-300 ${t==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black text-gray-200":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100 text-gray-900"} flex flex-col`,children:s})})},l$=({isOpen:s,onClose:t,message:r,theme:a})=>e.jsx(jy,{children:s&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(ce.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:`rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border-2 ${a==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Vp,{className:"text-red-500 text-2xl"}),e.jsx("h3",{className:`text-xl font-bold ${a==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"})]}),e.jsx("p",{className:`mb-6 ${a==="dark"?"text-gray-300":"text-gray-600"}`,children:r}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"w-full py-2 rounded-xl bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white transition-colors",children:"Cerrar"})]})})}),c$=({isOpen:s,onClose:t,onSubmit:r,user:a,theme:n})=>{const[l,o]=v.useState(0),[d,u]=v.useState(0),[m,y]=v.useState(""),[j,N]=v.useState(""),[T,g]=v.useState(""),B=async D=>{if(D.preventDefault(),!a){t();return}try{const R=ee(S,"surveys"),$=xe(R,fe("userEmail","==",a.email));if(!(await jt($)).empty){t();return}await r({websiteSatisfaction:l,providerSatisfaction:d,recommendedProvider:m,notRecommendedProvider:j,improvementSuggestions:T,timestamp:new Date,userEmail:a.email,username:a.name}),o(0),u(0),y(""),N(""),g(""),t()}catch(R){console.error("Error submitting survey:",R)}};return e.jsx(jy,{children:s&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(ce.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:`rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border-2 ${n==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(zp,{className:"text-red-500 text-2xl"}),e.jsx("h3",{className:`text-xl font-bold ${n==="dark"?"text-white":"text-gray-900"}`,children:"Encuesta de Satisfacción"})]}),a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Estás satisfecho con la página? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(D=>e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>o(D),className:`w-10 h-10 rounded-full border-2 ${l===D?"bg-red-500 text-white border-red-500":n==="dark"?"bg-gray-800 border-gray-600":"bg-gray-200 border-gray-400"} flex items-center justify-center transition-all`,children:D},D))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Estás satisfecho con los proveedores? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(D=>e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>u(D),className:`w-10 h-10 rounded-full border-2 ${d===D?"bg-red-500 text-white border-red-500":n==="dark"?"bg-gray-800 border-gray-600":"bg-gray-200 border-gray-400"} flex items-center justify-center transition-all`,children:D},D))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Qué proveedor recomiendas?"}),e.jsx("input",{type:"text",value:m,onChange:D=>y(D.target.value),className:`w-full py-2 px-3 rounded-xl bg-transparent border ${n==="dark"?"border-gray-600/50 text-white placeholder-gray-400":"border-gray-400/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all`,placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Qué proveedor no recomiendas?"}),e.jsx("input",{type:"text",value:j,onChange:D=>N(D.target.value),className:`w-full py-2 px-3 rounded-xl bg-transparent border ${n==="dark"?"border-gray-600/50 text-white placeholder-gray-400":"border-gray-400/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all`,placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Qué mejorarías de la página?"}),e.jsx("textarea",{value:T,onChange:D=>g(D.target.value),className:`w-full py-2 px-3 rounded-xl bg-transparent border ${n==="dark"?"border-gray-600/50 text-white placeholder-gray-400":"border-gray-400/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all`,placeholder:"Escribe tus sugerencias",rows:"4"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:t,className:`w-full py-2 rounded-xl ${n==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-300 hover:bg-gray-400"} text-gray-100 transition-colors`,children:"Cancelar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",onClick:B,className:"w-full py-2 rounded-xl bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white transition-colors disabled:opacity-50",disabled:l===0||d===0,children:"Enviar"})]})]}):e.jsx("p",{className:`mb-6 ${n==="dark"?"text-gray-300":"text-gray-600"}`,children:"Por favor, inicia sesión para completar la encuesta."})]})})})},d$=()=>{const[s,t]=v.useState(0),[r,a]=v.useState(null),[n,l]=v.useState(0),[o,d]=v.useState("user"),[u,m]=v.useState(""),[y,j]=v.useState([]),[N,T]=v.useState({isOpen:!1,message:""}),[g,B]=v.useState(!1),[D,R]=v.useState(!1),[$,z]=v.useState(!1),Z=It(),{theme:G,toggleTheme:Y}=v.useContext(qI);v.useEffect(()=>{const E=setInterval(()=>{t(De=>(De+1)%br.length)},5e3);return()=>clearInterval(E)},[]),v.useEffect(()=>(document.body.style.overflow=$?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[$]),v.useEffect(()=>{(async()=>{if(Ge.currentUser)try{const De=ee(S,"users"),Ne=xe(De,fe("email","==",Ge.currentUser.email)),ue=await jt(Ne);if(!ue.empty){const pe=ue.docs[0].data();a({name:pe.username||"Usuario",email:Ge.currentUser.email}),l(pe.balance||0),d(pe.role||"user")}const je=await et(U(S,"notifications","adminMessage"));if(je.exists()){const pe=je.data();T({isOpen:!0,message:pe.message||"Mensaje del administrador no disponible."})}}catch(De){console.error("Error al cargar datos:",De),T({isOpen:!0,message:"Hubo un error al cargar los datos. Por favor, intenta de nuevo."})}})()},[]);const V=async()=>{try{const E=await et(U(S,"notifications","adminMessage"));if(E.exists()){const De=E.data();T({isOpen:!0,message:De.message||"Mensaje del administrador no disponible."})}else T({isOpen:!0,message:"No hay notificaciones del administrador en este momento."})}catch(E){console.error("Error al cargar notificación:",E),T({isOpen:!0,message:"Error al cargar la notificación. Por favor, intenta de nuevo."})}},x=async E=>{try{await Cn(ee(S,"surveys"),E),T({isOpen:!0,message:"¡Gracias por tu opinión! La encuesta se ha enviado correctamente."})}catch(De){console.error("Error al enviar la encuesta:",De),T({isOpen:!0,message:"Error al enviar la encuesta. Por favor, intenta de nuevo."})}},q=async()=>{try{await Ge.signOut(),a(null),Z("/login")}catch(E){console.error("Error al cerrar sesión:",E),T({isOpen:!0,message:"Error al cerrar sesión. Por favor, intenta de nuevo."})}},W=()=>{Z({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[o]||"/dashboard/user")},J=async E=>{if(E.preventDefault(),!u.trim()){j([]);return}try{const De=ee(S,"products"),Ne=xe(De,fe("name",">=",u.toUpperCase()),fe("name","<=",u.toUpperCase()+"")),je=(await jt(Ne)).docs.map(pe=>({id:pe.id,...pe.data()}));j(je)}catch(De){console.error("Error al buscar productos:",De),T({isOpen:!0,message:"Error al realizar la búsqueda. Por favor, intenta de nuevo."}),j([])}},re=()=>{R(E=>!E)},X=()=>{z(E=>!E)},Q=E=>{E.key==="Enter"&&J(E)};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(l$,{isOpen:N.isOpen,onClose:()=>T({...N,isOpen:!1}),message:N.message,theme:G}),e.jsx(c$,{isOpen:g,onClose:()=>B(!1),onSubmit:x,user:r,theme:G}),e.jsxs(ce.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:`sticky top-0 z-50 backdrop-blur-md border-b ${G==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center",children:[e.jsx("div",{className:"flex-1 flex items-center",children:e.jsxs(b,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:wt,alt:"SZ Streaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${G==="dark"?"from-red-500/50 to-red-700/50 text-red-500":"from-red-600/50 to-red-800/50 text-red-600"} bg-clip-text`,children:"SZ Streaming"})]})}),e.jsx("div",{className:"flex-1 hidden lg:flex justify-center",children:e.jsxs(ce.div,{className:"relative max-w-xl w-full",initial:{scale:.9},animate:{scale:1},children:[e.jsx(Ol,{className:`absolute top-3.5 left-4 ${G==="dark"?"text-gray-400":"text-gray-600"} text-xl`}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:`w-full pl-12 pr-4 py-3 rounded-full bg-transparent border-2 ${G==="dark"?"border-red-500/50 text-white placeholder-gray-400":"border-red-600/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500 focus:border-red-500 shadow-lg backdrop-blur-sm transition-all hover:shadow-xl`,value:u,onChange:E=>m(E.target.value),onKeyDown:Q}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:J,className:"absolute right-4 top-1/2 -translate-y-1/2 text-red-500 text-xl","aria-label":"Buscar",children:e.jsx(Ol,{})})]})}),e.jsxs("div",{className:"flex-1 flex justify-end items-center",children:[e.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[e.jsx(ce.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:Y,className:`p-2 rounded-full ${G==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:G==="dark"?e.jsx(Qa,{size:22}):e.jsx(Ga,{size:22})}),r?e.jsxs(e.Fragment,{children:[e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:V,className:`p-2 rounded-full ${G==="dark"?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Ver notificaciones",children:e.jsx(Vp,{className:"text-red-500",size:22})}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>B(!0),className:`p-2 rounded-full ${G==="dark"?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Abrir encuesta",children:e.jsx(zp,{className:"text-red-500",size:22})}),e.jsx(ce.span,{className:`text-base font-medium ${G==="dark"?"text-red-500":"text-red-600"}`,initial:{opacity:0},animate:{opacity:1},children:r.name}),e.jsxs(ce.span,{className:`text-base font-medium px-4 py-1.5 rounded-full ${G==="dark"?"bg-gray-800 text-white":"bg-gray-200 text-gray-900"}`,whileHover:{scale:1.05},children:["S/ ",n.toFixed(2)]}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:W,className:`p-2 rounded-full ${G==="dark"?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Panel de control",children:e.jsx(Rw,{className:"text-red-500",size:22})}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:re,className:`p-2 rounded-full ${D?"bg-red-500 hover:bg-red-600":G==="dark"?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":D?"Desactivar modo live":"Activar modo live",children:e.jsx(Aw,{className:D?"text-white":"text-red-500",size:22})}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:q,className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 shadow-md transition-all duration-300",children:[e.jsx(Mw,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(b,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900",children:[e.jsx(Vx,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(b,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800",children:[e.jsx(nc,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:X,className:"p-2 rounded-full text-red-500 hover:bg-gray-700/50 lg:hidden","aria-label":"Toggle menu",children:$?e.jsx(Ow,{size:22}):e.jsx(wB,{size:22})})]})]}),e.jsx(jy,{children:$&&e.jsx(ce.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:`lg:hidden fixed top-0 left-0 h-full w-64 ${G==="dark"?"bg-black border-gray-800/50":"bg-gray-100 border-gray-300/50"} z-50 shadow-2xl border-r border-red-500/20`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-red-500/20",children:[e.jsx("span",{className:`text-xl font-bold ${G==="dark"?"text-red-500":"text-red-600"}`,children:"Menú"}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:X,className:`p-2 rounded-full ${G==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"}`,"aria-label":"Cerrar menú",children:e.jsx(Ow,{size:22})})]}),e.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ol,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent border ${G==="dark"?"border-gray-600/50 text-white placeholder-gray-400":"border-gray-400/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all`,value:u,onChange:E=>m(E.target.value),onKeyDown:Q}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:J,className:"absolute right-3 top-1/2 -translate-y-1/2 text-red-500","aria-label":"Buscar",children:e.jsx(Ol,{size:18})})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-base font-medium ${G==="dark"?"text-red-500":"text-red-600"}`,children:r.name}),e.jsxs("span",{className:`text-base font-medium px-4 py-1.5 rounded-full ${G==="dark"?"bg-gray-800 text-white":"bg-gray-200 text-gray-900"}`,children:["S/ ",n.toFixed(2)]})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{V(),X()},className:`flex items-center space-x-2 text-base text-left ${G==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(Vp,{size:18}),e.jsx("span",{children:"Notificaciones"})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{B(!0),X()},className:`flex items-center space-x-2 text-base text-left ${G==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(zp,{size:18}),e.jsx("span",{children:"Encuesta"})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{W(),X()},className:`flex items-center space-x-2 text-base text-left ${G==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(Rw,{size:18}),e.jsx("span",{children:"Panel de control"})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{re(),X()},className:`flex items-center space-x-2 text-base text-left ${D?"text-red-500":G==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(Aw,{size:18}),e.jsx("span",{children:D?"Desactivar modo live":"Activar modo live"})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{q(),X()},className:`flex items-center space-x-2 text-base text-left ${G==="dark"?"text-red-500 hover:text-red-600":"text-red-600 hover:text-red-700"}`,children:[e.jsx(Mw,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Z("/login"),X()},className:`flex items-center space-x-2 text-base text-left ${G==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(Vx,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Z("/register"),X()},className:`flex items-center space-x-2 text-base text-left ${G==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(nc,{size:18}),e.jsx("span",{children:"Registrarse"})]})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Y(),X()},className:`flex items-center space-x-2 text-base text-left ${G==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[G==="dark"?e.jsx(Qa,{size:18}):e.jsx(Ga,{size:18}),e.jsx("span",{children:"Cambiar tema"})]})]})]})})})]}),e.jsxs("main",{className:"flex-grow pt-24",children:[y.length>0&&e.jsxs(ce.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 ${G==="dark"?"text-white":"text-gray-900"}`,children:"Resultados de búsqueda"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map(E=>{var De;return e.jsxs(ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},className:`p-6 rounded-2xl shadow-md border-2 ${G==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${G==="dark"?"text-red-500":"text-red-600"}`,children:E.name}),e.jsx("p",{className:`text-base line-clamp-2 mb-2 ${G==="dark"?"text-gray-300":"text-gray-600"}`,children:E.details||E.description}),e.jsxs("p",{className:`text-base font-medium mb-1 ${G==="dark"?"text-gray-200":"text-gray-700"}`,children:["Plataforma: ",E.category]}),e.jsxs("p",{className:`text-base font-bold ${G==="dark"?"text-red-500":"text-red-600"}`,children:["Precio: S/ ",(De=E.price)==null?void 0:De.toFixed(2)]})]},E.id)})})]}),u.trim()&&y.length===0&&e.jsx(ce.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto text-center",children:e.jsxs("p",{className:`text-lg ${G==="dark"?"text-gray-300":"text-gray-600"}`,children:['No se encontraron productos para "',u,'".']})}),e.jsxs(ce.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-8 px-6 text-center",children:[e.jsxs("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight ${G==="dark"?"text-white":"text-gray-900"}`,children:["SZ ",e.jsx("span",{className:G==="dark"?"text-red-500":"text-red-600",children:"Streaming"})]}),e.jsx("p",{className:`mt-4 text-lg sm:text-xl max-w-3xl mx-auto ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Accede a todo tu entretenimiento y herramientas con SZ Streaming."})]}),e.jsxs("section",{className:"relative py-6 px-6 sm:px-8",children:[e.jsxs(ce.div,{className:"flex justify-center items-center space-x-4 perspective-1000",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(ce.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform -rotate-y-15",initial:{x:-100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:br[(s-1+br.length)%br.length].src,alt:"Programa anterior",className:"w-full h-full object-cover scale-110"})}),e.jsxs(ce.div,{className:"relative rounded-2xl overflow-hidden shadow-2xl border-2 border-red-500/20",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:100},children:[e.jsx("img",{src:br[s].src,alt:"Programa destacado",className:"w-72 h-96 sm:w-96 sm:h-[28rem] object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),e.jsxs(ce.div,{className:"absolute bottom-0 w-full p-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${G==="dark"?"text-white":"text-gray-900"} drop-shadow-lg`,children:br[s].title}),e.jsx("p",{className:`text-sm ${G==="dark"?"text-gray-300":"text-gray-600"}`,children:br[s].description})]})]}),e.jsx(ce.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform rotate-y-15",initial:{x:100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:br[(s+1)%br.length].src,alt:"Próximo programa",className:"w-full h-full object-cover scale-110"})}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(E=>(E-1+br.length)%br.length),className:`absolute left-4 top-1/2 -translate-y-1/2 ${G==="dark"?"bg-black/60 hover:bg-red-500/60 border-red-500/20":"bg-gray-100/60 hover:bg-red-500/60 border-red-500/20"} backdrop-blur-md p-3 rounded-full border-2`,"aria-label":"Programa anterior",children:e.jsx(kB,{className:"text-red-500 text-xl"})}),e.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(E=>(E+1)%br.length),className:`absolute right-4 top-1/2 -translate-y-1/2 ${G==="dark"?"bg-black/60 hover:bg-red-500/60 border-red-500/20":"bg-gray-100/60 hover:bg-red-500/60 border-red-500/20"} backdrop-blur-md p-3 rounded-full border-2`,"aria-label":"Próximo programa",children:e.jsx(IB,{className:"text-red-500 text-xl"})})]}),e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:br.map((E,De)=>e.jsx(ce.div,{whileHover:{scale:1.2},className:`w-2 h-2 rounded-full transition-colors ${De===s?"bg-red-500":G==="dark"?"bg-gray-600":"bg-gray-400"}`,"aria-label":`Ir a ${De+1}`},De))})]}),e.jsxs(ce.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"py-16 container mx-auto px-6",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx(ce.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:`text-3xl md:text-4xl font-bold ${G==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Plataformas de Streaming"}),e.jsx(ce.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`max-w-2xl mx-auto ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Acceso a todas tus plataformas favoritas en un solo lugar."})]}),e.jsx(ce.div,{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:i$.map(E=>e.jsx(ce.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.05},className:"w-full h-32",children:e.jsxs(b,{to:E.route,className:`group relative flex items-center justify-center h-full rounded-2xl shadow-lg transition-all duration-300 ${G==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} border-2`,"aria-label":`Ir a ${E.name}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:E.logo,alt:E.name,className:"w-20 h-20 object-contain",style:{transform:D?"scaleX(-1)":"scaleX(1)"}}),e.jsx("span",{className:`font-semibold text-center text-base ${G==="dark"?"text-white":"text-gray-900"}`,children:E.name})]}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-300 bg-gradient-to-r from-red-500 to-red-700"})]})},E.name))})]}),!r&&e.jsx(ce.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-16 bg-gradient-to-r from-red-600 to-red-800",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx(ce.h2,{initial:{scale:.9},animate:{scale:1},className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"¿Listo para adquirir?"}),e.jsx("p",{className:"text-gray-200 max-w-2xl mx-auto mb-6",children:"Únete a miles de usuarios satisfechos accediendo a todas tus plataformas favoritas en un solo lugar."}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Z("/register"),className:"inline-flex items-center space-x-2 px-6 py-3 rounded-xl text-base font-semibold text-white bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 shadow-md transition-all duration-300",children:[e.jsx(nc,{size:18}),e.jsx("span",{children:"Regístrate"})]})]})})]}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${G==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"SZ Streaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${G==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"})]}),e.jsxs("div",{className:`text-sm text-center ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})})]})},u$=()=>e.jsx(o$,{children:e.jsx(d$,{})});function Gt(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(s)}function Ye(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(s)}function GI(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(s)}function Fo(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(s)}function ot(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(s)}function zx(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(s)}function Fc(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(s)}function _y(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(s)}function Mt(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(s)}function x$(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(s)}function Bp(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(s)}function Rs(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(s)}function QI(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(s)}function KI(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(s)}function YI(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(s)}function XI(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(s)}function Ee(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(s)}function ze(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(s)}function lt(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(s)}function Lm(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(s)}function We(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(s)}function ct(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(s)}function Dy(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(s)}function St(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(s)}function Ay(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(s)}function Ot(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(s)}function Nr(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(s)}function $t(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(s)}function Pe(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(s)}function dt(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(s)}function Bx(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(s)}function ut(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(s)}function Lw(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(s)}function JI(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(s)}function st(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(s)}function gd(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(s)}function Je(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(s)}function Ve(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(s)}function Y0(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(s)}function ZI(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(s)}function xi(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(s)}function le(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(s)}function m$(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(s)}function Qt(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(s)}function Ue(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(s)}function Uo(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(s)}function Be(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(s)}function ft(s){return rt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(s)}const eS=v.createContext({theme:"dark",toggleTheme:()=>{}}),h$=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{console.log("Toggling theme from",t);const n=t==="dark"?"light":"dark";r(n),localStorage.setItem("theme",n),console.log("Theme set to",n)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(eS.Provider,{value:{theme:t,toggleTheme:a},children:s})},p$=()=>{const[s,t]=v.useState(""),[r,a]=v.useState(""),[n,l]=v.useState(null),[o,d]=v.useState(!1),u=It(),{theme:m,toggleTheme:y}=v.useContext(eS),j=async T=>{T.preventDefault(),l(null);try{const g=ee(S,"users"),B=xe(g,fe("username","==",s)),D=await jt(B);if(D.empty){l("Nombre de usuario no encontrado.");return}const z=D.docs[0].data().email,G=(await FM(Ge,z,r)).user;u("/")}catch{l("Usuario o contraseña incorrectos.")}},N=()=>{l(null)};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${m==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black text-gray-200":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${m==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(b,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:wt,alt:"SZ Streaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${m==="dark"?"from-red-500/50 to-red-700/50 text-red-500":"from-red-600/50 to-red-800/50 text-red-600"} bg-clip-text`,children:"SZ Streaming"})]})}),e.jsx(ce.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-red-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(ce.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:y,className:`p-2 rounded-full ${m==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:m==="dark"?e.jsx(Qa,{size:22}):e.jsx(Ga,{size:22})}),e.jsxs(b,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900",children:[e.jsx(Vx,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(b,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800",children:[e.jsx(nc,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${m==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsx(ce.div,{className:"flex justify-center mb-6",children:e.jsx(ce.img,{whileHover:{scale:1.05},src:wt,alt:"SZ Streaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${m==="dark"?"text-white":"text-gray-900"}`,children:["SZ",e.jsx("span",{className:m==="dark"?"text-red-500":"text-red-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${m==="dark"?"text-gray-400":"text-gray-600"}`,children:"Bienvenido de nuevo. Inicia sesión para continuar."}),n&&e.jsxs("div",{className:"mb-6 p-3 bg-gradient-to-r from-red-900/80 to-red-800/80 border-l-4 border-red-500 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-400"}),e.jsx("span",{className:"text-red-300",children:n})]}),e.jsx("button",{onClick:N,className:"text-red-400 hover:text-red-300",children:e.jsx(ft,{size:18})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${m==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:`absolute top-3 left-3 ${m==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",placeholder:"Tu nombre de usuario",value:s,onChange:T=>t(T.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${m==="dark"?"text-white":"text-gray-900"} border ${m==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${m==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${m==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dy,{className:`absolute top-3 left-3 ${m==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:o?"text":"password",placeholder:"••••••••",value:r,onChange:T=>a(T.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${m==="dark"?"text-white":"text-gray-900"} border ${m==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${m==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0}),e.jsx("button",{type:"button",onClick:()=>d(!o),className:`absolute top-3 right-3 ${m==="dark"?"text-gray-400 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-colors`,"aria-label":o?"Ocultar contraseña":"Mostrar contraseña",children:o?e.jsx(YI,{size:18}):e.jsx(XI,{size:18})})]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white font-medium rounded-xl shadow-lg transition-all duration-300",children:"Iniciar Sesión"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(b,{to:"/register",className:`flex items-center justify-center transition-all text-lg ${m==="dark"?"text-gray-400 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(GI,{className:"mr-1"})," ¿No tienes una cuenta? Regístrate"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${m==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"SZ Streaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${m==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"})]}),e.jsxs("div",{className:`text-sm text-center ${m==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${m==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})})]})},f$=()=>e.jsx(h$,{children:e.jsx(p$,{})}),g$=[],tS=v.createContext({theme:"dark",toggleTheme:()=>{}}),y$=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const n=t==="dark"?"light":"dark";r(n),localStorage.setItem("theme",n)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(tS.Provider,{value:{theme:t,toggleTheme:a},children:s})},b$=({isOpen:s,message:t,type:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md p-6 rounded-2xl shadow-2xl max-w-sm w-full border transform transition-all duration-300 border-red-500 scale-100",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[r==="success"?e.jsx(Fc,{className:"text-red-400 text-2xl mr-2"}):e.jsx(Ye,{className:"text-red-400 text-2xl mr-2"}),e.jsx("h3",{className:"text-lg font-bold text-red-400",children:r==="success"?"Éxito":"Error"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("button",{onClick:a,className:"w-full py-2 rounded-xl font-medium transition-all duration-300 bg-red-600 hover:bg-red-700 text-white",children:"Cerrar"})]})}):null,v$=()=>{const[s,t]=v.useState(""),[r,a]=v.useState(""),[n,l]=v.useState(""),[o,d]=v.useState(""),[u,m]=v.useState("+51"),[y,j]=v.useState("user"),[N,T]=v.useState(""),[g,B]=v.useState(!1),[D,R]=v.useState({isOpen:!1,message:"",type:"success"}),[$,z]=v.useState(!1),Z=It(),{theme:G,toggleTheme:Y}=v.useContext(tS),V=async x=>{x.preventDefault(),R({isOpen:!1,message:"",type:"success"}),B(!0);try{if(!s||s.length<3)throw new Error("El nombre de usuario debe tener al menos 3 caracteres.");if(!r||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))throw new Error("Por favor, ingresa un correo electrónico válido.");if(!n||n.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres.");if(!o||!/^\d{7,15}$/.test(o))throw new Error("Por favor, ingresa un número de teléfono válido (7-15 dígitos).");if(!["user","affiliate","provider"].includes(y))throw new Error("Rol no válido.");const q=await $M(Ge,r,n);await Xl(U(S,"users",q.user.uid),{username:s,email:r,phone:`${u}${o}`,role:y,referrerCode:N||null,createdAt:new Date().toISOString()}),R({isOpen:!0,message:"¡Registro exitoso! Ahora puedes iniciar sesión.",type:"success"}),setTimeout(()=>{Z("/login")},2e3)}catch(q){let W=q.message||"Error al enviar la solicitud de registro. Por favor, inténtalo de nuevo.";q.code==="auth/email-already-in-use"&&(W="El correo electrónico ya está en uso."),R({isOpen:!0,message:W,type:"error"})}finally{B(!1)}};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${G==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black text-gray-200":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${G==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(b,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:wt,alt:"SZ Streaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${G==="dark"?"from-red-500/50 to-red-700/50 text-red-500":"from-red-600/50 to-red-800/50 text-red-600"} bg-clip-text`,children:"SZ Streaming"})]})}),e.jsx(ce.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-red-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(ce.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:Y,className:`p-2 rounded-full ${G==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:G==="dark"?e.jsx(Qa,{size:22}):e.jsx(Ga,{size:22})}),e.jsxs(b,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900",children:[e.jsx(Vx,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(b,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800",children:[e.jsx(nc,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${G==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsx(ce.div,{className:"flex justify-center mb-6",children:e.jsx(ce.img,{whileHover:{scale:1.05},src:wt,alt:"SZ Streaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${G==="dark"?"text-white":"text-gray-900"}`,children:["SZ",e.jsx("span",{className:G==="dark"?"text-red-500":"text-red-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Regístrate para acceder al sistema."}),e.jsxs("form",{onSubmit:V,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:s,onChange:x=>t(x.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige un nombre de usuario",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Correo Electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ay,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"email",value:r,onChange:x=>a(x.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu correo electrónico",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Número de Teléfono"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-48",children:[e.jsx("select",{value:u,onChange:x=>m(x.target.value),className:`w-full px-4 py-2.5 rounded-xl ${G==="dark"?"bg-gray-700/50 text-white":"bg-gray-200/50 text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all appearance-none`,children:g$.map(x=>e.jsxs("option",{value:x.code,children:[x.flag," ",x.name," (",x.code,")"]},x.code+x.name))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${G==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(Bx,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"tel",value:o,onChange:x=>d(x.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu número de teléfono",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dy,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:$?"text":"password",value:n,onChange:x=>l(x.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige una contraseña",required:!0}),e.jsx("button",{type:"button",onClick:()=>z(!$),className:`absolute top-3 right-3 ${G==="dark"?"text-gray-400 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-colors`,"aria-label":$?"Ocultar contraseña":"Mostrar contraseña",children:$?e.jsx(YI,{size:18}):e.jsx(XI,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Rol"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:y,onChange:x=>j(x.target.value),className:`w-full px-4 py-2.5 rounded-xl ${G==="dark"?"bg-gray-700/50":"bg-gray-200/50"} ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all appearance-none`,children:e.jsx("option",{value:"user",children:"Usuario"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${G==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Código de Referido (opcional)"}),e.jsx("input",{type:"text",value:N,onChange:x=>T(x.target.value),className:`w-full pl-4 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Ingresa un código de referido (si tienes)"})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:g,className:`w-full py-3 rounded-xl font-medium transition-all duration-300 ${g?"bg-gray-600 text-gray-400 cursor-not-allowed":G==="dark"?"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white":"bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 text-white"}`,children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})]}),"Registrando..."]}):"Registrarse"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(b,{to:"/login",className:`flex items-center justify-center transition-all text-lg ${G==="dark"?"text-gray-400 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(GI,{className:"mr-1"})," ¿Ya tienes una cuenta? Inicia sesión"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${G==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"SZ Streaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${G==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"})]}),e.jsxs("div",{className:`text-sm text-center ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})}),e.jsx(b$,{isOpen:D.isOpen,message:D.message,type:D.type,onClose:()=>R({isOpen:!1,message:"",type:"success"})})]})},j$=()=>e.jsx(y$,{children:e.jsx(v$,{})}),N$=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,w$=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[n,l]=v.useState((t==null?void 0:t.username)||""),[o,d]=v.useState(""),u=m=>{if(m.preventDefault(),d(""),!n.trim()){d("El nombre de usuario no puede estar vacío.");return}a(t.id,n.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:n,onChange:m=>l(m.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},k$=({isOpen:s,provider:t,onClose:r,onRate:a})=>{const[n,l]=v.useState(0),[o,d]=v.useState(""),u=m=>{if(m.preventDefault(),d(""),n<1||n>5){d("Por favor, selecciona una calificación entre 1 y 5 estrellas.");return}a(t.id,n),l(0)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Calificar Proveedor"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Proveedor: ",t.name]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(m=>e.jsx(Ve,{size:24,className:`cursor-pointer ${m<=n?"text-red-400 fill-current":"text-gray-400"}`,onClick:()=>l(m)},m))}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Enviar Calificación"})]})]})]})})}):null},I$=({userName:s,email:t,balance:r,orders:a,notifications:n,setActivePage:l,formatDate:o})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-red-400",children:s.username})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-400"}),e.jsx("span",{children:s.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Nr,{className:"mr-2 text-red-400"}),e.jsx("span",{children:t})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Bx,{className:"mr-2 text-red-400"}),e.jsx("span",{children:s.phone||"No especificado"})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",r.toFixed(2)]}),e.jsx("button",{onClick:()=>l("recargar"),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:"Pedidos activos"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:a.filter(d=>new Date(d.endDate)>new Date&&d.status==="completed").length}),e.jsx("button",{onClick:()=>l("pedidos"),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Ver pedidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),a.length>0?a.slice(0,3).map(d=>{const u=new Date(d.endDate)>new Date&&d.status==="completed",m=d.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-white",children:d.productName||"Producto sin nombre"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d.status==="pending"?"bg-yellow-900/80 text-yellow-400":u?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:m?"A pedido":u?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",o(d.endDate)]})]},d.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),a.length>3&&e.jsx("button",{onClick:()=>l("pedidos"),className:"w-full mt-3 text-center text-red-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),n.length>0?n.map(d=>{var u,m;return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:d.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o(((m=(u=d.updatedAt)==null?void 0:u.toDate)==null?void 0:m.call(u))||new Date)})]},d.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]}),S$=({notifications:s,formatDate:t})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),s.length>0?e.jsx("div",{className:"space-y-4",children:s.map(r=>{var a,n;return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:r.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:t(((n=(a=r.updatedAt)==null?void 0:a.toDate)==null?void 0:n.call(a))||new Date)})]},r.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]}),P$=({amount:s,setAmount:t,topUps:r,actionLoading:a,handleTopUpRequest:n,formatDate:l})=>e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:s,onChange:o=>t(o.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300 placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:n,disabled:a.topUp||!s||parseFloat(s)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${s&&parseFloat(s)>=10&&!a.topUp?"bg-red-500 hover:bg-red-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:a.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"})]}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 max-w-md mx-auto",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Rs,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Nr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Historial de recargas"}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:r.map(o=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",o.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.status==="aprobado"?"bg-green-900/80 text-green-400":o.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:o.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:l(o.date)})]},o.id))})]})}):e.jsx("p",{className:"text-gray-400 py-8",children:"No hay recargas registradas"})]})]}),E$=({providers:s,openRateProviderModal:t})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Proveedores"}),s.length>0?e.jsx("div",{className:"space-y-4",children:s.map(r=>e.jsx("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 font-medium",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Teléfono: ",r.phone]})]}),e.jsxs("button",{onClick:()=>t(r),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300 flex items-center gap-2",children:[e.jsx(FiStar,{size:16}),"Calificar"]})]})},r.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay proveedores"}),e.jsx("p",{className:"text-gray-400",children:"No has realizado compras con proveedores aún."})]})]}),C$=({orders:s,searchQuery:t,setSearchQuery:r,formatDate:a,handleRenewal:n,actionLoading:l,balance:o})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-3 sm:p-4 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative w-48 sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"w-full px-3 py-1.5 rounded-lg bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300 text-sm placeholder-gray-500",value:t,onChange:d=>r(d.target.value)}),e.jsx(st,{className:"absolute right-2 top-2 text-gray-400",size:16})]})]}),s.length>0?s.filter(d=>(d.productName||"").toLowerCase().includes(t.toLowerCase())||(d.orderId||"").toLowerCase().includes(t.toLowerCase())).map(d=>{var Z,G,Y,V,x,q,W,J,re,X,Q,E;console.log("Order data:",d);const u=parseFloat(d.price)||0,m=parseFloat(d.renewalPrice)||0,y=new Date(d.endDate)>new Date&&d.status==="completed",j=d.status==="pending",N=d.daysRemaining||0,T=d.timeElapsedPercentage||0;let g="bg-red-400";T>70&&T<=90?g="bg-yellow-400":T>90&&(g="bg-red-400");const B=j?e.jsx(Mt,{className:"text-yellow-400",size:16}):y?e.jsx(Fc,{className:"text-green-400",size:16}):e.jsx(Ye,{className:"text-red-400",size:16}),D=encodeURIComponent(`*Consulta sobre Pedido - ${d.productName||"Sin nombre"}*

*N° Pedido:* ${d.orderId||"No especificado"}
*Producto:* ${d.productName||"Sin nombre"}
*Precio:* S/ ${u.toFixed(2)}
`+(d.renewalPrice?`*Precio de Renovación:* S/ ${m.toFixed(2)}
`:"")+`*Estado:* ${j?"A pedido":y?"Activo":"Expirado"}
*Fecha de Inicio:* ${a(d.startDate)}
*Fecha de Vencimiento:* ${a(d.endDate)}
`+(j?`Hola 😊, he comprado un producto a pedido (${d.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),R=encodeURIComponent(`😊 Estimado/a ${((Z=d.client)==null?void 0:Z.customerName)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${d.productName||"Sin nombre"}.
🔢 Código: ${d.orderId||"No especificado"}
`+(j?"":`📧 Correo: ${((G=d.account)==null?void 0:G.email)||"No especificado"}
🔐 Contraseña: ${((Y=d.account)==null?void 0:Y.password)||"No especificado"}
👤 Perfil: ${((V=d.account)==null?void 0:V.profile)||"No especificado"}
📌 PIN: ${((x=d.account)==null?void 0:x.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${a(d.startDate)}
📅 Fecha de vencimiento: ${a(d.endDate)}
🏁 Días contratados: ${d.durationDays||30} días.

`+(j?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${d.terms||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),$=d.providerPhone?d.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999",z=(q=d.client)!=null&&q.phone?d.client.phone.replace(/^\+/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-3 py-2 border-b border-gray-600/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[B,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white text-sm",children:d.productName||"Producto sin nombre"}),d.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N°: ",d.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",u.toFixed(1)]}),e.jsx("p",{className:"text-xs text-gray-500",children:d.renewalPrice&&`Ren: S/ ${m.toFixed(1)}`}),e.jsx("p",{className:`text-xs ${j?"text-yellow-400":g.replace("bg-","text-")}`,children:j?"Pendiente":`${N} día${N===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-3 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"w-full bg-gray-600/40 rounded-full h-1",children:e.jsx("div",{className:`h-1 rounded-full ${g}`,style:{width:`${Math.min(T,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 text-right",children:[T.toFixed(0),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Ue,{className:"mr-0.5",size:12})," Cuenta"]}),e.jsx("div",{className:"space-y-0.5 text-xs text-gray-300",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:"text-gray-200",children:"No"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:"text-gray-200",children:((W=d.account)==null?void 0:W.email)||"No especificado"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:"text-gray-200",children:((J=d.account)==null?void 0:J.password)||"No especificado"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:"text-gray-200",children:((re=d.account)==null?void 0:re.profile)||"No especificado"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:"text-gray-200",children:((X=d.account)==null?void 0:X.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Ee,{className:"mr-0.5",size:12})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-300",children:[e.jsxs("p",{children:["Inicio: ",e.jsx("span",{className:"text-gray-200",children:a(d.startDate)})]}),e.jsxs("p",{children:["Vencimiento: ",e.jsx("span",{className:"text-gray-200",children:a(d.endDate)})]}),e.jsxs("p",{children:["Estado: ",e.jsx("span",{className:"text-gray-200",children:j?"A pedido":y?"Activo":"Expirado"})]})]})]}),e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Ue,{className:"mr-0.5",size:12})," Cliente"]}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-300",children:[e.jsxs("p",{children:["Nombre: ",e.jsx("span",{className:"text-gray-200",children:((Q=d.client)==null?void 0:Q.customerName)||"No especificado"})]}),e.jsxs("p",{children:["Teléfono: ",e.jsx("span",{className:"text-gray-200",children:((E=d.client)==null?void 0:E.phone)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[e.jsxs("a",{href:`https://wa.me/51${$}?text=${D}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all duration-300 text-sm flex items-center gap-1",children:[e.jsx(Nr,{size:16})," Contactar proveedor"]}),y&&d.renewable&&e.jsx("button",{onClick:()=>n(d),disabled:l[`renew_${d.id}`]||o<m,className:`px-4 py-2 rounded-xl flex items-center gap-1 ${l[`renew_${d.id}`]||o<m?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"} transition-all duration-300 text-sm`,children:l[`renew_${d.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(JI,{size:16})," Renovar (S/ ",m.toFixed(1),")"]})}),e.jsxs("a",{href:`https://wa.me/51${z}?text=${R}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300 text-sm flex items-center gap-1",children:[e.jsx(Nr,{size:16})," Contactar cliente"]})]})]})]},d.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos"}),e.jsx("p",{className:"text-gray-400",children:"Aún no has realizado ningún pedido."})]})]}),T$=({userName:s,email:t,actionLoading:r,handleUpdatePassword:a,openEditProfileModal:n,handleLogout:l})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Ue,{className:"mr-2"})," Perfil"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-400"})," Nombre: ",s.username]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ay,{className:"mr-2 text-red-400"})," Correo: ",t]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Bx,{className:"mr-2 text-red-400"})," Teléfono: ",s.phone||"No especificado"]})]}),e.jsx("button",{onClick:()=>n({id:s.id,username:s.username}),className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Editar Perfil"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Bx,{className:"mr-2"})," Seguridad"]}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-1",children:"Nueva Contraseña"}),e.jsx("input",{type:"password",name:"password",className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300",placeholder:"Ingrese nueva contraseña"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-1",children:"Nuevo Teléfono"}),e.jsx("input",{type:"tel",name:"phone",className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300",placeholder:"Ingrese nuevo teléfono"})]}),e.jsx("button",{type:"submit",disabled:r.password,className:`w-full py-2 rounded-xl text-white transition-all duration-300 ${r.password?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-500 hover:bg-red-600"}`,children:r.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(St,{className:"mr-2"})," Sesión"]}),e.jsxs("button",{onClick:l,className:"w-full py-2 flex items-center justify-center gap-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:[e.jsx(St,{size:16}),"Cerrar Sesión"]})]})]})]}),_$=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState(""),[n,l]=v.useState([]),[o,d]=v.useState({username:"",phone:""}),[u,m]=v.useState(""),[y,j]=v.useState(0),[N,T]=v.useState(null),[g,B]=v.useState("inicio"),[D,R]=v.useState([]),[$,z]=v.useState({}),[Z,G]=v.useState([]),[Y,V]=v.useState(!0),[x,q]=v.useState({}),[W,J]=v.useState(null),[re,X]=v.useState({isOpen:!1,message:"",title:""}),[Q,E]=v.useState({isOpen:!1,user:null}),[De,Ne]=v.useState({isOpen:!1,provider:null}),[ue,je]=v.useState(""),[pe,Ae]=v.useState([]),Te=It(),be=(f,p)=>{X({isOpen:!0,title:f,message:p})},qe=()=>{X({isOpen:!1,message:"",title:""})},$e=f=>{E({isOpen:!0,user:f})},i=()=>{E({isOpen:!1,user:null})},k=f=>{Ne({isOpen:!0,provider:f})},c=()=>{Ne({isOpen:!1,provider:null})},P=async(f,p)=>{try{q(F=>({...F,profile:!0}));const w=U(S,"users",f);await Zs(w,{username:p,updatedAt:ve()}),d(F=>({...F,username:p})),be("Éxito","Perfil actualizado exitosamente"),i()}catch(w){console.error("Error al actualizar perfil:",w),be("Error",w.message||"Error al actualizar el perfil")}finally{q(w=>({...w,profile:!1}))}},A=async(f,p)=>{try{q(w=>({...w,[`rate_${f}`]:!0})),await Cn(ee(S,"ratings"),{userId:N,providerId:f,rating:p,ratedAt:ve()}),be("Éxito","Calificación enviada exitosamente"),c()}catch(w){console.error("Error al calificar proveedor:",w),be("Error",w.message||"Error al enviar la calificación")}finally{q(w=>({...w,[`rate_${f}`]:!1}))}};v.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const p=xe(ee(S,"products")),w=await jt(p);console.log("Products fetched:",w.docs.length);const F={};w.forEach(O=>{F[O.id]=O.data()}),z(F)}catch(p){console.error("Error fetching products:",p),J("Error al cargar productos: "+p.message)}})()},[]),v.useEffect(()=>{const f=ge(U(S,"notifications","adminMessage"),p=>{if(p.exists()){const w=p.data(),F="user";w.roles&&w.roles.includes(F)?G([{id:p.id,...w}]):G([])}else G([])},p=>{console.error("Error in notifications listener:",p),J("Error al cargar notificaciones: "+p.message)});return()=>f()},[]),v.useEffect(()=>{if(!N)return;(async()=>{try{const p=xe(ee(S,"sales"),fe("customerId","==",N)),w=await jt(p),F=new Set,O=[];w.forEach(ae=>{const ie=ae.data();ie.providerId&&!F.has(ie.providerId)&&(F.add(ie.providerId),O.push({id:ie.providerId,name:ie.provider||"Proveedor desconocido",phone:ie.providerPhone||"No especificado"}))}),Ae(O)}catch(p){console.error("Error fetching providers:",p),J("Error al cargar proveedores: "+p.message)}})()},[N]);const H=async f=>{try{q(de=>({...de,[`renew_${f.id}`]:!0}));const p=parseFloat(f.renewalPrice)||parseFloat(f.price)||0;if(y<p){be("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const w=parseInt(f.durationDays)||30,F=qt.now(),O=F.toDate(),ae=O,ie=new Date(ae.getTime()+w*24*60*60*1e3),oe=qt.fromDate(ie),ne=U(S,"sales",f.id);await Zs(ne,{startDate:F,endDate:oe,renewedAt:F,status:"completed",updatedAt:ve()});const he=U(S,"users",N);await Zs(he,{balance:y-p}),j(de=>de-p),R(de=>de.map(we=>we.id===f.id?{...we,startDate:ae,endDate:ie,renewedAt:O,status:"completed",daysRemaining:w,totalDays:w,timeElapsedPercentage:0}:we)),be("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${M(ie)}`)}catch(p){console.error("Error al renovar el pedido:",p),be("Error","Error al renovar el pedido: "+p.message)}finally{q(p=>({...p,[`renew_${f.id}`]:!1}))}},se=async()=>{try{await Tm(Ge),Te("/")}catch(f){console.error("Error al cerrar sesión:",f),be("Error",f.message||"Error al cerrar sesión")}};v.useEffect(()=>{const f=_t(Ge,p=>{p?(T(p.uid),m(p.email||"No especificado"),V(!1)):Te("/login")});return()=>f()},[Te]),v.useEffect(()=>{if(!N)return;const f=U(S,"users",N),p=ge(f,w=>{if(w.exists()){const F=w.data();d({username:F.username||"Usuario",phone:F.phone||""}),m(F.email||"No especificado"),j(Number(F.balance)||0)}else J("Usuario no encontrado")},w=>{console.error("Error in user data listener:",w),J("Error al cargar datos del usuario: "+w.message)});return()=>p()},[N]),v.useEffect(()=>{if(!N)return;const f=xe(ee(S,"sales"),fe("customerId","==",N)),p=ge(f,async F=>{var oe,ne;if(F.empty){R([]),V(!1);return}const O=new Date,ae=5*24*60*60*1e3;for(const he of F.docs){const we=((ne=(oe=he.data().endDate)==null?void 0:oe.toDate)==null?void 0:ne.call(oe))||new Date;if(we<O&&O.getTime()-we.getTime()>ae)try{await Su(U(S,"sales",he.id)),console.log(`Deleted expired order: ${he.id}`)}catch(Se){console.error(`Error deleting order ${he.id}:`,Se)}}const ie=F.docs.map(he=>{var Ut,zt,pt,nr,ds,ir,gs,gr,Yt,Ys,or;const de=he.data(),Se=((zt=(Ut=de.saleDate)==null?void 0:Ut.toDate)==null?void 0:zt.call(Ut))||((nr=(pt=de.createdAt)==null?void 0:pt.toDate)==null?void 0:nr.call(pt))||new Date;let xt=(ir=(ds=de.startDate)==null?void 0:ds.toDate)==null?void 0:ir.call(ds),Le=xt||Se,Qe=!1;xt||(Qe=!0);const _e=de.durationDays||30;let He;de.endDate?He=de.endDate.toDate?de.endDate.toDate():new Date(de.endDate):(He=new Date(Le.getTime()+_e*24*60*60*1e3),Qe=!0),Qe&&Zs(U(S,"sales",he.id),{startDate:xt||qt.fromDate(Se),endDate:qt.fromDate(He),durationDays:_e}).catch(_r=>{console.error("Error al actualizar startDate/endDate en Firestore:",_r)});const Oe=He.getTime()-Le.getTime(),Ft=O.getTime()-Le.getTime(),cs=He.getTime()-O.getTime(),ke=Math.ceil(Oe/(1e3*60*60*24)),Me=Math.max(0,Math.ceil(cs/(1e3*60*60*24))),tt=Math.ceil(Ft/(1e3*60*60*24)),at=ke>0?tt/ke*100:100,Nt=((gs=$[de.providerId])==null?void 0:gs.terms)||"No se especificaron términos y condiciones.";return{id:he.id,productName:de.productName||"Producto sin nombre",category:de.type||"netflix",price:parseFloat(de.price)||0,renewalPrice:parseFloat(de.renewalPrice)||0,provider:de.provider||"No especificado",providerId:de.providerId||"",providerPhone:de.providerPhone||de.providerWhatsapp||"51999999999",status:de.status||"completed",saleDate:Se,startDate:Le,endDate:He,durationDays:_e,daysRemaining:Me,totalDays:ke,timeElapsedPercentage:at,account:{email:((gr=de.accountDetails)==null?void 0:gr.email)||"No especificado",password:((Yt=de.accountDetails)==null?void 0:Yt.password)||"No especificado",profile:((Ys=de.accountDetails)==null?void 0:Ys.profile)||"No especificado",pin:((or=de.accountDetails)==null?void 0:or.pin)||"No especificado"},client:{customerName:de.customerName||"Cliente desconocido",email:de.customerEmail||"No especificado",phone:de.phoneNumber||"No especificado"},paymentMethod:"SZStreaming",orderId:`SZ-${he.id.slice(0,8).toUpperCase()}`,termsAndConditions:Nt,renewable:de.renewable!==void 0?de.renewable:!0}}).filter(he=>{const de=new Date(he.endDate);return!(de<O&&O.getTime()-de.getTime()>ae)});R(ie),V(!1)},F=>{console.error("Error al obtener pedidos:",F),J("Error al cargar pedidos: "+F.message),V(!1)}),w=setInterval(()=>{const F=new Date,O=5*24*60*60*1e3;R(ae=>ae.map(ie=>{const oe=new Date(ie.endDate).getTime()-new Date(ie.startDate).getTime(),ne=F.getTime()-new Date(ie.startDate).getTime(),he=new Date(ie.endDate).getTime()-F.getTime(),de=Math.ceil(oe/(1e3*60*60*24)),we=Math.max(0,Math.ceil(he/(1e3*60*60*24))),Se=Math.ceil(ne/(1e3*60*60*24)),xt=de>0?Se/de*100:100;return{...ie,daysRemaining:we,totalDays:de,timeElapsedPercentage:xt}}).filter(ie=>{const oe=new Date(ie.endDate);return!(oe<F&&F.getTime()-oe.getTime()>O)}))},6e4);return()=>{p(),clearInterval(w)}},[N,$]),v.useEffect(()=>{if(!N)return;const f=xe(ee(S,"pendingTopUps"),fe("userId","==",N)),p=ge(f,w=>{const F=w.docs.map(O=>{var ae,ie;return{id:O.id,...O.data(),date:((ie=(ae=O.data().requestedAt)==null?void 0:ae.toDate)==null?void 0:ie.call(ae))||new Date,amount:parseFloat(O.data().amount)||0}});l(F)},w=>{console.error("Error al obtener recargas:",w),J("Error al cargar recargas: "+w.message)});return()=>p()},[N]);const te=async()=>{try{if(q(p=>({...p,topUp:!0})),!r||isNaN(r)){be("Error","Ingrese un monto válido");return}const f=parseFloat(r);if(f<10){be("Error","El monto mínimo de recarga es S/ 10.00");return}await Cn(ee(S,"pendingTopUps"),{userId:N,username:o.username,amount:f,status:"pendiente",requestedAt:ve()}),a(""),be("Éxito","Solicitud de recarga enviada correctamente")}catch(f){console.error("Error al solicitar recarga:",f),be("Error",f.message||"Error al enviar solicitud de recarga")}finally{q(f=>({...f,topUp:!1}))}},I=async f=>{f.preventDefault();try{q(ie=>({...ie,password:!0}));const p=f.target.password.value,w=f.target.phone.value,F=Ge.currentUser,O=U(S,"users",N),ae={};if(p){if(p.length<6){be("Error","La contraseña debe tener al menos 6 caracteres");return}await Hg(F,p),ae.updatedAt=ve()}w&&(ae.phone=w,ae.updatedAt=ve()),Object.keys(ae).length>0&&await Zs(O,ae),d(ie=>({...ie,phone:w||ie.phone})),be("Éxito","Cambios guardados correctamente"),f.target.reset()}catch(p){console.error("Error al actualizar los datos:",p),be("Error",p.message||"Error al guardar los cambios")}finally{q(p=>({...p,password:!1}))}},M=f=>{if(!f)return"No especificada";try{const p=f instanceof Date?f:new Date(f);return isNaN(p.getTime())?"Fecha inválida":p.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},C=()=>{if(Y)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-400"})});if(W)return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:W}),e.jsx("button",{onClick:()=>J(null),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})]});switch(g){case"inicio":return e.jsx(I$,{userName:o,email:u,balance:y,orders:D,notifications:Z,setActivePage:B,formatDate:M});case"notificaciones":return e.jsx(S$,{notifications:Z,formatDate:M});case"recargar":return e.jsx(P$,{amount:r,setAmount:a,topUps:n,actionLoading:x,handleTopUpRequest:te,formatDate:M,showModal:be});case"proveedores":return e.jsx(E$,{providers:pe,openRateProviderModal:k});case"pedidos":return e.jsx(C$,{orders:D,searchQuery:ue,setSearchQuery:je,formatDate:M,handleRenewal:H,actionLoading:x});case"configuracion":return e.jsx(T$,{userName:o,email:u,actionLoading:x,handleUpdatePassword:I,openEditProfileModal:$e,handleLogout:se});default:return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>B("inicio"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black to-gray-900 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Ot,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>{Te("/"),t(!1)},className:"text-xl font-bold text-red-400 hover:text-red-300 transition-all duration-300",children:"SZ Streaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(ft,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white font-bold",children:o.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:o.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Usuario"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Lm},{id:"notificaciones",label:"Notificaciones",icon:Fo},{id:"recargar",label:"Recargar saldo",icon:Rs},{id:"pedidos",label:"Mis pedidos",icon:Je},{id:"proveedores",label:"Proveedores",icon:Ue},{id:"configuracion",label:"Configuración",icon:gd}].map(f=>e.jsxs("button",{onClick:()=>{B(f.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${g===f.id?"bg-red-500/20 text-red-400 border border-red-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-red-400"}`,children:[e.jsx(f.icon,{className:"text-lg"}),e.jsx("span",{children:f.label})]},f.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:se,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(St,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:C()}),e.jsx(N$,{isOpen:re.isOpen,title:re.title,message:re.message,onClose:qe}),e.jsx(w$,{isOpen:Q.isOpen,user:Q.user,onClose:i,onSave:P}),e.jsx(k$,{isOpen:De.isOpen,provider:De.provider,onClose:c,onRate:A}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},D$=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,A$=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[n,l]=v.useState((t==null?void 0:t.username)||""),[o,d]=v.useState(""),u=m=>{if(m.preventDefault(),d(""),!n.trim()){d("El nombre de usuario no puede estar vacío.");return}a(t.id,n.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:n,onChange:m=>l(m.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},R$=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[n,l]=v.useState(""),[o,d]=v.useState(""),[u,m]=v.useState(""),[y,j]=v.useState([]),[N,T]=v.useState(0),[g,B]=v.useState(0),[D,R]=v.useState(null),[$,z]=v.useState(!0),[Z,G]=v.useState({}),[Y,V]=v.useState(null),[x,q]=v.useState([]),[W,J]=v.useState(!1),[re,X]=v.useState(""),[Q,E]=v.useState(""),[De,Ne]=v.useState([]),[ue,je]=v.useState([]),[pe,Ae]=v.useState({}),[Te,be]=v.useState([]),[qe,$e]=v.useState({isOpen:!1,message:"",title:""}),[i,k]=v.useState({isOpen:!1,user:null}),c=It(),P=(O,ae)=>{$e({isOpen:!0,title:O,message:ae})},A=()=>{$e({isOpen:!1,message:"",title:""})},H=O=>{k({isOpen:!0,user:O})},se=()=>{k({isOpen:!1,user:null})},te=async(O,ae)=>{try{G(ne=>({...ne,profile:!0}));const ie=U(S,"users",O),oe=U(S,"affiliates",O);await Zs(ie,{username:ae,updatedAt:ve()}),await Zs(oe,{username:ae,updatedAt:ve()}),l(ae),P("Éxito","Perfil actualizado exitosamente"),se()}catch(ie){console.error("Error al actualizar perfil:",ie),P("Error",ie.message||"Error al actualizar el perfil")}finally{G(ie=>({...ie,profile:!1}))}};v.useEffect(()=>{const O=_t(Ge,ae=>{ae?(R(ae.uid),d(ae.email||"No especificado"),z(!1)):c("/login")});return()=>O()},[c]),v.useEffect(()=>{(async()=>{try{const ae=xe(ee(S,"products")),ie=await jt(ae),oe={};ie.forEach(ne=>{oe[ne.id]=ne.data()}),Ae(oe)}catch(ae){console.error("Error fetching products:",ae),V("Error al cargar productos")}})()},[]),v.useEffect(()=>{(()=>ge(U(S,"notifications","adminMessage"),ie=>{if(ie.exists()){const oe=ie.data(),ne="affiliate";oe.roles&&oe.roles.includes(ne)?be([{id:ie.id,...oe}]):be([])}else be([])}))()},[]),v.useEffect(()=>{(async()=>{if(D)try{const ae=U(S,"users",D),ie=await et(ae);if(ie.exists()){const he=ie.data();l(he.username||"Usuario"),B(Number(he.balance)||0)}const oe=U(S,"affiliates",D),ne=await et(oe);if(ne.exists()){const he=ne.data();m(he.affiliateCode||""),T(Number(he.earnings)||0)}else{const he=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await Xl(oe,{username:n||"Nuevo Afiliado",email:o,affiliateCode:he,earnings:0,createdAt:ve(),updatedAt:ve()}),m(he)}}catch(ae){console.error("Error al manejar datos:",ae),V("Error al cargar datos")}finally{z(!1)}})()},[D,o,n]),v.useEffect(()=>{if(!D)return;(()=>{const ae=xe(ee(S,"pendingTopUps"),fe("userId","==",D));return ge(ae,oe=>{const ne=oe.docs.map(he=>{var de,we;return{id:he.id,...he.data(),date:((we=(de=he.data().requestedAt)==null?void 0:de.toDate)==null?void 0:we.call(de))||new Date,amount:parseFloat(he.data().amount)||0}});Ne(ne)},oe=>{console.error("Error al obtener recargas:",oe),V("Error al cargar recargas")})})()},[D]),v.useEffect(()=>{if(!u)return;const O=xe(ee(S,"users"),fe("referrerCode","==",u),f8("createdAt","desc"),Vt(5)),ae=ge(O,ie=>{const oe=ie.docs.map(ne=>{var he;return{id:ne.id,...ne.data(),joinDate:((he=ne.data().createdAt)==null?void 0:he.toDate())||new Date}});q(oe)});return()=>ae()},[u]),v.useEffect(()=>{if(!u)return;const O=xe(ee(S,"users"),fe("referrerCode","==",u)),ae=ge(O,ie=>{const oe=ie.docs.map(ne=>{var he;return{id:ne.id,...ne.data(),joinDate:((he=ne.data().createdAt)==null?void 0:he.toDate())||new Date}});j(oe)});return()=>ae()},[u]),v.useEffect(()=>{if(!D)return;(()=>{const ae=xe(ee(S,"sales"),fe("customerId","==",D)),ie=ge(ae,ne=>{if(ne.empty){je([]),z(!1);return}const he=ne.docs.map(de=>{var pt,nr,ds,ir,gs,gr,Yt,Ys,or,_r,Li;const we=de.data(),xt=((nr=(pt=we.saleDate)==null?void 0:pt.toDate)==null?void 0:nr.call(pt))||((ir=(ds=we.createdAt)==null?void 0:ds.toDate)==null?void 0:ir.call(ds))||new Date;let Le=(gr=(gs=we.startDate)==null?void 0:gs.toDate)==null?void 0:gr.call(gs),Qe=Le||xt,_e=!1;Le||(_e=!0);const He=we.durationDays||30;let Oe;we.endDate?Oe=new Date(we.endDate):(Oe=new Date(Qe.getTime()+He*24*60*60*1e3),_e=!0),_e&&Zs(U(S,"sales",de.id),{startDate:Le||qt.fromDate(xt),endDate:Oe.toISOString(),durationDays:He}).catch(al=>{console.error("Error al actualizar startDate/endDate en Firestore:",al)});const Ft=new Date,cs=Oe.getTime()-Qe.getTime(),ke=Ft.getTime()-Qe.getTime(),Me=Oe.getTime()-Ft.getTime(),tt=Math.ceil(cs/(1e3*60*60*24)),at=Math.max(0,Math.ceil(Me/(1e3*60*60*24))),Nt=Math.ceil(ke/(1e3*60*60*24)),Ut=tt>0?Nt/tt*100:100,zt=((Yt=pe[we.providerId])==null?void 0:Yt.terms)||"No se especificaron términos y condiciones.";return{id:de.id,productName:we.productName||"Producto sin nombre",category:we.type||"netflix",price:parseFloat(we.price)||0,provider:we.provider||"No especificado",providerId:we.providerId||"",providerPhone:we.providerPhone||we.providerWhatsapp||"51999999999",status:we.status||"completed",saleDate:xt,startDate:Qe,endDate:Oe,durationDays:He,daysRemaining:at,totalDays:tt,timeElapsedPercentage:Ut,account:{email:((Ys=we.accountDetails)==null?void 0:Ys.email)||"No especificado",password:((or=we.accountDetails)==null?void 0:or.password)||"No especificado",profile:((_r=we.accountDetails)==null?void 0:_r.profile)||"No especificado",pin:((Li=we.accountDetails)==null?void 0:Li.pin)||"No especificado"},client:{name:we.customerName||"Cliente desconocido",email:we.customerEmail||"No especificado",phone:we.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${de.id.slice(0,8).toUpperCase()}`,termsAndConditions:zt,renewable:we.renewable!==void 0?we.renewable:!0}});je(he),z(!1)},ne=>{console.error("Error al obtener pedidos:",ne),V("Error al cargar pedidos: "+ne.message),z(!1)}),oe=setInterval(()=>{je(ne=>ne.map(he=>{const de=new Date,we=new Date(he.endDate).getTime()-new Date(he.startDate).getTime(),Se=de.getTime()-new Date(he.startDate).getTime(),xt=new Date(he.endDate).getTime()-de.getTime(),Le=Math.ceil(we/(1e3*60*60*24)),Qe=Math.max(0,Math.ceil(xt/(1e3*60*60*24))),_e=Math.ceil(Se/(1e3*60*60*24)),He=Le>0?_e/Le*100:100;return{...he,daysRemaining:Qe,totalDays:Le,timeElapsedPercentage:He}}))},6e4);return()=>{ie(),clearInterval(oe)}})()},[D,pe]);const I=async()=>{try{if(G(ae=>({...ae,topUp:!0})),!Q||isNaN(Q)){P("Error","Ingrese un monto válido");return}const O=parseFloat(Q);if(O<10){P("Error","El monto mínimo de recarga es S/ 10.00");return}await Cn(ee(S,"pendingTopUps"),{userId:D,username:n,amount:O,status:"pendiente",requestedAt:ve(),processed:!1}),E(""),P("Éxito","Solicitud de recarga enviada correctamente")}catch(O){console.error("Error al solicitar recarga:",O),P("Error",O.message||"Error al enviar solicitud de recarga")}finally{G(O=>({...O,topUp:!1}))}},M=async O=>{var ae,ie,oe,ne,he,de,we;try{G(ke=>({...ke,[`renew_${O.id}`]:!0}));const Se=parseFloat(O.price)||0;if(g<Se){P("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const xt=parseInt(O.durationDays)||30,Le=qt.now(),Qe=Le.toDate(),_e=new Date(Qe.getTime()+xt*24*60*60*1e3),He=_e.toISOString(),Oe={customerId:D,customerName:((ae=O.client)==null?void 0:ae.name)||"Cliente desconocido",customerEmail:((ie=O.client)==null?void 0:ie.email)||o,phoneNumber:((oe=O.client)==null?void 0:oe.phone)||"No especificado",productName:O.productName||"Producto sin nombre",type:O.category||"netflix",price:Se,accountDetails:{email:((ne=O.account)==null?void 0:ne.email)||"No especificado",password:((he=O.account)==null?void 0:he.password)||"No especificado",profile:((de=O.account)==null?void 0:de.profile)||"No especificado",pin:((we=O.account)==null?void 0:we.pin)||"No especificado"},provider:O.provider||"Proveedor desconocido",providerId:O.providerId||"",providerPhone:O.providerPhone||O.providerWhatsapp||"51999999999",status:"completed",createdAt:Le,saleDate:Le,startDate:Le,endDate:He,durationDays:xt,renewedAt:Le,renewable:O.renewable!==void 0?O.renewable:!0},Ft=await Cn(ee(S,"sales"),Oe),cs=U(S,"users",D);await Zs(cs,{balance:g-Se}),B(ke=>ke-Se),je(ke=>{var Me;return[...ke,{...Oe,id:Ft.id,saleDate:Qe,startDate:Qe,endDate:_e,account:Oe.accountDetails,client:{name:Oe.customerName,email:Oe.customerEmail,phone:Oe.phoneNumber},orderId:`BS-${Ft.id.slice(0,8).toUpperCase()}`,renewable:Oe.renewable,daysRemaining:xt,totalDays:xt,timeElapsedPercentage:0,termsAndConditions:((Me=pe[Oe.providerId])==null?void 0:Me.terms)||"No se especificaron términos y condiciones."}]}),P("Éxito","¡Pedido renovado exitosamente!")}catch(Se){console.error("Error al renovar el pedido:",Se),P("Error","Error al renovar el pedido: "+Se.message)}finally{G(Se=>({...Se,[`renew_${O.id}`]:!1}))}},C=()=>{u&&(navigator.clipboard.writeText(u),J(!0),setTimeout(()=>J(!1),2e3))},f=O=>{if(!O)return"No especificada";try{const ae=O instanceof Date?O:new Date(O);return isNaN(ae.getTime())?"Fecha inválida":ae.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},p=async()=>{try{await Tm(Ge),c("/")}catch(O){console.error("Error al cerrar sesión:",O),P("Error",O.message||"Error al cerrar sesión")}},w=async O=>{O.preventDefault();try{G(oe=>({...oe,password:!0}));const ae=O.target.password.value;if(!ae){P("Error","Por favor, ingrese una nueva contraseña");return}if(ae.length<6){P("Error","La contraseña debe tener al menos 6 caracteres");return}const ie=Ge.currentUser;ie&&(await Hg(ie,ae),P("Éxito","Contraseña actualizada correctamente"),O.target.reset())}catch(ae){console.error("Error al actualizar la contraseña:",ae),P("Error",ae.message||"Error al actualizar la contraseña")}finally{G(ae=>({...ae,password:!1}))}},F=()=>{if($)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(Y)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:Y}),e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:n})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:n})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Nr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",g.toFixed(2)]}),e.jsx("button",{onClick:()=>a("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",N.toFixed(2)]}),e.jsx("button",{onClick:()=>a("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:C,disabled:!u,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${u?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(x$,{size:16}),W?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:u||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:u?`https://blackkstreaming.com/register?ref=${u}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),x.length>0?x.map(O=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:O.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",f(O.joinDate)]})]},O.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),x.length>0&&e.jsx("button",{onClick:()=>a("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),ue.length>0?ue.slice(0,3).map(O=>{const ae=new Date(O.endDate)>new Date&&O.status==="completed",ie=O.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:O.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ie?"bg-yellow-900/80 text-yellow-400":ae?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ie?"A pedido":ae?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",f(O.endDate)]})]},O.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),ue.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),Te.length>0?Te.map(O=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:O.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f(O.updatedAt)})]},O.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),Te.length>0?e.jsx("div",{className:"space-y-4",children:Te.map(O=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:O.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:f(O.updatedAt)})]},O.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:Q,onChange:O=>E(O.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:I,disabled:Z.topUp||!Q||parseFloat(Q)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${Q&&parseFloat(Q)>=10&&!Z.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:Z.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Rs,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Nr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),De.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:De.map(O=>{var ie,oe;const ae=encodeURIComponent(`Hola, he pedido una recarga de S/ ${((ie=O.amount)==null?void 0:ie.toFixed(2))||"0.00"} con el nombre ${n}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",((oe=O.amount)==null?void 0:oe.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${O.status==="aprobado"?"bg-green-900/80 text-green-400":O.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:O.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:f(O.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:O.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${ae}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(Nr,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},O.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:re,onChange:O=>X(O.target.value)}),e.jsx(st,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),ue.length>0?e.jsx("div",{className:"space-y-6",children:ue.filter(O=>(O.productName||"").toLowerCase().includes(re.toLowerCase())||(O.orderId||"").toLowerCase().includes(re.toLowerCase())).map(O=>{var Qe,_e,He,Oe,Ft,cs,ke,Me,tt,at,Nt,Ut,zt;const ae=parseFloat(O.price)||0,ie=new Date(O.endDate)>new Date&&O.status==="completed",oe=O.status==="pending",ne=O.daysRemaining||0,he=O.timeElapsedPercentage||0;let de="bg-green-400";he>70&&he<=90?de="bg-yellow-400":he>90&&(de="bg-red-400");const we=oe?e.jsx(Mt,{className:"text-yellow-400"}):ie?e.jsx(Fc,{className:"text-green-400"}):e.jsx(Ye,{className:"text-red-400"}),Se=encodeURIComponent(`*Consulta sobre Pedido - ${O.productName||"Sin nombre"}*

*N° Pedido:* ${O.orderId||"No especificado"}
*Producto:* ${O.productName||"No especificado"}
*Precio:* S/ ${ae.toFixed(2)}
*Estado:* ${oe?"A pedido":ie?"Activo":"Expirado"}
*Fecha de Inicio:* ${f(O.startDate)}
*Fecha de Vencimiento:* ${f(O.endDate)}

`+(oe?`Hola 😊, he comprado un producto a pedido (${O.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),xt=encodeURIComponent(`😊 Estimado/a ${((Qe=O.client)==null?void 0:Qe.name)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${O.productName||"Sin nombre"}.
🔢 Código: ${O.orderId||"No especificado"}
`+(oe?"":`📧 Correo: ${((_e=O.account)==null?void 0:_e.email)||"No especificado"}
🔐 Contraseña: ${((He=O.account)==null?void 0:He.password)||"No especificado"}
👤 Perfil: ${((Oe=O.account)==null?void 0:Oe.profile)||"No especificado"}
📌 PIN: ${((Ft=O.account)==null?void 0:Ft.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${f(O.startDate)}
📅 Fecha de vencimiento: ${f(O.endDate)}
🏁 Días contratados: ${O.durationDays||30} días.

`+(oe?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${O.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),Le=O.providerPhone?O.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[we,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:O.productName||"Producto sin nombre"}),O.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",O.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",ae.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${oe?"text-yellow-400":de.replace("bg-","text-")}`,children:oe?"Pendiente de activación":`${ne} día${ne===1?"":"s"} restante${ne===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${de}`,style:{width:`${Math.min(he,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[he.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ue,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:oe?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((cs=O.account)==null?void 0:cs.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((ke=O.account)==null?void 0:ke.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((Me=O.account)==null?void 0:Me.profile)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:((tt=O.account)==null?void 0:tt.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ee,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:O.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:O.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${oe?"bg-yellow-900/80 text-yellow-400":ie?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:oe?"A pedido":ie?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:f(O.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:f(O.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${de.replace("bg-","text-")}`,children:ne})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ue,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((at=O.client)==null?void 0:at.name)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((Nt=O.client)==null?void 0:Nt.phone)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:((Ut=O.client)==null?void 0:Ut.email)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${Le}?text=${Se}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Nr,{size:18})," Contactar Proveedor"]}),O.renewable&&e.jsx("button",{onClick:()=>M(O),disabled:Z[`renew_${O.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${Z[`renew_${O.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:Z[`renew_${O.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(JI,{size:18})," Renovar Pedido"]})}),((zt=O.client)==null?void 0:zt.phone)&&e.jsxs("a",{href:`https://wa.me/${O.client.phone.replace(/^\+/,"")}?text=${xt}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Nr,{size:18})," Contactar Cliente"]})]})]})]},O.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",y.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:re,onChange:O=>X(O.target.value)}),e.jsx(st,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:y.filter(O=>{const ae=O.username||"",ie=O.email||"";return ae.toLowerCase().includes(re.toLowerCase())||ie.toLowerCase().includes(re.toLowerCase())}).map(O=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:O.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:O.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:O.joinDate?f(O.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:O.status||"Activo"})})]},O.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Uo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",N.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[y.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(xi,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:y.map(O=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:O.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:O.joinDate?f(O.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},O.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:n,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>H({id:D,username:n}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(KI,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:Z.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:Z.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:p,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(St,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Ot,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(ft,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:n.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:n}),e.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Lm},{id:"notificaciones",label:"Notificaciones",icon:Fo},{id:"recargas",label:"Recargas",icon:Rs},{id:"pedidos",label:"Pedidos",icon:Je},{id:"referidos",label:"Referidos",icon:Uo},{id:"ganancias",label:"Ganancias",icon:xi},{id:"configuracion",label:"Configuración",icon:gd}].map(O=>e.jsxs("button",{onClick:()=>{a(O.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===O.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(O.icon,{className:"text-lg"}),e.jsx("span",{children:O.label})]},O.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:p,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(St,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:F()}),e.jsx(D$,{isOpen:qe.isOpen,title:qe.title,message:qe.message,onClose:A}),e.jsx(A$,{isOpen:i.isOpen,user:i.user,onClose:se,onSave:te}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},M$=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,O$=({username:s="Usuario",products:t=[],orders:r=[],providerBalance:a=0,balanceLoading:n=!1,totalStock:l=0,totalEarnings:o=0,isAdmin:d=!1,email:u="",notifications:m=[],setActiveSection:y=()=>{},formatDate:j=N=>new Date(N).toLocaleDateString()})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(Ue,{className:"mr-2"})," Bienvenido, ",e.jsx("span",{className:"text-red-400 ml-1",children:s})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 border border-gray-700/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(zx,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:t.length}),e.jsx("p",{className:"text-gray-400",children:"Productos registrados"}),e.jsxs("p",{className:"text-gray-400",children:["Stock total: ",l]}),e.jsx("button",{onClick:()=>y("inventario"),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Ver inventario"})]}),e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 border border-gray-700/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Rs,{className:"mr-2"})," Ganancias"]}),n?e.jsx("div",{className:"animate-pulse text-gray-400",children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",o.toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:[r.length," ventas realizadas"]}),e.jsxs("p",{className:"text-gray-400",children:["Disponible: S/ ",a.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 border border-gray-700/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Ue,{className:"mr-2"})," Mi Cuenta"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-400"}),e.jsx("span",{children:s})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Nr,{className:"mr-2 text-red-400"}),e.jsx("span",{children:u})]}),e.jsx("p",{className:"text-xs mt-2 bg-gray-900/80 text-red-400 py-1 px-2 rounded-full inline-block border border-gray-700/50",children:d?"Administrador":"Proveedor"})]}),e.jsx("button",{onClick:()=>y("configuracion"),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Editar perfil"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-700/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(Je,{className:"mr-2"})," Pedidos recientes"]}),r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos recientes"}),e.jsx("p",{className:"text-gray-400",children:"Tus pedidos aparecerán aquí"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:"bg-gray-900/80 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/70 divide-y divide-gray-700/50",children:r.slice(0,3).map((N,T)=>{const g=new Date(N.endDate)>new Date&&N.status==="completed",B=N.status==="pending";return e.jsxs("tr",{className:"hover:bg-red-900/20 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-white truncate max-w-xs",children:N.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:N.buyer}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(N.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${B?"bg-yellow-900/80 text-yellow-400 border border-yellow-500/50":g?"bg-green-900/80 text-green-400 border border-green-500/50":"bg-red-900/80 text-red-400 border border-red-500/50"}`,children:B?"A pedido":g?"Activo":"Expirado"})})]},T)})})]}),r.length>3&&e.jsx("button",{onClick:()=>y("pedidos"),className:"w-full mt-3 text-center text-red-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]}),e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-700/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(Nr,{className:"mr-2"})," Notificaciones"]}),m.length>0?m.map(N=>{var T,g;return e.jsxs("div",{className:"border-b border-gray-700/50 py-3 last:border-0 hover:bg-red-900/20 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:N.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:j(((g=(T=N.updatedAt)==null?void 0:T.toDate)==null?void 0:g.call(T))||new Date)})]},N.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nr,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"Tus notificaciones aparecerán aquí"})]})]})]})]}),L$=({products:s,setActiveSection:t,handleEdit:r,handleDelete:a,getCategoryDisplayName:n,totalStock:l})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(zx,{className:"mr-2"})," Inventario"]}),e.jsxs("button",{onClick:()=>t("subirProducto"),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center w-full md:w-auto justify-center transition-all duration-300",children:[e.jsx(Lw,{className:"mr-2"})," Nuevo Producto"]})]}),s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:"bg-gray-900/80 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/70 divide-y divide-gray-700/50",children:s.map(o=>e.jsxs("tr",{className:"hover:bg-red-900/20 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:o.image,alt:o.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:o.name}),e.jsx("div",{className:"text-xs text-gray-400",children:n(o.category)})]})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(parseFloat(o.price)||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:o.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.status==="En stock"?"bg-red-500/20 text-red-400 border border-red-500/50":o.status==="A pedido"?"bg-gray-800/50 text-yellow-400 border border-gray-700/50":"bg-gray-900/80 text-gray-300 border border-gray-700/50"}`,children:o.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>r(o),className:"text-red-400 hover:text-red-500 mr-3",title:"Editar",children:e.jsx(QI,{})}),e.jsx("button",{onClick:()=>a(o.id),className:"text-red-400 hover:text-red-500",title:"Eliminar",children:e.jsx(ZI,{})})]})]},o.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(zx,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes productos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Agrega tu primer producto para comenzar"}),e.jsxs("button",{onClick:()=>t("subirProducto"),className:"mt-4 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center mx-auto transition-all duration-300",children:[e.jsx(Lw,{className:"mr-2"})," Agregar Producto"]})]})]}),V$=({soldAccounts:s,formatDate:t})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Bp,{className:"mr-2"})," Cuentas Vendidas"]}),s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:"bg-gray-900/80 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Perfil"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de Venta"})]})}),e.jsx("tbody",{className:"bg-gray-800/70 divide-y divide-gray-700/50",children:s.map((r,a)=>e.jsxs("tr",{className:"hover:bg-red-900/20 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:r.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:r.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:r.profile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:t(r.saleDate)})]},a))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bp,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay cuentas vendidas"}),e.jsx("p",{className:"text-gray-400",children:"Las cuentas vendidas aparecerán aquí"})]})]}),z$=({product:s,setProduct:t,handleChange:r,handleFileChange:a,handleStockChange:n,handleAccountFieldChange:l,handleSubmit:o,setActiveSection:d})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Subir Nuevo Producto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-700/50 border-dashed rounded-xl bg-gray-900/80 backdrop-blur-sm",children:s.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>t({...s,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(ft,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-900/50 rounded-xl font-medium text-red-400 hover:text-red-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:u=>a(u),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:s.category,onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:s.accountType,onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:s.status,onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:s.status==="Agotado"?0:s.stock,onChange:n,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",min:"0",required:!0,disabled:s.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:s.price,onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:s.renewal,onChange:r,className:"h-4 w-4 text-red-400 focus:ring-red-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),s.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:s.renewalPrice,onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:s.duration,onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",s.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:s.providerPhone,onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:s.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"URL del producto (opcional)"}),e.jsx("input",{type:"url",name:"productUrl",value:s.productUrl||"",onChange:r,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: https://www.ejemplo.com/producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:s.details,onChange:r,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:s.terms,onChange:r,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),s.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:s.accounts.map((u,m)=>e.jsxs("div",{className:"border border-gray-700/50 rounded-xl p-4 bg-gray-900/70 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",m+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:u.email,onChange:y=>l(m,"email",y.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:u.password,onChange:y=>l(m,"password",y.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:u.profile,onChange:y=>l(m,"profile",y.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:u.pin,onChange:y=>l(m,"pin",y.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},m))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>d("inventario"),className:"px-4 py-2 bg-gray-900/70 text-gray-300 rounded-xl hover:bg-red-900/20 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:o,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-all duration-300",children:"Subir Producto"})]})]})]}),B$=({orders:s,totalEarnings:t,providerBalance:r,balanceLoading:a,getCategoryDisplayName:n,formatDate:l})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Rs,{className:"mr-2"})," Ganancias"]}),e.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-700/50 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-1",children:"Ganancias totales"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.length," ventas realizadas"]}),a?e.jsx("p",{className:"text-sm text-gray-400",children:"Disponible: Cargando..."}):e.jsxs("p",{className:"text-sm text-gray-400",children:["Disponible: S/ ",(r||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white mt-2 md:mt-0",children:["S/ ",t.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:"bg-gray-900/80 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/70 divide-y divide-gray-700/50",children:s.map((o,d)=>e.jsxs("tr",{className:"hover:bg-red-900/20 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:o.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:n(o.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:o.buyer}),e.jsx("div",{className:"text-xs text-gray-400",children:o.buyerEmail})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:o.buyerPhone}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:l(o.saleDate)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",(o.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-500/20 text-red-400 border border-red-500/50",children:"Completado"})})]},d))})]})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Rs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay ventas registradas"}),e.jsx("p",{className:"text-gray-400",children:"Tus ventas aparecerán aquí."})]})]}),$$=({orders:s,searchQuery:t,setSearchQuery:r,getCategoryDisplayName:a,formatDate:n,handleEditOrder:l,handleActivateOrder:o,handleDeleteOrder:d})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative w-48 sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"w-full px-3 py-1.5 rounded-lg bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300 text-sm placeholder-gray-500",value:t,onChange:u=>r(u.target.value)}),e.jsx(st,{className:"absolute right-2 top-2 text-gray-400",size:16})]})]}),s.length>0?e.jsx("div",{className:"space-y-6",children:s.filter(u=>(u.productName||"").toLowerCase().includes(t.toLowerCase())||(u.category||"").toLowerCase().includes(t.toLowerCase())).map(u=>{const m=u.status==="pending",y=u.status==="refunded",j=u.daysRemaining||0,N=u.timeElapsedPercentage||0;let T="bg-red-400";N>70&&N<=90?T="bg-yellow-400":N>90&&(T="bg-red-400");const g=y?e.jsx(Ye,{className:"text-red-400"}):m?e.jsx(Mt,{className:"text-yellow-400"}):e.jsx(Fc,{className:"text-green-400"}),B=u.buyerPhone?u.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,D=encodeURIComponent(`Hola ${u.buyer||"Cliente"}, 😊

Soy el proveedor de tu suscripción ${u.productName||"Sin nombre"} (N° Pedido: ${u.id||"No especificado"}). ¿En qué puedo ayudarte hoy? Por favor, indícame tu consulta o problema.

Atentamente, BlackStreaming`),R=encodeURIComponent(`Hola ${u.buyer||"Cliente"}, 😊

Te informamos que tu suscripción ${u.productName||"Sin nombre"} (N° Pedido: ${u.id||"No especificado"}) vencerá en ${j} día${j===1?"":"s"}. Te recomendamos renovarla a tiempo.

Detalles:
- Fecha de vencimiento: ${n(u.endDate)}
- Precio: S/ ${(u.amount||0).toFixed(2)}

Si necesitas ayuda, contáctanos. ¡Gracias por tu preferencia!
Atentamente, BlackStreaming`);return e.jsxs("div",{className:"border border-gray-600/50 rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-3 py-2 border-b border-gray-600/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[g,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white text-sm",children:u.productName||"Producto sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Categoría: ",a(u.category)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",(u.amount||0).toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${T.replace("bg-","text-")}`,children:m?"Pendiente de activación":`${j} día${j===1?"":"s"} restante${j===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/40 rounded-full h-1",children:e.jsx("div",{className:`h-1 rounded-full ${T}`,style:{width:`${Math.min(N,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[N.toFixed(0),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-700/50",children:[e.jsx("h5",{className:"text-sm font-medium text-red-400 mb-3",children:"Información del Comprador"}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Comprador: ",u.buyer]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Teléfono: ",u.buyerPhone]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-700/50",children:[e.jsx("h5",{className:"text-sm font-medium text-red-400 mb-3",children:"Detalles de la Cuenta"}),u.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-300",children:["Email: ",u.accountDetails.email]}),e.jsxs("p",{className:"text-gray-400",children:["Contraseña: ",u.accountDetails.password]}),e.jsxs("p",{className:"text-gray-400",children:["Perfil: ",u.accountDetails.profile||"N/A"]}),e.jsxs("p",{className:"text-gray-400",children:["PIN: ",u.accountDetails.pin||"N/A"]})]}):e.jsx("p",{className:"text-gray-400",children:"No disponible"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>l(u),className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Editar cuenta",children:[e.jsx(QI,{size:18})," Editar Cuenta"]}),u.status==="pending"&&e.jsxs("button",{onClick:()=>o(u.id),className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Activar pedido",children:[e.jsx(Fc,{size:18})," Activar Pedido"]}),B&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:`https://wa.me/${B}?text=${D}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Contactar cliente",children:[e.jsx(Nr,{size:18})," Contactar"]}),!y&&j<=7&&e.jsxs("a",{href:`https://wa.me/${B}?text=${R}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Notificar vencimiento",children:[e.jsx(Fo,{size:18})," Notificar"]})]}),e.jsxs("button",{onClick:()=>d(u.id),className:"flex-1 py-3 px-4 bg-gray-700 text-gray-400 hover:bg-gray-600 hover:text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Eliminar pedido",children:[e.jsx(ZI,{size:18})," Eliminar"]})]})]})]},u.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Tus pedidos aparecerán aquí"})]})]}),F$=({accountDetails:s,handleAccountChange:t,handleUpdateAccount:r})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(gd,{className:"mr-2"})," Configuración"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:s.email,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:t,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Dejar en blanco para no cambiar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:s.preferences,onChange:t,rows:"4",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Especifica tus preferencias o notas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:r,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})})]})]}),U$=({editModalOpen:s,setEditModalOpen:t,selectedProduct:r,setSelectedProduct:a,editError:n,setEditError:l,handleFileChange:o,handleEditStockChange:d,handleEditAccountFieldChange:u,handleUpdateProduct:m})=>{if(!s)return null;const y=j=>{const{name:N,value:T,type:g,checked:B}=j.target;a(D=>({...D,[N]:g==="checkbox"?B:T,...N==="status"&&{stock:T==="Agotado"?0:D.stock||1,accounts:T==="En stock"?D.accounts.length?D.accounts:Array(D.stock||1).fill({email:"",password:"",profile:"",pin:""}):[]}}))};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl w-full max-w-4xl border border-gray-700/50 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Editar Producto"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-900/50 text-red-400 rounded-xl",children:n}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-700/50 border-dashed rounded-xl bg-gray-900/80 backdrop-blur-sm",children:r.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>a({...r,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(ft,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"edit-file-upload",className:"relative cursor-pointer bg-gray-900/50 rounded-xl font-medium text-red-400 hover:text-red-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:j=>o(j,!0),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:r.category,onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:r.accountType,onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:r.status,onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:r.status==="Agotado"?0:r.stock,onChange:d,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",min:"0",required:!0,disabled:r.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:r.price,onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:r.renewal,onChange:y,className:"h-4 w-4 text-red-400 focus:ring-red-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),r.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:r.renewalPrice,onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:r.duration,onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",r.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:r.providerPhone,onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:r.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"URL del producto (opcional)"}),e.jsx("input",{type:"url",name:"productUrl",value:r.productUrl||"",onChange:y,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: https://www.ejemplo.com/producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:r.details,onChange:y,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:r.terms,onChange:y,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),r.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:r.accounts.map((j,N)=>e.jsxs("div",{className:"border border-gray-700/50 rounded-xl p-4 bg-gray-900/70 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",N+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:j.email,onChange:T=>u(N,"email",T.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:j.password,onChange:T=>u(N,"password",T.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:j.profile,onChange:T=>u(N,"profile",T.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:j.pin,onChange:T=>u(N,"pin",T.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},N))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 bg-gray-900/70 text-gray-300 rounded-xl hover:bg-red-900/20 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:m,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-all duration-300",children:"Actualizar Producto"})]})]})]})})})},W$=({editOrderModalOpen:s,setEditOrderModalOpen:t,selectedOrder:r,handleOrderAccountChange:a,editOrderError:n,setEditOrderError:l,handleUpdateOrder:o})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl w-full max-w-md border border-gray-700/50 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Editar Detalles de Cuenta"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-900/50 text-red-400 rounded-xl",children:n}),e.jsxs("div",{className:"border border-gray-700/50 rounded-xl p-4 bg-gray-900/70 backdrop-blur-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:r.accountDetails.email,onChange:a,className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: usuario@ejemplo.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",name:"password",value:r.accountDetails.password,onChange:a,className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: contraseña123",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",name:"profile",value:r.accountDetails.profile,onChange:a,className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",name:"pin",value:r.accountDetails.pin,onChange:a,className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 bg-gray-900/70 text-gray-300 rounded-xl hover:bg-red-900/20 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:o,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})]})]})})}):null,H$=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[n,l]=v.useState("Usuario"),[o,d]=v.useState(""),[u,m]=v.useState(""),[y,j]=v.useState([]),[N,T]=v.useState([]),[g,B]=v.useState([]),[D,R]=v.useState(!0),[$,z]=v.useState(""),[Z,G]=v.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[Y,V]=v.useState(null),[x,q]=v.useState(!1),[W,J]=v.useState(""),[re,X]=v.useState(""),[Q,E]=v.useState({isOpen:!1,message:"",title:""}),[De,Ne]=v.useState({email:"",password:"",preferences:""}),[ue,je]=v.useState(!1),[pe,Ae]=v.useState(!0),[Te,be]=v.useState(0),[qe,$e]=v.useState(!1),[i,k]=v.useState(null),[c,P]=v.useState(""),A=It(),H=Qg(),se=(ke,Me)=>{E({isOpen:!0,title:ke,message:Me})},te=()=>{E({isOpen:!1,message:"",title:""})},I=ke=>{var Me;if(!ke)return"No especificada";try{const tt=ke instanceof Date?ke:((Me=ke==null?void 0:ke.toDate)==null?void 0:Me.call(ke))||new Date(ke);return isNaN(tt.getTime())?"Fecha inválida":tt.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(tt){return console.error("Error formatting date:",tt),"Fecha inválida"}},M=ke=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[ke==null?void 0:ke.toLowerCase()]||"Otro";v.useEffect(()=>{const ke=_t(H,Me=>{Me?(d(Me.email||""),m(Me.uid),C(Me.uid)):A("/login")});return()=>ke()},[H,A]);const C=async ke=>{try{const Me=U(S,"users",ke),tt=await et(Me);if(tt.exists()){const at=tt.data();l(at.username||"Usuario"),Ne({email:at.email||"",password:"",preferences:at.preferences||""})}R(!1)}catch(Me){z("Error al cargar datos del usuario"),console.error("Error fetching user data:",Me),R(!1)}};v.useEffect(()=>{o&&(async Me=>{try{const tt=await et(U(S,"admins",Me));je(tt.exists())}catch(tt){console.error("Error checking admin status:",tt)}})(o)},[o]),v.useEffect(()=>{if(!n)return;const ke=xe(ee(S,"products"),fe("provider","==",n)),Me=ge(ke,tt=>{const at=tt.docs.map(Nt=>({id:Nt.id,...Nt.data()}));T(at)},tt=>{console.error("Error fetching products:",tt),z("Error al cargar productos")});return()=>Me()},[n]),v.useEffect(()=>{if(!u)return;const ke=xe(ee(S,"sales"),fe("providerId","==",u)),Me=ge(ke,at=>{if(at.empty){j([]),Ae(!1);return}const Nt=at.docs.map(zt=>{var Kn,zi,ka,Ur,Yn,nl,Bi,$i;const pt=zt.data(),ds=((zi=(Kn=pt.saleDate)==null?void 0:Kn.toDate)==null?void 0:zi.call(Kn))||((Ur=(ka=pt.createdAt)==null?void 0:ka.toDate)==null?void 0:Ur.call(ka))||new Date;let ir=(nl=(Yn=pt.startDate)==null?void 0:Yn.toDate)==null?void 0:nl.call(Yn),gs=ir||ds,gr=!ir;const Yt=pt.durationDays||30;let Ys;pt.endDate?Ys=typeof pt.endDate=="string"?new Date(pt.endDate):(($i=(Bi=pt.endDate).toDate)==null?void 0:$i.call(Bi))||new Date(pt.endDate):(Ys=new Date(gs.getTime()+Yt*24*60*60*1e3),gr=!0),gr&&Zs(U(S,"sales",zt.id),{startDate:ir||qt.fromDate(ds),endDate:qt.fromDate(Ys),durationDays:Yt}).catch(yd=>{console.error("Error al actualizar startDate/endDate en Firestore:",yd)});const or=new Date,_r=Ys.getTime()-gs.getTime(),Li=or.getTime()-gs.getTime(),al=Ys.getTime()-or.getTime(),aa=Math.max(1,Math.ceil(_r/(1e3*60*60*24))),Vm=Math.max(0,Math.ceil(al/(1e3*60*60*24))),zm=Math.ceil(Li/(1e3*60*60*24)),Vi=aa>0?Math.min(100,zm/aa*100):100;return{id:zt.id,productName:pt.productName||"Producto sin nombre",category:pt.type||"netflix",amount:parseFloat(pt.price)||0,buyer:pt.buyerName||pt.customerName||"Comprador desconocido",buyerPhone:pt.buyerPhone||"No especificado",buyerEmail:pt.customerEmail||"No especificado",status:pt.status||"completed",saleDate:ds,startDate:gs,endDate:Ys,durationDays:Yt,daysRemaining:Vm,totalDays:aa,timeElapsedPercentage:Vi,accountDetails:pt.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(pt.price)||0}});j(Nt);const Ut=Nt.filter(zt=>zt.status==="completed"&&zt.accountDetails).map(zt=>({...zt.accountDetails,productName:zt.productName,saleDate:zt.saleDate,orderId:zt.id}));B(Ut),Ae(!1)},at=>{console.error("Error fetching sales:",at),z("Error al cargar ventas"),Ae(!1)}),tt=setInterval(()=>{j(at=>at.map(Nt=>{const Ut=new Date,zt=new Date(Nt.endDate).getTime()-new Date(Nt.startDate).getTime(),pt=Ut.getTime()-new Date(Nt.startDate).getTime(),nr=new Date(Nt.endDate).getTime()-Ut.getTime(),ds=Math.max(1,Math.ceil(zt/(1e3*60*60*24))),ir=Math.max(0,Math.ceil(nr/(1e3*60*60*24))),gs=Math.ceil(pt/(1e3*60*60*24)),gr=ds>0?Math.min(100,gs/ds*100):100;return{...Nt,daysRemaining:ir,totalDays:ds,timeElapsedPercentage:gr}}))},6e4);return()=>{Me(),clearInterval(tt)}},[u]),v.useEffect(()=>{if(!n)return;const ke=U(S,"providerBalances",n),Me=ge(ke,tt=>{tt.exists()?be(tt.data().balance||0):(Xl(ke,{balance:0,provider:n,updatedAt:ve()}),be(0)),Ae(!1)},tt=>{console.error("Error fetching provider balance:",tt),z("Error al cargar el saldo del proveedor"),Ae(!1)});return()=>Me()},[n]);const f=async()=>{try{await Tm(H),A("/login")}catch(ke){console.error("Error al cerrar sesión:",ke),se("Error","Error al cerrar sesión")}},p=ke=>{const{name:Me,value:tt,type:at,checked:Nt}=ke.target;G(Ut=>({...Ut,[Me]:at==="checkbox"?Nt:tt}))},w=ke=>{const{name:Me,value:tt}=ke.target;Ne(at=>({...at,[Me]:tt}))},F=(ke,Me=!1)=>{const tt=ke.target.files[0];if(tt){if(tt.size>10485760){Me?J("La imagen no debe exceder los 10MB"):z("La imagen no debe exceder los 10MB");return}const Nt=new FileReader;Nt.onloadend=()=>{Me?V(Ut=>({...Ut,image:Nt.result})):G(Ut=>({...Ut,image:Nt.result}))},Nt.readAsDataURL(tt)}},O=ke=>{const Me=parseInt(ke.target.value)||1,tt=Z.accounts||[];if(Me>tt.length){const at=[...tt];for(;at.length<Me;)at.push({email:"",password:"",profile:"",pin:""});G({...Z,stock:Me,accounts:at})}else if(Me<tt.length){const at=tt.slice(0,Math.max(Me,1));G({...Z,stock:Me,accounts:at})}else G({...Z,stock:Me})},ae=ke=>{const Me=parseInt(ke.target.value)||1;let at=[...Y.accounts||[]];if(Me>at.length)for(;at.length<Me;)at.push({email:"",password:"",profile:"",pin:""});else Me<at.length&&(at=at.slice(0,Math.max(Me,1)));V({...Y,stock:Me,accounts:at})},ie=(ke,Me,tt)=>{const at=[...Z.accounts];at[ke]={...at[ke],[Me]:tt},G({...Z,accounts:at})},oe=(ke,Me,tt)=>{V(at=>({...at,accounts:at.accounts.map((Nt,Ut)=>Ut===ke?{...Nt,[Me]:tt}:Nt)}))},ne=ke=>{const{name:Me,value:tt}=ke.target;k(at=>({...at,accountDetails:{...at.accountDetails,[Me]:tt}}))},he=async()=>{if(z(""),!Z.name||!Z.price){se("Error","Por favor complete todos los campos obligatorios");return}if(Z.renewal&&!Z.renewalPrice){se("Error","Por favor ingrese el precio de renovación");return}if(Z.status==="En stock"&&Z.accounts.some(Me=>!Me.email||!Me.password)){se("Error","Por favor complete todos los campos de las cuentas");return}try{const ke={...Z,provider:n,providerId:u,providerPhone:Z.status==="En stock"?Z.providerPhone||"":Z.providerPhone||"No especificado",createdAt:ve(),availableAccounts:Z.status==="En stock"?Z.accounts.length:0},Me=await Cn(ee(S,"products"),ke);if(Z.status==="En stock"){const tt=ee(S,`products/${Me.id}/accounts`);for(const at of Z.accounts)await Cn(tt,{email:at.email,password:at.password,profile:at.profile||"",pin:at.pin||"",status:"available"})}G({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),a("inventario"),se("Éxito","Producto subido exitosamente!")}catch(ke){console.error("Error al subir el producto:",ke),se("Error",`Error al subir el producto: ${ke.message}`)}},de=async ke=>{J("");try{const Me=xe(ee(S,"sales"),fe("providerId","==",u),fe("productName","==",ke.name)),at=(await jt(Me)).docs.filter(pt=>{var nr;return pt.data().status==="completed"&&((nr=pt.data().accountDetails)==null?void 0:nr.email)}).map(pt=>pt.data().accountDetails.email),Nt=ee(S,`products/${ke.id}/accounts`),zt=(await jt(Nt)).docs.filter(pt=>pt.data().status==="available").map(pt=>({email:pt.data().email||"",password:pt.data().password||"",profile:pt.data().profile||"",pin:pt.data().pin||""}));V({id:ke.id,name:ke.name||"",image:ke.image||"",category:ke.category||"Netflix",accountType:ke.accountType||"Premium",status:ke.status||"En stock",stock:zt.length||ke.stock||1,price:ke.price||"",renewal:ke.renewal||!1,renewalPrice:ke.renewalPrice||"",duration:ke.duration||"",providerPhone:ke.providerPhone||"",details:ke.details||"",terms:ke.terms||"",providerId:ke.providerId||u,accounts:ke.status==="En stock"?zt.length>0?zt:Array(Math.max(ke.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),q(!0)}catch(Me){console.error("Error al preparar edición del producto:",Me),J("Error al preparar edición del producto")}},we=async()=>{var ke;if(J(""),!Y.name||!Y.price){J("Por favor complete todos los campos obligatorios");return}if(Y.renewal&&!Y.renewalPrice){J("Por favor ingrese el precio de renovación");return}if(Y.status==="En stock"&&Y.accounts.some(tt=>!tt.email||!tt.password)){J("Por favor complete todos los campos de las cuentas");return}try{const Me=U(S,"products",Y.id);if(await Xl(Me,{...Y,providerId:Y.providerId||u,availableAccounts:Y.status==="En stock"&&((ke=Y.accounts)==null?void 0:ke.length)||0},{merge:!0}),Y.status==="En stock"){const tt=ee(S,`products/${Y.id}/accounts`),at=await jt(tt);for(const Nt of at.docs)await Su(Nt.ref);for(const Nt of Y.accounts)await Cn(tt,{email:Nt.email,password:Nt.password,profile:Nt.profile||"",pin:Nt.pin||"",status:"available"})}q(!1),se("Éxito","Producto actualizado exitosamente!")}catch(Me){console.error("Error al actualizar el producto:",Me),J("Error al actualizar el producto")}},Se=async ke=>{try{await Su(U(S,"products",ke)),se("Éxito","Producto eliminado exitosamente!")}catch(Me){console.error("Error al eliminar el producto:",Me),se("Error","Error al eliminar el producto")}},xt=async ke=>{try{await Su(U(S,"sales",ke)),se("Éxito","Pedido eliminado exitosamente!")}catch(Me){console.error("Error al eliminar el pedido:",Me),se("Error","Error al eliminar el pedido")}},Le=async()=>{try{const ke=H.currentUser;if(ke){const Me=U(S,"users",ke.uid);await Xl(Me,{preferences:De.preferences,...De.password&&{password:De.password}},{merge:!0}),se("Éxito","Configuración actualizada correctamente!")}}catch(ke){console.error("Error al actualizar la configuración:",ke),se("Error","Error al actualizar la configuración")}},Qe=ke=>{P(""),k({...ke,accountDetails:{email:ke.accountDetails.email||"",password:ke.accountDetails.password||"",profile:ke.accountDetails.profile||"",pin:ke.accountDetails.pin||""}}),$e(!0)},_e=async()=>{if(P(""),!i.accountDetails.email||!i.accountDetails.password){P("Por favor complete todos los campos obligatorios de la cuenta");return}try{const ke=U(S,"sales",i.id);await Zs(ke,{accountDetails:i.accountDetails,updatedAt:ve()}),$e(!1),se("Éxito","Detalles de la cuenta actualizados exitosamente!")}catch(ke){console.error("Error al actualizar los detalles de la cuenta:",ke),P("Error al actualizar los detalles de la cuenta")}},He=async ke=>{try{const Me=U(S,"sales",ke);await Zs(Me,{status:"completed",updatedAt:ve()}),se("Éxito","Pedido activado exitosamente!")}catch(Me){console.error("Error al activar el pedido:",Me),se("Error","Error al activar el pedido")}},Oe=pe?0:y.reduce((ke,Me)=>ke+(Me.amount||0),0),Ft=N.reduce((ke,Me)=>ke+(parseInt(Me.stock)||0),0),cs=()=>{if(D)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-400"})});if($)return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:$}),e.jsx("button",{onClick:()=>z(""),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsx(O$,{username:n,products:N,orders:y,providerBalance:Te,balanceLoading:pe,totalStock:Ft,totalEarnings:Oe,isAdmin:ue,email:o,setActiveSection:a,formatDate:I});case"inventario":return e.jsx(L$,{products:N,setActiveSection:a,handleEdit:de,handleDelete:Se,getCategoryDisplayName:M,totalStock:Ft});case"cuentas":return e.jsx(V$,{soldAccounts:g,formatDate:I});case"subirProducto":return e.jsx(z$,{product:Z,setProduct:G,handleChange:p,handleFileChange:F,handleStockChange:O,handleAccountFieldChange:ie,handleSubmit:he,setActiveSection:a});case"ganancias":return e.jsx(B$,{orders:y,totalEarnings:Oe,providerBalance:Te,balanceLoading:pe,getCategoryDisplayName:M,formatDate:I});case"pedidos":return e.jsx($$,{orders:y,searchQuery:re,setSearchQuery:X,getCategoryDisplayName:M,formatDate:I,handleEditOrder:Qe,handleActivateOrder:He,handleDeleteOrder:xt});case"configuracion":return e.jsx(F$,{accountDetails:De,handleAccountChange:w,handleUpdateAccount:Le});default:return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black to-gray-900 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Ot,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>{A("/"),t(!1)},className:"text-xl font-bold text-red-400 hover:text-red-300 transition-all duration-300",children:"SZ Streaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(ft,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white font-bold",children:n.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:n}),e.jsx("p",{className:"text-xs text-gray-400",children:ue?"Admin":"Proveedor"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Lm},{id:"inventario",label:"Inventario",icon:zx},{id:"cuentas",label:"Cuentas Vendidas",icon:Bp},{id:"pedidos",label:"Pedidos",icon:Je},{id:"ganancias",label:"Ganancias",icon:Rs},{id:"subirProducto",label:"Subir Producto",icon:m$},{id:"configuracion",label:"Configuración",icon:gd}].map(ke=>e.jsxs("button",{onClick:()=>{a(ke.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===ke.id?"bg-red-500/20 text-red-400 border border-red-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-red-400"}`,children:[e.jsx(ke.icon,{className:"text-lg"}),e.jsx("span",{children:ke.label})]},ke.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:f,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(St,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:cs()}),e.jsx(M$,{isOpen:Q.isOpen,title:Q.title,message:Q.message,onClose:te}),e.jsx(U$,{editModalOpen:x,setEditModalOpen:q,selectedProduct:Y,setSelectedProduct:V,editError:W,setEditError:J,handleFileChange:F,handleEditStockChange:ae,handleEditAccountFieldChange:oe,handleUpdateProduct:we}),e.jsx(W$,{editOrderModalOpen:qe,setEditOrderModalOpen:$e,selectedOrder:i,handleOrderAccountChange:ne,editOrderError:c,setEditOrderError:P,handleUpdateOrder:_e}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},q$=()=>{const[s,t]=v.useState(""),[r,a]=v.useState(""),[n,l]=v.useState(0),[o,d]=v.useState([]),[u,m]=v.useState([]),[y,j]=v.useState([]),[N,T]=v.useState([]),[g,B]=v.useState([]),[D,R]=v.useState(0),[$,z]=v.useState({day:0,week:0,month:0,total:0}),[Z,G]=v.useState(!0),[Y,V]=v.useState(null),x=It();v.useEffect(()=>{const J=_t(Ge,re=>{re?(a(re.email),q(re.uid),G(!1)):x("/login")});return()=>J()},[x]);const q=async J=>{try{const re=U(S,"users",J),X=await et(re);if(X.exists()){const Q=X.data();t(Q.username||Q.email.split("@")[0])}else V("Usuario no encontrado en la base de datos")}catch(re){console.error("Error al obtener el nombre de usuario:",re),V("Error al cargar datos del usuario")}},W=J=>{const X=J*5,Q=X*.25,E=X*.05;z({day:E,week:Q,month:X,total:X})};return v.useEffect(()=>{(async()=>{try{const Ne=await jt(ee(S,"users")),ue=Ne.size,je=Ne.docs.map(P=>({id:P.id,...P.data()}));l(ue),d(je.slice(-5)),W(ue);const pe=xe(ee(S,"pendingRegistrations"),fe("status","==","pending")),Ae=await jt(pe);m(Ae.docs.map(P=>({id:P.id,...P.data()})));const Te=xe(ee(S,"pendingTopUps"),fe("status","==","pendiente")),be=await jt(Te);j(be.docs.map(P=>({id:P.id,...P.data()})));const qe=xe(ee(S,"withdrawals"),fe("status","==","pending")),$e=await jt(qe);T($e.docs.map(P=>({id:P.id,...P.data()})));const k=(await jt(ee(S,"sales"))).docs.map(P=>({id:P.id,...P.data()}));B(k);const c=k.reduce((P,A)=>P+(A.price||0),0);R(c)}catch(Ne){console.error("Error al obtener datos:",Ne),V("Error al cargar datos")}})();const re=ge(ee(S,"users"),Ne=>{const ue=Ne.size,je=Ne.docs.map(pe=>({id:pe.id,...pe.data()}));l(ue),d(je.slice(-5)),W(ue)}),X=ge(xe(ee(S,"pendingRegistrations"),fe("status","==","pending")),Ne=>{m(Ne.docs.map(ue=>({id:ue.id,...ue.data()})))}),Q=ge(xe(ee(S,"pendingTopUps"),fe("status","==","pendiente")),Ne=>{j(Ne.docs.map(ue=>({id:ue.id,...ue.data()})))}),E=ge(xe(ee(S,"withdrawals"),fe("status","==","pending")),Ne=>{T(Ne.docs.map(ue=>({id:ue.id,...ue.data()})))}),De=ge(ee(S,"sales"),Ne=>{const ue=Ne.docs.map(pe=>({id:pe.id,...pe.data()}));B(ue);const je=ue.reduce((pe,Ae)=>pe+(Ae.price||0),0);R(je)});return()=>{re(),X(),Q(),E(),De()}},[]),Z?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})}):Y?e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:Y}),e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]}):e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:s})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Uo,{className:"mr-2"})," Total Usuarios"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:n}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",onClick:()=>x("/usuarios"),children:"Ver usuarios"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Je,{className:"mr-2"})," Total Ventas"]}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",D.toFixed(2)]}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",onClick:()=>x("/pedidos"),children:"Ver ventas"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-700/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Rs,{className:"mr-2"})," Ganancias del Mes"]}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",$.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"(5 soles por usuario)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Últimos Usuarios"}),o.length>0?o.map(J=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:J.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-900/80 text-cyan-400",children:J.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:J.email})]},J.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Solicitudes Pendientes"}),u.length>0?u.slice(0,3).map(J=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:J.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-900/80 text-purple-400",children:J.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:J.email})]},J.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Retiros Pendientes"}),N.length>0?N.slice(0,3).map(J=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:J.provider||"Sin proveedor"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-900/80 text-yellow-400",children:["S/ ",(J.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Método: ",J.method||"No especificado"]})]},J.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay retiros pendientes"})]})]})]})},G$=({notificationForm:s={message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}},setNotificationForm:t=()=>{},handleNotificationSubmit:r=()=>{},actionLoading:a={notification:!1}})=>{const n=s.roles||{user:!1,affiliate:!1,provider:!1,admin:!1},l=Object.values(n).some(o=>o);return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:["Enviar ",e.jsx("span",{className:"text-red-400",children:"Notificación"})]}),e.jsxs("form",{onSubmit:r,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Mensaje de la Notificación"}),e.jsx("textarea",{value:s.message||"",onChange:o=>t({...s,message:o.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all resize-y",rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Enviar a los siguientes roles"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(o=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:n[o]||!1,onChange:d=>t({...s,roles:{...n,[o]:d.target.checked}}),className:"h-4 w-4 text-red-400 focus:ring-red-400 border-gray-600 rounded"}),e.jsx("span",{className:"text-gray-300 capitalize",children:o})]},o))})]}),e.jsx("button",{type:"submit",disabled:a.notification||!l,className:"w-full py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-all duration-300 disabled:bg-red-800",children:a.notification?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Enviar Notificación"}),!l&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:"Selecciona al menos un rol para enviar la notificación"})]})]})},Q$=({pendingRegistrations:s=[],allUsers:t=[],searchQuery:r="",setSearchQuery:a=()=>{},handleAccept:n=()=>{},handleDeny:l=()=>{},openEditBalanceModal:o=()=>{},actionLoading:d={},totalUsers:u=0})=>{const[m,y]=v.useState({isOpen:!1,userId:null,orders:[],topUps:[]});v.useEffect(()=>{if(!m.isOpen||!m.userId)return;const g=xe(ee(S,"sales"),fe("userId","==",m.userId)),B=xe(ee(S,"pendingTopUps"),fe("userId","==",m.userId)),D=ge(g,$=>{const z=$.docs.map(Z=>({id:Z.id,...Z.data()}));y(Z=>({...Z,orders:z}))},$=>console.error("Error fetching orders:",$)),R=ge(B,$=>{const z=$.docs.map(Z=>({id:Z.id,...Z.data()}));y(Z=>({...Z,topUps:z}))},$=>console.error("Error fetching top-ups:",$));return()=>{D(),R()}},[m.isOpen,m.userId]);const j=g=>{y({isOpen:!0,userId:g,orders:[],topUps:[]})},N=()=>{y({isOpen:!1,userId:null,orders:[],topUps:[]})},T=g=>{if(!g)return"No especificada";try{const B=g instanceof Date?g:g.toDate?g.toDate():new Date(g);return isNaN(B.getTime())?"Fecha inválida":B.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}};return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:["Solicitudes de ",e.jsx("span",{className:"text-red-400",children:"Registro"})]}),Array.isArray(s)&&s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:s.map(g=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:g.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:g.email||"No especificado"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-900/80 text-red-400",children:g.role||"usuario"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>n(g.id),disabled:d[g.id],className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 disabled:bg-green-800",title:"Aceptar",children:d[g.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(_y,{size:16})}),e.jsx("button",{onClick:()=>l(g.id),disabled:d[g.id],className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 disabled:bg-red-800",title:"Rechazar",children:d[g.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(ft,{size:16})})]})})]},g.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Uo,{className:"mx-auto text-4xl text-red-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay solicitudes de registro pendientes"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos los usuarios ",e.jsxs("span",{className:"text-red-400",children:["(",u,")"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm placeholder-gray-500",value:r,onChange:g=>a(g.target.value)}),e.jsx(Ol,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),Array.isArray(t)&&t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:t.filter(g=>(g.username||"").toLowerCase().includes(r.toLowerCase())||(g.email||"").toLowerCase().includes(r.toLowerCase())).map(g=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:g.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:g.email||"No especificado"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-900/80 text-red-400",children:g.role||"usuario"})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(g.balance||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap flex space-x-2",children:[e.jsx("button",{onClick:()=>o(g),disabled:d[`balance_${g.id}`],className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 disabled:bg-red-800",title:"Editar Saldo",children:d[`balance_${g.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(KI,{size:16})}),e.jsx("button",{onClick:()=>j(g.id),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Ver Info",children:e.jsx(We,{size:16})})]})]},g.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Uo,{className:"mx-auto text-4xl text-red-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay usuarios registrados"})]})]}),m.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-4xl border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Detalles del Usuario"}),e.jsx("button",{onClick:N,className:"text-gray-400 hover:text-red-400 transition-all duration-300",children:e.jsx(ft,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:"Pedidos"}),m.orders.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"ID Pedido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:m.orders.map(g=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:g.id}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(g.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:T(g.createdAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="completed"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:g.status||"Desconocido"})})]},g.id))})]})}):e.jsx("p",{className:"text-gray-300",children:"No hay pedidos registrados"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:"Recargas"}),m.topUps.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"ID Recarga"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:m.topUps.map(g=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:g.id}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(g.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:T(g.createdAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="completed"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:g.status||"Desconocido"})})]},g.id))})]})}):e.jsx("p",{className:"text-gray-300",children:"No hay recargas registradas"})]})]})]})})})]})},K$=({pendingTopUps:s=[],topUpsHistory:t=[],approveTopUp:r=()=>{},denyTopUp:a=()=>{},actionLoading:n={},formatDate:l=o=>"No especificada"})=>e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:["Recargas ",e.jsx("span",{className:"text-red-400",children:"Pendientes"})]}),Array.isArray(s)&&s.length>0?e.jsx("div",{className:"space-y-4",children:s.map(o=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-900/80 rounded-full flex items-center justify-center text-red-400",children:e.jsx(Rs,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:o.username||"Sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",l(o.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(o.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>r(o.id),disabled:n[o.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:n[o.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(_y,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>a(o.id),disabled:n[o.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:n[o.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(ft,{size:18})," Rechazar Recarga"]})})]})})]},o.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Rs,{className:"mx-auto text-4xl text-red-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay recargas pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:["Historial de ",e.jsx("span",{className:"text-red-400",children:"Recargas"})]}),Array.isArray(t)&&t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:t.map(o=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:o.username||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(o.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.status==="aprobado"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:o.status||"Desconocido"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:l(o.updatedAt)})]},o.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rs,{className:"mx-auto text-4xl text-red-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de recargas"})]})]})]}),Y$=({withdrawals:s,formatDate:t,actionLoading:r,setActionLoading:a,showNotificationModal:n})=>{const l=async(o,d)=>{try{a(m=>({...m,[o]:!0}));const u=U(S,"withdrawals",o);await Zs(u,{status:d==="approve"?"completed":"rejected",updatedAt:ve()}),n("Éxito",`Retiro ${d==="approve"?"aprobado":"rechazado"} exitosamente`)}catch(u){n("Error",u.message||`Error al ${d==="approve"?"aprobar":"rechazar"} el retiro`)}finally{a(u=>({...u,[o]:!1}))}};return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Retiros ",e.jsx("span",{className:"text-red-400",children:"Pendientes"})]}),s.length===0?e.jsxs("div",{className:"text-center text-gray-300 py-8",children:[e.jsx(Rs,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("p",{children:"No hay retiros pendientes"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600/50",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Usuario"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Monto"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Fecha"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Acciones"})]})}),e.jsx("tbody",{children:s.map(o=>{var d;return e.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-all duration-300",children:[e.jsx("td",{className:"py-3 px-4",children:o.userEmail||"No especificado"}),e.jsxs("td",{className:"py-3 px-4",children:["S/ ",((d=o.amount)==null?void 0:d.toFixed(2))||"0.00"]}),e.jsx("td",{className:"py-3 px-4",children:t(o.createdAt)}),e.jsxs("td",{className:"py-3 px-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>l(o.id,"approve"),disabled:r[o.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${r[o.id]?"bg-gray-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600"}`,children:[e.jsx(_y,{}),e.jsx("span",{children:"Aprobar"})]}),e.jsxs("button",{onClick:()=>l(o.id,"reject"),disabled:r[o.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${r[o.id]?"bg-gray-600 cursor-not-allowed":"bg-red-500 hover:bg-red-600"}`,children:[e.jsx(ft,{}),e.jsx("span",{children:"Rechazar"})]})]})]},o.id)})})]})})]})},X$=({sales:s,totalSales:t,formatDate:r,getOrderStatus:a})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Ventas General"}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border border-gray-600/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Total Ventas"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",t.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"Suma de todos los pedidos realizados"})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de Pedidos"}),s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Nombre del Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:s.map(n=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:n.productName||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(n.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:n.provider||"Sin proveedor"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:n.buyer||"Sin comprador"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:r(n.createdAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${a(n)==="Pendiente"?"bg-yellow-900/80 text-yellow-400":a(n)==="Activo"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:a(n)})})]},n.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Je,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay pedidos registrados"})]})]}),J$=({earnings:s,totalUsers:t})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-2 flex items-center",children:[e.jsx(xi,{className:"mr-2"})," Ganancias Diarias"]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["S/ ",s.day.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Estimado por día"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-2 flex items-center",children:[e.jsx(xi,{className:"mr-2"})," Ganancias Semanales"]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["S/ ",s.week.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Estimado por semana"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-2 flex items-center",children:[e.jsx(xi,{className:"mr-2"})," Ganancias Mensuales"]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["S/ ",s.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Estimado por mes"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-2 flex items-center",children:[e.jsx(xi,{className:"mr-2"})," Ganancias Totales"]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["S/ ",s.total.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Total acumulado"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Resumen"}),e.jsxs("p",{className:"text-gray-300",children:["Total de usuarios registrados: ",e.jsx("span",{className:"font-medium text-white",children:t})]}),e.jsxs("p",{className:"text-gray-300 mt-1",children:["Ganancia por usuario: ",e.jsx("span",{className:"font-medium text-white",children:"S/ 5.00"})]}),e.jsx("p",{className:"text-gray-300 mt-1",children:"Las ganancias se calculan asumiendo S/ 5.00 por cada usuario registrado. Las estimaciones diarias y semanales son proporciones del total (5% y 25%, respectivamente)."})]})]}),Z$=({userName:s,setUserName:t,email:r,handleSaveChanges:a,handleLogout:n,actionLoading:l})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración"}),e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-cyan-400"})," Nombre de usuario"]}),e.jsx("input",{type:"text",value:s,onChange:o=>t(o.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ingresa tu nombre de usuario",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(Ay,{className:"mr-2 text-cyan-400"})," Correo electrónico"]}),e.jsx("input",{type:"email",value:r,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"El correo no puede ser modificado."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(Dy,{className:"mr-2 text-cyan-400"})," Nueva contraseña (opcional)"]}),e.jsx("input",{type:"password",name:"password",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ingresa una nueva contraseña"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Mínimo 6 caracteres. Déjalo en blanco para no cambiarla."})]}),e.jsx("button",{type:"submit",disabled:l.config,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium transition-all duration-300 disabled:bg-cyan-800",children:l.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:n,className:"w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2",children:[e.jsx(St,{size:18})," Cerrar Sesión"]})})]}),eF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,tF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[n,l]=v.useState((t==null?void 0:t.balance)||0),[o,d]=v.useState(""),u=m=>{if(m.preventDefault(),d(""),isNaN(n)||n<0){d("Por favor, ingrese un saldo válido (número no negativo).");return}a(t.id,parseFloat(n))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(ft,{size:20})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:n,onChange:m=>l(m.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},sF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[n,l]=v.useState(""),[o,d]=v.useState(""),[u,m]=v.useState([]),[y,j]=v.useState([]),[N,T]=v.useState([]),[g,B]=v.useState([]),[D,R]=v.useState([]),[$,z]=v.useState(0),[Z,G]=v.useState(0),[Y,V]=v.useState(0),[x,q]=v.useState(0),[W,J]=v.useState({day:0,week:0,month:0,total:0}),[re,X]=v.useState(!0),[Q,E]=v.useState(null),[De,Ne]=v.useState({}),[ue,je]=v.useState({isOpen:!1,message:"",title:""}),[pe,Ae]=v.useState({isOpen:!1,user:null}),Te=It();v.useEffect(()=>{const te=_t(Ge,I=>{I?(d(I.email||"No especificado"),X(!1)):Te("/login")});return()=>te()},[Te]),v.useEffect(()=>{var M;const te=U(S,"users",(M=Ge.currentUser)==null?void 0:M.uid),I=ge(te,C=>{if(C.exists()){const f=C.data();l(f.username||"Admin")}else E("Usuario no encontrado")},C=>{E("Error al cargar datos del usuario: "+C.message)});return()=>I()},[]),v.useEffect(()=>{const te=ee(S,"users"),I=ee(S,"sales"),M=xe(ee(S,"pendingTopUps"),fe("status","==","pendiente")),C=xe(ee(S,"withdrawals"),fe("status","==","pendiente")),f=ge(te,O=>{const ae=O.docs.map(ie=>({id:ie.id,...ie.data()}));m(ae),z(ae.length)}),p=ge(I,O=>{const ae=O.docs.map(oe=>({id:oe.id,...oe.data()}));j(ae);const ie=ae.reduce((oe,ne)=>oe+(parseFloat(ne.price)||0),0);G(ie)}),w=ge(M,O=>{const ae=O.docs.map(ie=>({id:ie.id,...ie.data()}));T(ae),V(ae.length)}),F=ge(C,O=>{const ae=O.docs.map(ie=>({id:ie.id,...ie.data()}));B(ae),q(ae.length)});return()=>{f(),p(),w(),F()}},[]),v.useEffect(()=>{const te=ge(U(S,"notifications","adminMessage"),I=>{if(I.exists()){const M=I.data();R([{id:I.id,...M}])}else R([])},I=>{E("Error al cargar notificaciones: "+I.message)});return()=>te()},[]),v.useEffect(()=>{const te=$*5;J({day:te*.05,week:te*.25,month:te,total:te})},[$]);const be=(te,I)=>{je({isOpen:!0,title:te,message:I})},qe=()=>{je({isOpen:!1,message:"",title:""})},$e=te=>{Ae({isOpen:!0,user:te})},i=()=>{Ae({isOpen:!1,user:null})},k=async(te,I)=>{try{Ne(C=>({...C,balance:!0}));const M=U(S,"users",te);await Zs(M,{balance:I,updatedAt:ve()}),be("Éxito","Saldo actualizado exitosamente"),i()}catch(M){be("Error",M.message||"Error al actualizar el saldo")}finally{Ne(M=>({...M,balance:!1}))}},c=async te=>{te.preventDefault();try{Ne(f=>({...f,config:!0}));const I=te.target.password.value,M=U(S,"users",Ge.currentUser.uid),C={username:n,updatedAt:ve()};if(I){if(I.length<6){be("Error","La contraseña debe tener al menos 6 caracteres");return}await Hg(Ge.currentUser,I)}await Zs(M,C),be("Éxito","Cambios guardados correctamente"),te.target.reset()}catch(I){be("Error",I.message||"Error al guardar los cambios")}finally{Ne(I=>({...I,config:!1}))}},P=async()=>{try{await Tm(Ge),Te("/")}catch(te){be("Error",te.message||"Error al cerrar sesión")}},A=te=>{if(!te)return"No especificada";try{const I=te instanceof Date?te:new Date(te);return isNaN(I.getTime())?"Fecha inválida":I.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},H=te=>{var C,f;const I=((f=(C=te.endDate)==null?void 0:C.toDate)==null?void 0:f.call(C))||new Date,M=new Date;return te.status==="pending"?"Pendiente":I>M&&te.status==="completed"?"Activo":"Expirado"},se=()=>{if(re)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-400"})});if(Q)return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:Q}),e.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsx(q$,{totalUsers:$,totalSales:Z,pendingTopUps:Y,pendingWithdrawals:x});case"notificaciones":return e.jsx(G$,{notifications:D,formatDate:A});case"usuarios":return e.jsx(Q$,{users:u,openEditBalanceModal:$e});case"recargas":return e.jsx(K$,{topUps:N,formatDate:A,actionLoading:De,setActionLoading:Ne,showNotificationModal:be});case"retiros":return e.jsx(Y$,{withdrawals:g,formatDate:A,actionLoading:De,setActionLoading:Ne,showNotificationModal:be});case"pedidos":return e.jsx(X$,{sales:y,totalSales:Z,formatDate:A,getOrderStatus:H});case"ganancias":return e.jsx(J$,{earnings:W,totalUsers:$});case"configuracion":return e.jsx(Z$,{userName:n,setUserName:l,email:o,handleSaveChanges:c,handleLogout:P,actionLoading:De});default:return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ye,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black to-gray-900 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Ot,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>{Te("/"),t(!1)},className:"text-xl font-bold text-red-400 hover:text-red-300 transition-all duration-300",children:"SZ Streaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(ft,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white font-bold",children:n.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:n}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Lm},{id:"notificaciones",label:"Notificaciones",icon:Fo},{id:"usuarios",label:"Usuarios",icon:Uo},{id:"recargas",label:"Recargas",icon:Rs},{id:"retiros",label:"Retiros",icon:Rs},{id:"pedidos",label:"Pedidos",icon:Je},{id:"ganancias",label:"Ganancias",icon:xi},{id:"configuracion",label:"Configuración",icon:gd}].map(te=>e.jsxs("button",{onClick:()=>{a(te.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===te.id?"bg-red-500/20 text-red-400 border border-red-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-red-400"}`,children:[e.jsx(te.icon,{className:"text-lg"}),e.jsx("span",{children:te.label})]},te.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:P,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(St,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:se()}),e.jsx(eF,{isOpen:ue.isOpen,title:ue.title,message:ue.message,onClose:qe}),e.jsx(tF,{isOpen:pe.isOpen,user:pe.user,onClose:i,onSave:k}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},sS=v.createContext({theme:"dark",toggleTheme:()=>{}}),rF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const n=t==="dark"?"light":"dark";r(n),localStorage.setItem("theme",n)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(sS.Provider,{value:{theme:t,toggleTheme:a},children:s})},aF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),{theme:E,toggleTheme:De}=v.useContext(sS),Ne=c=>{const P=Number(c);return isNaN(P)?"0.00":P.toFixed(2)},ue=c=>{const P=Math.floor(c),A=c%1>=.5,H=5-P-(A?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(P)].map((se,te)=>e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${te}`)),A&&e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:E==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(H)].map((se,te)=>e.jsx(Ve,{className:E==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${te}`))]})};v.useEffect(()=>{const c=_t(Ge,async P=>{if(P)try{const A=await et(U(S,"users",P.uid));if(A.exists()){const H=A.data();d({id:P.uid,name:H.username||"Usuario",email:P.email,orders:H.orders||[],role:H.role||"user",phone:H.phone||""}),m(Number(H.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(A){T("Error al cargar datos del usuario"),console.error(A)}else d(null),m(0);j(!1)});return()=>c()},[]),v.useEffect(()=>{const c=xe(ee(S,"products"),fe("category","==","Netflix")),P=ge(c,async C=>{const f=C.docs.map(w=>{const F=w.data();return{id:w.id,...F,price:Number(F.price)||0,stock:Number(F.stock||F.available||0),accountDetails:F.email||F.details||"Detalles no disponibles",terms:F.terms||"Términos del proveedor",provider:F.provider||"Proveedor no especificado",providerId:F.providerId||"",providerPhone:F.providerPhone||"",acceptsOrders:F.status==="A pedido",duration:F.duration||"1 mes",accountType:F.accountType||"No especificado",status:F.status||"En stock",image:F.image||"https://via.placeholder.com/300",renewal:F.renewal||!1,renewalPrice:Number(F.renewalPrice)||Number(F.price)*.9}}),p=await Promise.all(f.map(async w=>{let F={provider:w.provider,providerPhone:w.providerPhone};if(!w.provider||w.provider==="Proveedor no especificado")try{if(w.providerId){const O=await et(U(S,"users",w.providerId));O.exists()&&(F={provider:O.data().username||O.data().email||w.provider,providerPhone:O.data().phoneNumber||w.providerPhone})}}catch(O){console.error("Error al cargar datos del proveedor:",O)}return{...w,...F}}));a(p),q(w=>({...w,netflix:p.length}))},C=>{T("Error al cargar productos de Netflix"),console.error(C)}),A=xe(ee(S,"ratings")),H=ge(A,C=>{const f={};C.docs.forEach(w=>{const F=w.data(),O=F.providerId;f[O]||(f[O]=[]),f[O].push(Number(F.rating)||0)});const p={};Object.keys(f).forEach(w=>{const F=f[w],O=F.length?F.reduce((ae,ie)=>ae+ie,0)/F.length:1;p[w]=Math.min(Math.max(O,1),5)}),X(p)},C=>{console.error("Error al cargar calificaciones de proveedores:",C)}),se=xe(ee(S,"netflix_accounts"),fe("status","==","available")),te=ge(se,C=>{const f=C.docs.map(p=>({id:p.id,...p.data(),productId:p.data().productId||"",providerId:p.data().providerId||""}));l(f)},C=>{console.error("Error al cargar cuentas:",C)}),M=["Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(C=>{const f=C.toLowerCase().replace(/\s+/g,""),p=xe(ee(S,"products"),fe("category","==",C));return ge(p,w=>{q(F=>({...F,[f]:w.docs.length}))},w=>{console.error(`Error al cargar productos de ${C}:`,w)})});return()=>{P(),H(),te(),M.forEach(C=>C())}},[]);const je=c=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>Q("/login")});return}if(u<c.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!c.providerId||c.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}B({product:c,customerName:o.name,phoneNumber:""})},pe=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const c=g.product;if(!c.providerId||c.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let P=null;c.status==="En stock"?P=await nt(S,async A=>{const H=U(S,"products",c.id),se=await A.get(H);if(!se.exists())throw new Error("Producto no encontrado");const te=se.data();if(te.availableAccounts<=0&&te.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const I=ee(S,`products/${c.id}/accounts`),M=xe(I,fe("status","==","available"),Vt(1)),C=await jt(M);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const f=C.docs[0],p=f.ref,w=f.data(),F=U(S,"users",o.id),O=await A.get(F);if(!O.exists())throw new Error("Usuario no encontrado");const ae=U(S,"users",c.providerId),ie=await A.get(ae);if(!ie.exists())throw new Error("Proveedor no encontrado");const oe=U(S,"providerBalances",c.providerId),ne=await A.get(oe);let he=0;ne.exists()?he=parseFloat(ne.data().balance)||0:A.set(oe,{balance:0,provider:c.providerId,updatedAt:ve()});let de=c.providerPhone||"";de||(de=ie.data().phoneNumber||""),A.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),A.update(H,{availableAccounts:it(-1),stock:it(-1)});const Se=(Number(O.data().balance)||0)-c.price;if(Se<0)throw new Error("Saldo insuficiente");const xt=O.data().orders||[],Le={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},terms:c.terms,type:"netflix"};A.update(F,{balance:Se,orders:[...xt,Le]});const _e=(Number(ie.data().balance)||0)+c.price,He=ie.data().sales||[],Oe={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(ae,{balance:_e,sales:[...He,Oe]});const Ft=he+c.price;A.set(oe,{balance:Ft,provider:c.providerId,updatedAt:ve()},{merge:!0});const cs=U(ee(S,"sales"));return A.set(cs,{...Le,provider:c.provider,providerId:c.providerId,providerPhone:de,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleId:Oe.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image}),w}):await nt(S,async A=>{const H=U(S,"users",o.id),se=await A.get(H);if(!se.exists())throw new Error("Usuario no encontrado");const te=U(S,"users",c.providerId),I=await A.get(te);if(!I.exists())throw new Error("Proveedor no encontrado");const M=U(S,"providerBalances",c.providerId),C=await A.get(M);let f=0;C.exists()?f=parseFloat(C.data().balance)||0:A.set(M,{balance:0,provider:c.providerId,updatedAt:ve()});let p=c.providerPhone||"";p||(p=I.data().phoneNumber||"");const F=(Number(se.data().balance)||0)-c.price;if(F<0)throw new Error("Saldo insuficiente");const O=se.data().orders||[],ae={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:c.terms,type:"netflix"};A.update(H,{balance:F,orders:[...O,ae]});const oe=(Number(I.data().balance)||0)+c.price,ne=I.data().sales||[],he={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(te,{balance:oe,sales:[...ne,he]});const de=f+c.price;A.set(M,{balance:de,provider:c.providerId,updatedAt:ve()},{merge:!0});const we=U(ee(S,"sales"));A.set(we,{...ae,provider:c.provider,providerId:c.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:he.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image})}),m(A=>A-c.price),d(A=>({...A,orders:[...A.orders,{...g,status:c.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:c.status==="En stock"?{email:(P==null?void 0:P.email)||"No proporcionado",password:(P==null?void 0:P.password)||"No proporcionado",profile:(P==null?void 0:P.profile)||"No proporcionado",pin:(P==null?void 0:P.pin)||"No proporcionado"}:null}]})),B(null),V({message:c.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(c){T(c.message||"Error al procesar la compra"),console.error("Error en la compra:",c)}finally{j(!1)}},Ae=c=>{R({name:c.name,accountDetails:c.accountDetails,provider:c.provider,terms:c.terms,accountType:c.accountType})},Te=c=>{R({name:c.name,terms:c.terms,provider:c.provider,accountType:c.accountType}),z(!0)},be=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},qe=c=>{c.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Netflix`)},$e=r.filter(c=>c.name.toLowerCase().includes(W.toLowerCase())),i=c=>c.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(c.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",c.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),k=c=>{if(!c||typeof c!="string")return"30 días";const P=c.match(/(\d+)\s*(mes|meses)/i);if(P)return`${parseInt(P[1],10)*30} días`;const A=c.match(/(\d+)\s*(día|días|dia|dias)/i);if(A)return`${parseInt(A[1],10)} días`;const H=c.match(/(\d+)/);return H?`${parseInt(H[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ye,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${E==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!s),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:wt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(st,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:W,onChange:c=>J(c.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(ce.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:De,className:`p-2 rounded-full ${E==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:E==="dark"?e.jsx(Qa,{size:22}):e.jsx(Ga,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${E==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:be,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-500",size:20})}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),Q("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/login"),className:`px-4 py-2 text-sm ${E==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${E==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${E==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${E==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(ce.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx(ce.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${E==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!0),className:`text-sm sm:text-base ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),$e.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:$e.map(c=>e.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:c.image,alt:c.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),i(c)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${E==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:c.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Mt,{className:"text-red-500",size:13}),k(c.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:c.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[ue(re[c.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:(re[c.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${E==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Qt,{className:"text-red-500",size:13}),c.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${E==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Gt,{className:"text-red-500",size:13}),c.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("div",{className:"flex items-center mb-2",children:c.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",Ne(c.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",Ne(c.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Ae(c),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${E==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(We,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Te(c),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${E==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Ee,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(c),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(c.stock)>0||c.status==="A pedido"?"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(c.stock)<=0&&c.status!=="A pedido",children:[e.jsx(Je,{size:16}),c.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},c.id))})]})]})]}),g&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:`text-gray-300 mb-4 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",Ne(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:g.customerName,onChange:c=>B({...g,customerName:c.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Número de WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:c=>B({...g,phoneNumber:c.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"9 dígitos (sin código de país)"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-transparent border-red-500/50 rounded focus:ring-red-500/50"}),e.jsxs("label",{htmlFor:"termsCheck",className:`ml-2 text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("button",{onClick:()=>Te(g.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("div",{className:"p-3 bg-gradient-to-r from-red-900/80 to-red-800/80 border-l-4 border-red-500 rounded-xl flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-white",children:N}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T(null),className:"text-white hover:text-red-300",children:e.jsx(ft,{size:16})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-gray-300 ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60":"bg-gray-200/60 hover:bg-gray-300/60"} border border-gray-600/50 transition-all shadow-md`,children:"Cancelar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:pe,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-md`,disabled:y,children:y?e.jsx(ct,{className:"animate-spin mx-auto",size:18}):"Confirmar Compra"})]})]})]})}),D&&!$&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre del Producto"}),e.jsx("p",{className:"text-white font-semibold",children:D.name})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tipo de Cuenta"}),e.jsx("p",{className:"text-white",children:D.accountType})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Proveedor"}),e.jsx("p",{className:"text-white",children:D.provider})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Detalles de la Cuenta"}),e.jsx("p",{className:"text-white",children:D.accountDetails})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-gray-300 ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60":"bg-gray-200/60 hover:bg-gray-300/60"} border border-gray-600/50 transition-all shadow-md mt-4`,children:"Cerrar"})]})]})}),D&&$&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Producto"}),e.jsx("p",{className:"text-white font-semibold",children:D.name})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Términos"}),e.jsx("p",{className:"text-white",children:D.terms})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Proveedor"}),e.jsx("p",{className:"text-white",children:D.provider})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-gray-300 ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60":"bg-gray-200/60 hover:bg-gray-300/60"} border border-gray-600/50 transition-all shadow-md mt-4`,children:"Cerrar"})]})]})}),Z&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-white",children:[e.jsx("li",{children:"No compartir las credenciales de la cuenta con terceros."}),e.jsx("li",{children:"Las cuentas son para uso personal y no comercial."}),e.jsx("li",{children:"El proveedor puede contactarte para coordinar la entrega de los detalles de la cuenta."}),e.jsx("li",{children:"Los reembolsos están sujetos a la política del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por el mal uso de las cuentas."})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!1),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-gray-300 ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60":"bg-gray-200/60 hover:bg-gray-300/60"} border border-gray-600/50 transition-all shadow-md mt-4`,children:"Cerrar"})]})]})}),Y&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:Y.message}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-md mt-6`,children:"Aceptar"})]})})]})},nF=()=>e.jsx(rF,{children:e.jsx(aF,{})}),rS=v.createContext({theme:"dark",toggleTheme:()=>{}}),iF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const n=t==="dark"?"light":"dark";r(n),localStorage.setItem("theme",n)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(rS.Provider,{value:{theme:t,toggleTheme:a},children:s})},oF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),{theme:E,toggleTheme:De}=v.useContext(rS),Ne=c=>{const P=Number(c);return isNaN(P)?"0.00":P.toFixed(2)},ue=c=>{const P=Math.floor(c),A=c%1>=.5,H=5-P-(A?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(P)].map((se,te)=>e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${te}`)),A&&e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:E==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(H)].map((se,te)=>e.jsx(Ve,{className:E==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${te}`))]})};v.useEffect(()=>{const c=_t(Ge,async P=>{if(P)try{const A=await et(U(S,"users",P.uid));if(A.exists()){const H=A.data();d({id:P.uid,name:H.username||"Usuario",email:P.email,orders:H.orders||[],role:H.role||"user",phone:H.phone||""}),m(Number(H.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(A){T("Error al cargar datos del usuario"),console.error(A)}else d(null),m(0);j(!1)});return()=>c()},[]),v.useEffect(()=>{const c=xe(ee(S,"products"),fe("category","==","Disney")),P=ge(c,async C=>{const f=C.docs.map(w=>{const F=w.data();return{id:w.id,...F,price:Number(F.price)||0,stock:Number(F.stock||F.available||0),accountDetails:F.email||F.details||"Detalles no disponibles",terms:F.terms||"Términos del proveedor",provider:F.provider||"Proveedor no especificado",providerId:F.providerId||"",providerPhone:F.providerPhone||"",acceptsOrders:F.status==="A pedido",duration:F.duration||"1 mes",accountType:F.accountType||"No especificado",status:F.status||"En stock",image:F.image||"https://via.placeholder.com/300",renewal:F.renewal||!1,renewalPrice:Number(F.renewalPrice)||Number(F.price)*.9}}),p=await Promise.all(f.map(async w=>{let F={provider:w.provider,providerPhone:w.providerPhone};if(!w.provider||w.provider==="Proveedor no especificado")try{if(w.providerId){const O=await et(U(S,"users",w.providerId));O.exists()&&(F={provider:O.data().username||O.data().email||w.provider,providerPhone:O.data().phoneNumber||w.providerPhone})}}catch(O){console.error("Error al cargar datos del proveedor:",O)}return{...w,...F}}));a(p),q(w=>({...w,disney:p.length}))},C=>{T("Error al cargar productos de Disney+"),console.error(C)}),A=xe(ee(S,"ratings")),H=ge(A,C=>{const f={};C.docs.forEach(w=>{const F=w.data(),O=F.providerId;f[O]||(f[O]=[]),f[O].push(Number(F.rating)||0)});const p={};Object.keys(f).forEach(w=>{const F=f[w],O=F.length?F.reduce((ae,ie)=>ae+ie,0)/F.length:1;p[w]=Math.min(Math.max(O,1),5)}),X(p)},C=>{console.error("Error al cargar calificaciones de proveedores:",C)}),se=xe(ee(S,"disney_accounts"),fe("status","==","available")),te=ge(se,C=>{const f=C.docs.map(p=>({id:p.id,...p.data(),productId:p.data().productId||"",providerId:p.data().providerId||""}));l(f)},C=>{console.error("Error al cargar cuentas:",C)}),M=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(C=>{const f=C.toLowerCase().replace(/\s+/g,""),p=xe(ee(S,"products"),fe("category","==",C));return ge(p,w=>{q(F=>({...F,[f]:w.docs.length}))},w=>{console.error(`Error al cargar productos de ${C}:`,w)})});return()=>{P(),H(),te(),M.forEach(C=>C())}},[]);const je=c=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>Q("/login")});return}if(u<c.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!c.providerId||c.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}B({product:c,customerName:o.name,phoneNumber:""})},pe=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const c=g.product;if(!c.providerId||c.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let P=null;c.status==="En stock"?P=await nt(S,async A=>{const H=U(S,"products",c.id),se=await A.get(H);if(!se.exists())throw new Error("Producto no encontrado");const te=se.data();if(te.availableAccounts<=0&&te.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const I=ee(S,`products/${c.id}/accounts`),M=xe(I,fe("status","==","available"),Vt(1)),C=await jt(M);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const f=C.docs[0],p=f.ref,w=f.data(),F=U(S,"users",o.id),O=await A.get(F);if(!O.exists())throw new Error("Usuario no encontrado");const ae=U(S,"users",c.providerId),ie=await A.get(ae);if(!ie.exists())throw new Error("Proveedor no encontrado");const oe=U(S,"providerBalances",c.providerId),ne=await A.get(oe);let he=0;ne.exists()?he=parseFloat(ne.data().balance)||0:A.set(oe,{balance:0,provider:c.providerId,updatedAt:ve()});let de=c.providerPhone||"";de||(de=ie.data().phoneNumber||""),A.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),A.update(H,{availableAccounts:it(-1),stock:it(-1)});const Se=(Number(O.data().balance)||0)-c.price;if(Se<0)throw new Error("Saldo insuficiente");const xt=O.data().orders||[],Le={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},terms:c.terms,type:"disney"};A.update(F,{balance:Se,orders:[...xt,Le]});const _e=(Number(ie.data().balance)||0)+c.price,He=ie.data().sales||[],Oe={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(ae,{balance:_e,sales:[...He,Oe]});const Ft=he+c.price;A.set(oe,{balance:Ft,provider:c.providerId,updatedAt:ve()},{merge:!0});const cs=U(ee(S,"sales"));return A.set(cs,{...Le,provider:c.provider,providerId:c.providerId,providerPhone:de,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleId:Oe.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image}),w}):await nt(S,async A=>{const H=U(S,"users",o.id),se=await A.get(H);if(!se.exists())throw new Error("Usuario no encontrado");const te=U(S,"users",c.providerId),I=await A.get(te);if(!I.exists())throw new Error("Proveedor no encontrado");const M=U(S,"providerBalances",c.providerId),C=await A.get(M);let f=0;C.exists()?f=parseFloat(C.data().balance)||0:A.set(M,{balance:0,provider:c.providerId,updatedAt:ve()});let p=c.providerPhone||"";p||(p=I.data().phoneNumber||"");const F=(Number(se.data().balance)||0)-c.price;if(F<0)throw new Error("Saldo insuficiente");const O=se.data().orders||[],ae={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:c.terms,type:"disney"};A.update(H,{balance:F,orders:[...O,ae]});const oe=(Number(I.data().balance)||0)+c.price,ne=I.data().sales||[],he={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(te,{balance:oe,sales:[...ne,he]});const de=f+c.price;A.set(M,{balance:de,provider:c.providerId,updatedAt:ve()},{merge:!0});const we=U(ee(S,"sales"));A.set(we,{...ae,provider:c.provider,providerId:c.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:he.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image})}),m(A=>A-c.price),d(A=>({...A,orders:[...A.orders,{...g,status:c.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:c.status==="En stock"?{email:(P==null?void 0:P.email)||"No proporcionado",password:(P==null?void 0:P.password)||"No proporcionado",profile:(P==null?void 0:P.profile)||"No proporcionado",pin:(P==null?void 0:P.pin)||"No proporcionado"}:null}]})),B(null),V({message:c.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(c){T(c.message||"Error al procesar la compra"),console.error("Error en la compra:",c)}finally{j(!1)}},Ae=c=>{R({name:c.name,accountDetails:c.accountDetails,provider:c.provider,terms:c.terms,accountType:c.accountType})},Te=c=>{R({name:c.name,terms:c.terms,provider:c.provider,accountType:c.accountType}),z(!0)},be=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},qe=c=>{c.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Disney`)},$e=r.filter(c=>c.name.toLowerCase().includes(W.toLowerCase())),i=c=>c.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(c.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",c.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),k=c=>{if(!c||typeof c!="string")return"30 días";const P=c.match(/(\d+)\s*(mes|meses)/i);if(P)return`${parseInt(P[1],10)*30} días`;const A=c.match(/(\d+)\s*(día|días|dia|dias)/i);if(A)return`${parseInt(A[1],10)} días`;const H=c.match(/(\d+)/);return H?`${parseInt(H[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ye,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${E==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!s),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:wt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(st,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:W,onChange:c=>J(c.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(ce.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:De,className:`p-2 rounded-full ${E==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:E==="dark"?e.jsx(Qa,{size:22}):e.jsx(Ga,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${E==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:be,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-500",size:20})}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),Q("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/login"),className:`px-4 py-2 text-sm ${E==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${E==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${E==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${E==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(ce.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx(ce.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${E==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas, series y contenido exclusivo con nuestras cuentas premium de Disney+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!0),className:`text-sm sm:text-base ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),$e.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:$e.map(c=>e.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:c.image,alt:c.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),i(c)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${E==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:c.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Mt,{className:"text-red-500",size:13}),k(c.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:c.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[ue(re[c.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:(re[c.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${E==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Qt,{className:"text-red-500",size:13}),c.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${E==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Gt,{className:"text-red-500",size:13}),c.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:c.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",Ne(c.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",Ne(c.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Ae(c),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${E==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(We,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Te(c),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${E==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Ee,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(c),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(c.stock)>0||c.status==="A pedido"?"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(c.stock)<=0&&c.status!=="A pedido",children:[e.jsx(Je,{size:16}),c.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},c.id))})]})]})]}),g&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:`text-gray-300 mb-4 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",Ne(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:g.customerName,onChange:c=>B({...g,customerName:c.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Número de WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:c=>B({...g,phoneNumber:c.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"9 dígitos (sin código de país)"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-transparent border-red-500/50 rounded focus:ring-red-500/50"}),e.jsxs("label",{htmlFor:"termsCheck",className:`ml-2 text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("button",{onClick:()=>Te(g.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:N})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:pe,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:y,children:y?e.jsx(ct,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),D&&!$&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:D.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),D&&$&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:D.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",D.terms]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Z&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:E==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Y&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Y.message}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})})]})};function lF(){return e.jsx(iF,{children:e.jsx(oF,{})})}const aS=v.createContext({theme:"dark",toggleTheme:()=>{}}),cF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const n=t==="dark"?"light":"dark";r(n),localStorage.setItem("theme",n)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(aS.Provider,{value:{theme:t,toggleTheme:a},children:s})},dF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),{theme:E,toggleTheme:De}=v.useContext(aS),Ne=c=>{const P=Number(c);return isNaN(P)?"0.00":P.toFixed(2)},ue=c=>{const P=Math.floor(c),A=c%1>=.5,H=5-P-(A?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(P)].map((se,te)=>e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${te}`)),A&&e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:E==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(H)].map((se,te)=>e.jsx(Ve,{className:E==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${te}`))]})};v.useEffect(()=>{const c=_t(Ge,async P=>{if(P)try{const A=await et(U(S,"users",P.uid));if(A.exists()){const H=A.data();d({id:P.uid,name:H.username||"Usuario",email:P.email,orders:H.orders||[],role:H.role||"user",phone:H.phone||""}),m(Number(H.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(A){T("Error al cargar datos del usuario"),console.error(A)}else d(null),m(0);j(!1)});return()=>c()},[]),v.useEffect(()=>{const c=xe(ee(S,"products"),fe("category","==","Max")),P=ge(c,async C=>{const f=C.docs.map(w=>{const F=w.data();return{id:w.id,...F,price:Number(F.price)||0,stock:Number(F.stock||F.available||0),accountDetails:F.email||F.details||"Detalles no disponibles",terms:F.terms||"Términos del proveedor",provider:F.provider||"Proveedor no especificado",providerId:F.providerId||"",providerPhone:F.providerPhone||"",acceptsOrders:F.status==="A pedido",duration:F.duration||"1 mes",accountType:F.accountType||"No especificado",status:F.status||"En stock",image:F.image||"https://via.placeholder.com/300",renewal:F.renewal||!1,renewalPrice:Number(F.renewalPrice)||Number(F.price)*.9}}),p=await Promise.all(f.map(async w=>{let F={provider:w.provider,providerPhone:w.providerPhone};if(!w.provider||w.provider==="Proveedor no especificado")try{if(w.providerId){const O=await et(U(S,"users",w.providerId));O.exists()&&(F={provider:O.data().username||O.data().email||w.provider,providerPhone:O.data().phoneNumber||w.providerPhone})}}catch(O){console.error("Error al cargar datos del proveedor:",O)}return{...w,...F}}));a(p),q(w=>({...w,max:p.length}))},C=>{T("Error al cargar productos de Max"),console.error(C)}),A=xe(ee(S,"ratings")),H=ge(A,C=>{const f={};C.docs.forEach(w=>{const F=w.data(),O=F.providerId;f[O]||(f[O]=[]),f[O].push(Number(F.rating)||0)});const p={};Object.keys(f).forEach(w=>{const F=f[w],O=F.length?F.reduce((ae,ie)=>ae+ie,0)/F.length:1;p[w]=Math.min(Math.max(O,1),5)}),X(p)},C=>{console.error("Error al cargar calificaciones de proveedores:",C)}),se=xe(ee(S,"max_accounts"),fe("status","==","available")),te=ge(se,C=>{const f=C.docs.map(p=>({id:p.id,...p.data(),productId:p.data().productId||"",providerId:p.data().providerId||""}));l(f)},C=>{console.error("Error al cargar cuentas:",C)}),M=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(C=>{const f=C.toLowerCase().replace(/\s+/g,""),p=xe(ee(S,"products"),fe("category","==",C));return ge(p,w=>{q(F=>({...F,[f]:w.docs.length}))},w=>{console.error(`Error al cargar productos de ${C}:`,w)})});return()=>{P(),H(),te(),M.forEach(C=>C())}},[]);const je=c=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>Q("/login")});return}if(u<c.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!c.providerId||c.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}B({product:c,customerName:o.name,phoneNumber:""})},pe=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const c=g.product;if(!c.providerId||c.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let P=null;c.status==="En stock"?P=await nt(S,async A=>{const H=U(S,"products",c.id),se=await A.get(H);if(!se.exists())throw new Error("Producto no encontrado");const te=se.data();if(te.availableAccounts<=0&&te.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const I=ee(S,`products/${c.id}/accounts`),M=xe(I,fe("status","==","available"),Vt(1)),C=await jt(M);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const f=C.docs[0],p=f.ref,w=f.data(),F=U(S,"users",o.id),O=await A.get(F);if(!O.exists())throw new Error("Usuario no encontrado");const ae=U(S,"users",c.providerId),ie=await A.get(ae);if(!ie.exists())throw new Error("Proveedor no encontrado");const oe=U(S,"providerBalances",c.providerId),ne=await A.get(oe);let he=0;ne.exists()?he=parseFloat(ne.data().balance)||0:A.set(oe,{balance:0,provider:c.providerId,updatedAt:ve()});let de=c.providerPhone||"";de||(de=ie.data().phoneNumber||""),A.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),A.update(H,{availableAccounts:it(-1),stock:it(-1)});const Se=(Number(O.data().balance)||0)-c.price;if(Se<0)throw new Error("Saldo insuficiente");const xt=O.data().orders||[],Le={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},terms:c.terms,type:"max"};A.update(F,{balance:Se,orders:[...xt,Le]});const _e=(Number(ie.data().balance)||0)+c.price,He=ie.data().sales||[],Oe={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(ae,{balance:_e,sales:[...He,Oe]});const Ft=he+c.price;A.set(oe,{balance:Ft,provider:c.providerId,updatedAt:ve()},{merge:!0});const cs=U(ee(S,"sales"));return A.set(cs,{...Le,provider:c.provider,providerId:c.providerId,providerPhone:de,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleId:Oe.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image}),w}):await nt(S,async A=>{const H=U(S,"users",o.id),se=await A.get(H);if(!se.exists())throw new Error("Usuario no encontrado");const te=U(S,"users",c.providerId),I=await A.get(te);if(!I.exists())throw new Error("Proveedor no encontrado");const M=U(S,"providerBalances",c.providerId),C=await A.get(M);let f=0;C.exists()?f=parseFloat(C.data().balance)||0:A.set(M,{balance:0,provider:c.providerId,updatedAt:ve()});let p=c.providerPhone||"";p||(p=I.data().phoneNumber||"");const F=(Number(se.data().balance)||0)-c.price;if(F<0)throw new Error("Saldo insuficiente");const O=se.data().orders||[],ae={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:c.terms,type:"max"};A.update(H,{balance:F,orders:[...O,ae]});const oe=(Number(I.data().balance)||0)+c.price,ne=I.data().sales||[],he={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(te,{balance:oe,sales:[...ne,he]});const de=f+c.price;A.set(M,{balance:de,provider:c.providerId,updatedAt:ve()},{merge:!0});const we=U(ee(S,"sales"));A.set(we,{...ae,provider:c.provider,providerId:c.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:he.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image})}),m(A=>A-c.price),d(A=>({...A,orders:[...A.orders,{...g,status:c.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:c.status==="En stock"?{email:(P==null?void 0:P.email)||"No proporcionado",password:(P==null?void 0:P.password)||"No proporcionado",profile:(P==null?void 0:P.profile)||"No proporcionado",pin:(P==null?void 0:P.pin)||"No proporcionado"}:null}]})),B(null),V({message:c.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(c){T(c.message||"Error al procesar la compra"),console.error("Error en la compra:",c)}finally{j(!1)}},Ae=c=>{R({name:c.name,accountDetails:c.accountDetails,provider:c.provider,terms:c.terms,accountType:c.accountType})},Te=c=>{R({name:c.name,terms:c.terms,provider:c.provider,accountType:c.accountType}),z(!0)},be=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},qe=c=>{c.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Max`)},$e=r.filter(c=>c.name.toLowerCase().includes(W.toLowerCase())),i=c=>c.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(c.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",c.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),k=c=>{if(!c||typeof c!="string")return"30 días";const P=c.match(/(\d+)\s*(mes|meses)/i);if(P)return`${parseInt(P[1],10)*30} días`;const A=c.match(/(\d+)\s*(día|días|dia|dias)/i);if(A)return`${parseInt(A[1],10)} días`;const H=c.match(/(\d+)/);return H?`${parseInt(H[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ye,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${E==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!s),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:wt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(st,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Max...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:W,onChange:c=>J(c.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(ce.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:De,className:`p-2 rounded-full ${E==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:E==="dark"?e.jsx(Qa,{size:22}):e.jsx(Ga,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${E==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:be,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-500",size:20})}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),Q("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/login"),className:`px-4 py-2 text-sm ${E==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${E==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${E==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${E==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(ce.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx(ce.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${E==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo con nuestras cuentas premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!0),className:`text-sm sm:text-base ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),$e.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:$e.map(c=>e.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:c.image,alt:c.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),i(c)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${E==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:c.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${E==="dark"?text-gray-300:"text-gray-600"}`,children:[e.jsx(Mt,{className:"text-red-500",size:14}),k(c.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:c.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:c.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:c.provider})]}),re[c.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(re[c.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",Ne(c.price)]}),c.renewal&&e.jsxs("span",{className:`text-xs ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",Ne(c.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Ae(c),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(c),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:c.stock<=0&&!c.acceptsOrders,children:c.stock<=0&&!c.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Te(c),className:`mt-3 text-sm ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},c.id))})]})]})]}),g&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:g.product.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",Ne(g.product.price)]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",g.product.provider]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",k(g.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:c=>B({...g,customerName:c.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:c=>B({...g,phoneNumber:c.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>Te(g.product),className:`cursor-pointer underline ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),N&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:N})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:pe,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:y,children:y?e.jsx(ct,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),D&&!$&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:D.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),D&&$&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:D.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",D.terms]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Z&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:E==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Y&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Y.message}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})})]})};function uF(){return e.jsx(cF,{children:e.jsx(dF,{})})}const nS=v.createContext({theme:"dark",toggleTheme:()=>{}}),xF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const n=t==="dark"?"light":"dark";r(n),localStorage.setItem("theme",n)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(nS.Provider,{value:{theme:t,toggleTheme:a},children:s})},mF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),{theme:E,toggleTheme:De}=v.useContext(nS),Ne=c=>{const P=Number(c);return isNaN(P)?"0.00":P.toFixed(2)},ue=c=>{const P=Math.floor(c),A=c%1>=.5,H=5-P-(A?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(P)].map((se,te)=>e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${te}`)),A&&e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:E==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(H)].map((se,te)=>e.jsx(Ve,{className:E==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${te}`))]})};v.useEffect(()=>{const c=_t(Ge,async P=>{if(P)try{const A=await et(U(S,"users",P.uid));if(A.exists()){const H=A.data();d({id:P.uid,name:H.username||"Usuario",email:P.email,orders:H.orders||[],role:H.role||"user",phone:H.phone||""}),m(Number(H.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(A){T("Error al cargar datos del usuario"),console.error(A)}else d(null),m(0);j(!1)});return()=>c()},[]),v.useEffect(()=>{const c=xe(ee(S,"products"),fe("category","==","Spotify")),P=ge(c,async C=>{const f=C.docs.map(w=>{const F=w.data();return{id:w.id,...F,price:Number(F.price)||0,stock:Number(F.stock||F.available||0),accountDetails:F.email||F.details||"Detalles no disponibles",terms:F.terms||"Términos del proveedor",provider:F.provider||"Proveedor no especificado",providerId:F.providerId||"",providerPhone:F.providerPhone||"",acceptsOrders:F.status==="A pedido",duration:F.duration||"1 mes",accountType:F.accountType||"No especificado",status:F.status||"En stock",image:F.image||"https://via.placeholder.com/300",renewal:F.renewal||!1,renewalPrice:Number(F.renewalPrice)||Number(F.price)*.9}}),p=await Promise.all(f.map(async w=>{let F={provider:w.provider,providerPhone:w.providerPhone};if(!w.provider||w.provider==="Proveedor no especificado")try{if(w.providerId){const O=await et(U(S,"users",w.providerId));O.exists()&&(F={provider:O.data().username||O.data().email||w.provider,providerPhone:O.data().phoneNumber||w.providerPhone})}}catch(O){console.error("Error al cargar datos del proveedor:",O)}return{...w,...F}}));a(p),q(w=>({...w,spotify:p.length}))},C=>{T("Error al cargar productos de Spotify"),console.error(C)}),A=xe(ee(S,"ratings")),H=ge(A,C=>{const f={};C.docs.forEach(w=>{const F=w.data(),O=F.providerId;f[O]||(f[O]=[]),f[O].push(Number(F.rating)||0)});const p={};Object.keys(f).forEach(w=>{const F=f[w],O=F.length?F.reduce((ae,ie)=>ae+ie,0)/F.length:1;p[w]=Math.min(Math.max(O,1),5)}),X(p)},C=>{console.error("Error al cargar calificaciones de proveedores:",C)}),se=xe(ee(S,"spotify_accounts"),fe("status","==","available")),te=ge(se,C=>{const f=C.docs.map(p=>({id:p.id,...p.data(),productId:p.data().productId||"",providerId:p.data().providerId||""}));l(f)},C=>{console.error("Error al cargar cuentas:",C)}),M=["Netflix","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(C=>{const f=C.toLowerCase().replace(/\s+/g,""),p=xe(ee(S,"products"),fe("category","==",C));return ge(p,w=>{q(F=>({...F,[f]:w.docs.length}))},w=>{console.error(`Error al cargar productos de ${C}:`,w)})});return()=>{P(),H(),te(),M.forEach(C=>C())}},[]);const je=c=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>Q("/login")});return}if(u<c.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!c.providerId||c.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}B({product:c,customerName:o.name,phoneNumber:""})},pe=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const c=g.product;if(!c.providerId||c.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let P=null;c.status==="En stock"?P=await nt(S,async A=>{const H=U(S,"products",c.id),se=await A.get(H);if(!se.exists())throw new Error("Producto no encontrado");const te=se.data();if(te.availableAccounts<=0&&te.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const I=ee(S,`products/${c.id}/accounts`),M=xe(I,fe("status","==","available"),Vt(1)),C=await jt(M);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const f=C.docs[0],p=f.ref,w=f.data(),F=U(S,"users",o.id),O=await A.get(F);if(!O.exists())throw new Error("Usuario no encontrado");const ae=U(S,"users",c.providerId),ie=await A.get(ae);if(!ie.exists())throw new Error("Proveedor no encontrado");const oe=U(S,"providerBalances",c.providerId),ne=await A.get(oe);let he=0;ne.exists()?he=parseFloat(ne.data().balance)||0:A.set(oe,{balance:0,provider:c.providerId,updatedAt:ve()});let de=c.providerPhone||"";de||(de=ie.data().phoneNumber||""),A.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),A.update(H,{availableAccounts:it(-1),stock:it(-1)});const Se=(Number(O.data().balance)||0)-c.price;if(Se<0)throw new Error("Saldo insuficiente");const xt=O.data().orders||[],Le={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},terms:c.terms,type:"spotify"};A.update(F,{balance:Se,orders:[...xt,Le]});const _e=(Number(ie.data().balance)||0)+c.price,He=ie.data().sales||[],Oe={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(ae,{balance:_e,sales:[...He,Oe]});const Ft=he+c.price;A.set(oe,{balance:Ft,provider:c.providerId,updatedAt:ve()},{merge:!0});const cs=U(ee(S,"sales"));return A.set(cs,{...Le,provider:c.provider,providerId:c.providerId,providerPhone:de,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleId:Oe.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image}),w}):await nt(S,async A=>{const H=U(S,"users",o.id),se=await A.get(H);if(!se.exists())throw new Error("Usuario no encontrado");const te=U(S,"users",c.providerId),I=await A.get(te);if(!I.exists())throw new Error("Proveedor no encontrado");const M=U(S,"providerBalances",c.providerId),C=await A.get(M);let f=0;C.exists()?f=parseFloat(C.data().balance)||0:A.set(M,{balance:0,provider:c.providerId,updatedAt:ve()});let p=c.providerPhone||"";p||(p=I.data().phoneNumber||"");const F=(Number(se.data().balance)||0)-c.price;if(F<0)throw new Error("Saldo insuficiente");const O=se.data().orders||[],ae={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:c.terms,type:"spotify"};A.update(H,{balance:F,orders:[...O,ae]});const oe=(Number(I.data().balance)||0)+c.price,ne=I.data().sales||[],he={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(te,{balance:oe,sales:[...ne,he]});const de=f+c.price;A.set(M,{balance:de,provider:c.providerId,updatedAt:ve()},{merge:!0});const we=U(ee(S,"sales"));A.set(we,{...ae,provider:c.provider,providerId:c.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:he.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image})}),m(A=>A-c.price),d(A=>({...A,orders:[...A.orders,{...g,status:c.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:c.status==="En stock"?{email:(P==null?void 0:P.email)||"No proporcionado",password:(P==null?void 0:P.password)||"No proporcionado",profile:(P==null?void 0:P.profile)||"No proporcionado",pin:(P==null?void 0:P.pin)||"No proporcionado"}:null}]})),B(null),V({message:c.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(c){T(c.message||"Error al procesar la compra"),console.error("Error en la compra:",c)}finally{j(!1)}},Ae=c=>{R({name:c.name,accountDetails:c.accountDetails,provider:c.provider,terms:c.terms,accountType:c.accountType})},Te=c=>{R({name:c.name,terms:c.terms,provider:c.provider,accountType:c.accountType}),z(!0)},be=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},qe=c=>{c.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Spotify`)},$e=r.filter(c=>c.name.toLowerCase().includes(W.toLowerCase())),i=c=>c.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(c.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",c.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),k=c=>{if(!c||typeof c!="string")return"30 días";const P=c.match(/(\d+)\s*(mes|meses)/i);if(P)return`${parseInt(P[1],10)*30} días`;const A=c.match(/(\d+)\s*(día|días|dia|dias)/i);if(A)return`${parseInt(A[1],10)} días`;const H=c.match(/(\d+)/);return H?`${parseInt(H[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ye,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${E==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!s),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:wt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(st,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:W,onChange:c=>J(c.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(ce.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:De,className:`p-2 rounded-full ${E==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:E==="dark"?e.jsx(Qa,{size:22}):e.jsx(Ga,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${E==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:be,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-500",size:20})}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),Q("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/login"),className:`px-4 py-2 text-sm ${E==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${E==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${E==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${E==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616531770192-6b04a0c365ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(ce.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx(ce.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${E==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Escucha tu música favorita sin anuncios con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!0),className:`text-sm sm:text-base ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),$e.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:$e.map(c=>e.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:c.image,alt:c.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),i(c)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${E==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:c.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Mt,{className:"text-red-500",size:13}),k(c.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:c.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[ue(re[c.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:(re[c.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${E==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(Qt,{className:"text-red-500",size:13}),c.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${E==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Gt,{className:"text-red-500",size:13}),c.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:c.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",Ne(c.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",Ne(c.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Ae(c),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${E==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(We,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Te(c),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${E==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Ee,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(c),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(c.stock)>0||c.status==="A pedido"?"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(c.stock)<=0&&c.status!=="A pedido",children:[e.jsx(Je,{size:16}),c.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},c.id))})]})]})]}),g&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:`text-gray-300 mb-4 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",Ne(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:g.customerName,onChange:c=>B({...g,customerName:c.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Número de WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:c=>B({...g,phoneNumber:c.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"9 dígitos (sin código de país)"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-transparent border-red-500/50 rounded focus:ring-red-500/50"}),e.jsxs("label",{htmlFor:"termsCheck",className:`ml-2 text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("button",{onClick:()=>Te(g.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("div",{className:"p-3 bg-gradient-to-r from-red-900/80 to-red-700/80 rounded-lg flex items-center gap-2",children:[e.jsx(Ye,{className:"text-red-400",size:20}),e.jsx("p",{className:"text-sm text-white",children:N})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-gray-600/50 shadow-inner`,children:"Cancelar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:pe,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} text-white shadow-lg transition-all`,disabled:y,children:y?e.jsx(ct,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),D&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Producto"}),e.jsx("p",{className:"text-white font-semibold",children:D.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tipo de Cuenta"}),e.jsx("p",{className:"text-white font-semibold",children:D.accountType})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Proveedor"}),e.jsx("p",{className:"text-white font-semibold",children:D.provider})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Detalles"}),e.jsx("p",{className:"text-white font-semibold",children:D.accountDetails})]}),$&&e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Términos y Condiciones"}),e.jsx("p",{className:"text-white font-semibold",children:D.terms})]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{R(null),z(!1)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-gray-600/50 shadow-inner`,children:"Cerrar"})]})}),Z&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsx("p",{className:"text-sm",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos:"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm space-y-2",children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor."}),e.jsx("li",{children:"No se aceptan reembolsos una vez entregada la cuenta."}),e.jsx("li",{children:"El proveedor se contactará contigo para coordinar los detalles de acceso."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por mal uso de las cuentas."})]})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-gray-600/50 shadow-inner`,children:"Cerrar"})]})}),Y&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-4",children:Y.message}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-gray-600/50 shadow-inner`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${E==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function hF(){return e.jsx(xF,{children:e.jsx(mF,{})})}const iS=v.createContext({theme:"dark",toggleTheme:()=>{}}),pF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const n=t==="dark"?"light":"dark";r(n),localStorage.setItem("theme",n)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(iS.Provider,{value:{theme:t,toggleTheme:a},children:s})},fF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),{theme:E,toggleTheme:De}=v.useContext(iS),Ne=c=>{const P=Number(c);return isNaN(P)?"0.00":P.toFixed(2)},ue=c=>{const P=Math.floor(c),A=c%1>=.5,H=5-P-(A?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(P)].map((se,te)=>e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${te}`)),A&&e.jsx(Ve,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:E==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(H)].map((se,te)=>e.jsx(Ve,{className:E==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${te}`))]})};v.useEffect(()=>{const c=_t(Ge,async P=>{if(P)try{const A=await et(U(S,"users",P.uid));if(A.exists()){const H=A.data();d({id:P.uid,name:H.username||"Usuario",email:P.email,orders:H.orders||[],role:H.role||"user",phone:H.phone||""}),m(Number(H.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(A){T("Error al cargar datos del usuario"),console.error(A)}else d(null),m(0);j(!1)});return()=>c()},[]),v.useEffect(()=>{const c=xe(ee(S,"products"),fe("category","==","Prime Video")),P=ge(c,async C=>{const f=C.docs.map(w=>{const F=w.data();return{id:w.id,...F,price:Number(F.price)||0,stock:Number(F.stock||F.available||0),accountDetails:F.email||F.details||"Detalles no disponibles",terms:F.terms||"Términos del proveedor",provider:F.provider||"Proveedor no especificado",providerId:F.providerId||"",providerPhone:F.providerPhone||"",acceptsOrders:F.status==="A pedido",duration:F.duration||"1 mes",accountType:F.accountType||"No especificado",status:F.status||"En stock",image:F.image||"https://via.placeholder.com/300",renewal:F.renewal||!1,renewalPrice:Number(F.renewalPrice)||Number(F.price)*.9}}),p=await Promise.all(f.map(async w=>{let F={provider:w.provider,providerPhone:w.providerPhone};if(!w.provider||w.provider==="Proveedor no especificado")try{if(w.providerId){const O=await et(U(S,"users",w.providerId));O.exists()&&(F={provider:O.data().username||O.data().email||w.provider,providerPhone:O.data().phoneNumber||w.providerPhone})}}catch(O){console.error("Error al cargar datos del proveedor:",O)}return{...w,...F}}));a(p),q(w=>({...w,primevideo:p.length}))},C=>{T("Error al cargar productos de Prime Video"),console.error(C)}),A=xe(ee(S,"ratings")),H=ge(A,C=>{const f={};C.docs.forEach(w=>{const F=w.data(),O=F.providerId;f[O]||(f[O]=[]),f[O].push(Number(F.rating)||0)});const p={};Object.keys(f).forEach(w=>{const F=f[w],O=F.length?F.reduce((ae,ie)=>ae+ie,0)/F.length:1;p[w]=Math.min(Math.max(O,1),5)}),X(p)},C=>{console.error("Error al cargar calificaciones de proveedores:",C)}),se=xe(ee(S,"primevideo_accounts"),fe("status","==","available")),te=ge(se,C=>{const f=C.docs.map(p=>({id:p.id,...p.data(),productId:p.data().productId||"",providerId:p.data().providerId||""}));l(f)},C=>{console.error("Error al cargar cuentas:",C)}),M=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(C=>{const f=C.toLowerCase().replace(/\s+/g,""),p=xe(ee(S,"products"),fe("category","==",C));return ge(p,w=>{q(F=>({...F,[f]:w.docs.length}))},w=>{console.error(`Error al cargar productos de ${C}:`,w)})});return()=>{P(),H(),te(),M.forEach(C=>C())}},[]);const je=c=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>Q("/login")});return}if(u<c.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!c.providerId||c.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}B({product:c,customerName:o.name,phoneNumber:""})},pe=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const c=g.product;if(!c.providerId||c.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let P=null;c.status==="En stock"?P=await nt(S,async A=>{const H=U(S,"products",c.id),se=await A.get(H);if(!se.exists())throw new Error("Producto no encontrado");const te=se.data();if(te.availableAccounts<=0&&te.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const I=ee(S,`products/${c.id}/accounts`),M=xe(I,fe("status","==","available"),Vt(1)),C=await jt(M);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const f=C.docs[0],p=f.ref,w=f.data(),F=U(S,"users",o.id),O=await A.get(F);if(!O.exists())throw new Error("Usuario no encontrado");const ae=U(S,"users",c.providerId),ie=await A.get(ae);if(!ie.exists())throw new Error("Proveedor no encontrado");const oe=U(S,"providerBalances",c.providerId),ne=await A.get(oe);let he=0;ne.exists()?he=parseFloat(ne.data().balance)||0:A.set(oe,{balance:0,provider:c.providerId,updatedAt:ve()});let de=c.providerPhone||"";de||(de=ie.data().phoneNumber||""),A.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),A.update(H,{availableAccounts:it(-1),stock:it(-1)});const Se=(Number(O.data().balance)||0)-c.price;if(Se<0)throw new Error("Saldo insuficiente");const xt=O.data().orders||[],Le={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},terms:c.terms,type:"primevideo"};A.update(F,{balance:Se,orders:[...xt,Le]});const _e=(Number(ie.data().balance)||0)+c.price,He=ie.data().sales||[],Oe={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:de,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(ae,{balance:_e,sales:[...He,Oe]});const Ft=he+c.price;A.set(oe,{balance:Ft,provider:c.providerId,updatedAt:ve()},{merge:!0});const cs=U(ee(S,"sales"));return A.set(cs,{...Le,provider:c.provider,providerId:c.providerId,providerPhone:de,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:w.email||"No proporcionado",password:w.password||"No proporcionado",profile:w.profile||"No proporcionado",pin:w.pin||"No proporcionado"},saleId:Oe.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image}),w}):await nt(S,async A=>{const H=U(S,"users",o.id),se=await A.get(H);if(!se.exists())throw new Error("Usuario no encontrado");const te=U(S,"users",c.providerId),I=await A.get(te);if(!I.exists())throw new Error("Proveedor no encontrado");const M=U(S,"providerBalances",c.providerId),C=await A.get(M);let f=0;C.exists()?f=parseFloat(C.data().balance)||0:A.set(M,{balance:0,provider:c.providerId,updatedAt:ve()});let p=c.providerPhone||"";p||(p=I.data().phoneNumber||"");const F=(Number(se.data().balance)||0)-c.price;if(F<0)throw new Error("Saldo insuficiente");const O=se.data().orders||[],ae={productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:c.terms,type:"primevideo"};A.update(H,{balance:F,orders:[...O,ae]});const oe=(Number(I.data().balance)||0)+c.price,ne=I.data().sales||[],he={saleId:U(ee(S,"sales")).id,productId:c.id,productName:c.name,price:c.price,renewalPrice:c.renewalPrice,provider:c.provider,providerId:c.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image};A.update(te,{balance:oe,sales:[...ne,he]});const de=f+c.price;A.set(M,{balance:de,provider:c.providerId,updatedAt:ve()},{merge:!0});const we=U(ee(S,"sales"));A.set(we,{...ae,provider:c.provider,providerId:c.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:he.saleId,terms:c.terms,generalDetails:c.accountDetails,productUrl:c.image})}),m(A=>A-c.price),d(A=>({...A,orders:[...A.orders,{...g,status:c.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:c.status==="En stock"?{email:(P==null?void 0:P.email)||"No proporcionado",password:(P==null?void 0:P.password)||"No proporcionado",profile:(P==null?void 0:P.profile)||"No proporcionado",pin:(P==null?void 0:P.pin)||"No proporcionado"}:null}]})),B(null),V({message:c.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(c){T(c.message||"Error al procesar la compra"),console.error("Error en la compra:",c)}finally{j(!1)}},Ae=c=>{R({name:c.name,accountDetails:c.accountDetails,provider:c.provider,terms:c.terms,accountType:c.accountType})},Te=c=>{R({name:c.name,terms:c.terms,provider:c.provider,accountType:c.accountType}),z(!0)},be=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},qe=c=>{c.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Prime Video`)},$e=r.filter(c=>c.name.toLowerCase().includes(W.toLowerCase())),i=c=>c.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(c.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",c.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),k=c=>{if(!c||typeof c!="string")return"30 días";const P=c.match(/(\d+)\s*(mes|meses)/i);if(P)return`${parseInt(P[1],10)*30} días`;const A=c.match(/(\d+)\s*(día|días|dia|dias)/i);if(A)return`${parseInt(A[1],10)} días`;const H=c.match(/(\d+)/);return H?`${parseInt(H[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ye,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${E==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${E==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!s),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:wt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(st,{className:`absolute top-3 left-3 ${E==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${E==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:W,onChange:c=>J(c.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(ce.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:De,className:`p-2 rounded-full ${E==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:E==="dark"?e.jsx(Qa,{size:22}):e.jsx(Ga,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${E==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:be,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-500",size:20})}),e.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),Q("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/login"),className:`px-4 py-2 text-sm ${E==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Q("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${E==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${E==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${E==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${E==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${E==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${E==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(ce.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx(ce.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${E==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!0),className:`text-sm sm:text-base ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),$e.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:$e.map(c=>e.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(ce.img,{whileHover:{scale:1.1},src:c.image,alt:c.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),i(c)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${E==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:c.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Mt,{className:"text-red-500",size:14}),k(c.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:c.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:c.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:c.provider})]}),re[c.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(re[c.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",Ne(c.price)]}),c.renewal&&e.jsxs("span",{className:`text-xs ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",Ne(c.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Ae(c),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(c),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:c.stock<=0&&!c.acceptsOrders,children:c.stock<=0&&!c.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Te(c),className:`mt-3 text-sm ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},c.id))})]})]})]}),g&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:g.product.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",Ne(g.product.price)]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",g.product.provider]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",k(g.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:c=>B({...g,customerName:c.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:c=>B({...g,phoneNumber:c.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${E==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>Te(g.product),className:`cursor-pointer underline ${E==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),N&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:N})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${E==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:pe,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:y,children:y?e.jsx(ct,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),D&&!$&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:D.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",D.accountDetails]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",D.provider]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg mt-4`,children:"Cerrar"})]})]})}),D&&$&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:D.name}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",D.terms]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg mt-4`,children:"Cerrar"})]})]})}),Z&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"} list-disc pl-5 space-y-2`,children:[e.jsx("li",{children:"Las cuentas son de uso personal y no deben compartirse."}),e.jsx("li",{children:"Los tiempos de entrega pueden variar según el proveedor."}),e.jsx("li",{children:"No se aceptan reembolsos una vez entregada la cuenta, salvo en casos de fallos verificados."}),e.jsx("li",{children:"El proveedor se contactará contigo para coordinar los detalles de acceso."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por el mal uso de las cuentas."})]}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(!1),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg mt-4`,children:"Cerrar"})]})]})}),Y&&e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${E==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${E==="dark"?"text-gray-300":"text-gray-600"} mb-4`,children:Y.message}),e.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${E==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`mt-auto py-6 border-t ${E==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md`,children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-0",children:[e.jsx("img",{src:wt,alt:"SZ Streaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${E==="dark"?"text-gray-300":"text-gray-600"}`,children:"SZ Streaming © 2025"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(b,{to:"/terms",className:`text-sm ${E==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Términos"}),e.jsx(b,{to:"/privacy",className:`text-sm ${E==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Privacidad"}),e.jsx(b,{to:"/contact",className:`text-sm ${E==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Contacto"})]})]})})]})},gF=()=>e.jsx(pF,{children:e.jsx(fF,{})}),yF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-red-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-red-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Vix")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,vix:C.length}))},I=>{T("Error al cargar productos de Vix"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"vix_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"vix"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"vix"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Vix`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a4a73a3a9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de telenovelas, películas y series en español con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-500 hover:text-red-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,0,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-500 bg-red-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-red-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-red-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-red-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-red-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-red-500 via-red-600 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},bF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-teal-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-teal-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Canva")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,canva:C.length}))},I=>{T("Error al cargar productos de Canva"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"canva_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"canva"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"canva"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Canva`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-teal-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-teal-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-4b5f9f2972d9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Canva"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea diseños profesionales con acceso a todas las herramientas y plantillas de Canva Pro"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-teal-500 hover:text-teal-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(13,148,136,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-teal-500 bg-teal-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-teal-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-teal-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-teal-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-teal-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-teal-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-teal-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-teal-500 via-teal-600 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded focus:ring-teal-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-teal-500 hover:text-teal-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-teal-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},vF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-green-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","ChatGPT")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,chatgpt:C.length}))},I=>{T("Error al cargar productos de ChatGPT"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"chatgpt_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"chatgpt"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"chatgpt"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=ChatGPT`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1677442136019-2d7430f771bb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de ChatGPT"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a las funciones avanzadas de ChatGPT Plus para conversaciones más inteligentes y productivas"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(13,148,136,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-green-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-green-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-green-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-lime-500 hover:from-green-600 hover:to-lime-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-green-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},jF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-orange-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-orange-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Crunchyroll")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,crunchyroll:C.length}))},I=>{T("Error al cargar productos de Crunchyroll"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"crunchyroll_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"crunchyroll"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"crunchyroll"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Crunchyroll`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-orange-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-orange-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-orange-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-orange-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-orange-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753974-8d9f3044f8b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de anime, manga y series asiáticas sin anuncios con nuestras cuentas premium de Crunchyroll"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-orange-500 hover:text-orange-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,165,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-orange-500 bg-orange-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-orange-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-orange-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-orange-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-orange-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-orange-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-orange-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-orange-500 via-orange-600 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-orange-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-500 bg-gray-700 border-gray-600 rounded focus:ring-orange-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-orange-500 hover:text-orange-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-orange-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-orange-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-orange-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-orange-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-orange-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Aceptar"})})]})})]})},NF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-pink-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-pink-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Redes Sociales")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,redessociales:C.length}))},I=>{T("Error al cargar productos de Redes Sociales"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"redessociales_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"redessociales"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"redessociales"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Redes Sociales`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-pink-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-pink-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-600/80 hover:bg-pink-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-600/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-7d873e6e8b58?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de funciones exclusivas en tus plataformas favoritas de redes sociales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-pink-500 hover:text-pink-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(244,114,182,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-pink-500 bg-pink-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-pink-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-pink-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-pink-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-pink-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-pink-500 via-pink-600 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-500 bg-gray-700 border-gray-600 rounded focus:ring-pink-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-pink-500 hover:text-pink-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-pink-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-pink-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},wF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-green-400",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Apple Music")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,applemusic:C.length}))},I=>{T("Error al cargar productos de Apple Music"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[productId].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"applemusic_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"applemusic"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"applemusic"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Apple Music`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514327605112-b887c0e61c0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Apple Music Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música sin límites con nuestras suscripciones a Apple Music"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-green-400",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-green-400",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-green-400",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},kF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-gray-200",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-gray-200",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-600",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Apple Tv")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,appletv:C.length}))},I=>{T("Error al cargar productos de AppleTV"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"appletv_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"appletv"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"appletv"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=AppleTV`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-200 text-gray-900 flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-gray-200 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-gray-200 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-200 text-gray-900 rounded-full hover:bg-gray-300 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-gray-200 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-gray-200"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-gray-200",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-200/80 text-gray-900 hover:bg-gray-300 transition-all text-sm",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-300 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-gray-200 text-gray-900 hover:bg-gray-300 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-200/30 text-white border border-gray-200/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a91f70d79?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Apple TV+: Streaming Exclusivo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series y películas originales de Apple TV+ en cualquier dispositivo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-gray-200",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-gray-200",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-gray-200",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-gray-200",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-gray-200",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-gray-200 via-gray-300 to-white/80 text-gray-900 hover:from-gray-300 hover:to-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-gray-200"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-200 bg-gray-700 border-gray-600 rounded focus:ring-gray-200"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-gray-200 hover:text-gray-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-gray-200 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-gray-200"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-gray-200"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-gray-200"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-gray-200"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all",children:"Aceptar"})})]})})]})},IF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-blue-700",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-blue-700",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Iptv")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,iptv:C.length}))},I=>{T("Error al cargar productos de IPTV"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"iptv_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"iptv"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"iptv"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Iptv`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-700 text-white rounded-full hover:bg-blue-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-700 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-blue-700 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-700"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-blue-700",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-700/80 hover:bg-blue-800 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-700 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-blue-700 text-white hover:bg-blue-800 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-700",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-700/30 text-white border border-blue-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"IPTV Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de una amplia variedad de canales con nuestras suscripciones a IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-700 hover:text-blue-600 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-700 bg-blue-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-blue-700",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-blue-700",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-blue-700",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-blue-700 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-blue-700",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-blue-700",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-blue-700 via-blue-800 to-cyan-700 hover:from-blue-800 hover:to-cyan-800 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-blue-700"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-700 bg-gray-700 border-gray-600 rounded focus:ring-blue-700"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-blue-700 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-blue-700 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-700"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-700"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-700"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-700"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Aceptar"})})]})})]})},SF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-red-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-red-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-600",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Flujo Tv")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,flujotv:C.length}))},I=>{T("Error al cargar productos de FlujoTV"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"flujotv_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"flujotv"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"flujotv"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=FlujoTV`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en FlujoTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-500/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-red-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1554050855-c84a7f9e3b7b?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"FlujoTV: Entretenimiento Sin Límites"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Canales en vivo, películas, series y deportes en alta definición para toda la familia"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-red-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-red-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-red-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-red-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-red-500 via-red-600 to-red-700 text-white hover:from-red-600 hover:to-red-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-red-500 hover:text-red-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},PF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-pink-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-pink-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Viki Rakuten")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,vikirakuten:C.length}))},I=>{T("Error al cargar productos de Viki Rakuten"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"vikirakuten_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"vikirakuten"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"vikirakuten"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Viki Rakuten`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-pink-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-500/80 hover:bg-pink-600 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-500/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a1181fb95?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Viki Rakuten"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de los mejores dramas asiáticos con nuestras suscripciones a Viki Rakuten"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-pink-500 hover:text-pink-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-pink-500 bg-pink-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-pink-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-pink-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-pink-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-pink-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-pink-500 via-pink-600 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-500 bg-gray-700 border-gray-600 rounded focus:ring-pink-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-pink-500 hover:text-pink-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-pink-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-pink-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},EF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-red-700",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-red-700",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Pornhub")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,pornhub:C.length}))},I=>{T("Error al cargar productos de Pornhub"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"pornhub_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"pornhub"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"pornhub"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Pornhub`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-700 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-red-700 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-700 text-white rounded-full hover:bg-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-700 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-red-700 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-700"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-700",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-700/80 hover:bg-red-800 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-700 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-red-700 text-white hover:bg-red-800 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-700",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-700/30 text-white border border-red-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-700/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310766-78a391814432?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Pornhub"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a contenido premium con nuestras suscripciones a Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-700 hover:text-red-600 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-700 bg-red-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-red-700",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-red-700",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-red-700",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-red-700 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-red-700",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-red-700",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-red-700 via-red-800 to-rose-700 hover:from-red-800 hover:to-rose-800 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-700"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-700 bg-gray-700 border-gray-600 rounded focus:ring-red-700"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-red-700 hover:text-red-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-red-700 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-700"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-700"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-700"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-700"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all",children:"Aceptar"})})]})})]})},CF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-600",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Paramount")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,paramount:C.length}))},I=>{T("Error al cargar productos de Paramount"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"paramount_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"paramount"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"paramount"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Paramount`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount+...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1485846234645-a62644f84728?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Paramount+: Cine y Series"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y contenido exclusivo de Paramount, CBS, MTV y más"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-blue-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-blue-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-blue-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: Paramount+ ofrece contenido de marcas como CBS, MTV, Nickelodeon y más. Asegúrate de cumplir con las políticas de uso del servicio."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Paramount+ incluye contenido de diversas marcas como CBS, MTV, y Nickelodeon. Asegúrate de cumplir con las políticas de uso del servicio."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},TF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-600",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Licencias")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,licencias:C.length}))},I=>{T("Error al cargar productos de Licencias"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"licencias_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"licencias"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"licencias"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Licencias`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Licencias...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias de Software"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a licencias de software confiables y originales para tus necesidades"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Licencias Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-blue-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-blue-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-blue-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: Asegúrate de cumplir con las políticas de uso de las licencias adquiridas."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Las licencias adquiridas deben usarse conforme a las políticas del proveedor del software."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},_F=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-green-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Capcut")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,capcut:C.length}))},I=>{T("Error al cargar productos de Capcut"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"capcut_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"capcut"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"capcut"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Capcut`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-500/80 hover:bg-green-600 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-500/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Capcut"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Edita videos como profesional con nuestras suscripciones a Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-green-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-green-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-green-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},DF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-green-400",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Duolingo")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,duolingo:C.length}))},I=>{T("Error al cargar productos de Duolingo"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"duolingo_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"duolingo"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"duolingo"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Duolingo`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-400 text-white rounded-full hover:bg-green-500 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-400/80 hover:bg-green-500 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-green-400 text-white hover:bg-green-500 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-400/30 text-white border border-green-400/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-400/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479437144403?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Duolingo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Aprende idiomas de forma divertida con nuestras suscripciones a Duolingo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-green-400",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-green-400",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-green-400",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-green-400 via-green-500 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-green-400 hover:text-green-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all",children:"Aceptar"})})]})})]})},AF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Dgo")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,dgo:C.length}))},I=>{T("Error al cargar productos de Dgo"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"dgo_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"dgo"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"dgo"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Dgo`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2b6e3c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de streaming de alta calidad con Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-blue-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-blue-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-blue-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},RF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligaMax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-green-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Liga Max")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,ligaMax:C.length}))},I=>{T("Error al cargar productos de Liga Max"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"ligaMax_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"ligaMax"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"ligaMax"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Liga Max`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligaMax",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligaMax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1557672172-298e090bd0f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de deportes en vivo con Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(34,197,94,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-green-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-green-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-green-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-green-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},MF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarPlay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Movistar Play")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,movistarPlay:C.length}))},I=>{T("Error al cargar productos de Movistar Play"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"movistarPlay_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"movistarPlay"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"movistarPlay"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Movistar Play`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarPlay",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarPlay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522778119026-d4747c2b3b72?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y TV en vivo con Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-blue-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-blue-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-blue-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},OF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-red-600",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-red-600",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Youtube")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,youtube:C.length}))},I=>{T("Error al cargar productos de YouTube"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"youtube_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"youtube"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"youtube"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Youtube`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-red-600 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-red-600 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-600 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en YouTube...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-red-600 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-600"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-red-600",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-600 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-red-600 text-white hover:bg-red-700 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-600",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-600/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-600/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617210-7d673bf0f crawl&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de YouTube"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de videos sin anuncios y contenido exclusivo con YouTube Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-600 hover:text-red-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(239,68,68,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-600 bg-red-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-red-600",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-red-600",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-red-600",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-red-600 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-red-600",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-red-600",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-red-600 via-red-700 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-600"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-600 bg-gray-700 border-gray-600 rounded focus:ring-red-600"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-red-600 hover:text-red-500 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-600"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-600"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-red-600"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-red-600"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all",children:"Aceptar"})})]})})]})},LF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-purple-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-purple-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Deezer")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,deezer:C.length}))},I=>{T("Error al cargar productos de Deezer"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"deezer_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"deezer"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"deezer"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Deezer`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-purple-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-purple-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-purple-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-purple-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-purple-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-purple-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-purple-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-purple-500/80 hover:bg-purple-600 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-purple-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-purple-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-purple-500/30 text-white border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Escucha música sin anuncios y disfruta de alta calidad con Deezer Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-purple-500 hover:text-purple-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(139,92,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-purple-500 bg-purple-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-purple-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-purple-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-purple-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-purple-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-purple-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-purple-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-purple-500 via-purple-600 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-purple-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-purple-500 hover:text-purple-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-purple-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-purple-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-purple-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-purple-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-purple-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Aceptar"})})]})})]})},VF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-green-400",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Tidal")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,tidal:C.length}))},I=>{T("Error al cargar productos de Tidal"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"tidal_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:selected.NodesRenewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"tidal"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"tidal"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Tidal`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md attorno-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música en alta fidelidad y contenido exclusivo con nuestras cuentas premium de Tidal"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-green-400",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-green-400",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-green-400",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},zF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-green-400",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","Vpn")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,vpn:C.length}))},I=>{T("Error al cargar productos de VPN"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"vpn_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"vpn"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"vpn"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Vpn`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-4794370e6a50?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios VPN Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Navega de forma segura y privada con nuestros servicios VPN de alta calidad"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-green-400",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-green-400",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-green-400",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},BF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-400",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","WinTv")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,wintv:C.length}))},I=>{T("Error al cargar productos de WinTV"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"wintv_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"wintv"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"wintv"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=WinTv`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en WinTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500/80 hover:bg-blue-600 transition-all text-sm text-white",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"WinTV: Televisión Digital Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de más de 40 canales en vivo, grabaciones y contenido exclusivo con WinTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-blue-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-blue-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-blue-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},$F=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[n,l]=v.useState([]),[o,d]=v.useState(null),[u,m]=v.useState(0),[y,j]=v.useState(!0),[N,T]=v.useState(null),[g,B]=v.useState(null),[D,R]=v.useState(null),[$,z]=v.useState(!1),[Z,G]=v.useState(!1),[Y,V]=v.useState(null),[x,q]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[W,J]=v.useState(""),[re,X]=v.useState({}),Q=It(),E=i=>{const k=Number(i);return isNaN(k)?"0.00":k.toFixed(2)},De=i=>{const k=Math.floor(i),c=i%1>=.5,P=5-k-(c?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(k)].map((A,H)=>e.jsx(Ve,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${H}`)),c&&e.jsx(Ve,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(P)].map((A,H)=>e.jsx(Ve,{className:"text-gray-600",size:16},`empty-${H}`))]})};v.useEffect(()=>{const i=_t(Ge,async k=>{if(k)try{const c=await et(U(S,"users",k.uid));if(c.exists()){const P=c.data();d({id:k.uid,name:P.username||"Usuario",email:k.email,orders:P.orders||[],role:P.role||"user",phone:P.phone||""}),m(Number(P.balance)||0)}else T("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(c){T("Error al cargar datos del usuario"),console.error(c)}else d(null),m(0);j(!1)});return()=>i()},[]),v.useEffect(()=>{const i=xe(ee(S,"products"),fe("category","==","BuscaPersonas")),k=ge(i,async I=>{const M=I.docs.map(f=>{const p=f.data();return{id:f.id,...p,price:Number(p.price)||0,stock:Number(p.stock||p.available||0),accountDetails:p.email||p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(M.map(async f=>{let p={provider:f.provider,providerPhone:f.providerPhone};if(!f.provider||f.provider==="Proveedor no especificado")try{if(f.providerId){const w=await et(U(S,"users",f.providerId));w.exists()&&(p={provider:w.data().username||w.data().email||f.provider,providerPhone:w.data().phoneNumber||f.providerPhone})}}catch(w){console.error("Error al cargar datos del proveedor:",w)}return{...f,...p}}));a(C),q(f=>({...f,buscapersonas:C.length}))},I=>{T("Error al cargar productos de Busca Personas"),console.error(I)}),c=xe(ee(S,"ratings")),P=ge(c,I=>{const M={};I.docs.forEach(f=>{const p=f.data(),w=p.providerId;M[w]||(M[w]=[]),M[w].push(Number(p.rating)||0)});const C={};Object.keys(M).forEach(f=>{const p=M[f],w=p.length?p.reduce((F,O)=>F+O,0)/p.length:1;C[f]=Math.min(Math.max(w,1),5)}),X(C)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),A=xe(ee(S,"buscapersonas_accounts"),fe("status","==","available")),H=ge(A,I=>{const M=I.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(M)},I=>{console.error("Error al cargar cuentas:",I)}),te=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const M=I.toLowerCase().replace(/\s+/g,""),C=xe(ee(S,"products"),fe("category","==",I));return ge(C,f=>{q(p=>({...p,[M]:f.docs.length}))},f=>{console.error(`Error al cargar productos de ${I}:`,f)})});return()=>{k(),P(),H(),te.forEach(I=>I())}},[]);const Ne=i=>{if(!o){V({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>Q("/login")});return}if(u<i.price){V({message:"Saldo insuficiente para realizar esta compra."});return}if(!i.providerId||i.providerId===""){V({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}B({product:i,customerName:o.name,phoneNumber:""})},ue=async()=>{if(!document.getElementById("termsCheck").checked){T("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){T("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const i=g.product;if(!i.providerId||i.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let k=null;i.status==="En stock"?k=await nt(S,async c=>{const P=U(S,"products",i.id),A=await c.get(P);if(!A.exists())throw new Error("Producto no encontrado");const H=A.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=ee(S,`products/${i.id}/accounts`),te=xe(se,fe("status","==","available"),Vt(1)),I=await jt(te);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const M=I.docs[0],C=M.ref,f=M.data(),p=U(S,"users",o.id),w=await c.get(p);if(!w.exists())throw new Error("Usuario no encontrado");const F=U(S,"users",i.providerId),O=await c.get(F);if(!O.exists())throw new Error("Proveedor no encontrado");const ae=U(S,"providerBalances",i.providerId),ie=await c.get(ae);let oe=0;ie.exists()?oe=parseFloat(ie.data().balance)||0:c.set(ae,{balance:0,provider:i.providerId,updatedAt:ve()});let ne=i.providerPhone||"";ne||(ne=O.data().phoneNumber||""),c.update(C,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),c.update(P,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(w.data().balance)||0)-i.price;if(de<0)throw new Error("Saldo insuficiente");const we=w.data().orders||[],Se={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},terms:i.terms,type:"buscapersonas"};c.update(p,{balance:de,orders:[...we,Se]});const Le=(Number(O.data().balance)||0)+i.price,Qe=O.data().sales||[],_e={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:ne,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:i.terms};c.update(F,{balance:Le,sales:[...Qe,_e]});const He=oe+i.price;c.set(ae,{balance:He,provider:i.providerId,updatedAt:ve()},{merge:!0});const Oe=U(ee(S,"sales"));return c.set(Oe,{...Se,provider:i.provider,providerId:i.providerId,providerPhone:ne,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:f.email||"No proporcionado",password:f.password||"No proporcionado",profile:f.profile||"No proporcionado"},saleId:_e.saleId,terms:i.terms}),f}):await nt(S,async c=>{const P=U(S,"users",o.id),A=await c.get(P);if(!A.exists())throw new Error("Usuario no encontrado");const H=U(S,"users",i.providerId),se=await c.get(H);if(!se.exists())throw new Error("Proveedor no encontrado");const te=U(S,"providerBalances",i.providerId),I=await c.get(te);let M=0;I.exists()?M=parseFloat(I.data().balance)||0:c.set(te,{balance:0,provider:i.providerId,updatedAt:ve()});let C=i.providerPhone||"";C||(C=se.data().phoneNumber||"");const p=(Number(A.data().balance)||0)-i.price;if(p<0)throw new Error("Saldo insuficiente");const w=A.data().orders||[],F={productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:i.terms,type:"buscapersonas"};c.update(P,{balance:p,orders:[...w,F]});const ae=(Number(se.data().balance)||0)+i.price,ie=se.data().sales||[],oe={saleId:U(ee(S,"sales")).id,productId:i.id,productName:i.name,price:i.price,renewalPrice:i.renewalPrice,provider:i.provider,providerId:i.providerId,providerPhone:C,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:i.terms};c.update(H,{balance:ae,sales:[...ie,oe]});const ne=M+i.price;c.set(te,{balance:ne,provider:i.providerId,updatedAt:ve()},{merge:!0});const he=U(ee(S,"sales"));c.set(he,{...F,provider:i.provider,providerId:i.providerId,providerPhone:C,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:i.terms})}),m(c=>c-i.price),d(c=>({...c,orders:[...c.orders,{...g,status:i.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:i.status==="En stock"?{email:(k==null?void 0:k.email)||"No proporcionado",password:(k==null?void 0:k.password)||"No proporcionado",profile:(k==null?void 0:k.profile)||"No proporcionado"}:null}]})),B(null),V({message:i.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(i){T(i.message||"Error al procesar la compra"),console.error("Error en la compra:",i)}finally{j(!1)}},je=i=>{R({name:i.name,accountDetails:i.accountDetails,provider:i.provider,terms:i.terms,accountType:i.accountType})},pe=i=>{R({name:i.name,terms:i.terms,provider:i.provider,accountType:i.accountType}),z(!0)},Ae=()=>{if(!o){Q("/login");return}(o==null?void 0:o.role)==="user"?Q("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?Q("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?Q("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&Q("/dashboard/admin")},Te=i=>{i.preventDefault(),W.trim()&&Q(`/search?q=${encodeURIComponent(W)}&category=Busca Personas`)},be=r.filter(i=>i.name.toLowerCase().includes(W.toLowerCase())),qe=i=>i.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(i.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",i.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),$e=i=>{if(!i||typeof i!="string")return"30 días";const k=i.match(/(\d+)\s*(mes|meses)/i);if(k)return`${parseInt(k[1],10)*30} días`;const c=i.match(/(\d+)\s*(día|días|dia|dias)/i);if(c)return`${parseInt(c[1],10)} días`;const P=i.match(/(\d+)/);return P?`${parseInt(P[1],10)} días`:"30 días"};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ct,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Ye,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:N}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Ot,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:W,onChange:i=>J(i.target.value)}),e.jsx("button",{onClick:Te,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(st,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",u.toFixed(2)]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ue,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),Q("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>Q("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(ft,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Busca Personas"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Encuentra información confiable sobre personas de manera rápida y segura"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Servicios de Búsqueda Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),be.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:be.map(i=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),qe(i)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:i.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Mt,{className:"text-blue-500",size:13}),$e(i.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[De(re[i.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(re[i.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(Qt,{className:"text-blue-500",size:13}),i.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx(Gt,{className:"text-blue-500",size:13}),i.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:i.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",E(i.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",E(i.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>je(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(We,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>pe(i),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Ee,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>Ne(i),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(i.stock)>0||i.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(i.stock)<=0&&i.status!=="A pedido",children:[e.jsx(Je,{size:16}),i.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},i.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Je,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",E(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:i=>B({...g,customerName:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:i=>B({...g,phoneNumber:i.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>pe(g.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),N&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Ye,{className:"mr-2"})," ",N]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${y?"opacity-50 cursor-not-allowed":""}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),D&&!$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",D.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",D.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),D&&$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",D.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",D.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",D.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: El uso de los servicios de búsqueda de personas debe cumplir con las leyes de privacidad y regulaciones locales."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Los servicios de búsqueda de personas deben usarse de manera ética y cumplir con las leyes de privacidad aplicables."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(We,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),V(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})};v.memo(()=>{const[s,t]=v.useState(null),[r,a]=v.useState(0),[n,l]=v.useState(!0),[o,d]=v.useState(null),[u,m]=v.useState(!1),[y,j]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0}),[N,T]=v.useState(""),g=It();v.useEffect(()=>{const R=_t(Ge,async $=>{if($)try{const z=await et(U(S,"users",$.uid));if(z.exists()){const Z=z.data();t({id:$.uid,name:Z.username||"Usuario",email:$.email,orders:Z.orders||[],role:Z.role||"user"}),a(Number(Z.balance)||0)}else d("Usuario no encontrado"),console.error("Usuario no encontrado en la base de datos")}catch(z){d("Error al cargar datos"),console.error(z)}else t(null),a(0);l(!1)});return()=>R()},[]),v.useEffect(()=>{const $=[{name:"Netflix",key:"netflix"},{name:"Spotify",key:"spotify"},{name:"Disney",key:"disney"},{name:"Max",key:"max"},{name:"Prime Video",key:"primevideo"},{name:"Vix",key:"vix"},{name:"Crunchyroll",key:"crunchyroll"},{name:"Canva",key:"canva"},{name:"ChatGPT",key:"chatgpt"},{name:"Redes Sociales",key:"redessociales"}].map(({name:z,key:Z})=>{const G=xe(ee(S,"products"),fe("category","==",z));return ge(G,Y=>{j(V=>({...V,[Z]:Y.docs.length}))},Y=>console.error(`Error loading ${z}:`,Y))});return()=>$.forEach(z=>z())},[]);const B=()=>{if(!s)return g("/login");g({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[s.role]||"/dashboard/user")},D=R=>{R.preventDefault(),N.trim()&&g(`/search?q=${encodeURIComponent(N)}`)};return n?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:[e.jsx(Y0,{className:"animate-spin text-4xl text-cyan-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Cargando..."})]}):o?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[e.jsx(Y0,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Reintentar"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-800/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(b,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-8"}),e.jsx("span",{className:"text-lg font-bold text-cyan-500 hidden sm:block",children:"BlackStreaming"})]})}),e.jsx("form",{onSubmit:D,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-2 px-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:N,onChange:R=>T(R.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-cyan-500",children:e.jsx(st,{size:20})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-300",children:s.name}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded-lg text-sm",children:["S/ ",r.toFixed(2)]}),e.jsx("button",{onClick:B,className:"p-2 hover:bg-gray-700 rounded-lg",title:"Dashboard",children:e.jsx(Ue,{className:"text-cyan-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),g("/")},className:"flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:[e.jsx(St,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g("/login"),className:"px-3 py-2 text-sm hover:text-cyan-500",children:"Ingresar"}),e.jsx("button",{onClick:()=>g("/register"),className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 text-sm",children:"Registrarse"})]})})]})}),e.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("div",{className:"p-4 bg-gray-800 rounded-full inline-flex mb-6",children:e.jsx(Y0,{className:"text-4xl text-cyan-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"En Mantenimiento"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Estamos mejorando nuestra plataforma para ti."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300 mb-6",children:[e.jsx(Mt,{className:"text-yellow-500"}),e.jsx("span",{children:"Volveremos pronto."})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Qué estamos haciendo?"}),e.jsxs("ul",{className:"text-left space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Corrección de errores en el sistema de pedidos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Solución de fallos en el retiro de dinero"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Arreglo de errores al pasar del sistema al pedido"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del proveedor"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del usuario"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Refuerzo de la seguridad general del sitio"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Mejora en la visualización y diseño"]})]}),e.jsx("button",{onClick:()=>m(!0),className:"mt-4 text-cyan-500 hover:text-cyan-400 underline",children:"Términos Generales"})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Términos y Condiciones"}),e.jsx("button",{onClick:()=>m(!1),className:"hover:text-gray-300",children:e.jsx(FiX,{size:24})})]}),e.jsx("div",{className:"space-y-4 text-gray-300",children:[{title:"Proceso de Compra",text:"El proveedor te contactará en 24 horas hábiles para los accesos."},{title:"Garantía",text:"7 días de garantía. El proveedor resolverá problemas o reembolsará."},{title:"Uso Responsable",text:"No nos responsabilizamos por suspensiones por mal uso."},{title:"Soporte",text:"Contacta al proveedor vía WhatsApp."},{title:"Renovaciones",text:"Solicita renovaciones manuales antes del fin del período."}].map(({title:R,text:$},z)=>e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:R}),e.jsx("p",{children:$})]},z))}),e.jsx("button",{onClick:()=>m(!1),className:"w-full mt-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-800 py-6",children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:wt,alt:"BlackStreaming",className:"h-6"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-500",children:"BlackStreaming"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Desarrollado por Saiph"})]})})]})});const FF=v.createContext(),UF=({children:s})=>{const t=Qg(xd),[r,a]=v.useState(null),[n,l]=v.useState(!0);return v.useEffect(()=>{const o=_t(t,d=>{a(d),l(!1)});return()=>o()},[]),e.jsx(FF.Provider,{value:{user:r,loading:n},children:!n&&s})},WF=()=>e.jsx(eT,{children:e.jsxs(e.Fragment,{children:[e.jsx(Pt,{path:"/",element:e.jsx(u$,{})}),e.jsx(Pt,{path:"/login",element:e.jsx(f$,{})}),e.jsx(Pt,{path:"/register",element:e.jsx(j$,{})}),e.jsx(Pt,{path:"/dashboard/user",element:e.jsx(_$,{})}),e.jsx(Pt,{path:"/dashboard/affiliate",element:e.jsx(R$,{})}),e.jsx(Pt,{path:"/dashboard/provider",element:e.jsx(H$,{})}),e.jsx(Pt,{path:"/dashboard/admin",element:e.jsx(sF,{})}),e.jsx(Pt,{path:"/netflix",element:e.jsx(nF,{})}),e.jsx(Pt,{path:"/disney",element:e.jsx(lF,{})}),e.jsx(Pt,{path:"/max",element:e.jsx(uF,{})}),e.jsx(Pt,{path:"/spotify",element:e.jsx(hF,{})}),e.jsx(Pt,{path:"/primevideo",element:e.jsx(gF,{})}),e.jsx(Pt,{path:"/vix",element:e.jsx(yF,{})}),e.jsx(Pt,{path:"/canva",element:e.jsx(bF,{})}),e.jsx(Pt,{path:"/chatgpt",element:e.jsx(vF,{})}),e.jsx(Pt,{path:"/crunchyroll",element:e.jsx(jF,{})}),e.jsx(Pt,{path:"/redessociales",element:e.jsx(NF,{})}),e.jsx(Pt,{path:"/applemusic",element:e.jsx(wF,{})}),e.jsx(Pt,{path:"/appletv",element:e.jsx(kF,{})}),e.jsx(Pt,{path:"/iptv",element:e.jsx(IF,{})}),e.jsx(Pt,{path:"/flujotv",element:e.jsx(SF,{})}),e.jsx(Pt,{path:"/vikirakuten",element:e.jsx(PF,{})}),e.jsx(Pt,{path:"/pornhub",element:e.jsx(EF,{})}),e.jsx(Pt,{path:"/paramount",element:e.jsx(CF,{})}),e.jsx(Pt,{path:"/licencias",element:e.jsx(TF,{})}),e.jsx(Pt,{path:"/capcut",element:e.jsx(_F,{})}),e.jsx(Pt,{path:"/duolingo",element:e.jsx(DF,{})}),e.jsx(Pt,{path:"/dgo",element:e.jsx(AF,{})}),e.jsx(Pt,{path:"/ligamax",element:e.jsx(RF,{})}),e.jsx(Pt,{path:"/movistarplay",element:e.jsx(MF,{})}),e.jsx(Pt,{path:"/youtube",element:e.jsx(OF,{})}),e.jsx(Pt,{path:"/deezer",element:e.jsx(LF,{})}),e.jsx(Pt,{path:"/tidal",element:e.jsx(VF,{})}),e.jsx(Pt,{path:"/vpn",element:e.jsx(zF,{})}),e.jsx(Pt,{path:"/wintv",element:e.jsx(BF,{})}),e.jsx(Pt,{path:"/buscapersonas",element:e.jsx($F,{})})]})});X0.createRoot(document.getElementById("root")).render(e.jsx(fn.StrictMode,{children:e.jsx(kT,{children:e.jsx(UF,{children:e.jsx(WF,{})})})}));
