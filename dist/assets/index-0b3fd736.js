(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();function YS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var LN={exports:{}},Vu={},VN={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc=Symbol.for("react.element"),XS=Symbol.for("react.portal"),JS=Symbol.for("react.fragment"),eT=Symbol.for("react.strict_mode"),tT=Symbol.for("react.profiler"),rT=Symbol.for("react.provider"),sT=Symbol.for("react.context"),aT=Symbol.for("react.forward_ref"),nT=Symbol.for("react.suspense"),iT=Symbol.for("react.memo"),oT=Symbol.for("react.lazy"),pb=Symbol.iterator;function lT(r){return r===null||typeof r!="object"?null:(r=pb&&r[pb]||r["@@iterator"],typeof r=="function"?r:null)}var zN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BN=Object.assign,UN={};function Uo(r,t,s){this.props=r,this.context=t,this.refs=UN,this.updater=s||zN}Uo.prototype.isReactComponent={};Uo.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};Uo.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function FN(){}FN.prototype=Uo.prototype;function Bp(r,t,s){this.props=r,this.context=t,this.refs=UN,this.updater=s||zN}var Up=Bp.prototype=new FN;Up.constructor=Bp;BN(Up,Uo.prototype);Up.isPureReactComponent=!0;var fb=Array.isArray,HN=Object.prototype.hasOwnProperty,Fp={current:null},WN={key:!0,ref:!0,__self:!0,__source:!0};function qN(r,t,s){var a,i={},c=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(c=""+t.key),t)HN.call(t,a)&&!WN.hasOwnProperty(a)&&(i[a]=t[a]);var d=arguments.length-2;if(d===1)i.children=s;else if(1<d){for(var u=Array(d),m=0;m<d;m++)u[m]=arguments[m+2];i.children=u}if(r&&r.defaultProps)for(a in d=r.defaultProps,d)i[a]===void 0&&(i[a]=d[a]);return{$$typeof:Bc,type:r,key:c,ref:o,props:i,_owner:Fp.current}}function cT(r,t){return{$$typeof:Bc,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function Hp(r){return typeof r=="object"&&r!==null&&r.$$typeof===Bc}function dT(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(s){return t[s]})}var gb=/\/+/g;function Qx(r,t){return typeof r=="object"&&r!==null&&r.key!=null?dT(""+r.key):t.toString(36)}function a0(r,t,s,a,i){var c=typeof r;(c==="undefined"||c==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(c){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case Bc:case XS:o=!0}}if(o)return o=r,i=i(o),r=a===""?"."+Qx(o,0):a,fb(i)?(s="",r!=null&&(s=r.replace(gb,"$&/")+"/"),a0(i,t,s,"",function(m){return m})):i!=null&&(Hp(i)&&(i=cT(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gb,"$&/")+"/")+r)),t.push(i)),1;if(o=0,a=a===""?".":a+":",fb(r))for(var d=0;d<r.length;d++){c=r[d];var u=a+Qx(c,d);o+=a0(c,t,s,u,i)}else if(u=lT(r),typeof u=="function")for(r=u.call(r),d=0;!(c=r.next()).done;)c=c.value,u=a+Qx(c,d++),o+=a0(c,t,s,u,i);else if(c==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ed(r,t,s){if(r==null)return r;var a=[],i=0;return a0(r,a,"","",function(c){return t.call(s,c,i++)}),a}function uT(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(s){(r._status===0||r._status===-1)&&(r._status=1,r._result=s)},function(s){(r._status===0||r._status===-1)&&(r._status=2,r._result=s)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var ss={current:null},n0={transition:null},xT={ReactCurrentDispatcher:ss,ReactCurrentBatchConfig:n0,ReactCurrentOwner:Fp};function GN(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:Ed,forEach:function(r,t,s){Ed(r,function(){t.apply(this,arguments)},s)},count:function(r){var t=0;return Ed(r,function(){t++}),t},toArray:function(r){return Ed(r,function(t){return t})||[]},only:function(r){if(!Hp(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Et.Component=Uo;Et.Fragment=JS;Et.Profiler=tT;Et.PureComponent=Bp;Et.StrictMode=eT;Et.Suspense=nT;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xT;Et.act=GN;Et.cloneElement=function(r,t,s){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var a=BN({},r.props),i=r.key,c=r.ref,o=r._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,o=Fp.current),t.key!==void 0&&(i=""+t.key),r.type&&r.type.defaultProps)var d=r.type.defaultProps;for(u in t)HN.call(t,u)&&!WN.hasOwnProperty(u)&&(a[u]=t[u]===void 0&&d!==void 0?d[u]:t[u])}var u=arguments.length-2;if(u===1)a.children=s;else if(1<u){d=Array(u);for(var m=0;m<u;m++)d[m]=arguments[m+2];a.children=d}return{$$typeof:Bc,type:r.type,key:i,ref:c,props:a,_owner:o}};Et.createContext=function(r){return r={$$typeof:sT,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:rT,_context:r},r.Consumer=r};Et.createElement=qN;Et.createFactory=function(r){var t=qN.bind(null,r);return t.type=r,t};Et.createRef=function(){return{current:null}};Et.forwardRef=function(r){return{$$typeof:aT,render:r}};Et.isValidElement=Hp;Et.lazy=function(r){return{$$typeof:oT,_payload:{_status:-1,_result:r},_init:uT}};Et.memo=function(r,t){return{$$typeof:iT,type:r,compare:t===void 0?null:t}};Et.startTransition=function(r){var t=n0.transition;n0.transition={};try{r()}finally{n0.transition=t}};Et.unstable_act=GN;Et.useCallback=function(r,t){return ss.current.useCallback(r,t)};Et.useContext=function(r){return ss.current.useContext(r)};Et.useDebugValue=function(){};Et.useDeferredValue=function(r){return ss.current.useDeferredValue(r)};Et.useEffect=function(r,t){return ss.current.useEffect(r,t)};Et.useId=function(){return ss.current.useId()};Et.useImperativeHandle=function(r,t,s){return ss.current.useImperativeHandle(r,t,s)};Et.useInsertionEffect=function(r,t){return ss.current.useInsertionEffect(r,t)};Et.useLayoutEffect=function(r,t){return ss.current.useLayoutEffect(r,t)};Et.useMemo=function(r,t){return ss.current.useMemo(r,t)};Et.useReducer=function(r,t,s){return ss.current.useReducer(r,t,s)};Et.useRef=function(r){return ss.current.useRef(r)};Et.useState=function(r){return ss.current.useState(r)};Et.useSyncExternalStore=function(r,t,s){return ss.current.useSyncExternalStore(r,t,s)};Et.useTransition=function(){return ss.current.useTransition()};Et.version="18.3.1";VN.exports=Et;var b=VN.exports;const hn=YS(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT=b,hT=Symbol.for("react.element"),pT=Symbol.for("react.fragment"),fT=Object.prototype.hasOwnProperty,gT=mT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yT={key:!0,ref:!0,__self:!0,__source:!0};function QN(r,t,s){var a,i={},c=null,o=null;s!==void 0&&(c=""+s),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)fT.call(t,a)&&!yT.hasOwnProperty(a)&&(i[a]=t[a]);if(r&&r.defaultProps)for(a in t=r.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:hT,type:r,key:c,ref:o,props:i,_owner:gT.current}}Vu.Fragment=pT;Vu.jsx=QN;Vu.jsxs=QN;LN.exports=Vu;var e=LN.exports,Zm={},KN={exports:{}},Es={},ZN={exports:{}},YN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(ue,je){var ye=ue.length;ue.push(je);e:for(;0<ye;){var $e=ye-1>>>1,be=ue[$e];if(0<i(be,je))ue[$e]=je,ue[ye]=be,ye=$e;else break e}}function s(ue){return ue.length===0?null:ue[0]}function a(ue){if(ue.length===0)return null;var je=ue[0],ye=ue.pop();if(ye!==je){ue[0]=ye;e:for(var $e=0,be=ue.length,Te=be>>>1;$e<Te;){var qe=2*($e+1)-1,Ce=ue[qe],ze=qe+1,De=ue[ze];if(0>i(Ce,ye))ze<be&&0>i(De,Ce)?(ue[$e]=De,ue[ze]=ye,$e=ze):(ue[$e]=Ce,ue[qe]=ye,$e=qe);else if(ze<be&&0>i(De,ye))ue[$e]=De,ue[ze]=ye,$e=ze;else break e}}return je}function i(ue,je){var ye=ue.sortIndex-je.sortIndex;return ye!==0?ye:ue.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var o=Date,d=o.now();r.unstable_now=function(){return o.now()-d}}var u=[],m=[],j=1,k=null,T=3,C=!1,v=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(ue){for(var je=s(m);je!==null;){if(je.callback===null)a(m);else if(je.startTime<=ue)a(m),je.sortIndex=je.expirationTime,t(u,je);else break;je=s(m)}}function re(ue){if(L=!1,z(ue),!v)if(s(u)!==null)v=!0,_e(q);else{var je=s(m);je!==null&&de(re,je.startTime-ue)}}function q(ue,je){v=!1,L&&(L=!1,R(x),x=-1),C=!0;var ye=T;try{for(z(je),k=s(u);k!==null&&(!(k.expirationTime>je)||ue&&!ee());){var $e=k.callback;if(typeof $e=="function"){k.callback=null,T=k.priorityLevel;var be=$e(k.expirationTime<=je);je=r.unstable_now(),typeof be=="function"?k.callback=be:k===s(u)&&a(u),z(je)}else a(u);k=s(u)}if(k!==null)var Te=!0;else{var qe=s(m);qe!==null&&de(re,qe.startTime-je),Te=!1}return Te}finally{k=null,T=ye,C=!1}}var Q=!1,M=null,x=-1,W=5,U=-1;function ee(){return!(r.unstable_now()-U<W)}function se(){if(M!==null){var ue=r.unstable_now();U=ue;var je=!0;try{je=M(!0,ue)}finally{je?X():(Q=!1,M=null)}}else Q=!1}var X;if(typeof V=="function")X=function(){V(se)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,l=G.port2;G.port1.onmessage=se,X=function(){l.postMessage(null)}}else X=function(){$(se,0)};function _e(ue){M=ue,Q||(Q=!0,X())}function de(ue,je){x=$(function(){ue(r.unstable_now())},je)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ue){ue.callback=null},r.unstable_continueExecution=function(){v||C||(v=!0,_e(q))},r.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ue?Math.floor(1e3/ue):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return s(u)},r.unstable_next=function(ue){switch(T){case 1:case 2:case 3:var je=3;break;default:je=T}var ye=T;T=je;try{return ue()}finally{T=ye}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ue,je){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var ye=T;T=ue;try{return je()}finally{T=ye}},r.unstable_scheduleCallback=function(ue,je,ye){var $e=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?$e+ye:$e):ye=$e,ue){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ye+be,ue={id:j++,callback:je,priorityLevel:ue,startTime:ye,expirationTime:be,sortIndex:-1},ye>$e?(ue.sortIndex=ye,t(m,ue),s(u)===null&&ue===s(m)&&(L?(R(x),x=-1):L=!0,de(re,ye-$e))):(ue.sortIndex=be,t(u,ue),v||C||(v=!0,_e(q))),ue},r.unstable_shouldYield=ee,r.unstable_wrapCallback=function(ue){var je=T;return function(){var ye=T;T=je;try{return ue.apply(this,arguments)}finally{T=ye}}}})(YN);ZN.exports=YN;var bT=ZN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT=b,Ps=bT;function Ae(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XN=new Set,ac={};function Ii(r,t){ko(r,t),ko(r+"Capture",t)}function ko(r,t){for(ac[r]=t,r=0;r<t.length;r++)XN.add(t[r])}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ym=Object.prototype.hasOwnProperty,jT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yb={},bb={};function wT(r){return Ym.call(bb,r)?!0:Ym.call(yb,r)?!1:jT.test(r)?bb[r]=!0:(yb[r]=!0,!1)}function NT(r,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function kT(r,t,s,a){if(t===null||typeof t>"u"||NT(r,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function as(r,t,s,a,i,c,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=r,this.type=t,this.sanitizeURL=c,this.removeEmptyString=o}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Lr[r]=new as(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];Lr[t]=new as(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Lr[r]=new as(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Lr[r]=new as(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Lr[r]=new as(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Lr[r]=new as(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Lr[r]=new as(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Lr[r]=new as(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Lr[r]=new as(r,5,!1,r.toLowerCase(),null,!1,!1)});var Wp=/[\-:]([a-z])/g;function qp(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(Wp,qp);Lr[t]=new as(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(Wp,qp);Lr[t]=new as(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(Wp,qp);Lr[t]=new as(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Lr[r]=new as(r,1,!1,r.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Lr[r]=new as(r,1,!1,r.toLowerCase(),null,!0,!0)});function Gp(r,t,s,a){var i=Lr.hasOwnProperty(t)?Lr[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kT(t,s,i,a)&&(s=null),a||i===null?wT(t)&&(s===null?r.removeAttribute(t):r.setAttribute(t,""+s)):i.mustUseProperty?r[i.propertyName]=s===null?i.type===3?!1:"":s:(t=i.attributeName,a=i.attributeNamespace,s===null?r.removeAttribute(t):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,a?r.setAttributeNS(a,t,s):r.setAttribute(t,s))))}var Ga=vT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),Qi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),Xm=Symbol.for("react.profiler"),JN=Symbol.for("react.provider"),e5=Symbol.for("react.context"),Kp=Symbol.for("react.forward_ref"),Jm=Symbol.for("react.suspense"),eh=Symbol.for("react.suspense_list"),Zp=Symbol.for("react.memo"),rn=Symbol.for("react.lazy"),t5=Symbol.for("react.offscreen"),vb=Symbol.iterator;function xl(r){return r===null||typeof r!="object"?null:(r=vb&&r[vb]||r["@@iterator"],typeof r=="function"?r:null)}var lr=Object.assign,Kx;function Nl(r){if(Kx===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Kx=t&&t[1]||""}return`
`+Kx+r}var Zx=!1;function Yx(r,t){if(!r||Zx)return"";Zx=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var a=m}Reflect.construct(r,[],t)}else{try{t.call()}catch(m){a=m}r.call(t.prototype)}else{try{throw Error()}catch(m){a=m}r()}}catch(m){if(m&&a&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),c=a.stack.split(`
`),o=i.length-1,d=c.length-1;1<=o&&0<=d&&i[o]!==c[d];)d--;for(;1<=o&&0<=d;o--,d--)if(i[o]!==c[d]){if(o!==1||d!==1)do if(o--,d--,0>d||i[o]!==c[d]){var u=`
`+i[o].replace(" at new "," at ");return r.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",r.displayName)),u}while(1<=o&&0<=d);break}}}finally{Zx=!1,Error.prepareStackTrace=s}return(r=r?r.displayName||r.name:"")?Nl(r):""}function ST(r){switch(r.tag){case 5:return Nl(r.type);case 16:return Nl("Lazy");case 13:return Nl("Suspense");case 19:return Nl("SuspenseList");case 0:case 2:case 15:return r=Yx(r.type,!1),r;case 11:return r=Yx(r.type.render,!1),r;case 1:return r=Yx(r.type,!0),r;default:return""}}function th(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Ki:return"Fragment";case Qi:return"Portal";case Xm:return"Profiler";case Qp:return"StrictMode";case Jm:return"Suspense";case eh:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case e5:return(r.displayName||"Context")+".Consumer";case JN:return(r._context.displayName||"Context")+".Provider";case Kp:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Zp:return t=r.displayName||null,t!==null?t:th(r.type)||"Memo";case rn:t=r._payload,r=r._init;try{return th(r(t))}catch{}}return null}function TT(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return th(t);case 8:return t===Qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pn(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function r5(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function IT(r){var t=r5(r)?"checked":"value",s=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),a=""+r[t];if(!r.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,c=s.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){a=""+o,c.call(this,o)}}),Object.defineProperty(r,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function Dd(r){r._valueTracker||(r._valueTracker=IT(r))}function s5(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return r&&(a=r5(r)?r.checked?"true":"false":r.value),r=a,r!==s?(t.setValue(r),!0):!1}function $0(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function rh(r,t){var s=t.checked;return lr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??r._wrapperState.initialChecked})}function jb(r,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=Pn(t.value!=null?t.value:s),r._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function a5(r,t){t=t.checked,t!=null&&Gp(r,"checked",t,!1)}function sh(r,t){a5(r,t);var s=Pn(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+s):r.value!==""+s&&(r.value=""+s);else if(a==="submit"||a==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?ah(r,t.type,s):t.hasOwnProperty("defaultValue")&&ah(r,t.type,Pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function wb(r,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,s||t===r.value||(r.value=t),r.defaultValue=t}s=r.name,s!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,s!==""&&(r.name=s)}function ah(r,t,s){(t!=="number"||$0(r.ownerDocument)!==r)&&(s==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+s&&(r.defaultValue=""+s))}var kl=Array.isArray;function ho(r,t,s,a){if(r=r.options,t){t={};for(var i=0;i<s.length;i++)t["$"+s[i]]=!0;for(s=0;s<r.length;s++)i=t.hasOwnProperty("$"+r[s].value),r[s].selected!==i&&(r[s].selected=i),i&&a&&(r[s].defaultSelected=!0)}else{for(s=""+Pn(s),t=null,i=0;i<r.length;i++){if(r[i].value===s){r[i].selected=!0,a&&(r[i].defaultSelected=!0);return}t!==null||r[i].disabled||(t=r[i])}t!==null&&(t.selected=!0)}}function nh(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return lr({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Nb(r,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Ae(92));if(kl(s)){if(1<s.length)throw Error(Ae(93));s=s[0]}t=s}t==null&&(t=""),s=t}r._wrapperState={initialValue:Pn(s)}}function n5(r,t){var s=Pn(t.value),a=Pn(t.defaultValue);s!=null&&(s=""+s,s!==r.value&&(r.value=s),t.defaultValue==null&&r.defaultValue!==s&&(r.defaultValue=s)),a!=null&&(r.defaultValue=""+a)}function kb(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function i5(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ih(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?i5(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var _d,o5=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,i){MSApp.execUnsafeLocalFunction(function(){return r(t,s,a,i)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(_d=_d||document.createElement("div"),_d.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_d.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function nc(r,t){if(t){var s=r.firstChild;if(s&&s===r.lastChild&&s.nodeType===3){s.nodeValue=t;return}}r.textContent=t}var Rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PT=["Webkit","ms","Moz","O"];Object.keys(Rl).forEach(function(r){PT.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),Rl[t]=Rl[r]})});function l5(r,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Rl.hasOwnProperty(r)&&Rl[r]?(""+t).trim():t+"px"}function c5(r,t){r=r.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,i=l5(s,t[s],a);s==="float"&&(s="cssFloat"),a?r.setProperty(s,i):r[s]=i}}var ET=lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oh(r,t){if(t){if(ET[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ae(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ae(62))}}function lh(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ch=null;function Yp(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var dh=null,po=null,fo=null;function Sb(r){if(r=Hc(r)){if(typeof dh!="function")throw Error(Ae(280));var t=r.stateNode;t&&(t=Hu(t),dh(r.stateNode,r.type,t))}}function d5(r){po?fo?fo.push(r):fo=[r]:po=r}function u5(){if(po){var r=po,t=fo;if(fo=po=null,Sb(r),t)for(r=0;r<t.length;r++)Sb(t[r])}}function x5(r,t){return r(t)}function m5(){}var Xx=!1;function h5(r,t,s){if(Xx)return r(t,s);Xx=!0;try{return x5(r,t,s)}finally{Xx=!1,(po!==null||fo!==null)&&(m5(),u5())}}function ic(r,t){var s=r.stateNode;if(s===null)return null;var a=Hu(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(r=r.type,a=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!a;break e;default:r=!1}if(r)return null;if(s&&typeof s!="function")throw Error(Ae(231,t,typeof s));return s}var uh=!1;if(Ma)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){uh=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{uh=!1}function CT(r,t,s,a,i,c,o,d,u){var m=Array.prototype.slice.call(arguments,3);try{t.apply(s,m)}catch(j){this.onError(j)}}var Ml=!1,A0=null,R0=!1,xh=null,DT={onError:function(r){Ml=!0,A0=r}};function _T(r,t,s,a,i,c,o,d,u){Ml=!1,A0=null,CT.apply(DT,arguments)}function $T(r,t,s,a,i,c,o,d,u){if(_T.apply(this,arguments),Ml){if(Ml){var m=A0;Ml=!1,A0=null}else throw Error(Ae(198));R0||(R0=!0,xh=m)}}function Pi(r){var t=r,s=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(s=t.return),r=t.return;while(r)}return t.tag===3?s:null}function p5(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function Tb(r){if(Pi(r)!==r)throw Error(Ae(188))}function AT(r){var t=r.alternate;if(!t){if(t=Pi(r),t===null)throw Error(Ae(188));return t!==r?null:r}for(var s=r,a=t;;){var i=s.return;if(i===null)break;var c=i.alternate;if(c===null){if(a=i.return,a!==null){s=a;continue}break}if(i.child===c.child){for(c=i.child;c;){if(c===s)return Tb(i),r;if(c===a)return Tb(i),t;c=c.sibling}throw Error(Ae(188))}if(s.return!==a.return)s=i,a=c;else{for(var o=!1,d=i.child;d;){if(d===s){o=!0,s=i,a=c;break}if(d===a){o=!0,a=i,s=c;break}d=d.sibling}if(!o){for(d=c.child;d;){if(d===s){o=!0,s=c,a=i;break}if(d===a){o=!0,a=c,s=i;break}d=d.sibling}if(!o)throw Error(Ae(189))}}if(s.alternate!==a)throw Error(Ae(190))}if(s.tag!==3)throw Error(Ae(188));return s.stateNode.current===s?r:t}function f5(r){return r=AT(r),r!==null?g5(r):null}function g5(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=g5(r);if(t!==null)return t;r=r.sibling}return null}var y5=Ps.unstable_scheduleCallback,Ib=Ps.unstable_cancelCallback,RT=Ps.unstable_shouldYield,MT=Ps.unstable_requestPaint,fr=Ps.unstable_now,OT=Ps.unstable_getCurrentPriorityLevel,Xp=Ps.unstable_ImmediatePriority,b5=Ps.unstable_UserBlockingPriority,M0=Ps.unstable_NormalPriority,LT=Ps.unstable_LowPriority,v5=Ps.unstable_IdlePriority,zu=null,ca=null;function VT(r){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(zu,r,void 0,(r.current.flags&128)===128)}catch{}}var Xs=Math.clz32?Math.clz32:UT,zT=Math.log,BT=Math.LN2;function UT(r){return r>>>=0,r===0?32:31-(zT(r)/BT|0)|0}var $d=64,Ad=4194304;function Sl(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function O0(r,t){var s=r.pendingLanes;if(s===0)return 0;var a=0,i=r.suspendedLanes,c=r.pingedLanes,o=s&268435455;if(o!==0){var d=o&~i;d!==0?a=Sl(d):(c&=o,c!==0&&(a=Sl(c)))}else o=s&~i,o!==0?a=Sl(o):c!==0&&(a=Sl(c));if(a===0)return 0;if(t!==0&&t!==a&&!(t&i)&&(i=a&-a,c=t&-t,i>=c||i===16&&(c&4194240)!==0))return t;if(a&4&&(a|=s&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=a;0<t;)s=31-Xs(t),i=1<<s,a|=r[s],t&=~i;return a}function FT(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HT(r,t){for(var s=r.suspendedLanes,a=r.pingedLanes,i=r.expirationTimes,c=r.pendingLanes;0<c;){var o=31-Xs(c),d=1<<o,u=i[o];u===-1?(!(d&s)||d&a)&&(i[o]=FT(d,t)):u<=t&&(r.expiredLanes|=d),c&=~d}}function mh(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function j5(){var r=$d;return $d<<=1,!($d&4194240)&&($d=64),r}function Jx(r){for(var t=[],s=0;31>s;s++)t.push(r);return t}function Uc(r,t,s){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-Xs(t),r[t]=s}function WT(r,t){var s=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var a=r.eventTimes;for(r=r.expirationTimes;0<s;){var i=31-Xs(s),c=1<<i;t[i]=0,a[i]=-1,r[i]=-1,s&=~c}}function Jp(r,t){var s=r.entangledLanes|=t;for(r=r.entanglements;s;){var a=31-Xs(s),i=1<<a;i&t|r[a]&t&&(r[a]|=t),s&=~i}}var Ht=0;function w5(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var N5,ef,k5,S5,T5,hh=!1,Rd=[],pn=null,fn=null,gn=null,oc=new Map,lc=new Map,an=[],qT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pb(r,t){switch(r){case"focusin":case"focusout":pn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":oc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(t.pointerId)}}function hl(r,t,s,a,i,c){return r===null||r.nativeEvent!==c?(r={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:c,targetContainers:[i]},t!==null&&(t=Hc(t),t!==null&&ef(t)),r):(r.eventSystemFlags|=a,t=r.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),r)}function GT(r,t,s,a,i){switch(t){case"focusin":return pn=hl(pn,r,t,s,a,i),!0;case"dragenter":return fn=hl(fn,r,t,s,a,i),!0;case"mouseover":return gn=hl(gn,r,t,s,a,i),!0;case"pointerover":var c=i.pointerId;return oc.set(c,hl(oc.get(c)||null,r,t,s,a,i)),!0;case"gotpointercapture":return c=i.pointerId,lc.set(c,hl(lc.get(c)||null,r,t,s,a,i)),!0}return!1}function I5(r){var t=si(r.target);if(t!==null){var s=Pi(t);if(s!==null){if(t=s.tag,t===13){if(t=p5(s),t!==null){r.blockedOn=t,T5(r.priority,function(){k5(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){r.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}r.blockedOn=null}function i0(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var s=ph(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(s===null){s=r.nativeEvent;var a=new s.constructor(s.type,s);ch=a,s.target.dispatchEvent(a),ch=null}else return t=Hc(s),t!==null&&ef(t),r.blockedOn=s,!1;t.shift()}return!0}function Eb(r,t,s){i0(r)&&s.delete(t)}function QT(){hh=!1,pn!==null&&i0(pn)&&(pn=null),fn!==null&&i0(fn)&&(fn=null),gn!==null&&i0(gn)&&(gn=null),oc.forEach(Eb),lc.forEach(Eb)}function pl(r,t){r.blockedOn===t&&(r.blockedOn=null,hh||(hh=!0,Ps.unstable_scheduleCallback(Ps.unstable_NormalPriority,QT)))}function cc(r){function t(i){return pl(i,r)}if(0<Rd.length){pl(Rd[0],r);for(var s=1;s<Rd.length;s++){var a=Rd[s];a.blockedOn===r&&(a.blockedOn=null)}}for(pn!==null&&pl(pn,r),fn!==null&&pl(fn,r),gn!==null&&pl(gn,r),oc.forEach(t),lc.forEach(t),s=0;s<an.length;s++)a=an[s],a.blockedOn===r&&(a.blockedOn=null);for(;0<an.length&&(s=an[0],s.blockedOn===null);)I5(s),s.blockedOn===null&&an.shift()}var go=Ga.ReactCurrentBatchConfig,L0=!0;function KT(r,t,s,a){var i=Ht,c=go.transition;go.transition=null;try{Ht=1,tf(r,t,s,a)}finally{Ht=i,go.transition=c}}function ZT(r,t,s,a){var i=Ht,c=go.transition;go.transition=null;try{Ht=4,tf(r,t,s,a)}finally{Ht=i,go.transition=c}}function tf(r,t,s,a){if(L0){var i=ph(r,t,s,a);if(i===null)cm(r,t,a,V0,s),Pb(r,a);else if(GT(i,r,t,s,a))a.stopPropagation();else if(Pb(r,a),t&4&&-1<qT.indexOf(r)){for(;i!==null;){var c=Hc(i);if(c!==null&&N5(c),c=ph(r,t,s,a),c===null&&cm(r,t,a,V0,s),c===i)break;i=c}i!==null&&a.stopPropagation()}else cm(r,t,a,null,s)}}var V0=null;function ph(r,t,s,a){if(V0=null,r=Yp(a),r=si(r),r!==null)if(t=Pi(r),t===null)r=null;else if(s=t.tag,s===13){if(r=p5(t),r!==null)return r;r=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return V0=r,null}function P5(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OT()){case Xp:return 1;case b5:return 4;case M0:case LT:return 16;case v5:return 536870912;default:return 16}default:return 16}}var un=null,rf=null,o0=null;function E5(){if(o0)return o0;var r,t=rf,s=t.length,a,i="value"in un?un.value:un.textContent,c=i.length;for(r=0;r<s&&t[r]===i[r];r++);var o=s-r;for(a=1;a<=o&&t[s-a]===i[c-a];a++);return o0=i.slice(r,1<a?1-a:void 0)}function l0(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function Md(){return!0}function Cb(){return!1}function Cs(r){function t(s,a,i,c,o){this._reactName=s,this._targetInst=i,this.type=a,this.nativeEvent=c,this.target=o,this.currentTarget=null;for(var d in r)r.hasOwnProperty(d)&&(s=r[d],this[d]=s?s(c):c[d]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Md:Cb,this.isPropagationStopped=Cb,this}return lr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Md)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Md)},persist:function(){},isPersistent:Md}),t}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sf=Cs(Fo),Fc=lr({},Fo,{view:0,detail:0}),YT=Cs(Fc),em,tm,fl,Bu=lr({},Fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:af,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fl&&(fl&&r.type==="mousemove"?(em=r.screenX-fl.screenX,tm=r.screenY-fl.screenY):tm=em=0,fl=r),em)},movementY:function(r){return"movementY"in r?r.movementY:tm}}),Db=Cs(Bu),XT=lr({},Bu,{dataTransfer:0}),JT=Cs(XT),eI=lr({},Fc,{relatedTarget:0}),rm=Cs(eI),tI=lr({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),rI=Cs(tI),sI=lr({},Fo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),aI=Cs(sI),nI=lr({},Fo,{data:0}),_b=Cs(nI),iI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cI(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=lI[r])?!!t[r]:!1}function af(){return cI}var dI=lr({},Fc,{key:function(r){if(r.key){var t=iI[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=l0(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?oI[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:af,charCode:function(r){return r.type==="keypress"?l0(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?l0(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),uI=Cs(dI),xI=lr({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$b=Cs(xI),mI=lr({},Fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:af}),hI=Cs(mI),pI=lr({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),fI=Cs(pI),gI=lr({},Bu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),yI=Cs(gI),bI=[9,13,27,32],nf=Ma&&"CompositionEvent"in window,Ol=null;Ma&&"documentMode"in document&&(Ol=document.documentMode);var vI=Ma&&"TextEvent"in window&&!Ol,C5=Ma&&(!nf||Ol&&8<Ol&&11>=Ol),Ab=String.fromCharCode(32),Rb=!1;function D5(r,t){switch(r){case"keyup":return bI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _5(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zi=!1;function jI(r,t){switch(r){case"compositionend":return _5(t);case"keypress":return t.which!==32?null:(Rb=!0,Ab);case"textInput":return r=t.data,r===Ab&&Rb?null:r;default:return null}}function wI(r,t){if(Zi)return r==="compositionend"||!nf&&D5(r,t)?(r=E5(),o0=rf=un=null,Zi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return C5&&t.locale!=="ko"?null:t.data;default:return null}}var NI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mb(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!NI[r.type]:t==="textarea"}function $5(r,t,s,a){d5(a),t=z0(t,"onChange"),0<t.length&&(s=new sf("onChange","change",null,s,a),r.push({event:s,listeners:t}))}var Ll=null,dc=null;function kI(r){H5(r,0)}function Uu(r){var t=Ji(r);if(s5(t))return r}function SI(r,t){if(r==="change")return t}var A5=!1;if(Ma){var sm;if(Ma){var am="oninput"in document;if(!am){var Ob=document.createElement("div");Ob.setAttribute("oninput","return;"),am=typeof Ob.oninput=="function"}sm=am}else sm=!1;A5=sm&&(!document.documentMode||9<document.documentMode)}function Lb(){Ll&&(Ll.detachEvent("onpropertychange",R5),dc=Ll=null)}function R5(r){if(r.propertyName==="value"&&Uu(dc)){var t=[];$5(t,dc,r,Yp(r)),h5(kI,t)}}function TI(r,t,s){r==="focusin"?(Lb(),Ll=t,dc=s,Ll.attachEvent("onpropertychange",R5)):r==="focusout"&&Lb()}function II(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Uu(dc)}function PI(r,t){if(r==="click")return Uu(t)}function EI(r,t){if(r==="input"||r==="change")return Uu(t)}function CI(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var ea=typeof Object.is=="function"?Object.is:CI;function uc(r,t){if(ea(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var s=Object.keys(r),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var i=s[a];if(!Ym.call(t,i)||!ea(r[i],t[i]))return!1}return!0}function Vb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function zb(r,t){var s=Vb(r);r=0;for(var a;s;){if(s.nodeType===3){if(a=r+s.textContent.length,r<=t&&a>=t)return{node:s,offset:t-r};r=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Vb(s)}}function M5(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?M5(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function O5(){for(var r=window,t=$0();t instanceof r.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)r=t.contentWindow;else break;t=$0(r.document)}return t}function of(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function DI(r){var t=O5(),s=r.focusedElem,a=r.selectionRange;if(t!==s&&s&&s.ownerDocument&&M5(s.ownerDocument.documentElement,s)){if(a!==null&&of(s)){if(t=a.start,r=a.end,r===void 0&&(r=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(r,s.value.length);else if(r=(t=s.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var i=s.textContent.length,c=Math.min(a.start,i);a=a.end===void 0?c:Math.min(a.end,i),!r.extend&&c>a&&(i=a,a=c,c=i),i=zb(s,c);var o=zb(s,a);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),r.removeAllRanges(),c>a?(r.addRange(t),r.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),r.addRange(t)))}}for(t=[],r=s;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)r=t[s],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var _I=Ma&&"documentMode"in document&&11>=document.documentMode,Yi=null,fh=null,Vl=null,gh=!1;function Bb(r,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;gh||Yi==null||Yi!==$0(a)||(a=Yi,"selectionStart"in a&&of(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Vl&&uc(Vl,a)||(Vl=a,a=z0(fh,"onSelect"),0<a.length&&(t=new sf("onSelect","select",null,t,s),r.push({event:t,listeners:a}),t.target=Yi)))}function Od(r,t){var s={};return s[r.toLowerCase()]=t.toLowerCase(),s["Webkit"+r]="webkit"+t,s["Moz"+r]="moz"+t,s}var Xi={animationend:Od("Animation","AnimationEnd"),animationiteration:Od("Animation","AnimationIteration"),animationstart:Od("Animation","AnimationStart"),transitionend:Od("Transition","TransitionEnd")},nm={},L5={};Ma&&(L5=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function Fu(r){if(nm[r])return nm[r];if(!Xi[r])return r;var t=Xi[r],s;for(s in t)if(t.hasOwnProperty(s)&&s in L5)return nm[r]=t[s];return r}var V5=Fu("animationend"),z5=Fu("animationiteration"),B5=Fu("animationstart"),U5=Fu("transitionend"),F5=new Map,Ub="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(r,t){F5.set(r,t),Ii(t,[r])}for(var im=0;im<Ub.length;im++){var om=Ub[im],$I=om.toLowerCase(),AI=om[0].toUpperCase()+om.slice(1);Vn($I,"on"+AI)}Vn(V5,"onAnimationEnd");Vn(z5,"onAnimationIteration");Vn(B5,"onAnimationStart");Vn("dblclick","onDoubleClick");Vn("focusin","onFocus");Vn("focusout","onBlur");Vn(U5,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tl));function Fb(r,t,s){var a=r.type||"unknown-event";r.currentTarget=s,$T(a,t,void 0,r),r.currentTarget=null}function H5(r,t){t=(t&4)!==0;for(var s=0;s<r.length;s++){var a=r[s],i=a.event;a=a.listeners;e:{var c=void 0;if(t)for(var o=a.length-1;0<=o;o--){var d=a[o],u=d.instance,m=d.currentTarget;if(d=d.listener,u!==c&&i.isPropagationStopped())break e;Fb(i,d,m),c=u}else for(o=0;o<a.length;o++){if(d=a[o],u=d.instance,m=d.currentTarget,d=d.listener,u!==c&&i.isPropagationStopped())break e;Fb(i,d,m),c=u}}}if(R0)throw r=xh,R0=!1,xh=null,r}function Jt(r,t){var s=t[wh];s===void 0&&(s=t[wh]=new Set);var a=r+"__bubble";s.has(a)||(W5(t,r,2,!1),s.add(a))}function lm(r,t,s){var a=0;t&&(a|=4),W5(s,r,a,t)}var Ld="_reactListening"+Math.random().toString(36).slice(2);function xc(r){if(!r[Ld]){r[Ld]=!0,XN.forEach(function(s){s!=="selectionchange"&&(RI.has(s)||lm(s,!1,r),lm(s,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[Ld]||(t[Ld]=!0,lm("selectionchange",!1,t))}}function W5(r,t,s,a){switch(P5(t)){case 1:var i=KT;break;case 4:i=ZT;break;default:i=tf}s=i.bind(null,t,s,r),i=void 0,!uh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?r.addEventListener(t,s,{capture:!0,passive:i}):r.addEventListener(t,s,!0):i!==void 0?r.addEventListener(t,s,{passive:i}):r.addEventListener(t,s,!1)}function cm(r,t,s,a,i){var c=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var d=a.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(o===4)for(o=a.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;d!==null;){if(o=si(d),o===null)return;if(u=o.tag,u===5||u===6){a=c=o;continue e}d=d.parentNode}}a=a.return}h5(function(){var m=c,j=Yp(s),k=[];e:{var T=F5.get(r);if(T!==void 0){var C=sf,v=r;switch(r){case"keypress":if(l0(s)===0)break e;case"keydown":case"keyup":C=uI;break;case"focusin":v="focus",C=rm;break;case"focusout":v="blur",C=rm;break;case"beforeblur":case"afterblur":C=rm;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=JT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=hI;break;case V5:case z5:case B5:C=rI;break;case U5:C=fI;break;case"scroll":C=YT;break;case"wheel":C=yI;break;case"copy":case"cut":case"paste":C=aI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=$b}var L=(t&4)!==0,$=!L&&r==="scroll",R=L?T!==null?T+"Capture":null:T;L=[];for(var V=m,z;V!==null;){z=V;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,R!==null&&(re=ic(V,R),re!=null&&L.push(mc(V,re,z)))),$)break;V=V.return}0<L.length&&(T=new C(T,v,null,s,j),k.push({event:T,listeners:L}))}}if(!(t&7)){e:{if(T=r==="mouseover"||r==="pointerover",C=r==="mouseout"||r==="pointerout",T&&s!==ch&&(v=s.relatedTarget||s.fromElement)&&(si(v)||v[Oa]))break e;if((C||T)&&(T=j.window===j?j:(T=j.ownerDocument)?T.defaultView||T.parentWindow:window,C?(v=s.relatedTarget||s.toElement,C=m,v=v?si(v):null,v!==null&&($=Pi(v),v!==$||v.tag!==5&&v.tag!==6)&&(v=null)):(C=null,v=m),C!==v)){if(L=Db,re="onMouseLeave",R="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(L=$b,re="onPointerLeave",R="onPointerEnter",V="pointer"),$=C==null?T:Ji(C),z=v==null?T:Ji(v),T=new L(re,V+"leave",C,s,j),T.target=$,T.relatedTarget=z,re=null,si(j)===m&&(L=new L(R,V+"enter",v,s,j),L.target=z,L.relatedTarget=$,re=L),$=re,C&&v)t:{for(L=C,R=v,V=0,z=L;z;z=Fi(z))V++;for(z=0,re=R;re;re=Fi(re))z++;for(;0<V-z;)L=Fi(L),V--;for(;0<z-V;)R=Fi(R),z--;for(;V--;){if(L===R||R!==null&&L===R.alternate)break t;L=Fi(L),R=Fi(R)}L=null}else L=null;C!==null&&Hb(k,T,C,L,!1),v!==null&&$!==null&&Hb(k,$,v,L,!0)}}e:{if(T=m?Ji(m):window,C=T.nodeName&&T.nodeName.toLowerCase(),C==="select"||C==="input"&&T.type==="file")var q=SI;else if(Mb(T))if(A5)q=EI;else{q=II;var Q=TI}else(C=T.nodeName)&&C.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(q=PI);if(q&&(q=q(r,m))){$5(k,q,s,j);break e}Q&&Q(r,T,m),r==="focusout"&&(Q=T._wrapperState)&&Q.controlled&&T.type==="number"&&ah(T,"number",T.value)}switch(Q=m?Ji(m):window,r){case"focusin":(Mb(Q)||Q.contentEditable==="true")&&(Yi=Q,fh=m,Vl=null);break;case"focusout":Vl=fh=Yi=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,Bb(k,s,j);break;case"selectionchange":if(_I)break;case"keydown":case"keyup":Bb(k,s,j)}var M;if(nf)e:{switch(r){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Zi?D5(r,s)&&(x="onCompositionEnd"):r==="keydown"&&s.keyCode===229&&(x="onCompositionStart");x&&(C5&&s.locale!=="ko"&&(Zi||x!=="onCompositionStart"?x==="onCompositionEnd"&&Zi&&(M=E5()):(un=j,rf="value"in un?un.value:un.textContent,Zi=!0)),Q=z0(m,x),0<Q.length&&(x=new _b(x,r,null,s,j),k.push({event:x,listeners:Q}),M?x.data=M:(M=_5(s),M!==null&&(x.data=M)))),(M=vI?jI(r,s):wI(r,s))&&(m=z0(m,"onBeforeInput"),0<m.length&&(j=new _b("onBeforeInput","beforeinput",null,s,j),k.push({event:j,listeners:m}),j.data=M))}H5(k,t)})}function mc(r,t,s){return{instance:r,listener:t,currentTarget:s}}function z0(r,t){for(var s=t+"Capture",a=[];r!==null;){var i=r,c=i.stateNode;i.tag===5&&c!==null&&(i=c,c=ic(r,s),c!=null&&a.unshift(mc(r,c,i)),c=ic(r,t),c!=null&&a.push(mc(r,c,i))),r=r.return}return a}function Fi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Hb(r,t,s,a,i){for(var c=t._reactName,o=[];s!==null&&s!==a;){var d=s,u=d.alternate,m=d.stateNode;if(u!==null&&u===a)break;d.tag===5&&m!==null&&(d=m,i?(u=ic(s,c),u!=null&&o.unshift(mc(s,u,d))):i||(u=ic(s,c),u!=null&&o.push(mc(s,u,d)))),s=s.return}o.length!==0&&r.push({event:t,listeners:o})}var MI=/\r\n?/g,OI=/\u0000|\uFFFD/g;function Wb(r){return(typeof r=="string"?r:""+r).replace(MI,`
`).replace(OI,"")}function Vd(r,t,s){if(t=Wb(t),Wb(r)!==t&&s)throw Error(Ae(425))}function B0(){}var yh=null,bh=null;function vh(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jh=typeof setTimeout=="function"?setTimeout:void 0,LI=typeof clearTimeout=="function"?clearTimeout:void 0,qb=typeof Promise=="function"?Promise:void 0,VI=typeof queueMicrotask=="function"?queueMicrotask:typeof qb<"u"?function(r){return qb.resolve(null).then(r).catch(zI)}:jh;function zI(r){setTimeout(function(){throw r})}function dm(r,t){var s=t,a=0;do{var i=s.nextSibling;if(r.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(a===0){r.removeChild(i),cc(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=i}while(s);cc(t)}function yn(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function Gb(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var s=r.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return r;t--}else s==="/$"&&t++}r=r.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),la="__reactFiber$"+Ho,hc="__reactProps$"+Ho,Oa="__reactContainer$"+Ho,wh="__reactEvents$"+Ho,BI="__reactListeners$"+Ho,UI="__reactHandles$"+Ho;function si(r){var t=r[la];if(t)return t;for(var s=r.parentNode;s;){if(t=s[Oa]||s[la]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(r=Gb(r);r!==null;){if(s=r[la])return s;r=Gb(r)}return t}r=s,s=r.parentNode}return null}function Hc(r){return r=r[la]||r[Oa],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ji(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Ae(33))}function Hu(r){return r[hc]||null}var Nh=[],eo=-1;function zn(r){return{current:r}}function er(r){0>eo||(r.current=Nh[eo],Nh[eo]=null,eo--)}function Zt(r,t){eo++,Nh[eo]=r.current,r.current=t}var En={},Kr=zn(En),ms=zn(!1),pi=En;function So(r,t){var s=r.type.contextTypes;if(!s)return En;var a=r.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},c;for(c in s)i[c]=t[c];return a&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=i),i}function hs(r){return r=r.childContextTypes,r!=null}function U0(){er(ms),er(Kr)}function Qb(r,t,s){if(Kr.current!==En)throw Error(Ae(168));Zt(Kr,t),Zt(ms,s)}function q5(r,t,s){var a=r.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(Ae(108,TT(r)||"Unknown",i));return lr({},s,a)}function F0(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||En,pi=Kr.current,Zt(Kr,r),Zt(ms,ms.current),!0}function Kb(r,t,s){var a=r.stateNode;if(!a)throw Error(Ae(169));s?(r=q5(r,t,pi),a.__reactInternalMemoizedMergedChildContext=r,er(ms),er(Kr),Zt(Kr,r)):er(ms),Zt(ms,s)}var Pa=null,Wu=!1,um=!1;function G5(r){Pa===null?Pa=[r]:Pa.push(r)}function FI(r){Wu=!0,G5(r)}function Bn(){if(!um&&Pa!==null){um=!0;var r=0,t=Ht;try{var s=Pa;for(Ht=1;r<s.length;r++){var a=s[r];do a=a(!0);while(a!==null)}Pa=null,Wu=!1}catch(i){throw Pa!==null&&(Pa=Pa.slice(r+1)),y5(Xp,Bn),i}finally{Ht=t,um=!1}}return null}var to=[],ro=0,H0=null,W0=0,As=[],Rs=0,fi=null,Ea=1,Ca="";function Jn(r,t){to[ro++]=W0,to[ro++]=H0,H0=r,W0=t}function Q5(r,t,s){As[Rs++]=Ea,As[Rs++]=Ca,As[Rs++]=fi,fi=r;var a=Ea;r=Ca;var i=32-Xs(a)-1;a&=~(1<<i),s+=1;var c=32-Xs(t)+i;if(30<c){var o=i-i%5;c=(a&(1<<o)-1).toString(32),a>>=o,i-=o,Ea=1<<32-Xs(t)+i|s<<i|a,Ca=c+r}else Ea=1<<c|s<<i|a,Ca=r}function lf(r){r.return!==null&&(Jn(r,1),Q5(r,1,0))}function cf(r){for(;r===H0;)H0=to[--ro],to[ro]=null,W0=to[--ro],to[ro]=null;for(;r===fi;)fi=As[--Rs],As[Rs]=null,Ca=As[--Rs],As[Rs]=null,Ea=As[--Rs],As[Rs]=null}var Ss=null,Ns=null,rr=!1,Ks=null;function K5(r,t){var s=Ms(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=r,t=r.deletions,t===null?(r.deletions=[s],r.flags|=16):t.push(s)}function Zb(r,t){switch(r.tag){case 5:var s=r.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Ss=r,Ns=yn(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Ss=r,Ns=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=fi!==null?{id:Ea,overflow:Ca}:null,r.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Ms(18,null,null,0),s.stateNode=t,s.return=r,r.child=s,Ss=r,Ns=null,!0):!1;default:return!1}}function kh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Sh(r){if(rr){var t=Ns;if(t){var s=t;if(!Zb(r,t)){if(kh(r))throw Error(Ae(418));t=yn(s.nextSibling);var a=Ss;t&&Zb(r,t)?K5(a,s):(r.flags=r.flags&-4097|2,rr=!1,Ss=r)}}else{if(kh(r))throw Error(Ae(418));r.flags=r.flags&-4097|2,rr=!1,Ss=r}}}function Yb(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ss=r}function zd(r){if(r!==Ss)return!1;if(!rr)return Yb(r),rr=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!vh(r.type,r.memoizedProps)),t&&(t=Ns)){if(kh(r))throw Z5(),Error(Ae(418));for(;t;)K5(r,t),t=yn(t.nextSibling)}if(Yb(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ae(317));e:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var s=r.data;if(s==="/$"){if(t===0){Ns=yn(r.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}r=r.nextSibling}Ns=null}}else Ns=Ss?yn(r.stateNode.nextSibling):null;return!0}function Z5(){for(var r=Ns;r;)r=yn(r.nextSibling)}function To(){Ns=Ss=null,rr=!1}function df(r){Ks===null?Ks=[r]:Ks.push(r)}var HI=Ga.ReactCurrentBatchConfig;function gl(r,t,s){if(r=s.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Ae(309));var a=s.stateNode}if(!a)throw Error(Ae(147,r));var i=a,c=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(o){var d=i.refs;o===null?delete d[c]:d[c]=o},t._stringRef=c,t)}if(typeof r!="string")throw Error(Ae(284));if(!s._owner)throw Error(Ae(290,r))}return r}function Bd(r,t){throw r=Object.prototype.toString.call(t),Error(Ae(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function Xb(r){var t=r._init;return t(r._payload)}function Y5(r){function t(R,V){if(r){var z=R.deletions;z===null?(R.deletions=[V],R.flags|=16):z.push(V)}}function s(R,V){if(!r)return null;for(;V!==null;)t(R,V),V=V.sibling;return null}function a(R,V){for(R=new Map;V!==null;)V.key!==null?R.set(V.key,V):R.set(V.index,V),V=V.sibling;return R}function i(R,V){return R=wn(R,V),R.index=0,R.sibling=null,R}function c(R,V,z){return R.index=z,r?(z=R.alternate,z!==null?(z=z.index,z<V?(R.flags|=2,V):z):(R.flags|=2,V)):(R.flags|=1048576,V)}function o(R){return r&&R.alternate===null&&(R.flags|=2),R}function d(R,V,z,re){return V===null||V.tag!==6?(V=ym(z,R.mode,re),V.return=R,V):(V=i(V,z),V.return=R,V)}function u(R,V,z,re){var q=z.type;return q===Ki?j(R,V,z.props.children,re,z.key):V!==null&&(V.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===rn&&Xb(q)===V.type)?(re=i(V,z.props),re.ref=gl(R,V,z),re.return=R,re):(re=p0(z.type,z.key,z.props,null,R.mode,re),re.ref=gl(R,V,z),re.return=R,re)}function m(R,V,z,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=bm(z,R.mode,re),V.return=R,V):(V=i(V,z.children||[]),V.return=R,V)}function j(R,V,z,re,q){return V===null||V.tag!==7?(V=xi(z,R.mode,re,q),V.return=R,V):(V=i(V,z),V.return=R,V)}function k(R,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=ym(""+V,R.mode,z),V.return=R,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Cd:return z=p0(V.type,V.key,V.props,null,R.mode,z),z.ref=gl(R,null,V),z.return=R,z;case Qi:return V=bm(V,R.mode,z),V.return=R,V;case rn:var re=V._init;return k(R,re(V._payload),z)}if(kl(V)||xl(V))return V=xi(V,R.mode,z,null),V.return=R,V;Bd(R,V)}return null}function T(R,V,z,re){var q=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return q!==null?null:d(R,V,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Cd:return z.key===q?u(R,V,z,re):null;case Qi:return z.key===q?m(R,V,z,re):null;case rn:return q=z._init,T(R,V,q(z._payload),re)}if(kl(z)||xl(z))return q!==null?null:j(R,V,z,re,null);Bd(R,z)}return null}function C(R,V,z,re,q){if(typeof re=="string"&&re!==""||typeof re=="number")return R=R.get(z)||null,d(V,R,""+re,q);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Cd:return R=R.get(re.key===null?z:re.key)||null,u(V,R,re,q);case Qi:return R=R.get(re.key===null?z:re.key)||null,m(V,R,re,q);case rn:var Q=re._init;return C(R,V,z,Q(re._payload),q)}if(kl(re)||xl(re))return R=R.get(z)||null,j(V,R,re,q,null);Bd(V,re)}return null}function v(R,V,z,re){for(var q=null,Q=null,M=V,x=V=0,W=null;M!==null&&x<z.length;x++){M.index>x?(W=M,M=null):W=M.sibling;var U=T(R,M,z[x],re);if(U===null){M===null&&(M=W);break}r&&M&&U.alternate===null&&t(R,M),V=c(U,V,x),Q===null?q=U:Q.sibling=U,Q=U,M=W}if(x===z.length)return s(R,M),rr&&Jn(R,x),q;if(M===null){for(;x<z.length;x++)M=k(R,z[x],re),M!==null&&(V=c(M,V,x),Q===null?q=M:Q.sibling=M,Q=M);return rr&&Jn(R,x),q}for(M=a(R,M);x<z.length;x++)W=C(M,R,x,z[x],re),W!==null&&(r&&W.alternate!==null&&M.delete(W.key===null?x:W.key),V=c(W,V,x),Q===null?q=W:Q.sibling=W,Q=W);return r&&M.forEach(function(ee){return t(R,ee)}),rr&&Jn(R,x),q}function L(R,V,z,re){var q=xl(z);if(typeof q!="function")throw Error(Ae(150));if(z=q.call(z),z==null)throw Error(Ae(151));for(var Q=q=null,M=V,x=V=0,W=null,U=z.next();M!==null&&!U.done;x++,U=z.next()){M.index>x?(W=M,M=null):W=M.sibling;var ee=T(R,M,U.value,re);if(ee===null){M===null&&(M=W);break}r&&M&&ee.alternate===null&&t(R,M),V=c(ee,V,x),Q===null?q=ee:Q.sibling=ee,Q=ee,M=W}if(U.done)return s(R,M),rr&&Jn(R,x),q;if(M===null){for(;!U.done;x++,U=z.next())U=k(R,U.value,re),U!==null&&(V=c(U,V,x),Q===null?q=U:Q.sibling=U,Q=U);return rr&&Jn(R,x),q}for(M=a(R,M);!U.done;x++,U=z.next())U=C(M,R,x,U.value,re),U!==null&&(r&&U.alternate!==null&&M.delete(U.key===null?x:U.key),V=c(U,V,x),Q===null?q=U:Q.sibling=U,Q=U);return r&&M.forEach(function(se){return t(R,se)}),rr&&Jn(R,x),q}function $(R,V,z,re){if(typeof z=="object"&&z!==null&&z.type===Ki&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Cd:e:{for(var q=z.key,Q=V;Q!==null;){if(Q.key===q){if(q=z.type,q===Ki){if(Q.tag===7){s(R,Q.sibling),V=i(Q,z.props.children),V.return=R,R=V;break e}}else if(Q.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===rn&&Xb(q)===Q.type){s(R,Q.sibling),V=i(Q,z.props),V.ref=gl(R,Q,z),V.return=R,R=V;break e}s(R,Q);break}else t(R,Q);Q=Q.sibling}z.type===Ki?(V=xi(z.props.children,R.mode,re,z.key),V.return=R,R=V):(re=p0(z.type,z.key,z.props,null,R.mode,re),re.ref=gl(R,V,z),re.return=R,R=re)}return o(R);case Qi:e:{for(Q=z.key;V!==null;){if(V.key===Q)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){s(R,V.sibling),V=i(V,z.children||[]),V.return=R,R=V;break e}else{s(R,V);break}else t(R,V);V=V.sibling}V=bm(z,R.mode,re),V.return=R,R=V}return o(R);case rn:return Q=z._init,$(R,V,Q(z._payload),re)}if(kl(z))return v(R,V,z,re);if(xl(z))return L(R,V,z,re);Bd(R,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(s(R,V.sibling),V=i(V,z),V.return=R,R=V):(s(R,V),V=ym(z,R.mode,re),V.return=R,R=V),o(R)):s(R,V)}return $}var Io=Y5(!0),X5=Y5(!1),q0=zn(null),G0=null,so=null,uf=null;function xf(){uf=so=G0=null}function mf(r){var t=q0.current;er(q0),r._currentValue=t}function Th(r,t,s){for(;r!==null;){var a=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),r===s)break;r=r.return}}function yo(r,t){G0=r,uf=so=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(us=!0),r.firstContext=null)}function Vs(r){var t=r._currentValue;if(uf!==r)if(r={context:r,memoizedValue:t,next:null},so===null){if(G0===null)throw Error(Ae(308));so=r,G0.dependencies={lanes:0,firstContext:r}}else so=so.next=r;return t}var ai=null;function hf(r){ai===null?ai=[r]:ai.push(r)}function J5(r,t,s,a){var i=t.interleaved;return i===null?(s.next=s,hf(t)):(s.next=i.next,i.next=s),t.interleaved=s,La(r,a)}function La(r,t){r.lanes|=t;var s=r.alternate;for(s!==null&&(s.lanes|=t),s=r,r=r.return;r!==null;)r.childLanes|=t,s=r.alternate,s!==null&&(s.childLanes|=t),s=r,r=r.return;return s.tag===3?s.stateNode:null}var sn=!1;function pf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e2(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function $a(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function bn(r,t,s){var a=r.updateQueue;if(a===null)return null;if(a=a.shared,Rt&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,La(r,s)}return i=a.interleaved,i===null?(t.next=t,hf(a)):(t.next=i.next,i.next=t),a.interleaved=t,La(r,s)}function c0(r,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=r.pendingLanes,s|=a,t.lanes=s,Jp(r,s)}}function Jb(r,t){var s=r.updateQueue,a=r.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var i=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?i=c=o:c=c.next=o,s=s.next}while(s!==null);c===null?i=c=t:c=c.next=t}else i=c=t;s={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:c,shared:a.shared,effects:a.effects},r.updateQueue=s;return}r=s.lastBaseUpdate,r===null?s.firstBaseUpdate=t:r.next=t,s.lastBaseUpdate=t}function Q0(r,t,s,a){var i=r.updateQueue;sn=!1;var c=i.firstBaseUpdate,o=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var u=d,m=u.next;u.next=null,o===null?c=m:o.next=m,o=u;var j=r.alternate;j!==null&&(j=j.updateQueue,d=j.lastBaseUpdate,d!==o&&(d===null?j.firstBaseUpdate=m:d.next=m,j.lastBaseUpdate=u))}if(c!==null){var k=i.baseState;o=0,j=m=u=null,d=c;do{var T=d.lane,C=d.eventTime;if((a&T)===T){j!==null&&(j=j.next={eventTime:C,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var v=r,L=d;switch(T=t,C=s,L.tag){case 1:if(v=L.payload,typeof v=="function"){k=v.call(C,k,T);break e}k=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=L.payload,T=typeof v=="function"?v.call(C,k,T):v,T==null)break e;k=lr({},k,T);break e;case 2:sn=!0}}d.callback!==null&&d.lane!==0&&(r.flags|=64,T=i.effects,T===null?i.effects=[d]:T.push(d))}else C={eventTime:C,lane:T,tag:d.tag,payload:d.payload,callback:d.callback,next:null},j===null?(m=j=C,u=k):j=j.next=C,o|=T;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;T=d,d=T.next,T.next=null,i.lastBaseUpdate=T,i.shared.pending=null}}while(1);if(j===null&&(u=k),i.baseState=u,i.firstBaseUpdate=m,i.lastBaseUpdate=j,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else c===null&&(i.shared.lanes=0);yi|=o,r.lanes=o,r.memoizedState=k}}function ev(r,t,s){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var a=r[t],i=a.callback;if(i!==null){if(a.callback=null,a=s,typeof i!="function")throw Error(Ae(191,i));i.call(a)}}}var Wc={},da=zn(Wc),pc=zn(Wc),fc=zn(Wc);function ni(r){if(r===Wc)throw Error(Ae(174));return r}function ff(r,t){switch(Zt(fc,t),Zt(pc,r),Zt(da,Wc),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ih(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=ih(t,r)}er(da),Zt(da,t)}function Po(){er(da),er(pc),er(fc)}function t2(r){ni(fc.current);var t=ni(da.current),s=ih(t,r.type);t!==s&&(Zt(pc,r),Zt(da,s))}function gf(r){pc.current===r&&(er(da),er(pc))}var sr=zn(0);function K0(r){for(var t=r;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xm=[];function yf(){for(var r=0;r<xm.length;r++)xm[r]._workInProgressVersionPrimary=null;xm.length=0}var d0=Ga.ReactCurrentDispatcher,mm=Ga.ReactCurrentBatchConfig,gi=0,nr=null,jr=null,Sr=null,Z0=!1,zl=!1,gc=0,WI=0;function Ur(){throw Error(Ae(321))}function bf(r,t){if(t===null)return!1;for(var s=0;s<t.length&&s<r.length;s++)if(!ea(r[s],t[s]))return!1;return!0}function vf(r,t,s,a,i,c){if(gi=c,nr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,d0.current=r===null||r.memoizedState===null?KI:ZI,r=s(a,i),zl){c=0;do{if(zl=!1,gc=0,25<=c)throw Error(Ae(301));c+=1,Sr=jr=null,t.updateQueue=null,d0.current=YI,r=s(a,i)}while(zl)}if(d0.current=Y0,t=jr!==null&&jr.next!==null,gi=0,Sr=jr=nr=null,Z0=!1,t)throw Error(Ae(300));return r}function jf(){var r=gc!==0;return gc=0,r}function ia(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?nr.memoizedState=Sr=r:Sr=Sr.next=r,Sr}function zs(){if(jr===null){var r=nr.alternate;r=r!==null?r.memoizedState:null}else r=jr.next;var t=Sr===null?nr.memoizedState:Sr.next;if(t!==null)Sr=t,jr=r;else{if(r===null)throw Error(Ae(310));jr=r,r={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Sr===null?nr.memoizedState=Sr=r:Sr=Sr.next=r}return Sr}function yc(r,t){return typeof t=="function"?t(r):t}function hm(r){var t=zs(),s=t.queue;if(s===null)throw Error(Ae(311));s.lastRenderedReducer=r;var a=jr,i=a.baseQueue,c=s.pending;if(c!==null){if(i!==null){var o=i.next;i.next=c.next,c.next=o}a.baseQueue=i=c,s.pending=null}if(i!==null){c=i.next,a=a.baseState;var d=o=null,u=null,m=c;do{var j=m.lane;if((gi&j)===j)u!==null&&(u=u.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),a=m.hasEagerState?m.eagerState:r(a,m.action);else{var k={lane:j,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};u===null?(d=u=k,o=a):u=u.next=k,nr.lanes|=j,yi|=j}m=m.next}while(m!==null&&m!==c);u===null?o=a:u.next=d,ea(a,t.memoizedState)||(us=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=u,s.lastRenderedState=a}if(r=s.interleaved,r!==null){i=r;do c=i.lane,nr.lanes|=c,yi|=c,i=i.next;while(i!==r)}else i===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function pm(r){var t=zs(),s=t.queue;if(s===null)throw Error(Ae(311));s.lastRenderedReducer=r;var a=s.dispatch,i=s.pending,c=t.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do c=r(c,o.action),o=o.next;while(o!==i);ea(c,t.memoizedState)||(us=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),s.lastRenderedState=c}return[c,a]}function r2(){}function s2(r,t){var s=nr,a=zs(),i=t(),c=!ea(a.memoizedState,i);if(c&&(a.memoizedState=i,us=!0),a=a.queue,wf(i2.bind(null,s,a,r),[r]),a.getSnapshot!==t||c||Sr!==null&&Sr.memoizedState.tag&1){if(s.flags|=2048,bc(9,n2.bind(null,s,a,i,t),void 0,null),Pr===null)throw Error(Ae(349));gi&30||a2(s,t,i)}return i}function a2(r,t,s){r.flags|=16384,r={getSnapshot:t,value:s},t=nr.updateQueue,t===null?(t={lastEffect:null,stores:null},nr.updateQueue=t,t.stores=[r]):(s=t.stores,s===null?t.stores=[r]:s.push(r))}function n2(r,t,s,a){t.value=s,t.getSnapshot=a,o2(t)&&l2(r)}function i2(r,t,s){return s(function(){o2(t)&&l2(r)})}function o2(r){var t=r.getSnapshot;r=r.value;try{var s=t();return!ea(r,s)}catch{return!0}}function l2(r){var t=La(r,1);t!==null&&Js(t,r,1,-1)}function tv(r){var t=ia();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yc,lastRenderedState:r},t.queue=r,r=r.dispatch=QI.bind(null,nr,r),[t.memoizedState,r]}function bc(r,t,s,a){return r={tag:r,create:t,destroy:s,deps:a,next:null},t=nr.updateQueue,t===null?(t={lastEffect:null,stores:null},nr.updateQueue=t,t.lastEffect=r.next=r):(s=t.lastEffect,s===null?t.lastEffect=r.next=r:(a=s.next,s.next=r,r.next=a,t.lastEffect=r)),r}function c2(){return zs().memoizedState}function u0(r,t,s,a){var i=ia();nr.flags|=r,i.memoizedState=bc(1|t,s,void 0,a===void 0?null:a)}function qu(r,t,s,a){var i=zs();a=a===void 0?null:a;var c=void 0;if(jr!==null){var o=jr.memoizedState;if(c=o.destroy,a!==null&&bf(a,o.deps)){i.memoizedState=bc(t,s,c,a);return}}nr.flags|=r,i.memoizedState=bc(1|t,s,c,a)}function rv(r,t){return u0(8390656,8,r,t)}function wf(r,t){return qu(2048,8,r,t)}function d2(r,t){return qu(4,2,r,t)}function u2(r,t){return qu(4,4,r,t)}function x2(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function m2(r,t,s){return s=s!=null?s.concat([r]):null,qu(4,4,x2.bind(null,t,r),s)}function Nf(){}function h2(r,t){var s=zs();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&bf(t,a[1])?a[0]:(s.memoizedState=[r,t],r)}function p2(r,t){var s=zs();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&bf(t,a[1])?a[0]:(r=r(),s.memoizedState=[r,t],r)}function f2(r,t,s){return gi&21?(ea(s,t)||(s=j5(),nr.lanes|=s,yi|=s,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,us=!0),r.memoizedState=s)}function qI(r,t){var s=Ht;Ht=s!==0&&4>s?s:4,r(!0);var a=mm.transition;mm.transition={};try{r(!1),t()}finally{Ht=s,mm.transition=a}}function g2(){return zs().memoizedState}function GI(r,t,s){var a=jn(r);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},y2(r))b2(t,s);else if(s=J5(r,t,s,a),s!==null){var i=ts();Js(s,r,a,i),v2(s,t,a)}}function QI(r,t,s){var a=jn(r),i={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(y2(r))b2(t,i);else{var c=r.alternate;if(r.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var o=t.lastRenderedState,d=c(o,s);if(i.hasEagerState=!0,i.eagerState=d,ea(d,o)){var u=t.interleaved;u===null?(i.next=i,hf(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}s=J5(r,t,i,a),s!==null&&(i=ts(),Js(s,r,a,i),v2(s,t,a))}}function y2(r){var t=r.alternate;return r===nr||t!==null&&t===nr}function b2(r,t){zl=Z0=!0;var s=r.pending;s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t}function v2(r,t,s){if(s&4194240){var a=t.lanes;a&=r.pendingLanes,s|=a,t.lanes=s,Jp(r,s)}}var Y0={readContext:Vs,useCallback:Ur,useContext:Ur,useEffect:Ur,useImperativeHandle:Ur,useInsertionEffect:Ur,useLayoutEffect:Ur,useMemo:Ur,useReducer:Ur,useRef:Ur,useState:Ur,useDebugValue:Ur,useDeferredValue:Ur,useTransition:Ur,useMutableSource:Ur,useSyncExternalStore:Ur,useId:Ur,unstable_isNewReconciler:!1},KI={readContext:Vs,useCallback:function(r,t){return ia().memoizedState=[r,t===void 0?null:t],r},useContext:Vs,useEffect:rv,useImperativeHandle:function(r,t,s){return s=s!=null?s.concat([r]):null,u0(4194308,4,x2.bind(null,t,r),s)},useLayoutEffect:function(r,t){return u0(4194308,4,r,t)},useInsertionEffect:function(r,t){return u0(4,2,r,t)},useMemo:function(r,t){var s=ia();return t=t===void 0?null:t,r=r(),s.memoizedState=[r,t],r},useReducer:function(r,t,s){var a=ia();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},a.queue=r,r=r.dispatch=GI.bind(null,nr,r),[a.memoizedState,r]},useRef:function(r){var t=ia();return r={current:r},t.memoizedState=r},useState:tv,useDebugValue:Nf,useDeferredValue:function(r){return ia().memoizedState=r},useTransition:function(){var r=tv(!1),t=r[0];return r=qI.bind(null,r[1]),ia().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,s){var a=nr,i=ia();if(rr){if(s===void 0)throw Error(Ae(407));s=s()}else{if(s=t(),Pr===null)throw Error(Ae(349));gi&30||a2(a,t,s)}i.memoizedState=s;var c={value:s,getSnapshot:t};return i.queue=c,rv(i2.bind(null,a,c,r),[r]),a.flags|=2048,bc(9,n2.bind(null,a,c,s,t),void 0,null),s},useId:function(){var r=ia(),t=Pr.identifierPrefix;if(rr){var s=Ca,a=Ea;s=(a&~(1<<32-Xs(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=gc++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=WI++,t=":"+t+"r"+s.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},ZI={readContext:Vs,useCallback:h2,useContext:Vs,useEffect:wf,useImperativeHandle:m2,useInsertionEffect:d2,useLayoutEffect:u2,useMemo:p2,useReducer:hm,useRef:c2,useState:function(){return hm(yc)},useDebugValue:Nf,useDeferredValue:function(r){var t=zs();return f2(t,jr.memoizedState,r)},useTransition:function(){var r=hm(yc)[0],t=zs().memoizedState;return[r,t]},useMutableSource:r2,useSyncExternalStore:s2,useId:g2,unstable_isNewReconciler:!1},YI={readContext:Vs,useCallback:h2,useContext:Vs,useEffect:wf,useImperativeHandle:m2,useInsertionEffect:d2,useLayoutEffect:u2,useMemo:p2,useReducer:pm,useRef:c2,useState:function(){return pm(yc)},useDebugValue:Nf,useDeferredValue:function(r){var t=zs();return jr===null?t.memoizedState=r:f2(t,jr.memoizedState,r)},useTransition:function(){var r=pm(yc)[0],t=zs().memoizedState;return[r,t]},useMutableSource:r2,useSyncExternalStore:s2,useId:g2,unstable_isNewReconciler:!1};function Gs(r,t){if(r&&r.defaultProps){t=lr({},t),r=r.defaultProps;for(var s in r)t[s]===void 0&&(t[s]=r[s]);return t}return t}function Ih(r,t,s,a){t=r.memoizedState,s=s(a,t),s=s==null?t:lr({},t,s),r.memoizedState=s,r.lanes===0&&(r.updateQueue.baseState=s)}var Gu={isMounted:function(r){return(r=r._reactInternals)?Pi(r)===r:!1},enqueueSetState:function(r,t,s){r=r._reactInternals;var a=ts(),i=jn(r),c=$a(a,i);c.payload=t,s!=null&&(c.callback=s),t=bn(r,c,i),t!==null&&(Js(t,r,i,a),c0(t,r,i))},enqueueReplaceState:function(r,t,s){r=r._reactInternals;var a=ts(),i=jn(r),c=$a(a,i);c.tag=1,c.payload=t,s!=null&&(c.callback=s),t=bn(r,c,i),t!==null&&(Js(t,r,i,a),c0(t,r,i))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var s=ts(),a=jn(r),i=$a(s,a);i.tag=2,t!=null&&(i.callback=t),t=bn(r,i,a),t!==null&&(Js(t,r,a,s),c0(t,r,a))}};function sv(r,t,s,a,i,c,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(a,c,o):t.prototype&&t.prototype.isPureReactComponent?!uc(s,a)||!uc(i,c):!0}function j2(r,t,s){var a=!1,i=En,c=t.contextType;return typeof c=="object"&&c!==null?c=Vs(c):(i=hs(t)?pi:Kr.current,a=t.contextTypes,c=(a=a!=null)?So(r,i):En),t=new t(s,c),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gu,r.stateNode=t,t._reactInternals=r,a&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=c),t}function av(r,t,s,a){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==r&&Gu.enqueueReplaceState(t,t.state,null)}function Ph(r,t,s,a){var i=r.stateNode;i.props=s,i.state=r.memoizedState,i.refs={},pf(r);var c=t.contextType;typeof c=="object"&&c!==null?i.context=Vs(c):(c=hs(t)?pi:Kr.current,i.context=So(r,c)),i.state=r.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(Ih(r,t,c,s),i.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Gu.enqueueReplaceState(i,i.state,null),Q0(r,s,i,a),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function Eo(r,t){try{var s="",a=t;do s+=ST(a),a=a.return;while(a);var i=s}catch(c){i=`
Error generating stack: `+c.message+`
`+c.stack}return{value:r,source:t,stack:i,digest:null}}function fm(r,t,s){return{value:r,source:null,stack:s??null,digest:t??null}}function Eh(r,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var XI=typeof WeakMap=="function"?WeakMap:Map;function w2(r,t,s){s=$a(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){J0||(J0=!0,Vh=a),Eh(r,t)},s}function N2(r,t,s){s=$a(-1,s),s.tag=3;var a=r.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;s.payload=function(){return a(i)},s.callback=function(){Eh(r,t)}}var c=r.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Eh(r,t),typeof a!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function nv(r,t,s){var a=r.pingCache;if(a===null){a=r.pingCache=new XI;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(s)||(i.add(s),r=xP.bind(null,r,t,s),t.then(r,r))}function iv(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function ov(r,t,s,a,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===t?r.flags|=65536:(r.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=$a(-1,1),t.tag=2,bn(s,t,1))),s.lanes|=1),r)}var JI=Ga.ReactCurrentOwner,us=!1;function Xr(r,t,s,a){t.child=r===null?X5(t,null,s,a):Io(t,r.child,s,a)}function lv(r,t,s,a,i){s=s.render;var c=t.ref;return yo(t,i),a=vf(r,t,s,a,c,i),s=jf(),r!==null&&!us?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Va(r,t,i)):(rr&&s&&lf(t),t.flags|=1,Xr(r,t,a,i),t.child)}function cv(r,t,s,a,i){if(r===null){var c=s.type;return typeof c=="function"&&!Df(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=c,k2(r,t,c,a,i)):(r=p0(s.type,null,a,t,t.mode,i),r.ref=t.ref,r.return=t,t.child=r)}if(c=r.child,!(r.lanes&i)){var o=c.memoizedProps;if(s=s.compare,s=s!==null?s:uc,s(o,a)&&r.ref===t.ref)return Va(r,t,i)}return t.flags|=1,r=wn(c,a),r.ref=t.ref,r.return=t,t.child=r}function k2(r,t,s,a,i){if(r!==null){var c=r.memoizedProps;if(uc(c,a)&&r.ref===t.ref)if(us=!1,t.pendingProps=a=c,(r.lanes&i)!==0)r.flags&131072&&(us=!0);else return t.lanes=r.lanes,Va(r,t,i)}return Ch(r,t,s,a,i)}function S2(r,t,s){var a=t.pendingProps,i=a.children,c=r!==null?r.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(no,js),js|=s;else{if(!(s&1073741824))return r=c!==null?c.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,Zt(no,js),js|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:s,Zt(no,js),js|=a}else c!==null?(a=c.baseLanes|s,t.memoizedState=null):a=s,Zt(no,js),js|=a;return Xr(r,t,i,s),t.child}function T2(r,t){var s=t.ref;(r===null&&s!==null||r!==null&&r.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ch(r,t,s,a,i){var c=hs(s)?pi:Kr.current;return c=So(t,c),yo(t,i),s=vf(r,t,s,a,c,i),a=jf(),r!==null&&!us?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Va(r,t,i)):(rr&&a&&lf(t),t.flags|=1,Xr(r,t,s,i),t.child)}function dv(r,t,s,a,i){if(hs(s)){var c=!0;F0(t)}else c=!1;if(yo(t,i),t.stateNode===null)x0(r,t),j2(t,s,a),Ph(t,s,a,i),a=!0;else if(r===null){var o=t.stateNode,d=t.memoizedProps;o.props=d;var u=o.context,m=s.contextType;typeof m=="object"&&m!==null?m=Vs(m):(m=hs(s)?pi:Kr.current,m=So(t,m));var j=s.getDerivedStateFromProps,k=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function";k||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==a||u!==m)&&av(t,o,a,m),sn=!1;var T=t.memoizedState;o.state=T,Q0(t,a,o,i),u=t.memoizedState,d!==a||T!==u||ms.current||sn?(typeof j=="function"&&(Ih(t,s,j,a),u=t.memoizedState),(d=sn||sv(t,s,d,a,T,u,m))?(k||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=u),o.props=a,o.state=u,o.context=m,a=d):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,e2(r,t),d=t.memoizedProps,m=t.type===t.elementType?d:Gs(t.type,d),o.props=m,k=t.pendingProps,T=o.context,u=s.contextType,typeof u=="object"&&u!==null?u=Vs(u):(u=hs(s)?pi:Kr.current,u=So(t,u));var C=s.getDerivedStateFromProps;(j=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==k||T!==u)&&av(t,o,a,u),sn=!1,T=t.memoizedState,o.state=T,Q0(t,a,o,i);var v=t.memoizedState;d!==k||T!==v||ms.current||sn?(typeof C=="function"&&(Ih(t,s,C,a),v=t.memoizedState),(m=sn||sv(t,s,m,a,T,v,u)||!1)?(j||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,v,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===r.memoizedProps&&T===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===r.memoizedProps&&T===r.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=v),o.props=a,o.state=v,o.context=u,a=m):(typeof o.componentDidUpdate!="function"||d===r.memoizedProps&&T===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===r.memoizedProps&&T===r.memoizedState||(t.flags|=1024),a=!1)}return Dh(r,t,s,a,c,i)}function Dh(r,t,s,a,i,c){T2(r,t);var o=(t.flags&128)!==0;if(!a&&!o)return i&&Kb(t,s,!1),Va(r,t,c);a=t.stateNode,JI.current=t;var d=o&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,r!==null&&o?(t.child=Io(t,r.child,null,c),t.child=Io(t,null,d,c)):Xr(r,t,d,c),t.memoizedState=a.state,i&&Kb(t,s,!0),t.child}function I2(r){var t=r.stateNode;t.pendingContext?Qb(r,t.pendingContext,t.pendingContext!==t.context):t.context&&Qb(r,t.context,!1),ff(r,t.containerInfo)}function uv(r,t,s,a,i){return To(),df(i),t.flags|=256,Xr(r,t,s,a),t.child}var _h={dehydrated:null,treeContext:null,retryLane:0};function $h(r){return{baseLanes:r,cachePool:null,transitions:null}}function P2(r,t,s){var a=t.pendingProps,i=sr.current,c=!1,o=(t.flags&128)!==0,d;if((d=o)||(d=r!==null&&r.memoizedState===null?!1:(i&2)!==0),d?(c=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),Zt(sr,i&1),r===null)return Sh(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,r=a.fallback,c?(a=t.mode,c=t.child,o={mode:"hidden",children:o},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=o):c=Zu(o,a,0,null),r=xi(r,a,s,null),c.return=t,r.return=t,c.sibling=r,t.child=c,t.child.memoizedState=$h(s),t.memoizedState=_h,r):kf(t,o));if(i=r.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return eP(r,t,o,a,d,i,s);if(c){c=a.fallback,o=t.mode,i=r.child,d=i.sibling;var u={mode:"hidden",children:a.children};return!(o&1)&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=u,t.deletions=null):(a=wn(i,u),a.subtreeFlags=i.subtreeFlags&14680064),d!==null?c=wn(d,c):(c=xi(c,o,s,null),c.flags|=2),c.return=t,a.return=t,a.sibling=c,t.child=a,a=c,c=t.child,o=r.child.memoizedState,o=o===null?$h(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},c.memoizedState=o,c.childLanes=r.childLanes&~s,t.memoizedState=_h,a}return c=r.child,r=c.sibling,a=wn(c,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=s),a.return=t,a.sibling=null,r!==null&&(s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)),t.child=a,t.memoizedState=null,a}function kf(r,t){return t=Zu({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function Ud(r,t,s,a){return a!==null&&df(a),Io(t,r.child,null,s),r=kf(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function eP(r,t,s,a,i,c,o){if(s)return t.flags&256?(t.flags&=-257,a=fm(Error(Ae(422))),Ud(r,t,o,a)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(c=a.fallback,i=t.mode,a=Zu({mode:"visible",children:a.children},i,0,null),c=xi(c,i,o,null),c.flags|=2,a.return=t,c.return=t,a.sibling=c,t.child=a,t.mode&1&&Io(t,r.child,null,o),t.child.memoizedState=$h(o),t.memoizedState=_h,c);if(!(t.mode&1))return Ud(r,t,o,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var d=a.dgst;return a=d,c=Error(Ae(419)),a=fm(c,a,void 0),Ud(r,t,o,a)}if(d=(o&r.childLanes)!==0,us||d){if(a=Pr,a!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(a.suspendedLanes|o)?0:i,i!==0&&i!==c.retryLane&&(c.retryLane=i,La(r,i),Js(a,r,i,-1))}return Cf(),a=fm(Error(Ae(421))),Ud(r,t,o,a)}return i.data==="$?"?(t.flags|=128,t.child=r.child,t=mP.bind(null,r),i._reactRetry=t,null):(r=c.treeContext,Ns=yn(i.nextSibling),Ss=t,rr=!0,Ks=null,r!==null&&(As[Rs++]=Ea,As[Rs++]=Ca,As[Rs++]=fi,Ea=r.id,Ca=r.overflow,fi=t),t=kf(t,a.children),t.flags|=4096,t)}function xv(r,t,s){r.lanes|=t;var a=r.alternate;a!==null&&(a.lanes|=t),Th(r.return,t,s)}function gm(r,t,s,a,i){var c=r.memoizedState;c===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:i}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=s,c.tailMode=i)}function E2(r,t,s){var a=t.pendingProps,i=a.revealOrder,c=a.tail;if(Xr(r,t,a.children,s),a=sr.current,a&2)a=a&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&xv(r,s,t);else if(r.tag===19)xv(r,s,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}a&=1}if(Zt(sr,a),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(s=t.child,i=null;s!==null;)r=s.alternate,r!==null&&K0(r)===null&&(i=s),s=s.sibling;s=i,s===null?(i=t.child,t.child=null):(i=s.sibling,s.sibling=null),gm(t,!1,i,s,c);break;case"backwards":for(s=null,i=t.child,t.child=null;i!==null;){if(r=i.alternate,r!==null&&K0(r)===null){t.child=i;break}r=i.sibling,i.sibling=s,s=i,i=r}gm(t,!0,s,null,c);break;case"together":gm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function x0(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function Va(r,t,s){if(r!==null&&(t.dependencies=r.dependencies),yi|=t.lanes,!(s&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(Ae(153));if(t.child!==null){for(r=t.child,s=wn(r,r.pendingProps),t.child=s,s.return=t;r.sibling!==null;)r=r.sibling,s=s.sibling=wn(r,r.pendingProps),s.return=t;s.sibling=null}return t.child}function tP(r,t,s){switch(t.tag){case 3:I2(t),To();break;case 5:t2(t);break;case 1:hs(t.type)&&F0(t);break;case 4:ff(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Zt(q0,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Zt(sr,sr.current&1),t.flags|=128,null):s&t.child.childLanes?P2(r,t,s):(Zt(sr,sr.current&1),r=Va(r,t,s),r!==null?r.sibling:null);Zt(sr,sr.current&1);break;case 19:if(a=(s&t.childLanes)!==0,r.flags&128){if(a)return E2(r,t,s);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Zt(sr,sr.current),a)break;return null;case 22:case 23:return t.lanes=0,S2(r,t,s)}return Va(r,t,s)}var C2,Ah,D2,_2;C2=function(r,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)r.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Ah=function(){};D2=function(r,t,s,a){var i=r.memoizedProps;if(i!==a){r=t.stateNode,ni(da.current);var c=null;switch(s){case"input":i=rh(r,i),a=rh(r,a),c=[];break;case"select":i=lr({},i,{value:void 0}),a=lr({},a,{value:void 0}),c=[];break;case"textarea":i=nh(r,i),a=nh(r,a),c=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(r.onclick=B0)}oh(s,a);var o;s=null;for(m in i)if(!a.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var d=i[m];for(o in d)d.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ac.hasOwnProperty(m)?c||(c=[]):(c=c||[]).push(m,null));for(m in a){var u=a[m];if(d=i!=null?i[m]:void 0,a.hasOwnProperty(m)&&u!==d&&(u!=null||d!=null))if(m==="style")if(d){for(o in d)!d.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in u)u.hasOwnProperty(o)&&d[o]!==u[o]&&(s||(s={}),s[o]=u[o])}else s||(c||(c=[]),c.push(m,s)),s=u;else m==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,d=d?d.__html:void 0,u!=null&&d!==u&&(c=c||[]).push(m,u)):m==="children"?typeof u!="string"&&typeof u!="number"||(c=c||[]).push(m,""+u):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ac.hasOwnProperty(m)?(u!=null&&m==="onScroll"&&Jt("scroll",r),c||d===u||(c=[])):(c=c||[]).push(m,u))}s&&(c=c||[]).push("style",s);var m=c;(t.updateQueue=m)&&(t.flags|=4)}};_2=function(r,t,s,a){s!==a&&(t.flags|=4)};function yl(r,t){if(!rr)switch(r.tailMode){case"hidden":t=r.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?r.tail=null:s.sibling=null;break;case"collapsed":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:a.sibling=null}}function Fr(r){var t=r.alternate!==null&&r.alternate.child===r.child,s=0,a=0;if(t)for(var i=r.child;i!==null;)s|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)s|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=a,r.childLanes=s,t}function rP(r,t,s){var a=t.pendingProps;switch(cf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(t),null;case 1:return hs(t.type)&&U0(),Fr(t),null;case 3:return a=t.stateNode,Po(),er(ms),er(Kr),yf(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(zd(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ks!==null&&(Uh(Ks),Ks=null))),Ah(r,t),Fr(t),null;case 5:gf(t);var i=ni(fc.current);if(s=t.type,r!==null&&t.stateNode!=null)D2(r,t,s,a,i),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Ae(166));return Fr(t),null}if(r=ni(da.current),zd(t)){a=t.stateNode,s=t.type;var c=t.memoizedProps;switch(a[la]=t,a[hc]=c,r=(t.mode&1)!==0,s){case"dialog":Jt("cancel",a),Jt("close",a);break;case"iframe":case"object":case"embed":Jt("load",a);break;case"video":case"audio":for(i=0;i<Tl.length;i++)Jt(Tl[i],a);break;case"source":Jt("error",a);break;case"img":case"image":case"link":Jt("error",a),Jt("load",a);break;case"details":Jt("toggle",a);break;case"input":jb(a,c),Jt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},Jt("invalid",a);break;case"textarea":Nb(a,c),Jt("invalid",a)}oh(s,c),i=null;for(var o in c)if(c.hasOwnProperty(o)){var d=c[o];o==="children"?typeof d=="string"?a.textContent!==d&&(c.suppressHydrationWarning!==!0&&Vd(a.textContent,d,r),i=["children",d]):typeof d=="number"&&a.textContent!==""+d&&(c.suppressHydrationWarning!==!0&&Vd(a.textContent,d,r),i=["children",""+d]):ac.hasOwnProperty(o)&&d!=null&&o==="onScroll"&&Jt("scroll",a)}switch(s){case"input":Dd(a),wb(a,c,!0);break;case"textarea":Dd(a),kb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=B0)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=i5(s)),r==="http://www.w3.org/1999/xhtml"?s==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof a.is=="string"?r=o.createElement(s,{is:a.is}):(r=o.createElement(s),s==="select"&&(o=r,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):r=o.createElementNS(r,s),r[la]=t,r[hc]=a,C2(r,t,!1,!1),t.stateNode=r;e:{switch(o=lh(s,a),s){case"dialog":Jt("cancel",r),Jt("close",r),i=a;break;case"iframe":case"object":case"embed":Jt("load",r),i=a;break;case"video":case"audio":for(i=0;i<Tl.length;i++)Jt(Tl[i],r);i=a;break;case"source":Jt("error",r),i=a;break;case"img":case"image":case"link":Jt("error",r),Jt("load",r),i=a;break;case"details":Jt("toggle",r),i=a;break;case"input":jb(r,a),i=rh(r,a),Jt("invalid",r);break;case"option":i=a;break;case"select":r._wrapperState={wasMultiple:!!a.multiple},i=lr({},a,{value:void 0}),Jt("invalid",r);break;case"textarea":Nb(r,a),i=nh(r,a),Jt("invalid",r);break;default:i=a}oh(s,i),d=i;for(c in d)if(d.hasOwnProperty(c)){var u=d[c];c==="style"?c5(r,u):c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&o5(r,u)):c==="children"?typeof u=="string"?(s!=="textarea"||u!=="")&&nc(r,u):typeof u=="number"&&nc(r,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ac.hasOwnProperty(c)?u!=null&&c==="onScroll"&&Jt("scroll",r):u!=null&&Gp(r,c,u,o))}switch(s){case"input":Dd(r),wb(r,a,!1);break;case"textarea":Dd(r),kb(r);break;case"option":a.value!=null&&r.setAttribute("value",""+Pn(a.value));break;case"select":r.multiple=!!a.multiple,c=a.value,c!=null?ho(r,!!a.multiple,c,!1):a.defaultValue!=null&&ho(r,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=B0)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fr(t),null;case 6:if(r&&t.stateNode!=null)_2(r,t,r.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ae(166));if(s=ni(fc.current),ni(da.current),zd(t)){if(a=t.stateNode,s=t.memoizedProps,a[la]=t,(c=a.nodeValue!==s)&&(r=Ss,r!==null))switch(r.tag){case 3:Vd(a.nodeValue,s,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Vd(a.nodeValue,s,(r.mode&1)!==0)}c&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[la]=t,t.stateNode=a}return Fr(t),null;case 13:if(er(sr),a=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(rr&&Ns!==null&&t.mode&1&&!(t.flags&128))Z5(),To(),t.flags|=98560,c=!1;else if(c=zd(t),a!==null&&a.dehydrated!==null){if(r===null){if(!c)throw Error(Ae(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Ae(317));c[la]=t}else To(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fr(t),c=!1}else Ks!==null&&(Uh(Ks),Ks=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(a=a!==null,a!==(r!==null&&r.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(r===null||sr.current&1?wr===0&&(wr=3):Cf())),t.updateQueue!==null&&(t.flags|=4),Fr(t),null);case 4:return Po(),Ah(r,t),r===null&&xc(t.stateNode.containerInfo),Fr(t),null;case 10:return mf(t.type._context),Fr(t),null;case 17:return hs(t.type)&&U0(),Fr(t),null;case 19:if(er(sr),c=t.memoizedState,c===null)return Fr(t),null;if(a=(t.flags&128)!==0,o=c.rendering,o===null)if(a)yl(c,!1);else{if(wr!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(o=K0(r),o!==null){for(t.flags|=128,yl(c,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)c=s,r=a,c.flags&=14680066,o=c.alternate,o===null?(c.childLanes=0,c.lanes=r,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,c.type=o.type,r=o.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s=s.sibling;return Zt(sr,sr.current&1|2),t.child}r=r.sibling}c.tail!==null&&fr()>Co&&(t.flags|=128,a=!0,yl(c,!1),t.lanes=4194304)}else{if(!a)if(r=K0(o),r!==null){if(t.flags|=128,a=!0,s=r.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),yl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!o.alternate&&!rr)return Fr(t),null}else 2*fr()-c.renderingStartTime>Co&&s!==1073741824&&(t.flags|=128,a=!0,yl(c,!1),t.lanes=4194304);c.isBackwards?(o.sibling=t.child,t.child=o):(s=c.last,s!==null?s.sibling=o:t.child=o,c.last=o)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=fr(),t.sibling=null,s=sr.current,Zt(sr,a?s&1|2:s&1),t):(Fr(t),null);case 22:case 23:return Ef(),a=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?js&1073741824&&(Fr(t),t.subtreeFlags&6&&(t.flags|=8192)):Fr(t),null;case 24:return null;case 25:return null}throw Error(Ae(156,t.tag))}function sP(r,t){switch(cf(t),t.tag){case 1:return hs(t.type)&&U0(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return Po(),er(ms),er(Kr),yf(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return gf(t),null;case 13:if(er(sr),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(Ae(340));To()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return er(sr),null;case 4:return Po(),null;case 10:return mf(t.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var Fd=!1,Gr=!1,aP=typeof WeakSet=="function"?WeakSet:Set,Je=null;function ao(r,t){var s=r.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){mr(r,t,a)}else s.current=null}function Rh(r,t,s){try{s()}catch(a){mr(r,t,a)}}var mv=!1;function nP(r,t){if(yh=L0,r=O5(),of(r)){if("selectionStart"in r)var s={start:r.selectionStart,end:r.selectionEnd};else e:{s=(s=r.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var i=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var o=0,d=-1,u=-1,m=0,j=0,k=r,T=null;t:for(;;){for(var C;k!==s||i!==0&&k.nodeType!==3||(d=o+i),k!==c||a!==0&&k.nodeType!==3||(u=o+a),k.nodeType===3&&(o+=k.nodeValue.length),(C=k.firstChild)!==null;)T=k,k=C;for(;;){if(k===r)break t;if(T===s&&++m===i&&(d=o),T===c&&++j===a&&(u=o),(C=k.nextSibling)!==null)break;k=T,T=k.parentNode}k=C}s=d===-1||u===-1?null:{start:d,end:u}}else s=null}s=s||{start:0,end:0}}else s=null;for(bh={focusedElem:r,selectionRange:s},L0=!1,Je=t;Je!==null;)if(t=Je,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,Je=r;else for(;Je!==null;){t=Je;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var L=v.memoizedProps,$=v.memoizedState,R=t.stateNode,V=R.getSnapshotBeforeUpdate(t.elementType===t.type?L:Gs(t.type,L),$);R.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(re){mr(t,t.return,re)}if(r=t.sibling,r!==null){r.return=t.return,Je=r;break}Je=t.return}return v=mv,mv=!1,v}function Bl(r,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&r)===r){var c=i.destroy;i.destroy=void 0,c!==void 0&&Rh(t,s,c)}i=i.next}while(i!==a)}}function Qu(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&r)===r){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function Mh(r){var t=r.ref;if(t!==null){var s=r.stateNode;switch(r.tag){case 5:r=s;break;default:r=s}typeof t=="function"?t(r):t.current=r}}function $2(r){var t=r.alternate;t!==null&&(r.alternate=null,$2(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[la],delete t[hc],delete t[wh],delete t[BI],delete t[UI])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function A2(r){return r.tag===5||r.tag===3||r.tag===4}function hv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||A2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Oh(r,t,s){var a=r.tag;if(a===5||a===6)r=r.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(r,t):s.insertBefore(r,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(r,s)):(t=s,t.appendChild(r)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=B0));else if(a!==4&&(r=r.child,r!==null))for(Oh(r,t,s),r=r.sibling;r!==null;)Oh(r,t,s),r=r.sibling}function Lh(r,t,s){var a=r.tag;if(a===5||a===6)r=r.stateNode,t?s.insertBefore(r,t):s.appendChild(r);else if(a!==4&&(r=r.child,r!==null))for(Lh(r,t,s),r=r.sibling;r!==null;)Lh(r,t,s),r=r.sibling}var Cr=null,Qs=!1;function Ja(r,t,s){for(s=s.child;s!==null;)R2(r,t,s),s=s.sibling}function R2(r,t,s){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(zu,s)}catch{}switch(s.tag){case 5:Gr||ao(s,t);case 6:var a=Cr,i=Qs;Cr=null,Ja(r,t,s),Cr=a,Qs=i,Cr!==null&&(Qs?(r=Cr,s=s.stateNode,r.nodeType===8?r.parentNode.removeChild(s):r.removeChild(s)):Cr.removeChild(s.stateNode));break;case 18:Cr!==null&&(Qs?(r=Cr,s=s.stateNode,r.nodeType===8?dm(r.parentNode,s):r.nodeType===1&&dm(r,s),cc(r)):dm(Cr,s.stateNode));break;case 4:a=Cr,i=Qs,Cr=s.stateNode.containerInfo,Qs=!0,Ja(r,t,s),Cr=a,Qs=i;break;case 0:case 11:case 14:case 15:if(!Gr&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var c=i,o=c.destroy;c=c.tag,o!==void 0&&(c&2||c&4)&&Rh(s,t,o),i=i.next}while(i!==a)}Ja(r,t,s);break;case 1:if(!Gr&&(ao(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(d){mr(s,t,d)}Ja(r,t,s);break;case 21:Ja(r,t,s);break;case 22:s.mode&1?(Gr=(a=Gr)||s.memoizedState!==null,Ja(r,t,s),Gr=a):Ja(r,t,s);break;default:Ja(r,t,s)}}function pv(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var s=r.stateNode;s===null&&(s=r.stateNode=new aP),t.forEach(function(a){var i=hP.bind(null,r,a);s.has(a)||(s.add(a),a.then(i,i))})}}function Ws(r,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var i=s[a];try{var c=r,o=t,d=o;e:for(;d!==null;){switch(d.tag){case 5:Cr=d.stateNode,Qs=!1;break e;case 3:Cr=d.stateNode.containerInfo,Qs=!0;break e;case 4:Cr=d.stateNode.containerInfo,Qs=!0;break e}d=d.return}if(Cr===null)throw Error(Ae(160));R2(c,o,i),Cr=null,Qs=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(m){mr(i,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)M2(t,r),t=t.sibling}function M2(r,t){var s=r.alternate,a=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ws(t,r),na(r),a&4){try{Bl(3,r,r.return),Qu(3,r)}catch(L){mr(r,r.return,L)}try{Bl(5,r,r.return)}catch(L){mr(r,r.return,L)}}break;case 1:Ws(t,r),na(r),a&512&&s!==null&&ao(s,s.return);break;case 5:if(Ws(t,r),na(r),a&512&&s!==null&&ao(s,s.return),r.flags&32){var i=r.stateNode;try{nc(i,"")}catch(L){mr(r,r.return,L)}}if(a&4&&(i=r.stateNode,i!=null)){var c=r.memoizedProps,o=s!==null?s.memoizedProps:c,d=r.type,u=r.updateQueue;if(r.updateQueue=null,u!==null)try{d==="input"&&c.type==="radio"&&c.name!=null&&a5(i,c),lh(d,o);var m=lh(d,c);for(o=0;o<u.length;o+=2){var j=u[o],k=u[o+1];j==="style"?c5(i,k):j==="dangerouslySetInnerHTML"?o5(i,k):j==="children"?nc(i,k):Gp(i,j,k,m)}switch(d){case"input":sh(i,c);break;case"textarea":n5(i,c);break;case"select":var T=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!c.multiple;var C=c.value;C!=null?ho(i,!!c.multiple,C,!1):T!==!!c.multiple&&(c.defaultValue!=null?ho(i,!!c.multiple,c.defaultValue,!0):ho(i,!!c.multiple,c.multiple?[]:"",!1))}i[hc]=c}catch(L){mr(r,r.return,L)}}break;case 6:if(Ws(t,r),na(r),a&4){if(r.stateNode===null)throw Error(Ae(162));i=r.stateNode,c=r.memoizedProps;try{i.nodeValue=c}catch(L){mr(r,r.return,L)}}break;case 3:if(Ws(t,r),na(r),a&4&&s!==null&&s.memoizedState.isDehydrated)try{cc(t.containerInfo)}catch(L){mr(r,r.return,L)}break;case 4:Ws(t,r),na(r);break;case 13:Ws(t,r),na(r),i=r.child,i.flags&8192&&(c=i.memoizedState!==null,i.stateNode.isHidden=c,!c||i.alternate!==null&&i.alternate.memoizedState!==null||(If=fr())),a&4&&pv(r);break;case 22:if(j=s!==null&&s.memoizedState!==null,r.mode&1?(Gr=(m=Gr)||j,Ws(t,r),Gr=m):Ws(t,r),na(r),a&8192){if(m=r.memoizedState!==null,(r.stateNode.isHidden=m)&&!j&&r.mode&1)for(Je=r,j=r.child;j!==null;){for(k=Je=j;Je!==null;){switch(T=Je,C=T.child,T.tag){case 0:case 11:case 14:case 15:Bl(4,T,T.return);break;case 1:ao(T,T.return);var v=T.stateNode;if(typeof v.componentWillUnmount=="function"){a=T,s=T.return;try{t=a,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(L){mr(a,s,L)}}break;case 5:ao(T,T.return);break;case 22:if(T.memoizedState!==null){gv(k);continue}}C!==null?(C.return=T,Je=C):gv(k)}j=j.sibling}e:for(j=null,k=r;;){if(k.tag===5){if(j===null){j=k;try{i=k.stateNode,m?(c=i.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(d=k.stateNode,u=k.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,d.style.display=l5("display",o))}catch(L){mr(r,r.return,L)}}}else if(k.tag===6){if(j===null)try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(L){mr(r,r.return,L)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===r)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===r)break e;for(;k.sibling===null;){if(k.return===null||k.return===r)break e;j===k&&(j=null),k=k.return}j===k&&(j=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Ws(t,r),na(r),a&4&&pv(r);break;case 21:break;default:Ws(t,r),na(r)}}function na(r){var t=r.flags;if(t&2){try{e:{for(var s=r.return;s!==null;){if(A2(s)){var a=s;break e}s=s.return}throw Error(Ae(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(nc(i,""),a.flags&=-33);var c=hv(r);Lh(r,c,i);break;case 3:case 4:var o=a.stateNode.containerInfo,d=hv(r);Oh(r,d,o);break;default:throw Error(Ae(161))}}catch(u){mr(r,r.return,u)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function iP(r,t,s){Je=r,O2(r)}function O2(r,t,s){for(var a=(r.mode&1)!==0;Je!==null;){var i=Je,c=i.child;if(i.tag===22&&a){var o=i.memoizedState!==null||Fd;if(!o){var d=i.alternate,u=d!==null&&d.memoizedState!==null||Gr;d=Fd;var m=Gr;if(Fd=o,(Gr=u)&&!m)for(Je=i;Je!==null;)o=Je,u=o.child,o.tag===22&&o.memoizedState!==null?yv(i):u!==null?(u.return=o,Je=u):yv(i);for(;c!==null;)Je=c,O2(c),c=c.sibling;Je=i,Fd=d,Gr=m}fv(r)}else i.subtreeFlags&8772&&c!==null?(c.return=i,Je=c):fv(r)}}function fv(r){for(;Je!==null;){var t=Je;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gr||Qu(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Gr)if(s===null)a.componentDidMount();else{var i=t.elementType===t.type?s.memoizedProps:Gs(t.type,s.memoizedProps);a.componentDidUpdate(i,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&ev(t,c,a);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}ev(t,o,s)}break;case 5:var d=t.stateNode;if(s===null&&t.flags&4){s=d;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&s.focus();break;case"img":u.src&&(s.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var j=m.memoizedState;if(j!==null){var k=j.dehydrated;k!==null&&cc(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Gr||t.flags&512&&Mh(t)}catch(T){mr(t,t.return,T)}}if(t===r){Je=null;break}if(s=t.sibling,s!==null){s.return=t.return,Je=s;break}Je=t.return}}function gv(r){for(;Je!==null;){var t=Je;if(t===r){Je=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Je=s;break}Je=t.return}}function yv(r){for(;Je!==null;){var t=Je;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Qu(4,t)}catch(u){mr(t,s,u)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(u){mr(t,i,u)}}var c=t.return;try{Mh(t)}catch(u){mr(t,c,u)}break;case 5:var o=t.return;try{Mh(t)}catch(u){mr(t,o,u)}}}catch(u){mr(t,t.return,u)}if(t===r){Je=null;break}var d=t.sibling;if(d!==null){d.return=t.return,Je=d;break}Je=t.return}}var oP=Math.ceil,X0=Ga.ReactCurrentDispatcher,Sf=Ga.ReactCurrentOwner,Os=Ga.ReactCurrentBatchConfig,Rt=0,Pr=null,br=null,Mr=0,js=0,no=zn(0),wr=0,vc=null,yi=0,Ku=0,Tf=0,Ul=null,cs=null,If=0,Co=1/0,Ia=null,J0=!1,Vh=null,vn=null,Hd=!1,xn=null,eu=0,Fl=0,zh=null,m0=-1,h0=0;function ts(){return Rt&6?fr():m0!==-1?m0:m0=fr()}function jn(r){return r.mode&1?Rt&2&&Mr!==0?Mr&-Mr:HI.transition!==null?(h0===0&&(h0=j5()),h0):(r=Ht,r!==0||(r=window.event,r=r===void 0?16:P5(r.type)),r):1}function Js(r,t,s,a){if(50<Fl)throw Fl=0,zh=null,Error(Ae(185));Uc(r,s,a),(!(Rt&2)||r!==Pr)&&(r===Pr&&(!(Rt&2)&&(Ku|=s),wr===4&&nn(r,Mr)),ps(r,a),s===1&&Rt===0&&!(t.mode&1)&&(Co=fr()+500,Wu&&Bn()))}function ps(r,t){var s=r.callbackNode;HT(r,t);var a=O0(r,r===Pr?Mr:0);if(a===0)s!==null&&Ib(s),r.callbackNode=null,r.callbackPriority=0;else if(t=a&-a,r.callbackPriority!==t){if(s!=null&&Ib(s),t===1)r.tag===0?FI(bv.bind(null,r)):G5(bv.bind(null,r)),VI(function(){!(Rt&6)&&Bn()}),s=null;else{switch(w5(a)){case 1:s=Xp;break;case 4:s=b5;break;case 16:s=M0;break;case 536870912:s=v5;break;default:s=M0}s=W2(s,L2.bind(null,r))}r.callbackPriority=t,r.callbackNode=s}}function L2(r,t){if(m0=-1,h0=0,Rt&6)throw Error(Ae(327));var s=r.callbackNode;if(bo()&&r.callbackNode!==s)return null;var a=O0(r,r===Pr?Mr:0);if(a===0)return null;if(a&30||a&r.expiredLanes||t)t=tu(r,a);else{t=a;var i=Rt;Rt|=2;var c=z2();(Pr!==r||Mr!==t)&&(Ia=null,Co=fr()+500,ui(r,t));do try{dP();break}catch(d){V2(r,d)}while(1);xf(),X0.current=c,Rt=i,br!==null?t=0:(Pr=null,Mr=0,t=wr)}if(t!==0){if(t===2&&(i=mh(r),i!==0&&(a=i,t=Bh(r,i))),t===1)throw s=vc,ui(r,0),nn(r,a),ps(r,fr()),s;if(t===6)nn(r,a);else{if(i=r.current.alternate,!(a&30)&&!lP(i)&&(t=tu(r,a),t===2&&(c=mh(r),c!==0&&(a=c,t=Bh(r,c))),t===1))throw s=vc,ui(r,0),nn(r,a),ps(r,fr()),s;switch(r.finishedWork=i,r.finishedLanes=a,t){case 0:case 1:throw Error(Ae(345));case 2:ei(r,cs,Ia);break;case 3:if(nn(r,a),(a&130023424)===a&&(t=If+500-fr(),10<t)){if(O0(r,0)!==0)break;if(i=r.suspendedLanes,(i&a)!==a){ts(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=jh(ei.bind(null,r,cs,Ia),t);break}ei(r,cs,Ia);break;case 4:if(nn(r,a),(a&4194240)===a)break;for(t=r.eventTimes,i=-1;0<a;){var o=31-Xs(a);c=1<<o,o=t[o],o>i&&(i=o),a&=~c}if(a=i,a=fr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*oP(a/1960))-a,10<a){r.timeoutHandle=jh(ei.bind(null,r,cs,Ia),a);break}ei(r,cs,Ia);break;case 5:ei(r,cs,Ia);break;default:throw Error(Ae(329))}}}return ps(r,fr()),r.callbackNode===s?L2.bind(null,r):null}function Bh(r,t){var s=Ul;return r.current.memoizedState.isDehydrated&&(ui(r,t).flags|=256),r=tu(r,t),r!==2&&(t=cs,cs=s,t!==null&&Uh(t)),r}function Uh(r){cs===null?cs=r:cs.push.apply(cs,r)}function lP(r){for(var t=r;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var i=s[a],c=i.getSnapshot;i=i.value;try{if(!ea(c(),i))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(r,t){for(t&=~Tf,t&=~Ku,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var s=31-Xs(t),a=1<<s;r[s]=-1,t&=~a}}function bv(r){if(Rt&6)throw Error(Ae(327));bo();var t=O0(r,0);if(!(t&1))return ps(r,fr()),null;var s=tu(r,t);if(r.tag!==0&&s===2){var a=mh(r);a!==0&&(t=a,s=Bh(r,a))}if(s===1)throw s=vc,ui(r,0),nn(r,t),ps(r,fr()),s;if(s===6)throw Error(Ae(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,ei(r,cs,Ia),ps(r,fr()),null}function Pf(r,t){var s=Rt;Rt|=1;try{return r(t)}finally{Rt=s,Rt===0&&(Co=fr()+500,Wu&&Bn())}}function bi(r){xn!==null&&xn.tag===0&&!(Rt&6)&&bo();var t=Rt;Rt|=1;var s=Os.transition,a=Ht;try{if(Os.transition=null,Ht=1,r)return r()}finally{Ht=a,Os.transition=s,Rt=t,!(Rt&6)&&Bn()}}function Ef(){js=no.current,er(no)}function ui(r,t){r.finishedWork=null,r.finishedLanes=0;var s=r.timeoutHandle;if(s!==-1&&(r.timeoutHandle=-1,LI(s)),br!==null)for(s=br.return;s!==null;){var a=s;switch(cf(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&U0();break;case 3:Po(),er(ms),er(Kr),yf();break;case 5:gf(a);break;case 4:Po();break;case 13:er(sr);break;case 19:er(sr);break;case 10:mf(a.type._context);break;case 22:case 23:Ef()}s=s.return}if(Pr=r,br=r=wn(r.current,null),Mr=js=t,wr=0,vc=null,Tf=Ku=yi=0,cs=Ul=null,ai!==null){for(t=0;t<ai.length;t++)if(s=ai[t],a=s.interleaved,a!==null){s.interleaved=null;var i=a.next,c=s.pending;if(c!==null){var o=c.next;c.next=i,a.next=o}s.pending=a}ai=null}return r}function V2(r,t){do{var s=br;try{if(xf(),d0.current=Y0,Z0){for(var a=nr.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Z0=!1}if(gi=0,Sr=jr=nr=null,zl=!1,gc=0,Sf.current=null,s===null||s.return===null){wr=1,vc=t,br=null;break}e:{var c=r,o=s.return,d=s,u=t;if(t=Mr,d.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=u,j=d,k=j.tag;if(!(j.mode&1)&&(k===0||k===11||k===15)){var T=j.alternate;T?(j.updateQueue=T.updateQueue,j.memoizedState=T.memoizedState,j.lanes=T.lanes):(j.updateQueue=null,j.memoizedState=null)}var C=iv(o);if(C!==null){C.flags&=-257,ov(C,o,d,c,t),C.mode&1&&nv(c,m,t),t=C,u=m;var v=t.updateQueue;if(v===null){var L=new Set;L.add(u),t.updateQueue=L}else v.add(u);break e}else{if(!(t&1)){nv(c,m,t),Cf();break e}u=Error(Ae(426))}}else if(rr&&d.mode&1){var $=iv(o);if($!==null){!($.flags&65536)&&($.flags|=256),ov($,o,d,c,t),df(Eo(u,d));break e}}c=u=Eo(u,d),wr!==4&&(wr=2),Ul===null?Ul=[c]:Ul.push(c),c=o;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var R=w2(c,u,t);Jb(c,R);break e;case 1:d=u;var V=c.type,z=c.stateNode;if(!(c.flags&128)&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(vn===null||!vn.has(z)))){c.flags|=65536,t&=-t,c.lanes|=t;var re=N2(c,d,t);Jb(c,re);break e}}c=c.return}while(c!==null)}U2(s)}catch(q){t=q,br===s&&s!==null&&(br=s=s.return);continue}break}while(1)}function z2(){var r=X0.current;return X0.current=Y0,r===null?Y0:r}function Cf(){(wr===0||wr===3||wr===2)&&(wr=4),Pr===null||!(yi&268435455)&&!(Ku&268435455)||nn(Pr,Mr)}function tu(r,t){var s=Rt;Rt|=2;var a=z2();(Pr!==r||Mr!==t)&&(Ia=null,ui(r,t));do try{cP();break}catch(i){V2(r,i)}while(1);if(xf(),Rt=s,X0.current=a,br!==null)throw Error(Ae(261));return Pr=null,Mr=0,wr}function cP(){for(;br!==null;)B2(br)}function dP(){for(;br!==null&&!RT();)B2(br)}function B2(r){var t=H2(r.alternate,r,js);r.memoizedProps=r.pendingProps,t===null?U2(r):br=t,Sf.current=null}function U2(r){var t=r;do{var s=t.alternate;if(r=t.return,t.flags&32768){if(s=sP(s,t),s!==null){s.flags&=32767,br=s;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wr=6,br=null;return}}else if(s=rP(s,t,js),s!==null){br=s;return}if(t=t.sibling,t!==null){br=t;return}br=t=r}while(t!==null);wr===0&&(wr=5)}function ei(r,t,s){var a=Ht,i=Os.transition;try{Os.transition=null,Ht=1,uP(r,t,s,a)}finally{Os.transition=i,Ht=a}return null}function uP(r,t,s,a){do bo();while(xn!==null);if(Rt&6)throw Error(Ae(327));s=r.finishedWork;var i=r.finishedLanes;if(s===null)return null;if(r.finishedWork=null,r.finishedLanes=0,s===r.current)throw Error(Ae(177));r.callbackNode=null,r.callbackPriority=0;var c=s.lanes|s.childLanes;if(WT(r,c),r===Pr&&(br=Pr=null,Mr=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Hd||(Hd=!0,W2(M0,function(){return bo(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=Os.transition,Os.transition=null;var o=Ht;Ht=1;var d=Rt;Rt|=4,Sf.current=null,nP(r,s),M2(s,r),DI(bh),L0=!!yh,bh=yh=null,r.current=s,iP(s),MT(),Rt=d,Ht=o,Os.transition=c}else r.current=s;if(Hd&&(Hd=!1,xn=r,eu=i),c=r.pendingLanes,c===0&&(vn=null),VT(s.stateNode),ps(r,fr()),t!==null)for(a=r.onRecoverableError,s=0;s<t.length;s++)i=t[s],a(i.value,{componentStack:i.stack,digest:i.digest});if(J0)throw J0=!1,r=Vh,Vh=null,r;return eu&1&&r.tag!==0&&bo(),c=r.pendingLanes,c&1?r===zh?Fl++:(Fl=0,zh=r):Fl=0,Bn(),null}function bo(){if(xn!==null){var r=w5(eu),t=Os.transition,s=Ht;try{if(Os.transition=null,Ht=16>r?16:r,xn===null)var a=!1;else{if(r=xn,xn=null,eu=0,Rt&6)throw Error(Ae(331));var i=Rt;for(Rt|=4,Je=r.current;Je!==null;){var c=Je,o=c.child;if(Je.flags&16){var d=c.deletions;if(d!==null){for(var u=0;u<d.length;u++){var m=d[u];for(Je=m;Je!==null;){var j=Je;switch(j.tag){case 0:case 11:case 15:Bl(8,j,c)}var k=j.child;if(k!==null)k.return=j,Je=k;else for(;Je!==null;){j=Je;var T=j.sibling,C=j.return;if($2(j),j===m){Je=null;break}if(T!==null){T.return=C,Je=T;break}Je=C}}}var v=c.alternate;if(v!==null){var L=v.child;if(L!==null){v.child=null;do{var $=L.sibling;L.sibling=null,L=$}while(L!==null)}}Je=c}}if(c.subtreeFlags&2064&&o!==null)o.return=c,Je=o;else e:for(;Je!==null;){if(c=Je,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Bl(9,c,c.return)}var R=c.sibling;if(R!==null){R.return=c.return,Je=R;break e}Je=c.return}}var V=r.current;for(Je=V;Je!==null;){o=Je;var z=o.child;if(o.subtreeFlags&2064&&z!==null)z.return=o,Je=z;else e:for(o=V;Je!==null;){if(d=Je,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Qu(9,d)}}catch(q){mr(d,d.return,q)}if(d===o){Je=null;break e}var re=d.sibling;if(re!==null){re.return=d.return,Je=re;break e}Je=d.return}}if(Rt=i,Bn(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(zu,r)}catch{}a=!0}return a}finally{Ht=s,Os.transition=t}}return!1}function vv(r,t,s){t=Eo(s,t),t=w2(r,t,1),r=bn(r,t,1),t=ts(),r!==null&&(Uc(r,1,t),ps(r,t))}function mr(r,t,s){if(r.tag===3)vv(r,r,s);else for(;t!==null;){if(t.tag===3){vv(t,r,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(vn===null||!vn.has(a))){r=Eo(s,r),r=N2(t,r,1),t=bn(t,r,1),r=ts(),t!==null&&(Uc(t,1,r),ps(t,r));break}}t=t.return}}function xP(r,t,s){var a=r.pingCache;a!==null&&a.delete(t),t=ts(),r.pingedLanes|=r.suspendedLanes&s,Pr===r&&(Mr&s)===s&&(wr===4||wr===3&&(Mr&130023424)===Mr&&500>fr()-If?ui(r,0):Tf|=s),ps(r,t)}function F2(r,t){t===0&&(r.mode&1?(t=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):t=1);var s=ts();r=La(r,t),r!==null&&(Uc(r,t,s),ps(r,s))}function mP(r){var t=r.memoizedState,s=0;t!==null&&(s=t.retryLane),F2(r,s)}function hP(r,t){var s=0;switch(r.tag){case 13:var a=r.stateNode,i=r.memoizedState;i!==null&&(s=i.retryLane);break;case 19:a=r.stateNode;break;default:throw Error(Ae(314))}a!==null&&a.delete(t),F2(r,s)}var H2;H2=function(r,t,s){if(r!==null)if(r.memoizedProps!==t.pendingProps||ms.current)us=!0;else{if(!(r.lanes&s)&&!(t.flags&128))return us=!1,tP(r,t,s);us=!!(r.flags&131072)}else us=!1,rr&&t.flags&1048576&&Q5(t,W0,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;x0(r,t),r=t.pendingProps;var i=So(t,Kr.current);yo(t,s),i=vf(null,t,a,r,i,s);var c=jf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hs(a)?(c=!0,F0(t)):c=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pf(t),i.updater=Gu,t.stateNode=i,i._reactInternals=t,Ph(t,a,r,s),t=Dh(null,t,a,!0,c,s)):(t.tag=0,rr&&c&&lf(t),Xr(null,t,i,s),t=t.child),t;case 16:a=t.elementType;e:{switch(x0(r,t),r=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=fP(a),r=Gs(a,r),i){case 0:t=Ch(null,t,a,r,s);break e;case 1:t=dv(null,t,a,r,s);break e;case 11:t=lv(null,t,a,r,s);break e;case 14:t=cv(null,t,a,Gs(a.type,r),s);break e}throw Error(Ae(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Gs(a,i),Ch(r,t,a,i,s);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Gs(a,i),dv(r,t,a,i,s);case 3:e:{if(I2(t),r===null)throw Error(Ae(387));a=t.pendingProps,c=t.memoizedState,i=c.element,e2(r,t),Q0(t,a,null,s);var o=t.memoizedState;if(a=o.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){i=Eo(Error(Ae(423)),t),t=uv(r,t,a,s,i);break e}else if(a!==i){i=Eo(Error(Ae(424)),t),t=uv(r,t,a,s,i);break e}else for(Ns=yn(t.stateNode.containerInfo.firstChild),Ss=t,rr=!0,Ks=null,s=X5(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(To(),a===i){t=Va(r,t,s);break e}Xr(r,t,a,s)}t=t.child}return t;case 5:return t2(t),r===null&&Sh(t),a=t.type,i=t.pendingProps,c=r!==null?r.memoizedProps:null,o=i.children,vh(a,i)?o=null:c!==null&&vh(a,c)&&(t.flags|=32),T2(r,t),Xr(r,t,o,s),t.child;case 6:return r===null&&Sh(t),null;case 13:return P2(r,t,s);case 4:return ff(t,t.stateNode.containerInfo),a=t.pendingProps,r===null?t.child=Io(t,null,a,s):Xr(r,t,a,s),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Gs(a,i),lv(r,t,a,i,s);case 7:return Xr(r,t,t.pendingProps,s),t.child;case 8:return Xr(r,t,t.pendingProps.children,s),t.child;case 12:return Xr(r,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,c=t.memoizedProps,o=i.value,Zt(q0,a._currentValue),a._currentValue=o,c!==null)if(ea(c.value,o)){if(c.children===i.children&&!ms.current){t=Va(r,t,s);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var d=c.dependencies;if(d!==null){o=c.child;for(var u=d.firstContext;u!==null;){if(u.context===a){if(c.tag===1){u=$a(-1,s&-s),u.tag=2;var m=c.updateQueue;if(m!==null){m=m.shared;var j=m.pending;j===null?u.next=u:(u.next=j.next,j.next=u),m.pending=u}}c.lanes|=s,u=c.alternate,u!==null&&(u.lanes|=s),Th(c.return,s,t),d.lanes|=s;break}u=u.next}}else if(c.tag===10)o=c.type===t.type?null:c.child;else if(c.tag===18){if(o=c.return,o===null)throw Error(Ae(341));o.lanes|=s,d=o.alternate,d!==null&&(d.lanes|=s),Th(o,s,t),o=c.sibling}else o=c.child;if(o!==null)o.return=c;else for(o=c;o!==null;){if(o===t){o=null;break}if(c=o.sibling,c!==null){c.return=o.return,o=c;break}o=o.return}c=o}Xr(r,t,i.children,s),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,yo(t,s),i=Vs(i),a=a(i),t.flags|=1,Xr(r,t,a,s),t.child;case 14:return a=t.type,i=Gs(a,t.pendingProps),i=Gs(a.type,i),cv(r,t,a,i,s);case 15:return k2(r,t,t.type,t.pendingProps,s);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Gs(a,i),x0(r,t),t.tag=1,hs(a)?(r=!0,F0(t)):r=!1,yo(t,s),j2(t,a,i),Ph(t,a,i,s),Dh(null,t,a,!0,r,s);case 19:return E2(r,t,s);case 22:return S2(r,t,s)}throw Error(Ae(156,t.tag))};function W2(r,t){return y5(r,t)}function pP(r,t,s,a){this.tag=r,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(r,t,s,a){return new pP(r,t,s,a)}function Df(r){return r=r.prototype,!(!r||!r.isReactComponent)}function fP(r){if(typeof r=="function")return Df(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Kp)return 11;if(r===Zp)return 14}return 2}function wn(r,t){var s=r.alternate;return s===null?(s=Ms(r.tag,t,r.key,r.mode),s.elementType=r.elementType,s.type=r.type,s.stateNode=r.stateNode,s.alternate=r,r.alternate=s):(s.pendingProps=t,s.type=r.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=r.flags&14680064,s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,t=r.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=r.sibling,s.index=r.index,s.ref=r.ref,s}function p0(r,t,s,a,i,c){var o=2;if(a=r,typeof r=="function")Df(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case Ki:return xi(s.children,i,c,t);case Qp:o=8,i|=8;break;case Xm:return r=Ms(12,s,t,i|2),r.elementType=Xm,r.lanes=c,r;case Jm:return r=Ms(13,s,t,i),r.elementType=Jm,r.lanes=c,r;case eh:return r=Ms(19,s,t,i),r.elementType=eh,r.lanes=c,r;case t5:return Zu(s,i,c,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case JN:o=10;break e;case e5:o=9;break e;case Kp:o=11;break e;case Zp:o=14;break e;case rn:o=16,a=null;break e}throw Error(Ae(130,r==null?r:typeof r,""))}return t=Ms(o,s,t,i),t.elementType=r,t.type=a,t.lanes=c,t}function xi(r,t,s,a){return r=Ms(7,r,a,t),r.lanes=s,r}function Zu(r,t,s,a){return r=Ms(22,r,a,t),r.elementType=t5,r.lanes=s,r.stateNode={isHidden:!1},r}function ym(r,t,s){return r=Ms(6,r,null,t),r.lanes=s,r}function bm(r,t,s){return t=Ms(4,r.children!==null?r.children:[],r.key,t),t.lanes=s,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function gP(r,t,s,a,i){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jx(0),this.expirationTimes=Jx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jx(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _f(r,t,s,a,i,c,o,d,u){return r=new gP(r,t,s,d,u),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Ms(3,null,null,t),r.current=c,c.stateNode=r,c.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},pf(c),r}function yP(r,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qi,key:a==null?null:""+a,children:r,containerInfo:t,implementation:s}}function q2(r){if(!r)return En;r=r._reactInternals;e:{if(Pi(r)!==r||r.tag!==1)throw Error(Ae(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ae(171))}if(r.tag===1){var s=r.type;if(hs(s))return q5(r,s,t)}return t}function G2(r,t,s,a,i,c,o,d,u){return r=_f(s,a,!0,r,i,c,o,d,u),r.context=q2(null),s=r.current,a=ts(),i=jn(s),c=$a(a,i),c.callback=t??null,bn(s,c,i),r.current.lanes=i,Uc(r,i,a),ps(r,a),r}function Yu(r,t,s,a){var i=t.current,c=ts(),o=jn(i);return s=q2(s),t.context===null?t.context=s:t.pendingContext=s,t=$a(c,o),t.payload={element:r},a=a===void 0?null:a,a!==null&&(t.callback=a),r=bn(i,t,o),r!==null&&(Js(r,i,o,c),c0(r,i,o)),o}function ru(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function jv(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var s=r.retryLane;r.retryLane=s!==0&&s<t?s:t}}function $f(r,t){jv(r,t),(r=r.alternate)&&jv(r,t)}function bP(){return null}var Q2=typeof reportError=="function"?reportError:function(r){console.error(r)};function Af(r){this._internalRoot=r}Xu.prototype.render=Af.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(Ae(409));Yu(r,t,null,null)};Xu.prototype.unmount=Af.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;bi(function(){Yu(null,r,null,null)}),t[Oa]=null}};function Xu(r){this._internalRoot=r}Xu.prototype.unstable_scheduleHydration=function(r){if(r){var t=S5();r={blockedOn:null,target:r,priority:t};for(var s=0;s<an.length&&t!==0&&t<an[s].priority;s++);an.splice(s,0,r),s===0&&I5(r)}};function Rf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ju(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function wv(){}function vP(r,t,s,a,i){if(i){if(typeof a=="function"){var c=a;a=function(){var m=ru(o);c.call(m)}}var o=G2(t,a,r,0,null,!1,!1,"",wv);return r._reactRootContainer=o,r[Oa]=o.current,xc(r.nodeType===8?r.parentNode:r),bi(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof a=="function"){var d=a;a=function(){var m=ru(u);d.call(m)}}var u=_f(r,0,!1,null,null,!1,!1,"",wv);return r._reactRootContainer=u,r[Oa]=u.current,xc(r.nodeType===8?r.parentNode:r),bi(function(){Yu(t,u,s,a)}),u}function ex(r,t,s,a,i){var c=s._reactRootContainer;if(c){var o=c;if(typeof i=="function"){var d=i;i=function(){var u=ru(o);d.call(u)}}Yu(t,o,r,i)}else o=vP(s,t,r,i,a);return ru(o)}N5=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var s=Sl(t.pendingLanes);s!==0&&(Jp(t,s|1),ps(t,fr()),!(Rt&6)&&(Co=fr()+500,Bn()))}break;case 13:bi(function(){var a=La(r,1);if(a!==null){var i=ts();Js(a,r,1,i)}}),$f(r,1)}};ef=function(r){if(r.tag===13){var t=La(r,134217728);if(t!==null){var s=ts();Js(t,r,134217728,s)}$f(r,134217728)}};k5=function(r){if(r.tag===13){var t=jn(r),s=La(r,t);if(s!==null){var a=ts();Js(s,r,t,a)}$f(r,t)}};S5=function(){return Ht};T5=function(r,t){var s=Ht;try{return Ht=r,t()}finally{Ht=s}};dh=function(r,t,s){switch(t){case"input":if(sh(r,s),t=s.name,s.type==="radio"&&t!=null){for(s=r;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==r&&a.form===r.form){var i=Hu(a);if(!i)throw Error(Ae(90));s5(a),sh(a,i)}}}break;case"textarea":n5(r,s);break;case"select":t=s.value,t!=null&&ho(r,!!s.multiple,t,!1)}};x5=Pf;m5=bi;var jP={usingClientEntryPoint:!1,Events:[Hc,Ji,Hu,d5,u5,Pf]},bl={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wP={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=f5(r),r===null?null:r.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||bP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{zu=Wd.inject(wP),ca=Wd}catch{}}Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jP;Es.createPortal=function(r,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rf(t))throw Error(Ae(200));return yP(r,t,null,s)};Es.createRoot=function(r,t){if(!Rf(r))throw Error(Ae(299));var s=!1,a="",i=Q2;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=_f(r,1,!1,null,null,s,!1,a,i),r[Oa]=t.current,xc(r.nodeType===8?r.parentNode:r),new Af(t)};Es.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(Ae(188)):(r=Object.keys(r).join(","),Error(Ae(268,r)));return r=f5(t),r=r===null?null:r.stateNode,r};Es.flushSync=function(r){return bi(r)};Es.hydrate=function(r,t,s){if(!Ju(t))throw Error(Ae(200));return ex(null,r,t,!0,s)};Es.hydrateRoot=function(r,t,s){if(!Rf(r))throw Error(Ae(405));var a=s!=null&&s.hydratedSources||null,i=!1,c="",o=Q2;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=G2(t,null,r,1,s??null,i,!1,c,o),r[Oa]=t.current,xc(r),a)for(r=0;r<a.length;r++)s=a[r],i=s._getVersion,i=i(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,i]:t.mutableSourceEagerHydrationData.push(s,i);return new Xu(t)};Es.render=function(r,t,s){if(!Ju(t))throw Error(Ae(200));return ex(null,r,t,!1,s)};Es.unmountComponentAtNode=function(r){if(!Ju(r))throw Error(Ae(40));return r._reactRootContainer?(bi(function(){ex(null,null,r,!1,function(){r._reactRootContainer=null,r[Oa]=null})}),!0):!1};Es.unstable_batchedUpdates=Pf;Es.unstable_renderSubtreeIntoContainer=function(r,t,s,a){if(!Ju(s))throw Error(Ae(200));if(r==null||r._reactInternals===void 0)throw Error(Ae(38));return ex(r,t,s,!1,a)};Es.version="18.3.1-next-f1338f8080-20240426";function K2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K2)}catch(r){console.error(r)}}K2(),KN.exports=Es;var NP=KN.exports,Nv=NP;Zm.createRoot=Nv.createRoot,Zm.hydrateRoot=Nv.hydrateRoot;const kP="modulepreload",SP=function(r){return"/"+r},kv={},TP=function(t,s,a){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(c=>{if(c=SP(c),c in kv)return;kv[c]=!0;const o=c.endsWith(".css"),d=o?'[rel="stylesheet"]':"";if(!!a)for(let j=i.length-1;j>=0;j--){const k=i[j];if(k.href===c&&(!o||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=o?"stylesheet":kP,o||(m.as="script",m.crossOrigin=""),m.href=c,document.head.appendChild(m),o)return new Promise((j,k)=>{m.addEventListener("load",j),m.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>t()).catch(c=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=c,window.dispatchEvent(o),!o.defaultPrevented)throw c})};var Mf={};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.parse=$P;Mf.serialize=AP;const IP=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,PP=/^[\u0021-\u003A\u003C-\u007E]*$/,EP=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,CP=/^[\u0020-\u003A\u003D-\u007E]*$/,DP=Object.prototype.toString,_P=(()=>{const r=function(){};return r.prototype=Object.create(null),r})();function $P(r,t){const s=new _P,a=r.length;if(a<2)return s;const i=(t==null?void 0:t.decode)||RP;let c=0;do{const o=r.indexOf("=",c);if(o===-1)break;const d=r.indexOf(";",c),u=d===-1?a:d;if(o>u){c=r.lastIndexOf(";",o-1)+1;continue}const m=Sv(r,c,o),j=Tv(r,o,m),k=r.slice(m,j);if(s[k]===void 0){let T=Sv(r,o+1,u),C=Tv(r,u,T);const v=i(r.slice(T,C));s[k]=v}c=u+1}while(c<a);return s}function Sv(r,t,s){do{const a=r.charCodeAt(t);if(a!==32&&a!==9)return t}while(++t<s);return s}function Tv(r,t,s){for(;t>s;){const a=r.charCodeAt(--t);if(a!==32&&a!==9)return t+1}return s}function AP(r,t,s){const a=(s==null?void 0:s.encode)||encodeURIComponent;if(!IP.test(r))throw new TypeError(`argument name is invalid: ${r}`);const i=a(t);if(!PP.test(i))throw new TypeError(`argument val is invalid: ${t}`);let c=r+"="+i;if(!s)return c;if(s.maxAge!==void 0){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);c+="; Max-Age="+s.maxAge}if(s.domain){if(!EP.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);c+="; Domain="+s.domain}if(s.path){if(!CP.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);c+="; Path="+s.path}if(s.expires){if(!MP(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);c+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(c+="; HttpOnly"),s.secure&&(c+="; Secure"),s.partitioned&&(c+="; Partitioned"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():void 0){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return c}function RP(r){if(r.indexOf("%")===-1)return r;try{return decodeURIComponent(r)}catch{return r}}function MP(r){return DP.call(r)==="[object Date]"}var Iv="popstate";function OP(r={}){function t(a,i){let{pathname:c,search:o,hash:d}=a.location;return Fh("",{pathname:c,search:o,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(a,i){return typeof i=="string"?i:jc(i)}return VP(t,s,null,r)}function ir(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function ya(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LP(){return Math.random().toString(36).substring(2,10)}function Pv(r,t){return{usr:r.state,key:r.key,idx:t}}function Fh(r,t,s=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?Wo(t):t,state:s,key:t&&t.key||a||LP()}}function jc({pathname:r="/",search:t="",hash:s=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function Wo(r){let t={};if(r){let s=r.indexOf("#");s>=0&&(t.hash=r.substring(s),r=r.substring(0,s));let a=r.indexOf("?");a>=0&&(t.search=r.substring(a),r=r.substring(0,a)),r&&(t.pathname=r)}return t}function VP(r,t,s,a={}){let{window:i=document.defaultView,v5Compat:c=!1}=a,o=i.history,d="POP",u=null,m=j();m==null&&(m=0,o.replaceState({...o.state,idx:m},""));function j(){return(o.state||{idx:null}).idx}function k(){d="POP";let $=j(),R=$==null?null:$-m;m=$,u&&u({action:d,location:L.location,delta:R})}function T($,R){d="PUSH";let V=Fh(L.location,$,R);s&&s(V,$),m=j()+1;let z=Pv(V,m),re=L.createHref(V);try{o.pushState(z,"",re)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(re)}c&&u&&u({action:d,location:L.location,delta:1})}function C($,R){d="REPLACE";let V=Fh(L.location,$,R);s&&s(V,$),m=j();let z=Pv(V,m),re=L.createHref(V);o.replaceState(z,"",re),c&&u&&u({action:d,location:L.location,delta:0})}function v($){let R=i.location.origin!=="null"?i.location.origin:i.location.href,V=typeof $=="string"?$:jc($);return V=V.replace(/ $/,"%20"),ir(R,`No window.location.(origin|href) available to create URL for href: ${V}`),new URL(V,R)}let L={get action(){return d},get location(){return r(i,o)},listen($){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Iv,k),u=$,()=>{i.removeEventListener(Iv,k),u=null}},createHref($){return t(i,$)},createURL:v,encodeLocation($){let R=v($);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:T,replace:C,go($){return o.go($)}};return L}function Z2(r,t,s="/"){return zP(r,t,s,!1)}function zP(r,t,s,a){let i=typeof t=="string"?Wo(t):t,c=za(i.pathname||"/",s);if(c==null)return null;let o=Y2(r);BP(o);let d=null;for(let u=0;d==null&&u<o.length;++u){let m=XP(c);d=ZP(o[u],m,a)}return d}function Y2(r,t=[],s=[],a=""){let i=(c,o,d)=>{let u={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:o,route:c};u.relativePath.startsWith("/")&&(ir(u.relativePath.startsWith(a),`Absolute route path "${u.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(a.length));let m=Aa([a,u.relativePath]),j=s.concat(u);c.children&&c.children.length>0&&(ir(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Y2(c.children,t,j,m)),!(c.path==null&&!c.index)&&t.push({path:m,score:QP(m,c.index),routesMeta:j})};return r.forEach((c,o)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))i(c,o);else for(let u of X2(c.path))i(c,o,u)}),t}function X2(r){let t=r.split("/");if(t.length===0)return[];let[s,...a]=t,i=s.endsWith("?"),c=s.replace(/\?$/,"");if(a.length===0)return i?[c,""]:[c];let o=X2(a.join("/")),d=[];return d.push(...o.map(u=>u===""?c:[c,u].join("/"))),i&&d.push(...o),d.map(u=>r.startsWith("/")&&u===""?"/":u)}function BP(r){r.sort((t,s)=>t.score!==s.score?s.score-t.score:KP(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}var UP=/^:[\w-]+$/,FP=3,HP=2,WP=1,qP=10,GP=-2,Ev=r=>r==="*";function QP(r,t){let s=r.split("/"),a=s.length;return s.some(Ev)&&(a+=GP),t&&(a+=HP),s.filter(i=>!Ev(i)).reduce((i,c)=>i+(UP.test(c)?FP:c===""?WP:qP),a)}function KP(r,t){return r.length===t.length&&r.slice(0,-1).every((a,i)=>a===t[i])?r[r.length-1]-t[t.length-1]:0}function ZP(r,t,s=!1){let{routesMeta:a}=r,i={},c="/",o=[];for(let d=0;d<a.length;++d){let u=a[d],m=d===a.length-1,j=c==="/"?t:t.slice(c.length)||"/",k=su({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},j),T=u.route;if(!k&&m&&s&&!a[a.length-1].route.index&&(k=su({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},j)),!k)return null;Object.assign(i,k.params),o.push({params:i,pathname:Aa([c,k.pathname]),pathnameBase:rE(Aa([c,k.pathnameBase])),route:T}),k.pathnameBase!=="/"&&(c=Aa([c,k.pathnameBase]))}return o}function su(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[s,a]=YP(r.path,r.caseSensitive,r.end),i=t.match(s);if(!i)return null;let c=i[0],o=c.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:a.reduce((m,{paramName:j,isOptional:k},T)=>{if(j==="*"){let v=d[T]||"";o=c.slice(0,c.length-v.length).replace(/(.)\/+$/,"$1")}const C=d[T];return k&&!C?m[j]=void 0:m[j]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:o,pattern:r}}function YP(r,t=!1,s=!0){ya(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,u)=>(a.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function XP(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ya(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function za(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=r.charAt(s);return a&&a!=="/"?null:r.slice(s)||"/"}function JP(r,t="/"){let{pathname:s,search:a="",hash:i=""}=typeof r=="string"?Wo(r):r;return{pathname:s?s.startsWith("/")?s:eE(s,t):t,search:sE(a),hash:aE(i)}}function eE(r,t){let s=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function vm(r,t,s,a){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tE(r){return r.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function J2(r){let t=tE(r);return t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase)}function ek(r,t,s,a=!1){let i;typeof r=="string"?i=Wo(r):(i={...r},ir(!i.pathname||!i.pathname.includes("?"),vm("?","pathname","search",i)),ir(!i.pathname||!i.pathname.includes("#"),vm("#","pathname","hash",i)),ir(!i.search||!i.search.includes("#"),vm("#","search","hash",i)));let c=r===""||i.pathname==="",o=c?"/":i.pathname,d;if(o==null)d=s;else{let k=t.length-1;if(!a&&o.startsWith("..")){let T=o.split("/");for(;T[0]==="..";)T.shift(),k-=1;i.pathname=T.join("/")}d=k>=0?t[k]:"/"}let u=JP(i,d),m=o&&o!=="/"&&o.endsWith("/"),j=(c||o===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(m||j)&&(u.pathname+="/"),u}var Aa=r=>r.join("/").replace(/\/\/+/g,"/"),rE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),sE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,aE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function nE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var tk=["POST","PUT","PATCH","DELETE"];new Set(tk);var iE=["GET",...tk];new Set(iE);var qo=b.createContext(null);qo.displayName="DataRouter";var tx=b.createContext(null);tx.displayName="DataRouterState";var rk=b.createContext({isTransitioning:!1});rk.displayName="ViewTransition";var oE=b.createContext(new Map);oE.displayName="Fetchers";var lE=b.createContext(null);lE.displayName="Await";var wa=b.createContext(null);wa.displayName="Navigation";var qc=b.createContext(null);qc.displayName="Location";var Qa=b.createContext({outlet:null,matches:[],isDataRoute:!1});Qa.displayName="Route";var Of=b.createContext(null);Of.displayName="RouteError";function cE(r,{relative:t}={}){ir(Gc(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=b.useContext(wa),{hash:i,pathname:c,search:o}=Qc(r,{relative:t}),d=c;return s!=="/"&&(d=c==="/"?s:Aa([s,c])),a.createHref({pathname:d,search:o,hash:i})}function Gc(){return b.useContext(qc)!=null}function Ei(){return ir(Gc(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(qc).location}var sk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ak(r){b.useContext(wa).static||b.useLayoutEffect(r)}function Tt(){let{isDataRoute:r}=b.useContext(Qa);return r?wE():dE()}function dE(){ir(Gc(),"useNavigate() may be used only in the context of a <Router> component.");let r=b.useContext(qo),{basename:t,navigator:s}=b.useContext(wa),{matches:a}=b.useContext(Qa),{pathname:i}=Ei(),c=JSON.stringify(J2(a)),o=b.useRef(!1);return ak(()=>{o.current=!0}),b.useCallback((u,m={})=>{if(ya(o.current,sk),!o.current)return;if(typeof u=="number"){s.go(u);return}let j=ek(u,JSON.parse(c),i,m.relative==="path");r==null&&t!=="/"&&(j.pathname=j.pathname==="/"?t:Aa([t,j.pathname])),(m.replace?s.replace:s.push)(j,m.state,m)},[t,s,c,i,r])}b.createContext(null);function Qc(r,{relative:t}={}){let{matches:s}=b.useContext(Qa),{pathname:a}=Ei(),i=JSON.stringify(J2(s));return b.useMemo(()=>ek(r,JSON.parse(i),a,t==="path"),[r,i,a,t])}function uE(r,t){return nk(r,t)}function nk(r,t,s,a){var V;ir(Gc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:c}=b.useContext(wa),{matches:o}=b.useContext(Qa),d=o[o.length-1],u=d?d.params:{},m=d?d.pathname:"/",j=d?d.pathnameBase:"/",k=d&&d.route;{let z=k&&k.path||"";ik(m,!k||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let T=Ei(),C;if(t){let z=typeof t=="string"?Wo(t):t;ir(j==="/"||((V=z.pathname)==null?void 0:V.startsWith(j)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${z.pathname}" was given in the \`location\` prop.`),C=z}else C=T;let v=C.pathname||"/",L=v;if(j!=="/"){let z=j.replace(/^\//,"").split("/");L="/"+v.replace(/^\//,"").split("/").slice(z.length).join("/")}let $=!c&&s&&s.matches&&s.matches.length>0?s.matches:Z2(r,{pathname:L});ya(k||$!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ya($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=fE($&&$.map(z=>Object.assign({},z,{params:Object.assign({},u,z.params),pathname:Aa([j,i.encodeLocation?i.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?j:Aa([j,i.encodeLocation?i.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,s,a);return t&&R?b.createElement(qc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},R):R}function xE(){let r=jE(),t=nE(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),s=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:c},"ErrorBoundary")," or"," ",b.createElement("code",{style:c},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),s?b.createElement("pre",{style:i},s):null,o)}var mE=b.createElement(xE,null),hE=class extends b.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){console.error("React Router caught the following error during render",r,t)}render(){return this.state.error!==void 0?b.createElement(Qa.Provider,{value:this.props.routeContext},b.createElement(Of.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pE({routeContext:r,match:t,children:s}){let a=b.useContext(qo);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Qa.Provider,{value:r},s)}function fE(r,t=[],s=null,a=null){if(r==null){if(!s)return null;if(s.errors)r=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)r=s.matches;else return null}let i=r,c=s==null?void 0:s.errors;if(c!=null){let u=i.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);ir(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,d=-1;if(s)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:j,errors:k}=s,T=m.route.loader&&!j.hasOwnProperty(m.route.id)&&(!k||k[m.route.id]===void 0);if(m.route.lazy||T){o=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,m,j)=>{let k,T=!1,C=null,v=null;s&&(k=c&&m.route.id?c[m.route.id]:void 0,C=m.route.errorElement||mE,o&&(d<0&&j===0?(ik("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,v=null):d===j&&(T=!0,v=m.route.hydrateFallbackElement||null)));let L=t.concat(i.slice(0,j+1)),$=()=>{let R;return k?R=C:T?R=v:m.route.Component?R=b.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=u,b.createElement(pE,{match:m,routeContext:{outlet:u,matches:L,isDataRoute:s!=null},children:R})};return s&&(m.route.ErrorBoundary||m.route.errorElement||j===0)?b.createElement(hE,{location:s.location,revalidation:s.revalidation,component:C,error:k,children:$(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):$()},null)}function Lf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gE(r){let t=b.useContext(qo);return ir(t,Lf(r)),t}function yE(r){let t=b.useContext(tx);return ir(t,Lf(r)),t}function bE(r){let t=b.useContext(Qa);return ir(t,Lf(r)),t}function Vf(r){let t=bE(r),s=t.matches[t.matches.length-1];return ir(s.route.id,`${r} can only be used on routes that contain a unique "id"`),s.route.id}function vE(){return Vf("useRouteId")}function jE(){var a;let r=b.useContext(Of),t=yE("useRouteError"),s=Vf("useRouteError");return r!==void 0?r:(a=t.errors)==null?void 0:a[s]}function wE(){let{router:r}=gE("useNavigate"),t=Vf("useNavigate"),s=b.useRef(!1);return ak(()=>{s.current=!0}),b.useCallback(async(i,c={})=>{ya(s.current,sk),s.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:t,...c}))},[r,t])}var Cv={};function ik(r,t,s){!t&&!Cv[r]&&(Cv[r]=!0,ya(!1,s))}b.memo(NE);function NE({routes:r,future:t,state:s}){return nk(r,void 0,s,t)}function Pt(r){ir(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kE({basename:r="/",children:t=null,location:s,navigationType:a="POP",navigator:i,static:c=!1}){ir(!Gc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:o,navigator:i,static:c,future:{}}),[o,i,c]);typeof s=="string"&&(s=Wo(s));let{pathname:u="/",search:m="",hash:j="",state:k=null,key:T="default"}=s,C=b.useMemo(()=>{let v=za(u,o);return v==null?null:{location:{pathname:v,search:m,hash:j,state:k,key:T},navigationType:a}},[o,u,m,j,k,T,a]);return ya(C!=null,`<Router basename="${o}"> is not able to match the URL "${u}${m}${j}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:b.createElement(wa.Provider,{value:d},b.createElement(qc.Provider,{children:t,value:C}))}function SE({children:r,location:t}){return uE(Hh(r),t)}function Hh(r,t=[]){let s=[];return b.Children.forEach(r,(a,i)=>{if(!b.isValidElement(a))return;let c=[...t,i];if(a.type===b.Fragment){s.push.apply(s,Hh(a.props.children,c));return}ir(a.type===Pt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ir(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Hh(a.props.children,c)),s.push(o)}),s}var f0="get",g0="application/x-www-form-urlencoded";function rx(r){return r!=null&&typeof r.tagName=="string"}function TE(r){return rx(r)&&r.tagName.toLowerCase()==="button"}function IE(r){return rx(r)&&r.tagName.toLowerCase()==="form"}function PE(r){return rx(r)&&r.tagName.toLowerCase()==="input"}function EE(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function CE(r,t){return r.button===0&&(!t||t==="_self")&&!EE(r)}var qd=null;function DE(){if(qd===null)try{new FormData(document.createElement("form"),0),qd=!1}catch{qd=!0}return qd}var _E=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jm(r){return r!=null&&!_E.has(r)?(ya(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${g0}"`),null):r}function $E(r,t){let s,a,i,c,o;if(IE(r)){let d=r.getAttribute("action");a=d?za(d,t):null,s=r.getAttribute("method")||f0,i=jm(r.getAttribute("enctype"))||g0,c=new FormData(r)}else if(TE(r)||PE(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=r.getAttribute("formaction")||d.getAttribute("action");if(a=u?za(u,t):null,s=r.getAttribute("formmethod")||d.getAttribute("method")||f0,i=jm(r.getAttribute("formenctype"))||jm(d.getAttribute("enctype"))||g0,c=new FormData(d,r),!DE()){let{name:m,type:j,value:k}=r;if(j==="image"){let T=m?`${m}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else m&&c.append(m,k)}}else{if(rx(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=f0,a=null,i=g0,o=r}return c&&i==="text/plain"&&(o=c,c=void 0),{action:a,method:s.toLowerCase(),encType:i,formData:c,body:o}}function zf(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}async function AE(r,t){if(r.id in t)return t[r.id];try{let s=await TP(()=>import(r.module),[]);return t[r.id]=s,s}catch(s){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RE(r){return r!=null&&typeof r.page=="string"}function ME(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function OE(r,t,s){let a=await Promise.all(r.map(async i=>{let c=t.routes[i.route.id];if(c){let o=await AE(c,s);return o.links?o.links():[]}return[]}));return BE(a.flat(1).filter(ME).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Dv(r,t,s,a,i,c){let o=(u,m)=>s[m]?u.route.id!==s[m].route.id:!0,d=(u,m)=>{var j;return s[m].pathname!==u.pathname||((j=s[m].route.path)==null?void 0:j.endsWith("*"))&&s[m].params["*"]!==u.params["*"]};return c==="assets"?t.filter((u,m)=>o(u,m)||d(u,m)):c==="data"?t.filter((u,m)=>{var k;let j=a.routes[u.route.id];if(!j||!j.hasLoader)return!1;if(o(u,m)||d(u,m))return!0;if(u.route.shouldRevalidate){let T=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((k=s[0])==null?void 0:k.params)||{},nextUrl:new URL(r,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function LE(r,t,{includeHydrateFallback:s}={}){return VE(r.map(a=>{let i=t.routes[a.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function VE(r){return[...new Set(r)]}function zE(r){let t={},s=Object.keys(r).sort();for(let a of s)t[a]=r[a];return t}function BE(r,t){let s=new Set,a=new Set(t);return r.reduce((i,c)=>{if(t&&!RE(c)&&c.as==="script"&&c.href&&a.has(c.href))return i;let d=JSON.stringify(zE(c));return s.has(d)||(s.add(d),i.push({key:d,link:c})),i},[])}function UE(r,t){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname="_root.data":t&&za(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function ok(){let r=b.useContext(qo);return zf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function FE(){let r=b.useContext(tx);return zf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Bf=b.createContext(void 0);Bf.displayName="FrameworkContext";function lk(){let r=b.useContext(Bf);return zf(r,"You must render this element inside a <HydratedRouter> element"),r}function HE(r,t){let s=b.useContext(Bf),[a,i]=b.useState(!1),[c,o]=b.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:m,onMouseLeave:j,onTouchStart:k}=t,T=b.useRef(null);b.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let L=R=>{R.forEach(V=>{o(V.isIntersecting)})},$=new IntersectionObserver(L,{threshold:.5});return T.current&&$.observe(T.current),()=>{$.disconnect()}}},[r]),b.useEffect(()=>{if(a){let L=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(L)}}},[a]);let C=()=>{i(!0)},v=()=>{i(!1),o(!1)};return s?r!=="intent"?[c,T,{}]:[c,T,{onFocus:vl(d,C),onBlur:vl(u,v),onMouseEnter:vl(m,C),onMouseLeave:vl(j,v),onTouchStart:vl(k,C)}]:[!1,T,{}]}function vl(r,t){return s=>{r&&r(s),s.defaultPrevented||t(s)}}function WE({page:r,...t}){let{router:s}=ok(),a=b.useMemo(()=>Z2(s.routes,r,s.basename),[s.routes,r,s.basename]);return a?b.createElement(GE,{page:r,matches:a,...t}):null}function qE(r){let{manifest:t,routeModules:s}=lk(),[a,i]=b.useState([]);return b.useEffect(()=>{let c=!1;return OE(r,t,s).then(o=>{c||i(o)}),()=>{c=!0}},[r,t,s]),a}function GE({page:r,matches:t,...s}){let a=Ei(),{manifest:i,routeModules:c}=lk(),{basename:o}=ok(),{loaderData:d,matches:u}=FE(),m=b.useMemo(()=>Dv(r,t,u,i,a,"data"),[r,t,u,i,a]),j=b.useMemo(()=>Dv(r,t,u,i,a,"assets"),[r,t,u,i,a]),k=b.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let v=new Set,L=!1;if(t.forEach(R=>{var z;let V=i.routes[R.route.id];!V||!V.hasLoader||(!m.some(re=>re.route.id===R.route.id)&&R.route.id in d&&((z=c[R.route.id])!=null&&z.shouldRevalidate)||V.hasClientLoader?L=!0:v.add(R.route.id))}),v.size===0)return[];let $=UE(r,o);return L&&v.size>0&&$.searchParams.set("_routes",t.filter(R=>v.has(R.route.id)).map(R=>R.route.id).join(",")),[$.pathname+$.search]},[o,d,a,i,m,t,r,c]),T=b.useMemo(()=>LE(j,i),[j,i]),C=qE(j);return b.createElement(b.Fragment,null,k.map(v=>b.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...s})),T.map(v=>b.createElement("link",{key:v,rel:"modulepreload",href:v,...s})),C.map(({key:v,link:L})=>b.createElement("link",{key:v,...L})))}function QE(...r){return t=>{r.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var ck=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ck&&(window.__reactRouterVersion="7.5.0")}catch{}function KE({basename:r,children:t,window:s}){let a=b.useRef();a.current==null&&(a.current=OP({window:s,v5Compat:!0}));let i=a.current,[c,o]=b.useState({action:i.action,location:i.location}),d=b.useCallback(u=>{b.startTransition(()=>o(u))},[o]);return b.useLayoutEffect(()=>i.listen(d),[i,d]),b.createElement(kE,{basename:r,children:t,location:c.location,navigationType:c.action,navigator:i})}var dk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,N=b.forwardRef(function({onClick:t,discover:s="render",prefetch:a="none",relative:i,reloadDocument:c,replace:o,state:d,target:u,to:m,preventScrollReset:j,viewTransition:k,...T},C){let{basename:v}=b.useContext(wa),L=typeof m=="string"&&dk.test(m),$,R=!1;if(typeof m=="string"&&L&&($=m,ck))try{let W=new URL(window.location.href),U=m.startsWith("//")?new URL(W.protocol+m):new URL(m),ee=za(U.pathname,v);U.origin===W.origin&&ee!=null?m=ee+U.search+U.hash:R=!0}catch{ya(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=cE(m,{relative:i}),[z,re,q]=HE(a,T),Q=JE(m,{replace:o,state:d,target:u,preventScrollReset:j,relative:i,viewTransition:k});function M(W){t&&t(W),W.defaultPrevented||Q(W)}let x=b.createElement("a",{...T,...q,href:$||V,onClick:R||c?t:M,ref:QE(C,re),target:u,"data-discover":!L&&s==="render"?"true":void 0});return z&&!L?b.createElement(b.Fragment,null,x,b.createElement(WE,{page:V})):x});N.displayName="Link";var ZE=b.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:a="",end:i=!1,style:c,to:o,viewTransition:d,children:u,...m},j){let k=Qc(o,{relative:m.relative}),T=Ei(),C=b.useContext(tx),{navigator:v,basename:L}=b.useContext(wa),$=C!=null&&aC(k)&&d===!0,R=v.encodeLocation?v.encodeLocation(k).pathname:k.pathname,V=T.pathname,z=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;s||(V=V.toLowerCase(),z=z?z.toLowerCase():null,R=R.toLowerCase()),z&&L&&(z=za(z,L)||z);const re=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let q=V===R||!i&&V.startsWith(R)&&V.charAt(re)==="/",Q=z!=null&&(z===R||!i&&z.startsWith(R)&&z.charAt(R.length)==="/"),M={isActive:q,isPending:Q,isTransitioning:$},x=q?t:void 0,W;typeof a=="function"?W=a(M):W=[a,q?"active":null,Q?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let U=typeof c=="function"?c(M):c;return b.createElement(N,{...m,"aria-current":x,className:W,ref:j,style:U,to:o,viewTransition:d},typeof u=="function"?u(M):u)});ZE.displayName="NavLink";var YE=b.forwardRef(({discover:r="render",fetcherKey:t,navigate:s,reloadDocument:a,replace:i,state:c,method:o=f0,action:d,onSubmit:u,relative:m,preventScrollReset:j,viewTransition:k,...T},C)=>{let v=rC(),L=sC(d,{relative:m}),$=o.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&dk.test(d),V=z=>{if(u&&u(z),z.defaultPrevented)return;z.preventDefault();let re=z.nativeEvent.submitter,q=(re==null?void 0:re.getAttribute("formmethod"))||o;v(re||z.currentTarget,{fetcherKey:t,method:q,navigate:s,replace:i,state:c,relative:m,preventScrollReset:j,viewTransition:k})};return b.createElement("form",{ref:C,method:$,action:L,onSubmit:a?u:V,...T,"data-discover":!R&&r==="render"?"true":void 0})});YE.displayName="Form";function XE(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uk(r){let t=b.useContext(qo);return ir(t,XE(r)),t}function JE(r,{target:t,replace:s,state:a,preventScrollReset:i,relative:c,viewTransition:o}={}){let d=Tt(),u=Ei(),m=Qc(r,{relative:c});return b.useCallback(j=>{if(CE(j,t)){j.preventDefault();let k=s!==void 0?s:jc(u)===jc(m);d(r,{replace:k,state:a,preventScrollReset:i,relative:c,viewTransition:o})}},[u,d,m,s,a,t,r,i,c,o])}var eC=0,tC=()=>`__${String(++eC)}__`;function rC(){let{router:r}=uk("useSubmit"),{basename:t}=b.useContext(wa),s=vE();return b.useCallback(async(a,i={})=>{let{action:c,method:o,encType:d,formData:u,body:m}=$E(a,t);if(i.navigate===!1){let j=i.fetcherKey||tC();await r.fetch(j,s,i.action||c,{preventScrollReset:i.preventScrollReset,formData:u,body:m,formMethod:i.method||o,formEncType:i.encType||d,flushSync:i.flushSync})}else await r.navigate(i.action||c,{preventScrollReset:i.preventScrollReset,formData:u,body:m,formMethod:i.method||o,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:s,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,t,s])}function sC(r,{relative:t}={}){let{basename:s}=b.useContext(wa),a=b.useContext(Qa);ir(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),c={...Qc(r||".",{relative:t})},o=Ei();if(r==null){c.search=o.search;let d=new URLSearchParams(c.search),u=d.getAll("index");if(u.some(j=>j==="")){d.delete("index"),u.filter(k=>k).forEach(k=>d.append("index",k));let j=d.toString();c.search=j?`?${j}`:""}}return(!r||r===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(c.pathname=c.pathname==="/"?s:Aa([s,c.pathname])),jc(c)}function aC(r,t={}){let s=b.useContext(rk);ir(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=uk("useViewTransitionState"),i=Qc(r,{relative:t.relative});if(!s.isTransitioning)return!1;let c=za(s.currentLocation.pathname,a)||s.currentLocation.pathname,o=za(s.nextLocation.pathname,a)||s.nextLocation.pathname;return su(i.pathname,o)!=null||su(i.pathname,c)!=null}new TextEncoder;const nC=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=function(r){const t=[];let s=0;for(let a=0;a<r.length;a++){let i=r.charCodeAt(a);i<128?t[s++]=i:i<2048?(t[s++]=i>>6|192,t[s++]=i&63|128):(i&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++a)&1023),t[s++]=i>>18|240,t[s++]=i>>12&63|128,t[s++]=i>>6&63|128,t[s++]=i&63|128):(t[s++]=i>>12|224,t[s++]=i>>6&63|128,t[s++]=i&63|128)}return t},iC=function(r){const t=[];let s=0,a=0;for(;s<r.length;){const i=r[s++];if(i<128)t[a++]=String.fromCharCode(i);else if(i>191&&i<224){const c=r[s++];t[a++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=r[s++],o=r[s++],d=r[s++],u=((i&7)<<18|(c&63)<<12|(o&63)<<6|d&63)-65536;t[a++]=String.fromCharCode(55296+(u>>10)),t[a++]=String.fromCharCode(56320+(u&1023))}else{const c=r[s++],o=r[s++];t[a++]=String.fromCharCode((i&15)<<12|(c&63)<<6|o&63)}}return t.join("")},mk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<r.length;i+=3){const c=r[i],o=i+1<r.length,d=o?r[i+1]:0,u=i+2<r.length,m=u?r[i+2]:0,j=c>>2,k=(c&3)<<4|d>>4;let T=(d&15)<<2|m>>6,C=m&63;u||(C=64,o||(T=64)),a.push(s[j],s[k],s[T],s[C])}return a.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(xk(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):iC(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<r.length;){const c=s[r.charAt(i++)],d=i<r.length?s[r.charAt(i)]:0;++i;const m=i<r.length?s[r.charAt(i)]:64;++i;const k=i<r.length?s[r.charAt(i)]:64;if(++i,c==null||d==null||m==null||k==null)throw new oC;const T=c<<2|d>>4;if(a.push(T),m!==64){const C=d<<4&240|m>>2;if(a.push(C),k!==64){const v=m<<6&192|k;a.push(v)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class oC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lC=function(r){const t=xk(r);return mk.encodeByteArray(t,!0)},au=function(r){return lC(r).replace(/\./g,"")},hk=function(r){try{return mk.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=()=>cC().__FIREBASE_DEFAULTS__,uC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const r={}.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},xC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&hk(r[1]);return t&&JSON.parse(t)},sx=()=>{try{return nC()||dC()||uC()||xC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},pk=r=>{var t,s;return(s=(t=sx())===null||t===void 0?void 0:t.emulatorHosts)===null||s===void 0?void 0:s[r]},fk=r=>{const t=pk(r);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),a]:[t.substring(0,s),a]},gk=()=>{var r;return(r=sx())===null||r===void 0?void 0:r.config},yk=r=>{var t;return(t=sx())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,a)=>{s?this.reject(s):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},a=t||"demo-project",i=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r),d="";return[au(JSON.stringify(s)),au(JSON.stringify(o)),d].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zr())}function pC(){var r;const t=(r=sx())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vk(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yC(){const r=Zr();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function bC(){return!pC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jk(){try{return typeof indexedDB=="object"}catch{return!1}}function wk(){return new Promise((r,t)=>{try{let s=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(a),r(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var c;t(((c=i.error)===null||c===void 0?void 0:c.message)||"")}}catch(s){t(s)}})}function vC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="FirebaseError";class Us extends Error{constructor(t,s,a){super(s),this.code=t,this.customData=a,this.name=jC,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ci.prototype.create)}}class Ci{constructor(t,s,a){this.service=t,this.serviceName=s,this.errors=a}create(t,...s){const a=s[0]||{},i=`${this.service}/${t}`,c=this.errors[t],o=c?wC(c,a):"Error",d=`${this.serviceName}: ${o} (${i}).`;return new Us(i,d,a)}}function wC(r,t){return r.replace(NC,(s,a)=>{const i=t[a];return i!=null?String(i):`<${a}?>`})}const NC=/\{\$([^}]+)}/g;function kC(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Cn(r,t){if(r===t)return!0;const s=Object.keys(r),a=Object.keys(t);for(const i of s){if(!a.includes(i))return!1;const c=r[i],o=t[i];if(_v(c)&&_v(o)){if(!Cn(c,o))return!1}else if(c!==o)return!1}for(const i of a)if(!s.includes(i))return!1;return!0}function _v(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(r){const t=[];for(const[s,a]of Object.entries(r))Array.isArray(a)?a.forEach(i=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Il(r){const t={};return r.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,c]=a.split("=");t[decodeURIComponent(i)]=decodeURIComponent(c)}}),t}function Pl(r){const t=r.indexOf("?");if(!t)return"";const s=r.indexOf("#",t);return r.substring(t,s>0?s:void 0)}function SC(r,t){const s=new TC(r,t);return s.subscribe.bind(s)}class TC{constructor(t,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(s=>{s.next(t)})}error(t){this.forEachObserver(s=>{s.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,s,a){let i;if(t===void 0&&s===void 0&&a===void 0)throw new Error("Missing Observer.");IC(t,["next","error","complete"])?i=t:i={next:t,error:s,complete:a},i.next===void 0&&(i.next=wm),i.error===void 0&&(i.error=wm),i.complete===void 0&&(i.complete=wm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,t)}sendOne(t,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{s(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IC(r,t){if(typeof r!="object"||r===null)return!1;for(const s of t)if(s in r&&typeof r[s]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=1e3,EC=2,CC=4*60*60*1e3,DC=.5;function $v(r,t=PC,s=EC){const a=t*Math.pow(s,r),i=Math.round(DC*a*(Math.random()-.5)*2);return Math.min(CC,a+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(r){return r&&r._delegate?r._delegate:r}class Bs{constructor(t,s,a){this.name=t,this.instanceFactory=s,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const a=new mC;if(this.instancesDeferred.set(s,a),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){var s;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(s=t==null?void 0:t.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(i)return null;throw c}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(AC(t))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[s,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const c=this.getOrInitializeService({instanceIdentifier:i});a.resolve(c)}catch{}}}}clearInstance(t=ti){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ti){return this.instances.has(t)}getOptions(t=ti){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:s});for(const[c,o]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(c);a===d&&o.resolve(i)}return i}onInit(t,s){var a;const i=this.normalizeInstanceIdentifier(s),c=(a=this.onInitCallbacks.get(i))!==null&&a!==void 0?a:new Set;c.add(t),this.onInitCallbacks.set(i,c);const o=this.instances.get(i);return o&&t(o,i),()=>{c.delete(t)}}invokeOnInitCallbacks(t,s){const a=this.onInitCallbacks.get(s);if(a)for(const i of a)try{i(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:$C(t),options:s}),this.instances.set(t,a),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=ti){return this.component?this.component.multipleInstances?t:ti:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $C(r){return r===ti?void 0:r}function AC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new _C(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ct||(Ct={}));const MC={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},OC=Ct.INFO,LC={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},VC=(r,t,...s)=>{if(t<r.logLevel)return;const a=new Date().toISOString(),i=LC[t];if(i)console[i](`[${a}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ax{constructor(t){this.name=t,this._logLevel=OC,this._logHandler=VC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?MC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...t),this._logHandler(this,Ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...t),this._logHandler(this,Ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...t),this._logHandler(this,Ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...t),this._logHandler(this,Ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...t),this._logHandler(this,Ct.ERROR,...t)}}const zC=(r,t)=>t.some(s=>r instanceof s);let Av,Rv;function BC(){return Av||(Av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UC(){return Rv||(Rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nk=new WeakMap,Wh=new WeakMap,kk=new WeakMap,Nm=new WeakMap,Uf=new WeakMap;function FC(r){const t=new Promise((s,a)=>{const i=()=>{r.removeEventListener("success",c),r.removeEventListener("error",o)},c=()=>{s(Nn(r.result)),i()},o=()=>{a(r.error),i()};r.addEventListener("success",c),r.addEventListener("error",o)});return t.then(s=>{s instanceof IDBCursor&&Nk.set(s,r)}).catch(()=>{}),Uf.set(t,r),t}function HC(r){if(Wh.has(r))return;const t=new Promise((s,a)=>{const i=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",o),r.removeEventListener("abort",o)},c=()=>{s(),i()},o=()=>{a(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",c),r.addEventListener("error",o),r.addEventListener("abort",o)});Wh.set(r,t)}let qh={get(r,t,s){if(r instanceof IDBTransaction){if(t==="done")return Wh.get(r);if(t==="objectStoreNames")return r.objectStoreNames||kk.get(r);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Nn(r[t])},set(r,t,s){return r[t]=s,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function WC(r){qh=r(qh)}function qC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const a=r.call(km(this),t,...s);return kk.set(a,t.sort?t.sort():[t]),Nn(a)}:UC().includes(r)?function(...t){return r.apply(km(this),t),Nn(Nk.get(this))}:function(...t){return Nn(r.apply(km(this),t))}}function GC(r){return typeof r=="function"?qC(r):(r instanceof IDBTransaction&&HC(r),zC(r,BC())?new Proxy(r,qh):r)}function Nn(r){if(r instanceof IDBRequest)return FC(r);if(Nm.has(r))return Nm.get(r);const t=GC(r);return t!==r&&(Nm.set(r,t),Uf.set(t,r)),t}const km=r=>Uf.get(r);function Sk(r,t,{blocked:s,upgrade:a,blocking:i,terminated:c}={}){const o=indexedDB.open(r,t),d=Nn(o);return a&&o.addEventListener("upgradeneeded",u=>{a(Nn(o.result),u.oldVersion,u.newVersion,Nn(o.transaction),u)}),s&&o.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),d.then(u=>{c&&u.addEventListener("close",()=>c()),i&&u.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const QC=["get","getKey","getAll","getAllKeys","count"],KC=["put","add","delete","clear"],Sm=new Map;function Mv(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Sm.get(t))return Sm.get(t);const s=t.replace(/FromIndex$/,""),a=t!==s,i=KC.includes(s);if(!(s in(a?IDBIndex:IDBObjectStore).prototype)||!(i||QC.includes(s)))return;const c=async function(o,...d){const u=this.transaction(o,i?"readwrite":"readonly");let m=u.store;return a&&(m=m.index(d.shift())),(await Promise.all([m[s](...d),i&&u.done]))[0]};return Sm.set(t,c),c}WC(r=>({...r,get:(t,s,a)=>Mv(t,s)||r.get(t,s,a),has:(t,s)=>!!Mv(t,s)||r.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(YC(s)){const a=s.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(s=>s).join(" ")}}function YC(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Gh="@firebase/app",Ov="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new ax("@firebase/app"),XC="@firebase/app-compat",JC="@firebase/analytics-compat",eD="@firebase/analytics",tD="@firebase/app-check-compat",rD="@firebase/app-check",sD="@firebase/auth",aD="@firebase/auth-compat",nD="@firebase/database",iD="@firebase/data-connect",oD="@firebase/database-compat",lD="@firebase/functions",cD="@firebase/functions-compat",dD="@firebase/installations",uD="@firebase/installations-compat",xD="@firebase/messaging",mD="@firebase/messaging-compat",hD="@firebase/performance",pD="@firebase/performance-compat",fD="@firebase/remote-config",gD="@firebase/remote-config-compat",yD="@firebase/storage",bD="@firebase/storage-compat",vD="@firebase/firestore",jD="@firebase/vertexai",wD="@firebase/firestore-compat",ND="firebase",kD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="[DEFAULT]",SD={[Gh]:"fire-core",[XC]:"fire-core-compat",[eD]:"fire-analytics",[JC]:"fire-analytics-compat",[rD]:"fire-app-check",[tD]:"fire-app-check-compat",[sD]:"fire-auth",[aD]:"fire-auth-compat",[nD]:"fire-rtdb",[iD]:"fire-data-connect",[oD]:"fire-rtdb-compat",[lD]:"fire-fn",[cD]:"fire-fn-compat",[dD]:"fire-iid",[uD]:"fire-iid-compat",[xD]:"fire-fcm",[mD]:"fire-fcm-compat",[hD]:"fire-perf",[pD]:"fire-perf-compat",[fD]:"fire-rc",[gD]:"fire-rc-compat",[yD]:"fire-gcs",[bD]:"fire-gcs-compat",[vD]:"fire-fst",[wD]:"fire-fst-compat",[jD]:"fire-vertex","fire-js":"fire-js",[ND]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Map,TD=new Map,Kh=new Map;function Lv(r,t){try{r.container.addComponent(t)}catch(s){Ba.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,s)}}function ta(r){const t=r.name;if(Kh.has(t))return Ba.debug(`There were multiple attempts to register component ${t}.`),!1;Kh.set(t,r);for(const s of nu.values())Lv(s,r);for(const s of TD.values())Lv(s,r);return!0}function Un(r,t){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(t)}function ws(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kn=new Ci("app","Firebase",ID);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(t,s,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=kD;function Tk(r,t={}){let s=r;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Qh,automaticDataCollectionEnabled:!1},t),i=a.name;if(typeof i!="string"||!i)throw kn.create("bad-app-name",{appName:String(i)});if(s||(s=gk()),!s)throw kn.create("no-options");const c=nu.get(i);if(c){if(Cn(s,c.options)&&Cn(a,c.config))return c;throw kn.create("duplicate-app",{appName:i})}const o=new RC(i);for(const u of Kh.values())o.addComponent(u);const d=new PD(s,a,o);return nu.set(i,d),d}function nx(r=Qh){const t=nu.get(r);if(!t&&r===Qh&&gk())return Tk();if(!t)throw kn.create("no-app",{appName:r});return t}function fs(r,t,s){var a;let i=(a=SD[r])!==null&&a!==void 0?a:r;s&&(i+=`-${s}`);const c=i.match(/\s|\//),o=t.match(/\s|\//);if(c||o){const d=[`Unable to register library "${i}" with version "${t}":`];c&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),c&&o&&d.push("and"),o&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ba.warn(d.join(" "));return}ta(new Bs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="firebase-heartbeat-database",CD=1,wc="firebase-heartbeat-store";let Tm=null;function Ik(){return Tm||(Tm=Sk(ED,CD,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(wc)}catch(s){console.warn(s)}}}}).catch(r=>{throw kn.create("idb-open",{originalErrorMessage:r.message})})),Tm}async function DD(r){try{const s=(await Ik()).transaction(wc),a=await s.objectStore(wc).get(Pk(r));return await s.done,a}catch(t){if(t instanceof Us)Ba.warn(t.message);else{const s=kn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ba.warn(s.message)}}}async function Vv(r,t){try{const a=(await Ik()).transaction(wc,"readwrite");await a.objectStore(wc).put(t,Pk(r)),await a.done}catch(s){if(s instanceof Us)Ba.warn(s.message);else{const a=kn.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Ba.warn(a.message)}}}function Pk(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=1024,$D=30;class AD{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new MD(s),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=zv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(o=>o.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:i}),this._heartbeatsCache.heartbeats.length>$D){const o=OD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ba.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=zv(),{heartbeatsToSend:a,unsentEntries:i}=RD(this._heartbeatsCache.heartbeats),c=au(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(s){return Ba.warn(s),""}}}function zv(){return new Date().toISOString().substring(0,10)}function RD(r,t=_D){const s=[];let a=r.slice();for(const i of r){const c=s.find(o=>o.agent===i.agent);if(c){if(c.dates.push(i.date),Bv(s)>t){c.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),Bv(s)>t){s.pop();break}a=a.slice(1)}return{heartbeatsToSend:s,unsentEntries:a}}class MD{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jk()?wk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await DD(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Bv(r){return au(JSON.stringify({version:2,heartbeats:r})).length}function OD(r){if(r.length===0)return-1;let t=0,s=r[0].date;for(let a=1;a<r.length;a++)r[a].date<s&&(s=r[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(r){ta(new Bs("platform-logger",t=>new ZC(t),"PRIVATE")),ta(new Bs("heartbeat",t=>new AD(t),"PRIVATE")),fs(Gh,Ov,r),fs(Gh,Ov,"esm2017"),fs("fire-js","")}LD("");var Uv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sn,Ek;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,x){function W(){}W.prototype=x.prototype,M.D=x.prototype,M.prototype=new W,M.prototype.constructor=M,M.C=function(U,ee,se){for(var X=Array(arguments.length-2),G=2;G<arguments.length;G++)X[G-2]=arguments[G];return x.prototype[ee].apply(U,X)}}function s(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,s),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,x,W){W||(W=0);var U=Array(16);if(typeof x=="string")for(var ee=0;16>ee;++ee)U[ee]=x.charCodeAt(W++)|x.charCodeAt(W++)<<8|x.charCodeAt(W++)<<16|x.charCodeAt(W++)<<24;else for(ee=0;16>ee;++ee)U[ee]=x[W++]|x[W++]<<8|x[W++]<<16|x[W++]<<24;x=M.g[0],W=M.g[1],ee=M.g[2];var se=M.g[3],X=x+(se^W&(ee^se))+U[0]+3614090360&4294967295;x=W+(X<<7&4294967295|X>>>25),X=se+(ee^x&(W^ee))+U[1]+3905402710&4294967295,se=x+(X<<12&4294967295|X>>>20),X=ee+(W^se&(x^W))+U[2]+606105819&4294967295,ee=se+(X<<17&4294967295|X>>>15),X=W+(x^ee&(se^x))+U[3]+3250441966&4294967295,W=ee+(X<<22&4294967295|X>>>10),X=x+(se^W&(ee^se))+U[4]+4118548399&4294967295,x=W+(X<<7&4294967295|X>>>25),X=se+(ee^x&(W^ee))+U[5]+1200080426&4294967295,se=x+(X<<12&4294967295|X>>>20),X=ee+(W^se&(x^W))+U[6]+2821735955&4294967295,ee=se+(X<<17&4294967295|X>>>15),X=W+(x^ee&(se^x))+U[7]+4249261313&4294967295,W=ee+(X<<22&4294967295|X>>>10),X=x+(se^W&(ee^se))+U[8]+1770035416&4294967295,x=W+(X<<7&4294967295|X>>>25),X=se+(ee^x&(W^ee))+U[9]+2336552879&4294967295,se=x+(X<<12&4294967295|X>>>20),X=ee+(W^se&(x^W))+U[10]+4294925233&4294967295,ee=se+(X<<17&4294967295|X>>>15),X=W+(x^ee&(se^x))+U[11]+2304563134&4294967295,W=ee+(X<<22&4294967295|X>>>10),X=x+(se^W&(ee^se))+U[12]+1804603682&4294967295,x=W+(X<<7&4294967295|X>>>25),X=se+(ee^x&(W^ee))+U[13]+4254626195&4294967295,se=x+(X<<12&4294967295|X>>>20),X=ee+(W^se&(x^W))+U[14]+2792965006&4294967295,ee=se+(X<<17&4294967295|X>>>15),X=W+(x^ee&(se^x))+U[15]+1236535329&4294967295,W=ee+(X<<22&4294967295|X>>>10),X=x+(ee^se&(W^ee))+U[1]+4129170786&4294967295,x=W+(X<<5&4294967295|X>>>27),X=se+(W^ee&(x^W))+U[6]+3225465664&4294967295,se=x+(X<<9&4294967295|X>>>23),X=ee+(x^W&(se^x))+U[11]+643717713&4294967295,ee=se+(X<<14&4294967295|X>>>18),X=W+(se^x&(ee^se))+U[0]+3921069994&4294967295,W=ee+(X<<20&4294967295|X>>>12),X=x+(ee^se&(W^ee))+U[5]+3593408605&4294967295,x=W+(X<<5&4294967295|X>>>27),X=se+(W^ee&(x^W))+U[10]+38016083&4294967295,se=x+(X<<9&4294967295|X>>>23),X=ee+(x^W&(se^x))+U[15]+3634488961&4294967295,ee=se+(X<<14&4294967295|X>>>18),X=W+(se^x&(ee^se))+U[4]+3889429448&4294967295,W=ee+(X<<20&4294967295|X>>>12),X=x+(ee^se&(W^ee))+U[9]+568446438&4294967295,x=W+(X<<5&4294967295|X>>>27),X=se+(W^ee&(x^W))+U[14]+3275163606&4294967295,se=x+(X<<9&4294967295|X>>>23),X=ee+(x^W&(se^x))+U[3]+4107603335&4294967295,ee=se+(X<<14&4294967295|X>>>18),X=W+(se^x&(ee^se))+U[8]+1163531501&4294967295,W=ee+(X<<20&4294967295|X>>>12),X=x+(ee^se&(W^ee))+U[13]+2850285829&4294967295,x=W+(X<<5&4294967295|X>>>27),X=se+(W^ee&(x^W))+U[2]+4243563512&4294967295,se=x+(X<<9&4294967295|X>>>23),X=ee+(x^W&(se^x))+U[7]+1735328473&4294967295,ee=se+(X<<14&4294967295|X>>>18),X=W+(se^x&(ee^se))+U[12]+2368359562&4294967295,W=ee+(X<<20&4294967295|X>>>12),X=x+(W^ee^se)+U[5]+4294588738&4294967295,x=W+(X<<4&4294967295|X>>>28),X=se+(x^W^ee)+U[8]+2272392833&4294967295,se=x+(X<<11&4294967295|X>>>21),X=ee+(se^x^W)+U[11]+1839030562&4294967295,ee=se+(X<<16&4294967295|X>>>16),X=W+(ee^se^x)+U[14]+4259657740&4294967295,W=ee+(X<<23&4294967295|X>>>9),X=x+(W^ee^se)+U[1]+2763975236&4294967295,x=W+(X<<4&4294967295|X>>>28),X=se+(x^W^ee)+U[4]+1272893353&4294967295,se=x+(X<<11&4294967295|X>>>21),X=ee+(se^x^W)+U[7]+4139469664&4294967295,ee=se+(X<<16&4294967295|X>>>16),X=W+(ee^se^x)+U[10]+3200236656&4294967295,W=ee+(X<<23&4294967295|X>>>9),X=x+(W^ee^se)+U[13]+681279174&4294967295,x=W+(X<<4&4294967295|X>>>28),X=se+(x^W^ee)+U[0]+3936430074&4294967295,se=x+(X<<11&4294967295|X>>>21),X=ee+(se^x^W)+U[3]+3572445317&4294967295,ee=se+(X<<16&4294967295|X>>>16),X=W+(ee^se^x)+U[6]+76029189&4294967295,W=ee+(X<<23&4294967295|X>>>9),X=x+(W^ee^se)+U[9]+3654602809&4294967295,x=W+(X<<4&4294967295|X>>>28),X=se+(x^W^ee)+U[12]+3873151461&4294967295,se=x+(X<<11&4294967295|X>>>21),X=ee+(se^x^W)+U[15]+530742520&4294967295,ee=se+(X<<16&4294967295|X>>>16),X=W+(ee^se^x)+U[2]+3299628645&4294967295,W=ee+(X<<23&4294967295|X>>>9),X=x+(ee^(W|~se))+U[0]+4096336452&4294967295,x=W+(X<<6&4294967295|X>>>26),X=se+(W^(x|~ee))+U[7]+1126891415&4294967295,se=x+(X<<10&4294967295|X>>>22),X=ee+(x^(se|~W))+U[14]+2878612391&4294967295,ee=se+(X<<15&4294967295|X>>>17),X=W+(se^(ee|~x))+U[5]+4237533241&4294967295,W=ee+(X<<21&4294967295|X>>>11),X=x+(ee^(W|~se))+U[12]+1700485571&4294967295,x=W+(X<<6&4294967295|X>>>26),X=se+(W^(x|~ee))+U[3]+2399980690&4294967295,se=x+(X<<10&4294967295|X>>>22),X=ee+(x^(se|~W))+U[10]+4293915773&4294967295,ee=se+(X<<15&4294967295|X>>>17),X=W+(se^(ee|~x))+U[1]+2240044497&4294967295,W=ee+(X<<21&4294967295|X>>>11),X=x+(ee^(W|~se))+U[8]+1873313359&4294967295,x=W+(X<<6&4294967295|X>>>26),X=se+(W^(x|~ee))+U[15]+4264355552&4294967295,se=x+(X<<10&4294967295|X>>>22),X=ee+(x^(se|~W))+U[6]+2734768916&4294967295,ee=se+(X<<15&4294967295|X>>>17),X=W+(se^(ee|~x))+U[13]+1309151649&4294967295,W=ee+(X<<21&4294967295|X>>>11),X=x+(ee^(W|~se))+U[4]+4149444226&4294967295,x=W+(X<<6&4294967295|X>>>26),X=se+(W^(x|~ee))+U[11]+3174756917&4294967295,se=x+(X<<10&4294967295|X>>>22),X=ee+(x^(se|~W))+U[2]+718787259&4294967295,ee=se+(X<<15&4294967295|X>>>17),X=W+(se^(ee|~x))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(ee+(X<<21&4294967295|X>>>11))&4294967295,M.g[2]=M.g[2]+ee&4294967295,M.g[3]=M.g[3]+se&4294967295}a.prototype.u=function(M,x){x===void 0&&(x=M.length);for(var W=x-this.blockSize,U=this.B,ee=this.h,se=0;se<x;){if(ee==0)for(;se<=W;)i(this,M,se),se+=this.blockSize;if(typeof M=="string"){for(;se<x;)if(U[ee++]=M.charCodeAt(se++),ee==this.blockSize){i(this,U),ee=0;break}}else for(;se<x;)if(U[ee++]=M[se++],ee==this.blockSize){i(this,U),ee=0;break}}this.h=ee,this.o+=x},a.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;var W=8*this.o;for(x=M.length-8;x<M.length;++x)M[x]=W&255,W/=256;for(this.u(M),M=Array(16),x=W=0;4>x;++x)for(var U=0;32>U;U+=8)M[W++]=this.g[x]>>>U&255;return M};function c(M,x){var W=d;return Object.prototype.hasOwnProperty.call(W,M)?W[M]:W[M]=x(M)}function o(M,x){this.h=x;for(var W=[],U=!0,ee=M.length-1;0<=ee;ee--){var se=M[ee]|0;U&&se==x||(W[ee]=se,U=!1)}this.g=W}var d={};function u(M){return-128<=M&&128>M?c(M,function(x){return new o([x|0],0>x?-1:0)}):new o([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return k;if(0>M)return $(m(-M));for(var x=[],W=1,U=0;M>=W;U++)x[U]=M/W|0,W*=4294967296;return new o(x,0)}function j(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return $(j(M.substring(1),x));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var W=m(Math.pow(x,8)),U=k,ee=0;ee<M.length;ee+=8){var se=Math.min(8,M.length-ee),X=parseInt(M.substring(ee,ee+se),x);8>se?(se=m(Math.pow(x,se)),U=U.j(se).add(m(X))):(U=U.j(W),U=U.add(m(X)))}return U}var k=u(0),T=u(1),C=u(16777216);r=o.prototype,r.m=function(){if(L(this))return-$(this).m();for(var M=0,x=1,W=0;W<this.g.length;W++){var U=this.i(W);M+=(0<=U?U:4294967296+U)*x,x*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(v(this))return"0";if(L(this))return"-"+$(this).toString(M);for(var x=m(Math.pow(M,6)),W=this,U="";;){var ee=re(W,x).g;W=R(W,ee.j(x));var se=((0<W.g.length?W.g[0]:W.h)>>>0).toString(M);if(W=ee,v(W))return se+U;for(;6>se.length;)se="0"+se;U=se+U}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function v(M){if(M.h!=0)return!1;for(var x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function L(M){return M.h==-1}r.l=function(M){return M=R(this,M),L(M)?-1:v(M)?0:1};function $(M){for(var x=M.g.length,W=[],U=0;U<x;U++)W[U]=~M.g[U];return new o(W,~M.h).add(T)}r.abs=function(){return L(this)?$(this):this},r.add=function(M){for(var x=Math.max(this.g.length,M.g.length),W=[],U=0,ee=0;ee<=x;ee++){var se=U+(this.i(ee)&65535)+(M.i(ee)&65535),X=(se>>>16)+(this.i(ee)>>>16)+(M.i(ee)>>>16);U=X>>>16,se&=65535,X&=65535,W[ee]=X<<16|se}return new o(W,W[W.length-1]&-2147483648?-1:0)};function R(M,x){return M.add($(x))}r.j=function(M){if(v(this)||v(M))return k;if(L(this))return L(M)?$(this).j($(M)):$($(this).j(M));if(L(M))return $(this.j($(M)));if(0>this.l(C)&&0>M.l(C))return m(this.m()*M.m());for(var x=this.g.length+M.g.length,W=[],U=0;U<2*x;U++)W[U]=0;for(U=0;U<this.g.length;U++)for(var ee=0;ee<M.g.length;ee++){var se=this.i(U)>>>16,X=this.i(U)&65535,G=M.i(ee)>>>16,l=M.i(ee)&65535;W[2*U+2*ee]+=X*l,V(W,2*U+2*ee),W[2*U+2*ee+1]+=se*l,V(W,2*U+2*ee+1),W[2*U+2*ee+1]+=X*G,V(W,2*U+2*ee+1),W[2*U+2*ee+2]+=se*G,V(W,2*U+2*ee+2)}for(U=0;U<x;U++)W[U]=W[2*U+1]<<16|W[2*U];for(U=x;U<2*x;U++)W[U]=0;return new o(W,0)};function V(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function z(M,x){this.g=M,this.h=x}function re(M,x){if(v(x))throw Error("division by zero");if(v(M))return new z(k,k);if(L(M))return x=re($(M),x),new z($(x.g),$(x.h));if(L(x))return x=re(M,$(x)),new z($(x.g),x.h);if(30<M.g.length){if(L(M)||L(x))throw Error("slowDivide_ only works with positive integers.");for(var W=T,U=x;0>=U.l(M);)W=q(W),U=q(U);var ee=Q(W,1),se=Q(U,1);for(U=Q(U,2),W=Q(W,2);!v(U);){var X=se.add(U);0>=X.l(M)&&(ee=ee.add(W),se=X),U=Q(U,1),W=Q(W,1)}return x=R(M,ee.j(x)),new z(ee,x)}for(ee=k;0<=M.l(x);){for(W=Math.max(1,Math.floor(M.m()/x.m())),U=Math.ceil(Math.log(W)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),se=m(W),X=se.j(x);L(X)||0<X.l(M);)W-=U,se=m(W),X=se.j(x);v(se)&&(se=T),ee=ee.add(se),M=R(M,X)}return new z(ee,M)}r.A=function(M){return re(this,M).h},r.and=function(M){for(var x=Math.max(this.g.length,M.g.length),W=[],U=0;U<x;U++)W[U]=this.i(U)&M.i(U);return new o(W,this.h&M.h)},r.or=function(M){for(var x=Math.max(this.g.length,M.g.length),W=[],U=0;U<x;U++)W[U]=this.i(U)|M.i(U);return new o(W,this.h|M.h)},r.xor=function(M){for(var x=Math.max(this.g.length,M.g.length),W=[],U=0;U<x;U++)W[U]=this.i(U)^M.i(U);return new o(W,this.h^M.h)};function q(M){for(var x=M.g.length+1,W=[],U=0;U<x;U++)W[U]=M.i(U)<<1|M.i(U-1)>>>31;return new o(W,M.h)}function Q(M,x){var W=x>>5;x%=32;for(var U=M.g.length-W,ee=[],se=0;se<U;se++)ee[se]=0<x?M.i(se+W)>>>x|M.i(se+W+1)<<32-x:M.i(se+W);return new o(ee,M.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Ek=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=m,o.fromString=j,Sn=o}).apply(typeof Uv<"u"?Uv:typeof self<"u"?self:typeof window<"u"?window:{});var Gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ck,El,Dk,y0,Zh,_k,$k,Ak;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,D,O){return f==Array.prototype||f==Object.prototype||(f[D]=O.value),f};function s(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gd=="object"&&Gd];for(var D=0;D<f.length;++D){var O=f[D];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var a=s(this);function i(f,D){if(D)e:{var O=a;f=f.split(".");for(var K=0;K<f.length-1;K++){var me=f[K];if(!(me in O))break e;O=O[me]}f=f[f.length-1],K=O[f],D=D(K),D!=K&&D!=null&&t(O,f,{configurable:!0,writable:!0,value:D})}}function c(f,D){f instanceof String&&(f+="");var O=0,K=!1,me={next:function(){if(!K&&O<f.length){var ge=O++;return{value:D(ge,f[ge]),done:!1}}return K=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(f){return f||function(){return c(this,function(D,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},d=this||self;function u(f){var D=typeof f;return D=D!="object"?D:f?Array.isArray(f)?"array":D:"null",D=="array"||D=="object"&&typeof f.length=="number"}function m(f){var D=typeof f;return D=="object"&&f!=null||D=="function"}function j(f,D,O){return f.call.apply(f.bind,arguments)}function k(f,D,O){if(!f)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,K),f.apply(D,me)}}return function(){return f.apply(D,arguments)}}function T(f,D,O){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?j:k,T.apply(null,arguments)}function C(f,D){var O=Array.prototype.slice.call(arguments,1);return function(){var K=O.slice();return K.push.apply(K,arguments),f.apply(this,K)}}function v(f,D){function O(){}O.prototype=D.prototype,f.aa=D.prototype,f.prototype=new O,f.prototype.constructor=f,f.Qb=function(K,me,ge){for(var He=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)He[Gt-2]=arguments[Gt];return D.prototype[me].apply(K,He)}}function L(f){const D=f.length;if(0<D){const O=Array(D);for(let K=0;K<D;K++)O[K]=f[K];return O}return[]}function $(f,D){for(let O=1;O<arguments.length;O++){const K=arguments[O];if(u(K)){const me=f.length||0,ge=K.length||0;f.length=me+ge;for(let He=0;He<ge;He++)f[me+He]=K[He]}else f.push(K)}}class R{constructor(D,O){this.i=D,this.j=O,this.h=0,this.g=null}get(){let D;return 0<this.h?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function V(f){return/^[\s\xa0]*$/.test(f)}function z(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function re(f){return re[" "](f),f}re[" "]=function(){};var q=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Q(f,D,O){for(const K in f)D.call(O,f[K],K,f)}function M(f,D){for(const O in f)D.call(void 0,f[O],O,f)}function x(f){const D={};for(const O in f)D[O]=f[O];return D}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(f,D){let O,K;for(let me=1;me<arguments.length;me++){K=arguments[me];for(O in K)f[O]=K[O];for(let ge=0;ge<W.length;ge++)O=W[ge],Object.prototype.hasOwnProperty.call(K,O)&&(f[O]=K[O])}}function ee(f){var D=1;f=f.split(":");const O=[];for(;0<D&&f.length;)O.push(f.shift()),D--;return f.length&&O.push(f.join(":")),O}function se(f){d.setTimeout(()=>{throw f},0)}function X(){var f=je;let D=null;return f.g&&(D=f.g,f.g=f.g.next,f.g||(f.h=null),D.next=null),D}class G{constructor(){this.h=this.g=null}add(D,O){const K=l.get();K.set(D,O),this.h?this.h.next=K:this.g=K,this.h=K}}var l=new R(()=>new _e,f=>f.reset());class _e{constructor(){this.next=this.g=this.h=null}set(D,O){this.h=D,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ue=!1,je=new G,ye=()=>{const f=d.Promise.resolve(void 0);de=()=>{f.then($e)}};var $e=()=>{for(var f;f=X();){try{f.h.call(f.g)}catch(O){se(O)}var D=l;D.j(f),100>D.h&&(D.h++,f.next=D.g,D.g=f)}ue=!1};function be(){this.s=this.s,this.C=this.C}be.prototype.s=!1,be.prototype.ma=function(){this.s||(this.s=!0,this.N())},be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(f,D){this.type=f,this.g=this.target=D,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,D=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const O=()=>{};d.addEventListener("test",O,D),d.removeEventListener("test",O,D)}catch{}return f}();function Ce(f,D){if(Te.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var O=this.type=f.type,K=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=D,D=f.relatedTarget){if(q){e:{try{re(D.nodeName);var me=!0;break e}catch{}me=!1}me||(D=null)}}else O=="mouseover"?D=f.fromElement:O=="mouseout"&&(D=f.toElement);this.relatedTarget=D,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ze[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ce.aa.h.call(this)}}v(Ce,Te);var ze={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),n=0;function w(f,D,O,K,me){this.listener=f,this.proxy=null,this.src=D,this.type=O,this.capture=!!K,this.ha=me,this.key=++n,this.da=this.fa=!1}function p(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function A(f){this.src=f,this.g={},this.h=0}A.prototype.add=function(f,D,O,K,me){var ge=f.toString();f=this.g[ge],f||(f=this.g[ge]=[],this.h++);var He=H(f,D,K,me);return-1<He?(D=f[He],O||(D.fa=!1)):(D=new w(D,this.src,ge,!!K,me),D.fa=O,f.push(D)),D};function B(f,D){var O=D.type;if(O in f.g){var K=f.g[O],me=Array.prototype.indexOf.call(K,D,void 0),ge;(ge=0<=me)&&Array.prototype.splice.call(K,me,1),ge&&(p(D),f.g[O].length==0&&(delete f.g[O],f.h--))}}function H(f,D,O,K){for(var me=0;me<f.length;++me){var ge=f[me];if(!ge.da&&ge.listener==D&&ge.capture==!!O&&ge.ha==K)return me}return-1}var ae="closure_lm_"+(1e6*Math.random()|0),ne={};function I(f,D,O,K,me){if(K&&K.once)return h(f,D,O,K,me);if(Array.isArray(D)){for(var ge=0;ge<D.length;ge++)I(f,D[ge],O,K,me);return null}return O=oe(O),f&&f[De]?f.K(D,O,m(K)?!!K.capture:!!K,me):_(f,D,O,!1,K,me)}function _(f,D,O,K,me,ge){if(!D)throw Error("Invalid event type");var He=m(me)?!!me.capture:!!me,Gt=ie(f);if(Gt||(f[ae]=Gt=new A(f)),O=Gt.add(D,O,K,He,ge),O.proxy)return O;if(K=P(),O.proxy=K,K.src=f,K.listener=O,f.addEventListener)qe||(me=He),me===void 0&&(me=!1),f.addEventListener(D.toString(),K,me);else if(f.attachEvent)f.attachEvent(Z(D.toString()),K);else if(f.addListener&&f.removeListener)f.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return O}function P(){function f(O){return D.call(f.src,f.listener,O)}const D=Y;return f}function h(f,D,O,K,me){if(Array.isArray(D)){for(var ge=0;ge<D.length;ge++)h(f,D[ge],O,K,me);return null}return O=oe(O),f&&f[De]?f.L(D,O,m(K)?!!K.capture:!!K,me):_(f,D,O,!0,K,me)}function g(f,D,O,K,me){if(Array.isArray(D))for(var ge=0;ge<D.length;ge++)g(f,D[ge],O,K,me);else K=m(K)?!!K.capture:!!K,O=oe(O),f&&f[De]?(f=f.i,D=String(D).toString(),D in f.g&&(ge=f.g[D],O=H(ge,O,K,me),-1<O&&(p(ge[O]),Array.prototype.splice.call(ge,O,1),ge.length==0&&(delete f.g[D],f.h--)))):f&&(f=ie(f))&&(D=f.g[D.toString()],f=-1,D&&(f=H(D,O,K,me)),(O=-1<f?D[f]:null)&&S(O))}function S(f){if(typeof f!="number"&&f&&!f.da){var D=f.src;if(D&&D[De])B(D.i,f);else{var O=f.type,K=f.proxy;D.removeEventListener?D.removeEventListener(O,K,f.capture):D.detachEvent?D.detachEvent(Z(O),K):D.addListener&&D.removeListener&&D.removeListener(K),(O=ie(D))?(B(O,f),O.h==0&&(O.src=null,D[ae]=null)):p(f)}}}function Z(f){return f in ne?ne[f]:ne[f]="on"+f}function Y(f,D){if(f.da)f=!0;else{D=new Ce(D,this);var O=f.listener,K=f.ha||f.src;f.fa&&S(f),f=O.call(K,D)}return f}function ie(f){return f=f[ae],f instanceof A?f:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(f){return typeof f=="function"?f:(f[ce]||(f[ce]=function(D){return f.handleEvent(D)}),f[ce])}function J(){be.call(this),this.i=new A(this),this.M=this,this.F=null}v(J,be),J.prototype[De]=!0,J.prototype.removeEventListener=function(f,D,O,K){g(this,f,D,O,K)};function he(f,D){var O,K=f.F;if(K)for(O=[];K;K=K.F)O.push(K);if(f=f.M,K=D.type||D,typeof D=="string")D=new Te(D,f);else if(D instanceof Te)D.target=D.target||f;else{var me=D;D=new Te(K,f),U(D,me)}if(me=!0,O)for(var ge=O.length-1;0<=ge;ge--){var He=D.g=O[ge];me=ke(He,K,!0,D)&&me}if(He=D.g=f,me=ke(He,K,!0,D)&&me,me=ke(He,K,!1,D)&&me,O)for(ge=0;ge<O.length;ge++)He=D.g=O[ge],me=ke(He,K,!1,D)&&me}J.prototype.N=function(){if(J.aa.N.call(this),this.i){var f=this.i,D;for(D in f.g){for(var O=f.g[D],K=0;K<O.length;K++)p(O[K]);delete f.g[D],f.h--}}this.F=null},J.prototype.K=function(f,D,O,K){return this.i.add(String(f),D,!1,O,K)},J.prototype.L=function(f,D,O,K){return this.i.add(String(f),D,!0,O,K)};function ke(f,D,O,K){if(D=f.i.g[String(D)],!D)return!0;D=D.concat();for(var me=!0,ge=0;ge<D.length;++ge){var He=D[ge];if(He&&!He.da&&He.capture==O){var Gt=He.listener,Er=He.ha||He.src;He.fa&&B(f.i,He),me=Gt.call(Er,K)!==!1&&me}}return me&&!K.defaultPrevented}function Ue(f,D,O){if(typeof f=="function")O&&(f=T(f,O));else if(f&&typeof f.handleEvent=="function")f=T(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(D)?-1:d.setTimeout(f,D||0)}function Pe(f){f.g=Ue(()=>{f.g=null,f.i&&(f.i=!1,Pe(f))},f.l);const D=f.h;f.h=null,f.m.apply(null,D)}class pt extends be{constructor(D,O){super(),this.m=D,this.l=O,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:Pe(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(f){be.call(this),this.h=f,this.g={}}v(Fe,be);var We=[];function Ie(f){Q(f.g,function(D,O){this.g.hasOwnProperty(O)&&S(D)},f),f.g={}}Fe.prototype.N=function(){Fe.aa.N.call(this),Ie(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=d.JSON.stringify,Ye=d.JSON.parse,we=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function Re(){}Re.prototype.h=null;function tt(f){return f.h||(f.h=f.i())}function at(){}var wt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qt(){Te.call(this,"d")}v(qt,Te);function Ft(){Te.call(this,"c")}v(Ft,Te);var ht={},ns=null;function dr(){return ns=ns||new J}ht.La="serverreachability";function is(f){Te.call(this,ht.La,f)}v(is,Te);function gr(f){const D=dr();he(D,new is(D))}ht.STAT_EVENT="statevent";function ys(f,D){Te.call(this,ht.STAT_EVENT,f),this.stat=D}v(ys,Te);function Yt(f){const D=dr();he(D,new ys(D,f))}ht.Ma="timingevent";function Yr(f,D){Te.call(this,ht.Ma,f),this.size=D}v(Yr,Te);function os(f,D){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},D)}function Ds(){this.g=!0}Ds.prototype.xa=function(){this.g=!1};function Ri(f,D,O,K,me,ge){f.info(function(){if(f.g)if(ge)for(var He="",Gt=ge.split("&"),Er=0;Er<Gt.length;Er++){var zt=Gt[Er].split("=");if(1<zt.length){var zr=zt[0];zt=zt[1];var Br=zr.split("_");He=2<=Br.length&&Br[1]=="type"?He+(zr+"="+zt+"&"):He+(zr+"=redacted&")}}else He=null;else He=ge;return"XMLHTTP REQ ("+K+") [attempt "+me+"]: "+D+`
`+O+`
`+He})}function rl(f,D,O,K,me,ge,He){f.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+me+"]: "+D+`
`+O+`
`+ge+" "+He})}function aa(f,D,O,K){f.info(function(){return"XMLHTTP TEXT ("+D+"): "+Lx(f,O)+(K?" "+K:"")})}function Ox(f,D){f.info(function(){return"TIMEOUT: "+D})}Ds.prototype.info=function(){};function Lx(f,D){if(!f.g)return D;if(!D)return null;try{var O=JSON.parse(D);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var K=O[f];if(!(2>K.length)){var me=K[1];if(Array.isArray(me)&&!(1>me.length)){var ge=me[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var He=1;He<me.length;He++)me[He]=""}}}}return Qe(O)}catch{return D}}var Mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oi;function ka(){}v(ka,Re),ka.prototype.g=function(){return new XMLHttpRequest},ka.prototype.i=function(){return{}},Oi=new ka;function Fs(f,D,O,K){this.j=f,this.i=D,this.l=O,this.R=K||1,this.U=new Fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var sl={},Li={};function Vi(f,D,O){f.L=1,f.v=vd(Sa(D)),f.m=O,f.P=!0,fd(f,null)}function fd(f,D){f.F=Date.now(),gd(f),f.A=Sa(f.v);var O=f.A,K=f.R;Array.isArray(K)||(K=[String(K)]),Gy(O.i,"t",K),f.C=0,O=f.j.J,f.h=new Qn,f.g=ub(f.j,O?D:null,!f.m),0<f.O&&(f.M=new pt(T(f.Y,f,f.g),f.O)),D=f.U,O=f.g,K=f.ca;var me="readystatechange";Array.isArray(me)||(me&&(We[0]=me.toString()),me=We);for(var ge=0;ge<me.length;ge++){var He=I(O,me[ge],K||D.handleEvent,!1,D.h||D);if(!He)break;D.g[He.key]=He}D=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),D["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,D)):(f.u="GET",f.g.ea(f.A,f.u,null,D)),gr(),Ri(f.i,f.u,f.A,f.l,f.R,f.m)}Fs.prototype.ca=function(f){f=f.target;const D=this.M;D&&Ta(f)==3?D.j():this.Y(f)},Fs.prototype.Y=function(f){try{if(f==this.g)e:{const Br=Ta(this.g);var D=this.g.Ba();const Ui=this.g.Z();if(!(3>Br)&&(Br!=3||this.g&&(this.h.h||this.g.oa()||eb(this.g)))){this.J||Br!=4||D==7||(D==8||0>=Ui?gr(3):gr(2)),Vx(this);var O=this.g.Z();this.X=O;t:if(Ay(this)){var K=eb(this.g);f="";var me=K.length,ge=Ta(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kn(this),al(this);var He="";break t}this.h.i=new d.TextDecoder}for(D=0;D<me;D++)this.h.h=!0,f+=this.h.i.decode(K[D],{stream:!(ge&&D==me-1)});K.length=0,this.h.g+=f,this.C=0,He=this.h.g}else He=this.g.oa();if(this.o=O==200,rl(this.i,this.u,this.A,this.l,this.R,Br,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,Er=this.g;if((Gt=Er.g?Er.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Gt)){var zt=Gt;break t}}zt=null}if(O=zt)aa(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zx(this,O);else{this.o=!1,this.s=3,Yt(12),Kn(this),al(this);break e}}if(this.P){O=!0;let Hs;for(;!this.J&&this.C<He.length;)if(Hs=_S(this,He),Hs==Li){Br==4&&(this.s=4,Yt(14),O=!1),aa(this.i,this.l,null,"[Incomplete Response]");break}else if(Hs==sl){this.s=4,Yt(15),aa(this.i,this.l,He,"[Invalid Chunk]"),O=!1;break}else aa(this.i,this.l,Hs,null),zx(this,Hs);if(Ay(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Br!=4||He.length!=0||this.h.h||(this.s=1,Yt(16),O=!1),this.o=this.o&&O,!O)aa(this.i,this.l,He,"[Invalid Chunked Response]"),Kn(this),al(this);else if(0<He.length&&!this.W){this.W=!0;var zr=this.j;zr.g==this&&zr.ba&&!zr.M&&(zr.j.info("Great, no buffering proxy detected. Bytes received: "+He.length),qx(zr),zr.M=!0,Yt(11))}}else aa(this.i,this.l,He,null),zx(this,He);Br==4&&Kn(this),this.o&&!this.J&&(Br==4?ob(this.j,this):(this.o=!1,gd(this)))}else KS(this.g),O==400&&0<He.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Kn(this),al(this)}}}catch{}finally{}};function Ay(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function _S(f,D){var O=f.C,K=D.indexOf(`
`,O);return K==-1?Li:(O=Number(D.substring(O,K)),isNaN(O)?sl:(K+=1,K+O>D.length?Li:(D=D.slice(K,K+O),f.C=K+O,D)))}Fs.prototype.cancel=function(){this.J=!0,Kn(this)};function gd(f){f.S=Date.now()+f.I,Ry(f,f.I)}function Ry(f,D){if(f.B!=null)throw Error("WatchDog timer not null");f.B=os(T(f.ba,f),D)}function Vx(f){f.B&&(d.clearTimeout(f.B),f.B=null)}Fs.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ox(this.i,this.A),this.L!=2&&(gr(),Yt(17)),Kn(this),this.s=2,al(this)):Ry(this,this.S-f)};function al(f){f.j.G==0||f.J||ob(f.j,f)}function Kn(f){Vx(f);var D=f.M;D&&typeof D.ma=="function"&&D.ma(),f.M=null,Ie(f.U),f.g&&(D=f.g,f.g=null,D.abort(),D.ma())}function zx(f,D){try{var O=f.j;if(O.G!=0&&(O.g==f||Bx(O.h,f))){if(!f.K&&Bx(O.h,f)&&O.G==3){try{var K=O.Da.g.parse(D)}catch{K=null}if(Array.isArray(K)&&K.length==3){var me=K;if(me[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<f.F)Td(O),kd(O);else break e;Wx(O),Yt(18)}}else O.za=me[1],0<O.za-O.T&&37500>me[2]&&O.F&&O.v==0&&!O.C&&(O.C=os(T(O.Za,O),6e3));if(1>=Ly(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else Yn(O,11)}else if((f.K||O.g==f)&&Td(O),!V(D))for(me=O.Da.g.parse(D),D=0;D<me.length;D++){let zt=me[D];if(O.T=zt[0],zt=zt[1],O.G==2)if(zt[0]=="c"){O.K=zt[1],O.ia=zt[2];const zr=zt[3];zr!=null&&(O.la=zr,O.j.info("VER="+O.la));const Br=zt[4];Br!=null&&(O.Aa=Br,O.j.info("SVER="+O.Aa));const Ui=zt[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(K=1.5*Ui,O.L=K,O.j.info("backChannelRequestTimeoutMs_="+K)),K=O;const Hs=f.g;if(Hs){const Pd=Hs.g?Hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pd){var ge=K.h;ge.g||Pd.indexOf("spdy")==-1&&Pd.indexOf("quic")==-1&&Pd.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(Ux(ge,ge.h),ge.h=null))}if(K.D){const Gx=Hs.g?Hs.g.getResponseHeader("X-HTTP-Session-Id"):null;Gx&&(K.ya=Gx,Xt(K.I,K.D,Gx))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-f.F,O.j.info("Handshake RTT: "+O.R+"ms")),K=O;var He=f;if(K.qa=db(K,K.J?K.ia:null,K.W),He.K){Vy(K.h,He);var Gt=He,Er=K.L;Er&&(Gt.I=Er),Gt.B&&(Vx(Gt),gd(Gt)),K.g=He}else nb(K);0<O.i.length&&Sd(O)}else zt[0]!="stop"&&zt[0]!="close"||Yn(O,7);else O.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?Yn(O,7):Hx(O):zt[0]!="noop"&&O.l&&O.l.ta(zt),O.v=0)}}gr(4)}catch{}}var $S=class{constructor(f,D){this.g=f,this.map=D}};function My(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oy(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ly(f){return f.h?1:f.g?f.g.size:0}function Bx(f,D){return f.h?f.h==D:f.g?f.g.has(D):!1}function Ux(f,D){f.g?f.g.add(D):f.h=D}function Vy(f,D){f.h&&f.h==D?f.h=null:f.g&&f.g.has(D)&&f.g.delete(D)}My.prototype.cancel=function(){if(this.i=zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function zy(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let D=f.i;for(const O of f.g.values())D=D.concat(O.D);return D}return L(f.i)}function AS(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var D=[],O=f.length,K=0;K<O;K++)D.push(f[K]);return D}D=[],O=0;for(K in f)D[O++]=f[K];return D}function RS(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var D=[];f=f.length;for(var O=0;O<f;O++)D.push(O);return D}D=[],O=0;for(const K in f)D[O++]=K;return D}}}function By(f,D){if(f.forEach&&typeof f.forEach=="function")f.forEach(D,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,D,void 0);else for(var O=RS(f),K=AS(f),me=K.length,ge=0;ge<me;ge++)D.call(void 0,K[ge],O&&O[ge],f)}var Uy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MS(f,D){if(f){f=f.split("&");for(var O=0;O<f.length;O++){var K=f[O].indexOf("="),me=null;if(0<=K){var ge=f[O].substring(0,K);me=f[O].substring(K+1)}else ge=f[O];D(ge,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function Zn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Zn){this.h=f.h,yd(this,f.j),this.o=f.o,this.g=f.g,bd(this,f.s),this.l=f.l;var D=f.i,O=new ol;O.i=D.i,D.g&&(O.g=new Map(D.g),O.h=D.h),Fy(this,O),this.m=f.m}else f&&(D=String(f).match(Uy))?(this.h=!1,yd(this,D[1]||"",!0),this.o=nl(D[2]||""),this.g=nl(D[3]||"",!0),bd(this,D[4]),this.l=nl(D[5]||"",!0),Fy(this,D[6]||"",!0),this.m=nl(D[7]||"")):(this.h=!1,this.i=new ol(null,this.h))}Zn.prototype.toString=function(){var f=[],D=this.j;D&&f.push(il(D,Hy,!0),":");var O=this.g;return(O||D=="file")&&(f.push("//"),(D=this.o)&&f.push(il(D,Hy,!0),"@"),f.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&f.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&f.push("/"),f.push(il(O,O.charAt(0)=="/"?VS:LS,!0))),(O=this.i.toString())&&f.push("?",O),(O=this.m)&&f.push("#",il(O,BS)),f.join("")};function Sa(f){return new Zn(f)}function yd(f,D,O){f.j=O?nl(D,!0):D,f.j&&(f.j=f.j.replace(/:$/,""))}function bd(f,D){if(D){if(D=Number(D),isNaN(D)||0>D)throw Error("Bad port number "+D);f.s=D}else f.s=null}function Fy(f,D,O){D instanceof ol?(f.i=D,US(f.i,f.h)):(O||(D=il(D,zS)),f.i=new ol(D,f.h))}function Xt(f,D,O){f.i.set(D,O)}function vd(f){return Xt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function nl(f,D){return f?D?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function il(f,D,O){return typeof f=="string"?(f=encodeURI(f).replace(D,OS),O&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function OS(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Hy=/[#\/\?@]/g,LS=/[#\?:]/g,VS=/[#\?]/g,zS=/[#\?@]/g,BS=/#/g;function ol(f,D){this.h=this.g=null,this.i=f||null,this.j=!!D}function Ya(f){f.g||(f.g=new Map,f.h=0,f.i&&MS(f.i,function(D,O){f.add(decodeURIComponent(D.replace(/\+/g," ")),O)}))}r=ol.prototype,r.add=function(f,D){Ya(this),this.i=null,f=zi(this,f);var O=this.g.get(f);return O||this.g.set(f,O=[]),O.push(D),this.h+=1,this};function Wy(f,D){Ya(f),D=zi(f,D),f.g.has(D)&&(f.i=null,f.h-=f.g.get(D).length,f.g.delete(D))}function qy(f,D){return Ya(f),D=zi(f,D),f.g.has(D)}r.forEach=function(f,D){Ya(this),this.g.forEach(function(O,K){O.forEach(function(me){f.call(D,me,K,this)},this)},this)},r.na=function(){Ya(this);const f=Array.from(this.g.values()),D=Array.from(this.g.keys()),O=[];for(let K=0;K<D.length;K++){const me=f[K];for(let ge=0;ge<me.length;ge++)O.push(D[K])}return O},r.V=function(f){Ya(this);let D=[];if(typeof f=="string")qy(this,f)&&(D=D.concat(this.g.get(zi(this,f))));else{f=Array.from(this.g.values());for(let O=0;O<f.length;O++)D=D.concat(f[O])}return D},r.set=function(f,D){return Ya(this),this.i=null,f=zi(this,f),qy(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[D]),this.h+=1,this},r.get=function(f,D){return f?(f=this.V(f),0<f.length?String(f[0]):D):D};function Gy(f,D,O){Wy(f,D),0<O.length&&(f.i=null,f.g.set(zi(f,D),L(O)),f.h+=O.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],D=Array.from(this.g.keys());for(var O=0;O<D.length;O++){var K=D[O];const ge=encodeURIComponent(String(K)),He=this.V(K);for(K=0;K<He.length;K++){var me=ge;He[K]!==""&&(me+="="+encodeURIComponent(String(He[K]))),f.push(me)}}return this.i=f.join("&")};function zi(f,D){return D=String(D),f.j&&(D=D.toLowerCase()),D}function US(f,D){D&&!f.j&&(Ya(f),f.i=null,f.g.forEach(function(O,K){var me=K.toLowerCase();K!=me&&(Wy(this,K),Gy(this,me,O))},f)),f.j=D}function FS(f,D){const O=new Ds;if(d.Image){const K=new Image;K.onload=C(Xa,O,"TestLoadImage: loaded",!0,D,K),K.onerror=C(Xa,O,"TestLoadImage: error",!1,D,K),K.onabort=C(Xa,O,"TestLoadImage: abort",!1,D,K),K.ontimeout=C(Xa,O,"TestLoadImage: timeout",!1,D,K),d.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=f}else D(!1)}function HS(f,D){const O=new Ds,K=new AbortController,me=setTimeout(()=>{K.abort(),Xa(O,"TestPingServer: timeout",!1,D)},1e4);fetch(f,{signal:K.signal}).then(ge=>{clearTimeout(me),ge.ok?Xa(O,"TestPingServer: ok",!0,D):Xa(O,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(me),Xa(O,"TestPingServer: error",!1,D)})}function Xa(f,D,O,K,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),K(O)}catch{}}function WS(){this.g=new we}function qS(f,D,O){const K=O||"";try{By(f,function(me,ge){let He=me;m(me)&&(He=Qe(me)),D.push(K+ge+"="+encodeURIComponent(He))})}catch(me){throw D.push(K+"type="+encodeURIComponent("_badmap")),me}}function jd(f){this.l=f.Ub||null,this.j=f.eb||!1}v(jd,Re),jd.prototype.g=function(){return new wd(this.l,this.j)},jd.prototype.i=function(f){return function(){return f}}({});function wd(f,D){J.call(this),this.D=f,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(wd,J),r=wd.prototype,r.open=function(f,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=D,this.readyState=1,cl(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const D={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(D.body=f),(this.D||d).fetch(new Request(this.A,D)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ll(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,cl(this)),this.g&&(this.readyState=3,cl(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qy(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qy(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var D=f.value?f.value:new Uint8Array(0);(D=this.v.decode(D,{stream:!f.done}))&&(this.response=this.responseText+=D)}f.done?ll(this):cl(this),this.readyState==3&&Qy(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,ll(this))},r.Qa=function(f){this.g&&(this.response=f,ll(this))},r.ga=function(){this.g&&ll(this)};function ll(f){f.readyState=4,f.l=null,f.j=null,f.v=null,cl(f)}r.setRequestHeader=function(f,D){this.u.append(f,D)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],D=this.h.entries();for(var O=D.next();!O.done;)O=O.value,f.push(O[0]+": "+O[1]),O=D.next();return f.join(`\r
`)};function cl(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(wd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ky(f){let D="";return Q(f,function(O,K){D+=K,D+=":",D+=O,D+=`\r
`}),D}function Fx(f,D,O){e:{for(K in O){var K=!1;break e}K=!0}K||(O=Ky(O),typeof f=="string"?O!=null&&encodeURIComponent(String(O)):Xt(f,D,O))}function ur(f){J.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(ur,J);var GS=/^https?$/i,QS=["POST","PUT"];r=ur.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,D,O,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);D=D?D.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oi.g(),this.v=this.o?tt(this.o):tt(Oi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(D,String(f),!0),this.B=!1}catch(ge){Zy(this,ge);return}if(f=O||"",O=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var me in K)O.set(me,K[me]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const ge of K.keys())O.set(ge,K.get(ge));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(O.keys()).find(ge=>ge.toLowerCase()=="content-type"),me=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(QS,D,void 0))||K||me||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,He]of O)this.g.setRequestHeader(ge,He);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jy(this),this.u=!0,this.g.send(f),this.u=!1}catch(ge){Zy(this,ge)}};function Zy(f,D){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=D,f.m=5,Yy(f),Nd(f)}function Yy(f){f.A||(f.A=!0,he(f,"complete"),he(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,he(this,"complete"),he(this,"abort"),Nd(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nd(this,!0)),ur.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Xy(this):this.bb())},r.bb=function(){Xy(this)};function Xy(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Ta(f)!=4||f.Z()!=2)){if(f.u&&Ta(f)==4)Ue(f.Ea,0,f);else if(he(f,"readystatechange"),Ta(f)==4){f.h=!1;try{const He=f.Z();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var O;if(!(O=D)){var K;if(K=He===0){var me=String(f.D).match(Uy)[1]||null;!me&&d.self&&d.self.location&&(me=d.self.location.protocol.slice(0,-1)),K=!GS.test(me?me.toLowerCase():"")}O=K}if(O)he(f,"complete"),he(f,"success");else{f.m=6;try{var ge=2<Ta(f)?f.g.statusText:""}catch{ge=""}f.l=ge+" ["+f.Z()+"]",Yy(f)}}finally{Nd(f)}}}}function Nd(f,D){if(f.g){Jy(f);const O=f.g,K=f.v[0]?()=>{}:null;f.g=null,f.v=null,D||he(f,"ready");try{O.onreadystatechange=K}catch{}}}function Jy(f){f.I&&(d.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function Ta(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<Ta(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var D=this.g.responseText;return f&&D.indexOf(f)==0&&(D=D.substring(f.length)),Ye(D)}};function eb(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function KS(f){const D={};f=(f.g&&2<=Ta(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<f.length;K++){if(V(f[K]))continue;var O=ee(f[K]);const me=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ge=D[me]||[];D[me]=ge,ge.push(O)}M(D,function(K){return K.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dl(f,D,O){return O&&O.internalChannelParams&&O.internalChannelParams[f]||D}function tb(f){this.Aa=0,this.i=[],this.j=new Ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dl("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dl("baseRetryDelayMs",5e3,f),this.cb=dl("retryDelaySeedMs",1e4,f),this.Wa=dl("forwardChannelMaxRetries",2,f),this.wa=dl("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new My(f&&f.concurrentRequestLimit),this.Da=new WS,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=tb.prototype,r.la=8,r.G=1,r.connect=function(f,D,O,K){Yt(0),this.W=f,this.H=D||{},O&&K!==void 0&&(this.H.OSID=O,this.H.OAID=K),this.F=this.X,this.I=db(this,null,this.W),Sd(this)};function Hx(f){if(rb(f),f.G==3){var D=f.U++,O=Sa(f.I);if(Xt(O,"SID",f.K),Xt(O,"RID",D),Xt(O,"TYPE","terminate"),ul(f,O),D=new Fs(f,f.j,D),D.L=2,D.v=vd(Sa(O)),O=!1,d.navigator&&d.navigator.sendBeacon)try{O=d.navigator.sendBeacon(D.v.toString(),"")}catch{}!O&&d.Image&&(new Image().src=D.v,O=!0),O||(D.g=ub(D.j,null),D.g.ea(D.v)),D.F=Date.now(),gd(D)}cb(f)}function kd(f){f.g&&(qx(f),f.g.cancel(),f.g=null)}function rb(f){kd(f),f.u&&(d.clearTimeout(f.u),f.u=null),Td(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function Sd(f){if(!Oy(f.h)&&!f.s){f.s=!0;var D=f.Ga;de||ye(),ue||(de(),ue=!0),je.add(D,f),f.B=0}}function ZS(f,D){return Ly(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=D.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=os(T(f.Ga,f,D),lb(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const me=new Fs(this,this.j,f);let ge=this.o;if(this.S&&(ge?(ge=x(ge),U(ge,this.S)):ge=this.S),this.m!==null||this.O||(me.H=ge,ge=null),this.P)e:{for(var D=0,O=0;O<this.i.length;O++){t:{var K=this.i[O];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(D+=K,4096<D){D=O;break e}if(D===4096||O===this.i.length-1){D=O+1;break e}}D=1e3}else D=1e3;D=ab(this,me,D),O=Sa(this.I),Xt(O,"RID",f),Xt(O,"CVER",22),this.D&&Xt(O,"X-HTTP-Session-Id",this.D),ul(this,O),ge&&(this.O?D="headers="+encodeURIComponent(String(Ky(ge)))+"&"+D:this.m&&Fx(O,this.m,ge)),Ux(this.h,me),this.Ua&&Xt(O,"TYPE","init"),this.P?(Xt(O,"$req",D),Xt(O,"SID","null"),me.T=!0,Vi(me,O,null)):Vi(me,O,D),this.G=2}}else this.G==3&&(f?sb(this,f):this.i.length==0||Oy(this.h)||sb(this))};function sb(f,D){var O;D?O=D.l:O=f.U++;const K=Sa(f.I);Xt(K,"SID",f.K),Xt(K,"RID",O),Xt(K,"AID",f.T),ul(f,K),f.m&&f.o&&Fx(K,f.m,f.o),O=new Fs(f,f.j,O,f.B+1),f.m===null&&(O.H=f.o),D&&(f.i=D.D.concat(f.i)),D=ab(f,O,1e3),O.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ux(f.h,O),Vi(O,K,D)}function ul(f,D){f.H&&Q(f.H,function(O,K){Xt(D,K,O)}),f.l&&By({},function(O,K){Xt(D,K,O)})}function ab(f,D,O){O=Math.min(f.i.length,O);var K=f.l?T(f.l.Na,f.l,f):null;e:{var me=f.i;let ge=-1;for(;;){const He=["count="+O];ge==-1?0<O?(ge=me[0].g,He.push("ofs="+ge)):ge=0:He.push("ofs="+ge);let Gt=!0;for(let Er=0;Er<O;Er++){let zt=me[Er].g;const zr=me[Er].map;if(zt-=ge,0>zt)ge=Math.max(0,me[Er].g-100),Gt=!1;else try{qS(zr,He,"req"+zt+"_")}catch{K&&K(zr)}}if(Gt){K=He.join("&");break e}}}return f=f.i.splice(0,O),D.D=f,K}function nb(f){if(!f.g&&!f.u){f.Y=1;var D=f.Fa;de||ye(),ue||(de(),ue=!0),je.add(D,f),f.v=0}}function Wx(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=os(T(f.Fa,f),lb(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,ib(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=os(T(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),kd(this),ib(this))};function qx(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function ib(f){f.g=new Fs(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var D=Sa(f.qa);Xt(D,"RID","rpc"),Xt(D,"SID",f.K),Xt(D,"AID",f.T),Xt(D,"CI",f.F?"0":"1"),!f.F&&f.ja&&Xt(D,"TO",f.ja),Xt(D,"TYPE","xmlhttp"),ul(f,D),f.m&&f.o&&Fx(D,f.m,f.o),f.L&&(f.g.I=f.L);var O=f.g;f=f.ia,O.L=1,O.v=vd(Sa(D)),O.m=null,O.P=!0,fd(O,f)}r.Za=function(){this.C!=null&&(this.C=null,kd(this),Wx(this),Yt(19))};function Td(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function ob(f,D){var O=null;if(f.g==D){Td(f),qx(f),f.g=null;var K=2}else if(Bx(f.h,D))O=D.D,Vy(f.h,D),K=1;else return;if(f.G!=0){if(D.o)if(K==1){O=D.m?D.m.length:0,D=Date.now()-D.F;var me=f.B;K=dr(),he(K,new Yr(K,O)),Sd(f)}else nb(f);else if(me=D.s,me==3||me==0&&0<D.X||!(K==1&&ZS(f,D)||K==2&&Wx(f)))switch(O&&0<O.length&&(D=f.h,D.i=D.i.concat(O)),me){case 1:Yn(f,5);break;case 4:Yn(f,10);break;case 3:Yn(f,6);break;default:Yn(f,2)}}}function lb(f,D){let O=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(O*=2),O*D}function Yn(f,D){if(f.j.info("Error code "+D),D==2){var O=T(f.fb,f),K=f.Xa;const me=!K;K=new Zn(K||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||yd(K,"https"),vd(K),me?FS(K.toString(),O):HS(K.toString(),O)}else Yt(2);f.G=0,f.l&&f.l.sa(D),cb(f),rb(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function cb(f){if(f.G=0,f.ka=[],f.l){const D=zy(f.h);(D.length!=0||f.i.length!=0)&&($(f.ka,D),$(f.ka,f.i),f.h.i.length=0,L(f.i),f.i.length=0),f.l.ra()}}function db(f,D,O){var K=O instanceof Zn?Sa(O):new Zn(O);if(K.g!="")D&&(K.g=D+"."+K.g),bd(K,K.s);else{var me=d.location;K=me.protocol,D=D?D+"."+me.hostname:me.hostname,me=+me.port;var ge=new Zn(null);K&&yd(ge,K),D&&(ge.g=D),me&&bd(ge,me),O&&(ge.l=O),K=ge}return O=f.D,D=f.ya,O&&D&&Xt(K,O,D),Xt(K,"VER",f.la),ul(f,K),K}function ub(f,D,O){if(D&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return D=f.Ca&&!f.pa?new ur(new jd({eb:O})):new ur(f.pa),D.Ha(f.J),D}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xb(){}r=xb.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Id(){}Id.prototype.g=function(f,D){return new bs(f,D)};function bs(f,D){J.call(this),this.g=new tb(D),this.l=f,this.h=D&&D.messageUrlParams||null,f=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(f?f["X-WebChannel-Content-Type"]=D.messageContentType:f={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.va&&(f?f["X-WebChannel-Client-Profile"]=D.va:f={"X-WebChannel-Client-Profile":D.va}),this.g.S=f,(f=D&&D.Sb)&&!V(f)&&(this.g.m=f),this.v=D&&D.supportsCrossDomainXhr||!1,this.u=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!V(D)&&(this.g.D=D,f=this.h,f!==null&&D in f&&(f=this.h,D in f&&delete f[D])),this.j=new Bi(this)}v(bs,J),bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bs.prototype.close=function(){Hx(this.g)},bs.prototype.o=function(f){var D=this.g;if(typeof f=="string"){var O={};O.__data__=f,f=O}else this.u&&(O={},O.__data__=Qe(f),f=O);D.i.push(new $S(D.Ya++,f)),D.G==3&&Sd(D)},bs.prototype.N=function(){this.g.l=null,delete this.j,Hx(this.g),delete this.g,bs.aa.N.call(this)};function mb(f){qt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var D=f.__sm__;if(D){e:{for(const O in D){f=O;break e}f=void 0}(this.i=f)&&(f=this.i,D=D!==null&&f in D?D[f]:void 0),this.data=D}else this.data=f}v(mb,qt);function hb(){Ft.call(this),this.status=1}v(hb,Ft);function Bi(f){this.g=f}v(Bi,xb),Bi.prototype.ua=function(){he(this.g,"a")},Bi.prototype.ta=function(f){he(this.g,new mb(f))},Bi.prototype.sa=function(f){he(this.g,new hb)},Bi.prototype.ra=function(){he(this.g,"b")},Id.prototype.createWebChannel=Id.prototype.g,bs.prototype.send=bs.prototype.o,bs.prototype.open=bs.prototype.m,bs.prototype.close=bs.prototype.close,Ak=function(){return new Id},$k=function(){return dr()},_k=ht,Zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,y0=Mi,Gn.COMPLETE="complete",Dk=Gn,at.EventType=wt,wt.OPEN="a",wt.CLOSE="b",wt.ERROR="c",wt.MESSAGE="d",J.prototype.listen=J.prototype.K,El=at,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,Ck=ur}).apply(typeof Gd<"u"?Gd:typeof self<"u"?self:typeof window<"u"?window:{});const Fv="@firebase/firestore",Hv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new ax("@firebase/firestore");function Hi(){return vi.logLevel}function Xe(r,...t){if(vi.logLevel<=Ct.DEBUG){const s=t.map(Ff);vi.debug(`Firestore (${Go}): ${r}`,...s)}}function Ua(r,...t){if(vi.logLevel<=Ct.ERROR){const s=t.map(Ff);vi.error(`Firestore (${Go}): ${r}`,...s)}}function Do(r,...t){if(vi.logLevel<=Ct.WARN){const s=t.map(Ff);vi.warn(`Firestore (${Go}): ${r}`,...s)}}function Ff(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r="Unexpected state"){const t=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: `+r;throw Ua(t),new Error(t)}function At(r,t){r||mt()}function vt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends Us{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class VD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable(()=>s(qr.UNAUTHENTICATED))}shutdown(){}}class zD{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class BD{constructor(t){this.t=t,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){At(this.o===void 0);let a=this.i;const i=u=>this.i!==a?(a=this.i,s(u)):Promise.resolve();let c=new ua;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ua,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=c;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},d=u=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>d(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ua)}},0),o()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(a=>this.i!==t?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(At(typeof a.accessToken=="string"),new Rk(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return At(t===null||typeof t=="string"),new qr(t)}}class UD{constructor(t,s,a){this.l=t,this.h=s,this.P=a,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class FD{constructor(t,s,a){this.l=t,this.h=s,this.P=a}getToken(){return Promise.resolve(new UD(this.l,this.h,this.P))}start(t,s){t.enqueueRetryable(()=>s(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HD{constructor(t,s){this.A=s,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ws(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,s){At(this.o===void 0);const a=c=>{c.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const o=c.token!==this.R;return this.R=c.token,Xe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?s(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>a(c))};const i=c=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>i(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?i(c):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Wv(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(s=>s?(At(typeof s.token=="string"),this.R=s.token,new Wv(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let a=0;a<r;a++)s[a]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=WD(40);for(let c=0;c<i.length;++c)a.length<20&&i[c]<s&&(a+=t.charAt(i[c]%62))}return a}}function St(r,t){return r<t?-1:r>t?1:0}function Yh(r,t){let s=0;for(;s<r.length&&s<t.length;){const a=r.codePointAt(s),i=t.codePointAt(s);if(a!==i){if(a<128&&i<128)return St(a,i);{const c=Mk(),o=qD(c.encode(qv(r,s)),c.encode(qv(t,s)));return o!==0?o:St(a,i)}}s+=a>65535?2:1}return St(r.length,t.length)}function qv(r,t){return r.codePointAt(t)>65535?r.substring(t,t+2):r.substring(t,t+1)}function qD(r,t){for(let s=0;s<r.length&&s<t.length;++s)if(r[s]!==t[s])return St(r[s],t[s]);return St(r.length,t.length)}function _o(r,t,s){return r.length===t.length&&r.every((a,i)=>s(a,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Qv=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(t){return Kt.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),a=Math.floor((t-1e3*s)*Qv);return new Kt(s,a)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new Ke(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Ke(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<Gv)throw new Ke(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ke(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(t){return this.seconds===t.seconds?St(this.nanoseconds,t.nanoseconds):St(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Gv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(t){return new ft(t)}static min(){return new ft(new Kt(0,0))}static max(){return new ft(new Kt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="__name__";class oa{constructor(t,s,a){s===void 0?s=0:s>t.length&&mt(),a===void 0?a=t.length-s:a>t.length-s&&mt(),this.segments=t,this.offset=s,this.len=a}get length(){return this.len}isEqual(t){return oa.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof oa?t.forEach(a=>{s.push(a)}):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,a=this.limit();s<a;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const a=Math.min(t.length,s.length);for(let i=0;i<a;i++){const c=oa.compareSegments(t.get(i),s.get(i));if(c!==0)return c}return St(t.length,s.length)}static compareSegments(t,s){const a=oa.isNumericId(t),i=oa.isNumericId(s);return a&&!i?-1:!a&&i?1:a&&i?oa.extractNumericId(t).compare(oa.extractNumericId(s)):Yh(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Sn.fromString(t.substring(4,t.length-2))}}class Qt extends oa{construct(t,s,a){return new Qt(t,s,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ke(Ne.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);s.push(...a.split("/").filter(i=>i.length>0))}return new Qt(s)}static emptyPath(){return new Qt([])}}const GD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $r extends oa{construct(t,s,a){return new $r(t,s,a)}static isValidIdentifier(t){return GD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$r.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kv}static keyField(){return new $r([Kv])}static fromServerFormat(t){const s=[];let a="",i=0;const c=()=>{if(a.length===0)throw new Ke(Ne.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(a),a=""};let o=!1;for(;i<t.length;){const d=t[i];if(d==="\\"){if(i+1===t.length)throw new Ke(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ke(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=u,i+=2}else d==="`"?(o=!o,i++):d!=="."||o?(a+=d,i++):(c(),i++)}if(c(),o)throw new Ke(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $r(s)}static emptyPath(){return new $r([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.path=t}static fromPath(t){return new xt(Qt.fromString(t))}static fromName(t){return new xt(Qt.fromString(t).popFirst(5))}static empty(){return new xt(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return Qt.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xt(new Qt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=-1;function QD(r,t){const s=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(a===1e9?new Kt(s+1,0):new Kt(s,a));return new Dn(i,xt.empty(),t)}function KD(r){return new Dn(r.readTime,r.key,Nc)}class Dn{constructor(t,s,a){this.readTime=t,this.documentKey=s,this.largestBatchId=a}static min(){return new Dn(ft.min(),xt.empty(),Nc)}static max(){return new Dn(ft.max(),xt.empty(),Nc)}}function ZD(r,t){let s=r.readTime.compareTo(t.readTime);return s!==0?s:(s=xt.comparator(r.documentKey,t.documentKey),s!==0?s:St(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(r){if(r.code!==Ne.FAILED_PRECONDITION||r.message!==YD)throw r;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new Ee((a,i)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(a,i)},this.catchCallback=c=>{this.wrapFailure(s,c).next(a,i)}})}toPromise(){return new Promise((t,s)=>{this.next(t,s)})}wrapUserFunction(t){try{const s=t();return s instanceof Ee?s:Ee.resolve(s)}catch(s){return Ee.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction(()=>t(s)):Ee.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction(()=>t(s)):Ee.reject(s)}static resolve(t){return new Ee((s,a)=>{s(t)})}static reject(t){return new Ee((s,a)=>{a(t)})}static waitFor(t){return new Ee((s,a)=>{let i=0,c=0,o=!1;t.forEach(d=>{++i,d.next(()=>{++c,o&&c===i&&s()},u=>a(u))}),o=!0,c===i&&s()})}static or(t){let s=Ee.resolve(!1);for(const a of t)s=s.next(i=>i?Ee.resolve(i):a());return s}static forEach(t,s){const a=[];return t.forEach((i,c)=>{a.push(s.call(this,i,c))}),this.waitFor(a)}static mapArray(t,s){return new Ee((a,i)=>{const c=t.length,o=new Array(c);let d=0;for(let u=0;u<c;u++){const m=u;s(t[m]).next(j=>{o[m]=j,++d,d===c&&a(o)},j=>i(j))}})}static doWhile(t,s){return new Ee((a,i)=>{const c=()=>{t()===!0?s().next(()=>{c()},i):a()};c()})}}function JD(r){const t=r.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ko(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.oe(a),this._e=a=>s.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}ix.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf=-1;function Zc(r){return r==null}function iu(r){return r===0&&1/r==-1/0}function e_(r){return typeof r=="number"&&Number.isInteger(r)&&!iu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="";function t_(r){let t="";for(let s=0;s<r.length;s++)t.length>0&&(t=Zv(t)),t=r_(r.get(s),t);return Zv(t)}function r_(r,t){let s=t;const a=r.length;for(let i=0;i<a;i++){const c=r.charAt(i);switch(c){case"\0":s+="";break;case Lk:s+="";break;default:s+=c}}return s}function Zv(r){return r+Lk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(r){let t=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t++;return t}function Fn(r,t){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t(s,r[s])}function Vk(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,s){this.comparator=t,this.root=s||_r.EMPTY}insert(t,s){return new cr(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,_r.BLACK,null,null))}remove(t){return new cr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_r.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const a=this.comparator(t,s.key);if(a===0)return s.value;a<0?s=s.left:a>0&&(s=s.right)}return null}indexOf(t){let s=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(t,a.key);if(i===0)return s+a.left.size;i<0?a=a.left:(s+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((s,a)=>(t(s,a),!1))}toString(){const t=[];return this.inorderTraversal((s,a)=>(t.push(`${s}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Qd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Qd(this.root,t,this.comparator,!1)}getReverseIterator(){return new Qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Qd(this.root,t,this.comparator,!0)}}class Qd{constructor(t,s,a,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=s?a(t.key,s):1,s&&i&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _r{constructor(t,s,a,i,c){this.key=t,this.value=s,this.color=a??_r.RED,this.left=i??_r.EMPTY,this.right=c??_r.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,a,i,c){return new _r(t??this.key,s??this.value,a??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,a){let i=this;const c=a(t,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(t,s,a),null):c===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(t,s,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _r.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let a,i=this;if(s(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(t,i.key)===0){if(i.right.isEmpty())return _r.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_r.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const t=this.left.check();if(t!==this.right.check())throw mt();return t+(this.isRed()?0:1)}}_r.EMPTY=null,_r.RED=!0,_r.BLACK=!1;_r.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(t,s,a,i,c){return this}insert(t,s,a){return new _r(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this.comparator=t,this.data=new cr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((s,a)=>(t(s),!1))}forEachInRange(t,s){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,t[1])>=0)return;s(i.key)}}forEachWhile(t,s){let a;for(a=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(t){return new Xv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach(a=>{s=s.add(a)}),s}isEqual(t){if(!(t instanceof Nr)||this.size!==t.size)return!1;const s=this.data.getIterator(),a=t.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,c=a.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(s=>{t.push(s)}),t}toString(){const t=[];return this.forEach(s=>t.push(s)),"SortedSet("+t.toString()+")"}copy(t){const s=new Nr(this.comparator);return s.data=t,s}}class Xv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t){this.fields=t,t.sort($r.comparator)}static empty(){return new ks([])}unionWith(t){let s=new Nr($r.comparator);for(const a of this.fields)s=s.add(a);for(const a of t)s=s.add(a);return new ks(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return _o(this.fields,t.fields,(s,a)=>s.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t){this.binaryString=t}static fromBase64String(t){const s=function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new zk("Invalid base64 string: "+c):c}}(t);return new Vr(s)}static fromUint8Array(t){const s=function(i){let c="";for(let o=0;o<i.length;++o)c+=String.fromCharCode(i[o]);return c}(t);return new Vr(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const a=new Uint8Array(s.length);for(let i=0;i<s.length;i++)a[i]=s.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return St(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const s_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _n(r){if(At(!!r),typeof r=="string"){let t=0;const s=s_.exec(r);if(At(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),t=Number(i)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:pr(r.seconds),nanos:pr(r.nanos)}}function pr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function $n(r){return typeof r=="string"?Vr.fromBase64String(r):Vr.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="server_timestamp",Uk="__type__",Fk="__previous_value__",Hk="__local_write_time__";function Wf(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[Uk])===null||s===void 0?void 0:s.stringValue)===Bk}function ox(r){const t=r.mapValue.fields[Fk];return Wf(t)?ox(t):t}function kc(r){const t=_n(r.mapValue.fields[Hk].timestampValue);return new Kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(t,s,a,i,c,o,d,u,m){this.databaseId=t,this.appId=s,this.persistenceKey=a,this.host=i,this.ssl=c,this.forceLongPolling=o,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=m}}const ou="(default)";class Sc{constructor(t,s){this.projectId=t,this.database=s||ou}static empty(){return new Sc("","")}get isDefaultDatabase(){return this.database===ou}isEqual(t){return t instanceof Sc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="__type__",qk="__max__",Kd={mapValue:{fields:{__type__:{stringValue:qk}}}},Gk="__vector__",lu="value";function An(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Wf(r)?4:i_(r)?9007199254740991:n_(r)?10:11:mt()}function ba(r,t){if(r===t)return!0;const s=An(r);if(s!==An(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return kc(r).isEqual(kc(t));case 3:return function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const o=_n(i.timestampValue),d=_n(c.timestampValue);return o.seconds===d.seconds&&o.nanos===d.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(i,c){return $n(i.bytesValue).isEqual($n(c.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(i,c){return pr(i.geoPointValue.latitude)===pr(c.geoPointValue.latitude)&&pr(i.geoPointValue.longitude)===pr(c.geoPointValue.longitude)}(r,t);case 2:return function(i,c){if("integerValue"in i&&"integerValue"in c)return pr(i.integerValue)===pr(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const o=pr(i.doubleValue),d=pr(c.doubleValue);return o===d?iu(o)===iu(d):isNaN(o)&&isNaN(d)}return!1}(r,t);case 9:return _o(r.arrayValue.values||[],t.arrayValue.values||[],ba);case 10:case 11:return function(i,c){const o=i.mapValue.fields||{},d=c.mapValue.fields||{};if(Yv(o)!==Yv(d))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(d[u]===void 0||!ba(o[u],d[u])))return!1;return!0}(r,t);default:return mt()}}function Tc(r,t){return(r.values||[]).find(s=>ba(s,t))!==void 0}function $o(r,t){if(r===t)return 0;const s=An(r),a=An(t);if(s!==a)return St(s,a);switch(s){case 0:case 9007199254740991:return 0;case 1:return St(r.booleanValue,t.booleanValue);case 2:return function(c,o){const d=pr(c.integerValue||c.doubleValue),u=pr(o.integerValue||o.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1}(r,t);case 3:return Jv(r.timestampValue,t.timestampValue);case 4:return Jv(kc(r),kc(t));case 5:return Yh(r.stringValue,t.stringValue);case 6:return function(c,o){const d=$n(c),u=$n(o);return d.compareTo(u)}(r.bytesValue,t.bytesValue);case 7:return function(c,o){const d=c.split("/"),u=o.split("/");for(let m=0;m<d.length&&m<u.length;m++){const j=St(d[m],u[m]);if(j!==0)return j}return St(d.length,u.length)}(r.referenceValue,t.referenceValue);case 8:return function(c,o){const d=St(pr(c.latitude),pr(o.latitude));return d!==0?d:St(pr(c.longitude),pr(o.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return ej(r.arrayValue,t.arrayValue);case 10:return function(c,o){var d,u,m,j;const k=c.fields||{},T=o.fields||{},C=(d=k[lu])===null||d===void 0?void 0:d.arrayValue,v=(u=T[lu])===null||u===void 0?void 0:u.arrayValue,L=St(((m=C==null?void 0:C.values)===null||m===void 0?void 0:m.length)||0,((j=v==null?void 0:v.values)===null||j===void 0?void 0:j.length)||0);return L!==0?L:ej(C,v)}(r.mapValue,t.mapValue);case 11:return function(c,o){if(c===Kd.mapValue&&o===Kd.mapValue)return 0;if(c===Kd.mapValue)return 1;if(o===Kd.mapValue)return-1;const d=c.fields||{},u=Object.keys(d),m=o.fields||{},j=Object.keys(m);u.sort(),j.sort();for(let k=0;k<u.length&&k<j.length;++k){const T=Yh(u[k],j[k]);if(T!==0)return T;const C=$o(d[u[k]],m[j[k]]);if(C!==0)return C}return St(u.length,j.length)}(r.mapValue,t.mapValue);default:throw mt()}}function Jv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return St(r,t);const s=_n(r),a=_n(t),i=St(s.seconds,a.seconds);return i!==0?i:St(s.nanos,a.nanos)}function ej(r,t){const s=r.values||[],a=t.values||[];for(let i=0;i<s.length&&i<a.length;++i){const c=$o(s[i],a[i]);if(c)return c}return St(s.length,a.length)}function Ao(r){return Xh(r)}function Xh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=_n(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(s){return $n(s).toBase64()}(r.bytesValue):"referenceValue"in r?function(s){return xt.fromName(s).toString()}(r.referenceValue):"geoPointValue"in r?function(s){return`geo(${s.latitude},${s.longitude})`}(r.geoPointValue):"arrayValue"in r?function(s){let a="[",i=!0;for(const c of s.values||[])i?i=!1:a+=",",a+=Xh(c);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let i="{",c=!0;for(const o of a)c?c=!1:i+=",",i+=`${o}:${Xh(s.fields[o])}`;return i+"}"}(r.mapValue):mt()}function b0(r){switch(An(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ox(r);return t?16+b0(t):16;case 5:return 2*r.stringValue.length;case 6:return $n(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,c)=>i+b0(c),0)}(r.arrayValue);case 10:case 11:return function(a){let i=0;return Fn(a.fields,(c,o)=>{i+=c.length+b0(o)}),i}(r.mapValue);default:throw mt()}}function tj(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Jh(r){return!!r&&"integerValue"in r}function qf(r){return!!r&&"arrayValue"in r}function rj(r){return!!r&&"nullValue"in r}function sj(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function v0(r){return!!r&&"mapValue"in r}function n_(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[Wk])===null||s===void 0?void 0:s.stringValue)===Gk}function Hl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return Fn(r.mapValue.fields,(s,a)=>t.mapValue.fields[s]=Hl(a)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=Hl(r.arrayValue.values[s]);return t}return Object.assign({},r)}function i_(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===qk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t){this.value=t}static empty(){return new Jr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let a=0;a<t.length-1;++a)if(s=(s.mapValue.fields||{})[t.get(a)],!v0(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=Hl(s)}setAll(t){let s=$r.emptyPath(),a={},i=[];t.forEach((o,d)=>{if(!s.isImmediateParentOf(d)){const u=this.getFieldsMap(s);this.applyChanges(u,a,i),a={},i=[],s=d.popLast()}o?a[d.lastSegment()]=Hl(o):i.push(d.lastSegment())});const c=this.getFieldsMap(s);this.applyChanges(c,a,i)}delete(t){const s=this.field(t.popLast());v0(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return ba(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let a=0;a<t.length;++a){let i=s.mapValue.fields[t.get(a)];v0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[t.get(a)]=i),s=i}return s.mapValue.fields}applyChanges(t,s,a){Fn(s,(i,c)=>t[i]=c);for(const i of a)delete t[i]}clone(){return new Jr(Hl(this.value))}}function Qk(r){const t=[];return Fn(r.fields,(s,a)=>{const i=new $r([s]);if(v0(a)){const c=Qk(a.mapValue).fields;if(c.length===0)t.push(i);else for(const o of c)t.push(i.child(o))}else t.push(i)}),new ks(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t,s,a,i,c,o,d){this.key=t,this.documentType=s,this.version=a,this.readTime=i,this.createTime=c,this.data=o,this.documentState=d}static newInvalidDocument(t){return new Tr(t,0,ft.min(),ft.min(),ft.min(),Jr.empty(),0)}static newFoundDocument(t,s,a,i){return new Tr(t,1,s,ft.min(),a,i,0)}static newNoDocument(t,s){return new Tr(t,2,s,ft.min(),ft.min(),Jr.empty(),0)}static newUnknownDocument(t,s){return new Tr(t,3,s,ft.min(),ft.min(),Jr.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Tr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t,s){this.position=t,this.inclusive=s}}function aj(r,t,s){let a=0;for(let i=0;i<r.position.length;i++){const c=t[i],o=r.position[i];if(c.field.isKeyField()?a=xt.comparator(xt.fromName(o.referenceValue),s.key):a=$o(o,s.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function nj(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!ba(r.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,s="asc"){this.field=t,this.dir=s}}function o_(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{}class vr extends Kk{constructor(t,s,a){super(),this.field=t,this.op=s,this.value=a}static create(t,s,a){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,a):new c_(t,s,a):s==="array-contains"?new x_(t,a):s==="in"?new m_(t,a):s==="not-in"?new h_(t,a):s==="array-contains-any"?new p_(t,a):new vr(t,s,a)}static createKeyFieldInFilter(t,s,a){return s==="in"?new d_(t,a):new u_(t,a)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison($o(s,this.value)):s!==null&&An(this.value)===An(s)&&this.matchesComparison($o(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ra extends Kk{constructor(t,s){super(),this.filters=t,this.op=s,this.ce=null}static create(t,s){return new ra(t,s)}matches(t){return Zk(this)?this.filters.find(s=>!s.matches(t))===void 0:this.filters.find(s=>s.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,s)=>t.concat(s.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Zk(r){return r.op==="and"}function Yk(r){return l_(r)&&Zk(r)}function l_(r){for(const t of r.filters)if(t instanceof ra)return!1;return!0}function ep(r){if(r instanceof vr)return r.field.canonicalString()+r.op.toString()+Ao(r.value);if(Yk(r))return r.filters.map(t=>ep(t)).join(",");{const t=r.filters.map(s=>ep(s)).join(",");return`${r.op}(${t})`}}function Xk(r,t){return r instanceof vr?function(a,i){return i instanceof vr&&a.op===i.op&&a.field.isEqual(i.field)&&ba(a.value,i.value)}(r,t):r instanceof ra?function(a,i){return i instanceof ra&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((c,o,d)=>c&&Xk(o,i.filters[d]),!0):!1}(r,t):void mt()}function Jk(r){return r instanceof vr?function(s){return`${s.field.canonicalString()} ${s.op} ${Ao(s.value)}`}(r):r instanceof ra?function(s){return s.op.toString()+" {"+s.getFilters().map(Jk).join(" ,")+"}"}(r):"Filter"}class c_ extends vr{constructor(t,s,a){super(t,s,a),this.key=xt.fromName(a.referenceValue)}matches(t){const s=xt.comparator(t.key,this.key);return this.matchesComparison(s)}}class d_ extends vr{constructor(t,s){super(t,"in",s),this.keys=e6("in",s)}matches(t){return this.keys.some(s=>s.isEqual(t.key))}}class u_ extends vr{constructor(t,s){super(t,"not-in",s),this.keys=e6("not-in",s)}matches(t){return!this.keys.some(s=>s.isEqual(t.key))}}function e6(r,t){var s;return(((s=t.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(a=>xt.fromName(a.referenceValue))}class x_ extends vr{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return qf(s)&&Tc(s.arrayValue,this.value)}}class m_ extends vr{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&Tc(this.value.arrayValue,s)}}class h_ extends vr{constructor(t,s){super(t,"not-in",s)}matches(t){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&!Tc(this.value.arrayValue,s)}}class p_ extends vr{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!qf(s)||!s.arrayValue.values)&&s.arrayValue.values.some(a=>Tc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(t,s=null,a=[],i=[],c=null,o=null,d=null){this.path=t,this.collectionGroup=s,this.orderBy=a,this.filters=i,this.limit=c,this.startAt=o,this.endAt=d,this.le=null}}function ij(r,t=null,s=[],a=[],i=null,c=null,o=null){return new f_(r,t,s,a,i,c,o)}function Gf(r){const t=vt(r);if(t.le===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map(a=>ep(a)).join(","),s+="|ob:",s+=t.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),Zc(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>Ao(a)).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>Ao(a)).join(",")),t.le=s}return t.le}function Qf(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!o_(r.orderBy[s],t.orderBy[s]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!Xk(r.filters[s],t.filters[s]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!nj(r.startAt,t.startAt)&&nj(r.endAt,t.endAt)}function tp(r){return xt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,s=null,a=[],i=[],c=null,o="F",d=null,u=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=a,this.filters=i,this.limit=c,this.limitType=o,this.startAt=d,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function g_(r,t,s,a,i,c,o,d){return new Zo(r,t,s,a,i,c,o,d)}function lx(r){return new Zo(r)}function oj(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function t6(r){return r.collectionGroup!==null}function Wl(r){const t=vt(r);if(t.he===null){t.he=[];const s=new Set;for(const c of t.explicitOrderBy)t.he.push(c),s.add(c.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let d=new Nr($r.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(t).forEach(c=>{s.has(c.canonicalString())||c.isKeyField()||t.he.push(new Ic(c,a))}),s.has($r.keyField().canonicalString())||t.he.push(new Ic($r.keyField(),a))}return t.he}function xa(r){const t=vt(r);return t.Pe||(t.Pe=y_(t,Wl(r))),t.Pe}function y_(r,t){if(r.limitType==="F")return ij(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(i=>{const c=i.dir==="desc"?"asc":"desc";return new Ic(i.field,c)});const s=r.endAt?new cu(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new cu(r.startAt.position,r.startAt.inclusive):null;return ij(r.path,r.collectionGroup,t,r.filters,r.limit,s,a)}}function rp(r,t){const s=r.filters.concat([t]);return new Zo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function du(r,t,s){return new Zo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,s,r.startAt,r.endAt)}function cx(r,t){return Qf(xa(r),xa(t))&&r.limitType===t.limitType}function r6(r){return`${Gf(xa(r))}|lt:${r.limitType}`}function Wi(r){return`Query(target=${function(s){let a=s.path.canonicalString();return s.collectionGroup!==null&&(a+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(a+=`, filters: [${s.filters.map(i=>Jk(i)).join(", ")}]`),Zc(s.limit)||(a+=", limit: "+s.limit),s.orderBy.length>0&&(a+=`, orderBy: [${s.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),s.startAt&&(a+=", startAt: ",a+=s.startAt.inclusive?"b:":"a:",a+=s.startAt.position.map(i=>Ao(i)).join(",")),s.endAt&&(a+=", endAt: ",a+=s.endAt.inclusive?"a:":"b:",a+=s.endAt.position.map(i=>Ao(i)).join(",")),`Target(${a})`}(xa(r))}; limitType=${r.limitType})`}function dx(r,t){return t.isFoundDocument()&&function(a,i){const c=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):xt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(r,t)&&function(a,i){for(const c of Wl(a))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0}(r,t)&&function(a,i){for(const c of a.filters)if(!c.matches(i))return!1;return!0}(r,t)&&function(a,i){return!(a.startAt&&!function(o,d,u){const m=aj(o,d,u);return o.inclusive?m<=0:m<0}(a.startAt,Wl(a),i)||a.endAt&&!function(o,d,u){const m=aj(o,d,u);return o.inclusive?m>=0:m>0}(a.endAt,Wl(a),i))}(r,t)}function b_(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function s6(r){return(t,s)=>{let a=!1;for(const i of Wl(r)){const c=v_(i,t,s);if(c!==0)return c;a=a||i.field.isKeyField()}return 0}}function v_(r,t,s){const a=r.field.isKeyField()?xt.comparator(t.key,s.key):function(c,o,d){const u=o.data.field(c),m=d.data.field(c);return u!==null&&m!==null?$o(u,m):mt()}(r.field,t,s);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),a=this.inner[s];if(a!==void 0){for(const[i,c]of a)if(this.equalsFn(i,t))return c}}has(t){return this.get(t)!==void 0}set(t,s){const a=this.mapKeyFn(t),i=this.inner[a];if(i===void 0)return this.inner[a]=[[t,s]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],t))return void(i[c]=[t,s]);i.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),a=this.inner[s];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],t))return a.length===1?delete this.inner[s]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Fn(this.inner,(s,a)=>{for(const[i,c]of a)t(i,c)})}isEmpty(){return Vk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new cr(xt.comparator);function Fa(){return j_}const a6=new cr(xt.comparator);function Cl(...r){let t=a6;for(const s of r)t=t.insert(s.key,s);return t}function n6(r){let t=a6;return r.forEach((s,a)=>t=t.insert(s,a.overlayedDocument)),t}function ii(){return ql()}function i6(){return ql()}function ql(){return new _i(r=>r.toString(),(r,t)=>r.isEqual(t))}const w_=new cr(xt.comparator),N_=new Nr(xt.comparator);function Dt(...r){let t=N_;for(const s of r)t=t.add(s);return t}const k_=new Nr(St);function S_(){return k_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(t)?"-0":t}}function o6(r){return{integerValue:""+r}}function l6(r,t){return e_(t)?o6(t):Kf(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this._=void 0}}function T_(r,t,s){return r instanceof Pc?function(i,c){const o={fields:{[Uk]:{stringValue:Bk},[Hk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&Wf(c)&&(c=ox(c)),c&&(o.fields[Fk]=c),{mapValue:o}}(s,t):r instanceof Ec?d6(r,t):r instanceof Cc?u6(r,t):function(i,c){const o=c6(i,c),d=lj(o)+lj(i.Ie);return Jh(o)&&Jh(i.Ie)?o6(d):Kf(i.serializer,d)}(r,t)}function I_(r,t,s){return r instanceof Ec?d6(r,t):r instanceof Cc?u6(r,t):s}function c6(r,t){return r instanceof Dc?function(a){return Jh(a)||function(c){return!!c&&"doubleValue"in c}(a)}(t)?t:{integerValue:0}:null}class Pc extends ux{}class Ec extends ux{constructor(t){super(),this.elements=t}}function d6(r,t){const s=x6(t);for(const a of r.elements)s.some(i=>ba(i,a))||s.push(a);return{arrayValue:{values:s}}}class Cc extends ux{constructor(t){super(),this.elements=t}}function u6(r,t){let s=x6(t);for(const a of r.elements)s=s.filter(i=>!ba(i,a));return{arrayValue:{values:s}}}class Dc extends ux{constructor(t,s){super(),this.serializer=t,this.Ie=s}}function lj(r){return pr(r.integerValue||r.doubleValue)}function x6(r){return qf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(t,s){this.field=t,this.transform=s}}function P_(r,t){return r.field.isEqual(t.field)&&function(a,i){return a instanceof Ec&&i instanceof Ec||a instanceof Cc&&i instanceof Cc?_o(a.elements,i.elements,ba):a instanceof Dc&&i instanceof Dc?ba(a.Ie,i.Ie):a instanceof Pc&&i instanceof Pc}(r.transform,t.transform)}class E_{constructor(t,s){this.version=t,this.transformResults=s}}class Ar{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new Ar}static exists(t){return new Ar(void 0,t)}static updateTime(t){return new Ar(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function j0(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class xx{}function h6(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new mx(r.key,Ar.none()):new Yc(r.key,r.data,Ar.none());{const s=r.data,a=Jr.empty();let i=new Nr($r.comparator);for(let c of t.fields)if(!i.has(c)){let o=s.field(c);o===null&&c.length>1&&(c=c.popLast(),o=s.field(c)),o===null?a.delete(c):a.set(c,o),i=i.add(c)}return new Hn(r.key,a,new ks(i.toArray()),Ar.none())}}function C_(r,t,s){r instanceof Yc?function(i,c,o){const d=i.value.clone(),u=dj(i.fieldTransforms,c,o.transformResults);d.setAll(u),c.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(r,t,s):r instanceof Hn?function(i,c,o){if(!j0(i.precondition,c))return void c.convertToUnknownDocument(o.version);const d=dj(i.fieldTransforms,c,o.transformResults),u=c.data;u.setAll(p6(i)),u.setAll(d),c.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(r,t,s):function(i,c,o){c.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,s)}function Gl(r,t,s,a){return r instanceof Yc?function(c,o,d,u){if(!j0(c.precondition,o))return d;const m=c.value.clone(),j=uj(c.fieldTransforms,u,o);return m.setAll(j),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(r,t,s,a):r instanceof Hn?function(c,o,d,u){if(!j0(c.precondition,o))return d;const m=uj(c.fieldTransforms,u,o),j=o.data;return j.setAll(p6(c)),j.setAll(m),o.convertToFoundDocument(o.version,j).setHasLocalMutations(),d===null?null:d.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(k=>k.field))}(r,t,s,a):function(c,o,d){return j0(c.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):d}(r,t,s)}function D_(r,t){let s=null;for(const a of r.fieldTransforms){const i=t.data.field(a.field),c=c6(a.transform,i||null);c!=null&&(s===null&&(s=Jr.empty()),s.set(a.field,c))}return s||null}function cj(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&_o(a,i,(c,o)=>P_(c,o))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Yc extends xx{constructor(t,s,a,i=[]){super(),this.key=t,this.value=s,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hn extends xx{constructor(t,s,a,i,c=[]){super(),this.key=t,this.data=s,this.fieldMask=a,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function p6(r){const t=new Map;return r.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const a=r.data.field(s);t.set(s,a)}}),t}function dj(r,t,s){const a=new Map;At(r.length===s.length);for(let i=0;i<s.length;i++){const c=r[i],o=c.transform,d=t.data.field(c.field);a.set(c.field,I_(o,d,s[i]))}return a}function uj(r,t,s){const a=new Map;for(const i of r){const c=i.transform,o=s.data.field(i.field);a.set(i.field,T_(c,o,t))}return a}class mx extends xx{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f6 extends xx{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(t,s,a,i){this.batchId=t,this.localWriteTime=s,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(t,s){const a=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(t.key)&&C_(c,t,a[i])}}applyToLocalView(t,s){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(s=Gl(a,t,s,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(s=Gl(a,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const a=i6();return this.mutations.forEach(i=>{const c=t.get(i.key),o=c.overlayedDocument;let d=this.applyToLocalView(o,c.mutatedFields);d=s.has(i.key)?null:d;const u=h6(o,d);u!==null&&a.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ft.min())}),a}keys(){return this.mutations.reduce((t,s)=>t.add(s.key),Dt())}isEqual(t){return this.batchId===t.batchId&&_o(this.mutations,t.mutations,(s,a)=>cj(s,a))&&_o(this.baseMutations,t.baseMutations,(s,a)=>cj(s,a))}}class Zf{constructor(t,s,a,i){this.batch=t,this.commitVersion=s,this.mutationResults=a,this.docVersions=i}static from(t,s,a){At(t.mutations.length===a.length);let i=function(){return w_}();const c=t.mutations;for(let o=0;o<c.length;o++)i=i.insert(c[o].key,a[o].version);return new Zf(t,s,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr,$t;function g6(r){switch(r){case Ne.OK:return mt();case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0;default:return mt()}}function y6(r){if(r===void 0)return Ua("GRPC error has no .code"),Ne.UNKNOWN;switch(r){case yr.OK:return Ne.OK;case yr.CANCELLED:return Ne.CANCELLED;case yr.UNKNOWN:return Ne.UNKNOWN;case yr.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case yr.INTERNAL:return Ne.INTERNAL;case yr.UNAVAILABLE:return Ne.UNAVAILABLE;case yr.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case yr.NOT_FOUND:return Ne.NOT_FOUND;case yr.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case yr.ABORTED:return Ne.ABORTED;case yr.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case yr.DATA_LOSS:return Ne.DATA_LOSS;default:return mt()}}($t=yr||(yr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Sn([4294967295,4294967295],0);function xj(r){const t=Mk().encode(r),s=new Ek;return s.update(t),new Uint8Array(s.digest())}function mj(r){const t=new DataView(r.buffer),s=t.getUint32(0,!0),a=t.getUint32(4,!0),i=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Sn([s,a],0),new Sn([i,c],0)]}class Yf{constructor(t,s,a){if(this.bitmap=t,this.padding=s,this.hashCount=a,s<0||s>=8)throw new Dl(`Invalid padding: ${s}`);if(a<0)throw new Dl(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${a}`);if(t.length===0&&s!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${s}`);this.Ee=8*t.length-s,this.de=Sn.fromNumber(this.Ee)}Ae(t,s,a){let i=t.add(s.multiply(Sn.fromNumber(a)));return i.compare(R_)===1&&(i=new Sn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const s=xj(t),[a,i]=mj(s);for(let c=0;c<this.hashCount;c++){const o=this.Ae(a,i,c);if(!this.Re(o))return!1}return!0}static create(t,s,a){const i=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),o=new Yf(c,i,s);return a.forEach(d=>o.insert(d)),o}insert(t){if(this.Ee===0)return;const s=xj(t),[a,i]=mj(s);for(let c=0;c<this.hashCount;c++){const o=this.Ae(a,i,c);this.Ve(o)}}Ve(t){const s=Math.floor(t/8),a=t%8;this.bitmap[s]|=1<<a}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t,s,a,i,c){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,s,a){const i=new Map;return i.set(t,Xc.createSynthesizedTargetChangeForCurrentChange(t,s,a)),new hx(ft.min(),i,new cr(St),Fa(),Dt())}}class Xc{constructor(t,s,a,i,c){this.resumeToken=t,this.current=s,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,s,a){return new Xc(a,s,Dt(),Dt(),Dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(t,s,a,i){this.me=t,this.removedTargetIds=s,this.key=a,this.fe=i}}class b6{constructor(t,s){this.targetId=t,this.ge=s}}class v6{constructor(t,s,a=Vr.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=s,this.resumeToken=a,this.cause=i}}class hj{constructor(){this.pe=0,this.ye=pj(),this.we=Vr.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Dt(),s=Dt(),a=Dt();return this.ye.forEach((i,c)=>{switch(c){case 0:t=t.add(i);break;case 2:s=s.add(i);break;case 1:a=a.add(i);break;default:mt()}}),new Xc(this.we,this.Se,t,s,a)}Me(){this.be=!1,this.ye=pj()}xe(t,s){this.be=!0,this.ye=this.ye.insert(t,s)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,At(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class M_{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Fa(),this.$e=Zd(),this.Ue=Zd(),this.Ke=new cr(St)}We(t){for(const s of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(s,t.fe):this.ze(s,t.key,t.fe);for(const s of t.removedTargetIds)this.ze(s,t.key,t.fe)}je(t){this.forEachTarget(t,s=>{const a=this.He(s);switch(t.state){case 0:this.Je(s)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(s);break;case 3:this.Je(s)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(s)&&(this.Ye(s),a.Ce(t.resumeToken));break;default:mt()}})}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.qe.forEach((a,i)=>{this.Je(i)&&s(i)})}Ze(t){const s=t.targetId,a=t.ge.count,i=this.Xe(s);if(i){const c=i.target;if(tp(c))if(a===0){const o=new xt(c.path);this.ze(s,o,Tr.newNoDocument(o,ft.min()))}else At(a===1);else{const o=this.et(s);if(o!==a){const d=this.tt(t),u=d?this.nt(d,t,o):1;if(u!==0){this.Ye(s);const m=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(s,m)}}}}}tt(t){const s=t.ge.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:c=0}=s;let o,d;try{o=$n(a).toUint8Array()}catch(u){if(u instanceof zk)return Do("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new Yf(o,i,c)}catch(u){return Do(u instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.Ee===0?null:d}nt(t,s,a){return s.ge.count===a-this.st(t,s.targetId)?0:2}st(t,s){const a=this.ke.getRemoteKeysForTarget(s);let i=0;return a.forEach(c=>{const o=this.ke.it(),d=`projects/${o.projectId}/databases/${o.database}/documents/${c.path.canonicalString()}`;t.mightContain(d)||(this.ze(s,c,null),i++)}),i}ot(t){const s=new Map;this.qe.forEach((c,o)=>{const d=this.Xe(o);if(d){if(c.current&&tp(d.target)){const u=new xt(d.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,Tr.newNoDocument(u,t))}c.ve&&(s.set(o,c.Fe()),c.Me())}});let a=Dt();this.Ue.forEach((c,o)=>{let d=!0;o.forEachWhile(u=>{const m=this.Xe(u);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(a=a.add(c))}),this.Qe.forEach((c,o)=>o.setReadTime(t));const i=new hx(t,s,this.Ke,this.Qe,a);return this.Qe=Fa(),this.$e=Zd(),this.Ue=Zd(),this.Ke=new cr(St),i}Ge(t,s){if(!this.Je(t))return;const a=this.ut(t,s.key)?2:0;this.He(t).xe(s.key,a),this.Qe=this.Qe.insert(s.key,s),this.$e=this.$e.insert(s.key,this._t(s.key).add(t)),this.Ue=this.Ue.insert(s.key,this.ct(s.key).add(t))}ze(t,s,a){if(!this.Je(t))return;const i=this.He(t);this.ut(t,s)?i.xe(s,1):i.Oe(s),this.Ue=this.Ue.insert(s,this.ct(s).delete(t)),this.Ue=this.Ue.insert(s,this.ct(s).add(t)),a&&(this.Qe=this.Qe.insert(s,a))}removeTarget(t){this.qe.delete(t)}et(t){const s=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let s=this.qe.get(t);return s||(s=new hj,this.qe.set(t,s)),s}ct(t){let s=this.Ue.get(t);return s||(s=new Nr(St),this.Ue=this.Ue.insert(t,s)),s}_t(t){let s=this.$e.get(t);return s||(s=new Nr(St),this.$e=this.$e.insert(t,s)),s}Je(t){const s=this.Xe(t)!==null;return s||Xe("WatchChangeAggregator","Detected inactive target",t),s}Xe(t){const s=this.qe.get(t);return s&&s.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new hj),this.ke.getRemoteKeysForTarget(t).forEach(s=>{this.ze(t,s,null)})}ut(t,s){return this.ke.getRemoteKeysForTarget(t).has(s)}}function Zd(){return new cr(xt.comparator)}function pj(){return new cr(xt.comparator)}const O_=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),L_=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),V_=(()=>({and:"AND",or:"OR"}))();class z_{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function sp(r,t){return r.useProto3Json||Zc(t)?t:{value:t}}function uu(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function j6(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function B_(r,t){return uu(r,t.toTimestamp())}function Ts(r){return At(!!r),ft.fromTimestamp(function(s){const a=_n(s);return new Kt(a.seconds,a.nanos)}(r))}function Xf(r,t){return ap(r,t).canonicalString()}function ap(r,t){const s=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(r).child("documents");return t===void 0?s:s.child(t)}function w6(r){const t=Qt.fromString(r);return At(P6(t)),t}function xu(r,t){return Xf(r.databaseId,t.path)}function Ql(r,t){const s=w6(t);if(s.get(1)!==r.databaseId.projectId)throw new Ke(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new Ke(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new xt(k6(s))}function N6(r,t){return Xf(r.databaseId,t)}function U_(r){const t=w6(r);return t.length===4?Qt.emptyPath():k6(t)}function np(r){return new Qt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function k6(r){return At(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function fj(r,t,s){return{name:xu(r,t),fields:s.value.mapValue.fields}}function F_(r,t){return"found"in t?function(a,i){At(!!i.found),i.found.name,i.found.updateTime;const c=Ql(a,i.found.name),o=Ts(i.found.updateTime),d=i.found.createTime?Ts(i.found.createTime):ft.min(),u=new Jr({mapValue:{fields:i.found.fields}});return Tr.newFoundDocument(c,o,d,u)}(r,t):"missing"in t?function(a,i){At(!!i.missing),At(!!i.readTime);const c=Ql(a,i.missing),o=Ts(i.readTime);return Tr.newNoDocument(c,o)}(r,t):mt()}function H_(r,t){let s;if("targetChange"in t){t.targetChange;const a=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:mt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],c=function(m,j){return m.useProto3Json?(At(j===void 0||typeof j=="string"),Vr.fromBase64String(j||"")):(At(j===void 0||j instanceof Buffer||j instanceof Uint8Array),Vr.fromUint8Array(j||new Uint8Array))}(r,t.targetChange.resumeToken),o=t.targetChange.cause,d=o&&function(m){const j=m.code===void 0?Ne.UNKNOWN:y6(m.code);return new Ke(j,m.message||"")}(o);s=new v6(a,i,c,d||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const i=Ql(r,a.document.name),c=Ts(a.document.updateTime),o=a.document.createTime?Ts(a.document.createTime):ft.min(),d=new Jr({mapValue:{fields:a.document.fields}}),u=Tr.newFoundDocument(i,c,o,d),m=a.targetIds||[],j=a.removedTargetIds||[];s=new w0(m,j,u.key,u)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const i=Ql(r,a.document),c=a.readTime?Ts(a.readTime):ft.min(),o=Tr.newNoDocument(i,c),d=a.removedTargetIds||[];s=new w0([],d,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const i=Ql(r,a.document),c=a.removedTargetIds||[];s=new w0([],c,i,null)}else{if(!("filter"in t))return mt();{t.filter;const a=t.filter;a.targetId;const{count:i=0,unchangedNames:c}=a,o=new A_(i,c),d=a.targetId;s=new b6(d,o)}}return s}function S6(r,t){let s;if(t instanceof Yc)s={update:fj(r,t.key,t.value)};else if(t instanceof mx)s={delete:xu(r,t.key)};else if(t instanceof Hn)s={update:fj(r,t.key,t.data),updateMask:J_(t.fieldMask)};else{if(!(t instanceof f6))return mt();s={verify:xu(r,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map(a=>function(c,o){const d=o.transform;if(d instanceof Pc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ec)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Cc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Dc)return{fieldPath:o.field.canonicalString(),increment:d.Ie};throw mt()}(0,a))),t.precondition.isNone||(s.currentDocument=function(i,c){return c.updateTime!==void 0?{updateTime:B_(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:mt()}(r,t.precondition)),s}function W_(r,t){return r&&r.length>0?(At(t!==void 0),r.map(s=>function(i,c){let o=i.updateTime?Ts(i.updateTime):Ts(c);return o.isEqual(ft.min())&&(o=Ts(c)),new E_(o,i.transformResults||[])}(s,t))):[]}function q_(r,t){return{documents:[N6(r,t.path)]}}function G_(r,t){const s={structuredQuery:{}},a=t.path;let i;t.collectionGroup!==null?(i=a,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=a.popLast(),s.structuredQuery.from=[{collectionId:a.lastSegment()}]),s.parent=N6(r,i);const c=function(m){if(m.length!==0)return I6(ra.create(m,"and"))}(t.filters);c&&(s.structuredQuery.where=c);const o=function(m){if(m.length!==0)return m.map(j=>function(T){return{field:qi(T.field),direction:Z_(T.dir)}}(j))}(t.orderBy);o&&(s.structuredQuery.orderBy=o);const d=sp(r,t.limit);return d!==null&&(s.structuredQuery.limit=d),t.startAt&&(s.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(s.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{ht:s,parent:i}}function Q_(r){let t=U_(r.parent);const s=r.structuredQuery,a=s.from?s.from.length:0;let i=null;if(a>0){At(a===1);const j=s.from[0];j.allDescendants?i=j.collectionId:t=t.child(j.collectionId)}let c=[];s.where&&(c=function(k){const T=T6(k);return T instanceof ra&&Yk(T)?T.getFilters():[T]}(s.where));let o=[];s.orderBy&&(o=function(k){return k.map(T=>function(v){return new Ic(Gi(v.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(T))}(s.orderBy));let d=null;s.limit&&(d=function(k){let T;return T=typeof k=="object"?k.value:k,Zc(T)?null:T}(s.limit));let u=null;s.startAt&&(u=function(k){const T=!!k.before,C=k.values||[];return new cu(C,T)}(s.startAt));let m=null;return s.endAt&&(m=function(k){const T=!k.before,C=k.values||[];return new cu(C,T)}(s.endAt)),g_(t,i,o,c,d,"F",u,m)}function K_(r,t){const s=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(t.purpose);return s==null?null:{"goog-listen-tags":s}}function T6(r){return r.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const a=Gi(s.unaryFilter.field);return vr.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=Gi(s.unaryFilter.field);return vr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Gi(s.unaryFilter.field);return vr.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gi(s.unaryFilter.field);return vr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(r):r.fieldFilter!==void 0?function(s){return vr.create(Gi(s.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(s.fieldFilter.op),s.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(s){return ra.create(s.compositeFilter.filters.map(a=>T6(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt()}}(s.compositeFilter.op))}(r):mt()}function Z_(r){return O_[r]}function Y_(r){return L_[r]}function X_(r){return V_[r]}function qi(r){return{fieldPath:r.canonicalString()}}function Gi(r){return $r.fromServerFormat(r.fieldPath)}function I6(r){return r instanceof vr?function(s){if(s.op==="=="){if(sj(s.value))return{unaryFilter:{field:qi(s.field),op:"IS_NAN"}};if(rj(s.value))return{unaryFilter:{field:qi(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(sj(s.value))return{unaryFilter:{field:qi(s.field),op:"IS_NOT_NAN"}};if(rj(s.value))return{unaryFilter:{field:qi(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(s.field),op:Y_(s.op),value:s.value}}}(r):r instanceof ra?function(s){const a=s.getFilters().map(i=>I6(i));return a.length===1?a[0]:{compositeFilter:{op:X_(s.op),filters:a}}}(r):mt()}function J_(r){const t=[];return r.fields.forEach(s=>t.push(s.canonicalString())),{fieldPaths:t}}function P6(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,s,a,i,c=ft.min(),o=ft.min(),d=Vr.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=s,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(t){return new mn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(t){this.Tt=t}}function t$(r){const t=Q_({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?du(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(){this.Tn=new s$}addToCollectionParentIndex(t,s){return this.Tn.add(s),Ee.resolve()}getCollectionParents(t,s){return Ee.resolve(this.Tn.getEntries(s))}addFieldIndex(t,s){return Ee.resolve()}deleteFieldIndex(t,s){return Ee.resolve()}deleteAllFieldIndexes(t){return Ee.resolve()}createTargetIndexes(t,s){return Ee.resolve()}getDocumentsMatchingTarget(t,s){return Ee.resolve(null)}getIndexType(t,s){return Ee.resolve(0)}getFieldIndexes(t,s){return Ee.resolve([])}getNextCollectionGroupToUpdate(t){return Ee.resolve(null)}getMinOffset(t,s){return Ee.resolve(Dn.min())}getMinOffsetFromCollectionGroup(t,s){return Ee.resolve(Dn.min())}updateCollectionGroup(t,s,a){return Ee.resolve()}updateIndexEntries(t,s){return Ee.resolve()}}class s${constructor(){this.index={}}add(t){const s=t.lastSegment(),a=t.popLast(),i=this.index[s]||new Nr(Qt.comparator),c=!i.has(a);return this.index[s]=i.add(a),c}has(t){const s=t.lastSegment(),a=t.popLast(),i=this.index[s];return i&&i.has(a)}getEntries(t){return(this.index[t]||new Nr(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E6=41943040;class ls{static withCacheSize(t){return new ls(t,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(E6,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Ro(0)}static Kn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="LruGarbageCollector",a$=1048576;function bj([r,t],[s,a]){const i=St(r,s);return i===0?St(t,a):i}class n${constructor(t){this.Hn=t,this.buffer=new Nr(bj),this.Jn=0}Yn(){return++this.Jn}Zn(t){const s=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(s);else{const a=this.buffer.last();bj(s,a)<0&&(this.buffer=this.buffer.delete(a).add(s))}}get maxValue(){return this.buffer.last()[0]}}class i${constructor(t,s,a){this.garbageCollector=t,this.asyncQueue=s,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Xe(yj,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Ko(s)?Xe(yj,"Ignoring IndexedDB error during garbage collection: ",s):await Qo(s)}await this.er(3e5)})}}class o${constructor(t,s){this.tr=t,this.params=s}calculateTargetCount(t,s){return this.tr.nr(t).next(a=>Math.floor(s/100*a))}nthSequenceNumber(t,s){if(s===0)return Ee.resolve(ix.ae);const a=new n$(s);return this.tr.forEachTarget(t,i=>a.Zn(i.sequenceNumber)).next(()=>this.tr.rr(t,i=>a.Zn(i))).next(()=>a.maxValue)}removeTargets(t,s,a){return this.tr.removeTargets(t,s,a)}removeOrphanedDocuments(t,s){return this.tr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(gj)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gj):this.ir(t,s))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,s){let a,i,c,o,d,u,m;const j=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),i=this.params.maximumSequenceNumbersToCollect):i=k,o=Date.now(),this.nthSequenceNumber(t,i))).next(k=>(a=k,d=Date.now(),this.removeTargets(t,a,s))).next(k=>(c=k,u=Date.now(),this.removeOrphanedDocuments(t,a))).next(k=>(m=Date.now(),Hi()<=Ct.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-j}ms
	Determined least recently used ${i} in `+(d-o)+`ms
	Removed ${c} targets in `+(u-d)+`ms
	Removed ${k} documents in `+(m-u)+`ms
Total Duration: ${m-j}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:k})))}}function l$(r,t){return new o$(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(){this.changes=new _i(t=>t.toString(),(t,s)=>t.isEqual(s)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,Tr.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const a=this.changes.get(s);return a!==void 0?Ee.resolve(a):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(t,s,a,i){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=a,this.indexManager=i}getDocument(t,s){let a=null;return this.documentOverlayCache.getOverlay(t,s).next(i=>(a=i,this.remoteDocumentCache.getEntry(t,s))).next(i=>(a!==null&&Gl(a.mutation,i,ks.empty(),Kt.now()),i))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next(a=>this.getLocalViewOfDocuments(t,a,Dt()).next(()=>a))}getLocalViewOfDocuments(t,s,a=Dt()){const i=ii();return this.populateOverlays(t,i,s).next(()=>this.computeViews(t,s,i,a).next(c=>{let o=Cl();return c.forEach((d,u)=>{o=o.insert(d,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,s){const a=ii();return this.populateOverlays(t,a,s).next(()=>this.computeViews(t,s,a,Dt()))}populateOverlays(t,s,a){const i=[];return a.forEach(c=>{s.has(c)||i.push(c)}),this.documentOverlayCache.getOverlays(t,i).next(c=>{c.forEach((o,d)=>{s.set(o,d)})})}computeViews(t,s,a,i){let c=Fa();const o=ql(),d=function(){return ql()}();return s.forEach((u,m)=>{const j=a.get(m.key);i.has(m.key)&&(j===void 0||j.mutation instanceof Hn)?c=c.insert(m.key,m):j!==void 0?(o.set(m.key,j.mutation.getFieldMask()),Gl(j.mutation,m,j.mutation.getFieldMask(),Kt.now())):o.set(m.key,ks.empty())}),this.recalculateAndSaveOverlays(t,c).next(u=>(u.forEach((m,j)=>o.set(m,j)),s.forEach((m,j)=>{var k;return d.set(m,new d$(j,(k=o.get(m))!==null&&k!==void 0?k:null))}),d))}recalculateAndSaveOverlays(t,s){const a=ql();let i=new cr((o,d)=>o-d),c=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next(o=>{for(const d of o)d.keys().forEach(u=>{const m=s.get(u);if(m===null)return;let j=a.get(u)||ks.empty();j=d.applyToLocalView(m,j),a.set(u,j);const k=(i.get(d.batchId)||Dt()).add(u);i=i.insert(d.batchId,k)})}).next(()=>{const o=[],d=i.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),m=u.key,j=u.value,k=i6();j.forEach(T=>{if(!c.has(T)){const C=h6(s.get(T),a.get(T));C!==null&&k.set(T,C),c=c.add(T)}}),o.push(this.documentOverlayCache.saveOverlays(t,m,k))}return Ee.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,s,a,i){return function(o){return xt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):t6(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,a,i):this.getDocumentsMatchingCollectionQuery(t,s,a,i)}getNextDocuments(t,s,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,a,i).next(c=>{const o=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,a.largestBatchId,i-c.size):Ee.resolve(ii());let d=Nc,u=c;return o.next(m=>Ee.forEach(m,(j,k)=>(d<k.largestBatchId&&(d=k.largestBatchId),c.get(j)?Ee.resolve():this.remoteDocumentCache.getEntry(t,j).next(T=>{u=u.insert(j,T)}))).next(()=>this.populateOverlays(t,m,c)).next(()=>this.computeViews(t,u,m,Dt())).next(j=>({batchId:d,changes:n6(j)})))})}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new xt(s)).next(a=>{let i=Cl();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(t,s,a,i){const c=s.collectionGroup;let o=Cl();return this.indexManager.getCollectionParents(t,c).next(d=>Ee.forEach(d,u=>{const m=function(k,T){return new Zo(T,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(s,u.child(c));return this.getDocumentsMatchingCollectionQuery(t,m,a,i).next(j=>{j.forEach((k,T)=>{o=o.insert(k,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,s,a,i){let c;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,a.largestBatchId).next(o=>(c=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,a,c,i))).next(o=>{c.forEach((u,m)=>{const j=m.getKey();o.get(j)===null&&(o=o.insert(j,Tr.newInvalidDocument(j)))});let d=Cl();return o.forEach((u,m)=>{const j=c.get(u);j!==void 0&&Gl(j.mutation,m,ks.empty(),Kt.now()),dx(s,m)&&(d=d.insert(u,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,s){return Ee.resolve(this.dr.get(s))}saveBundleMetadata(t,s){return this.dr.set(s.id,function(i){return{id:i.id,version:i.version,createTime:Ts(i.createTime)}}(s)),Ee.resolve()}getNamedQuery(t,s){return Ee.resolve(this.Ar.get(s))}saveNamedQuery(t,s){return this.Ar.set(s.name,function(i){return{name:i.name,query:t$(i.bundledQuery),readTime:Ts(i.readTime)}}(s)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(){this.overlays=new cr(xt.comparator),this.Rr=new Map}getOverlay(t,s){return Ee.resolve(this.overlays.get(s))}getOverlays(t,s){const a=ii();return Ee.forEach(s,i=>this.getOverlay(t,i).next(c=>{c!==null&&a.set(i,c)})).next(()=>a)}saveOverlays(t,s,a){return a.forEach((i,c)=>{this.Et(t,s,c)}),Ee.resolve()}removeOverlaysForBatchId(t,s,a){const i=this.Rr.get(a);return i!==void 0&&(i.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(a)),Ee.resolve()}getOverlaysForCollection(t,s,a){const i=ii(),c=s.length+1,o=new xt(s.child("")),d=this.overlays.getIteratorFrom(o);for(;d.hasNext();){const u=d.getNext().value,m=u.getKey();if(!s.isPrefixOf(m.path))break;m.path.length===c&&u.largestBatchId>a&&i.set(u.getKey(),u)}return Ee.resolve(i)}getOverlaysForCollectionGroup(t,s,a,i){let c=new cr((m,j)=>m-j);const o=this.overlays.getIterator();for(;o.hasNext();){const m=o.getNext().value;if(m.getKey().getCollectionGroup()===s&&m.largestBatchId>a){let j=c.get(m.largestBatchId);j===null&&(j=ii(),c=c.insert(m.largestBatchId,j)),j.set(m.getKey(),m)}}const d=ii(),u=c.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((m,j)=>d.set(m,j)),!(d.size()>=i)););return Ee.resolve(d)}Et(t,s,a){const i=this.overlays.get(a.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(a.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new $_(s,a));let c=this.Rr.get(s);c===void 0&&(c=Dt(),this.Rr.set(s,c)),this.Rr.set(s,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(){this.sessionToken=Vr.EMPTY_BYTE_STRING}getSessionToken(t){return Ee.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this.Vr=new Nr(kr.mr),this.gr=new Nr(kr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,s){const a=new kr(t,s);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,s){t.forEach(a=>this.addReference(a,s))}removeReference(t,s){this.wr(new kr(t,s))}Sr(t,s){t.forEach(a=>this.removeReference(a,s))}br(t){const s=new xt(new Qt([])),a=new kr(s,t),i=new kr(s,t+1),c=[];return this.gr.forEachInRange([a,i],o=>{this.wr(o),c.push(o.key)}),c}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const s=new xt(new Qt([])),a=new kr(s,t),i=new kr(s,t+1);let c=Dt();return this.gr.forEachInRange([a,i],o=>{c=c.add(o.key)}),c}containsKey(t){const s=new kr(t,0),a=this.Vr.firstAfterOrEqual(s);return a!==null&&t.isEqual(a.key)}}class kr{constructor(t,s){this.key=t,this.Cr=s}static mr(t,s){return xt.comparator(t.key,s.key)||St(t.Cr,s.Cr)}static pr(t,s){return St(t.Cr,s.Cr)||xt.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Fr=1,this.Mr=new Nr(kr.mr)}checkEmpty(t){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,a,i){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new __(c,s,a,i);this.mutationQueue.push(o);for(const d of i)this.Mr=this.Mr.add(new kr(d.key,c)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return Ee.resolve(o)}lookupMutationBatch(t,s){return Ee.resolve(this.Or(s))}getNextMutationBatchAfterBatchId(t,s){const a=s+1,i=this.Nr(a),c=i<0?0:i;return Ee.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?Hf:this.Fr-1)}getAllMutationBatches(t){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const a=new kr(s,0),i=new kr(s,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([a,i],o=>{const d=this.Or(o.Cr);c.push(d)}),Ee.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,s){let a=new Nr(St);return s.forEach(i=>{const c=new kr(i,0),o=new kr(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,o],d=>{a=a.add(d.Cr)})}),Ee.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,s){const a=s.path,i=a.length+1;let c=a;xt.isDocumentKey(c)||(c=c.child(""));const o=new kr(new xt(c),0);let d=new Nr(St);return this.Mr.forEachWhile(u=>{const m=u.key.path;return!!a.isPrefixOf(m)&&(m.length===i&&(d=d.add(u.Cr)),!0)},o),Ee.resolve(this.Br(d))}Br(t){const s=[];return t.forEach(a=>{const i=this.Or(a);i!==null&&s.push(i)}),s}removeMutationBatch(t,s){At(this.Lr(s.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Ee.forEach(s.mutations,i=>{const c=new kr(i.key,s.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,s){const a=new kr(s,0),i=this.Mr.firstAfterOrEqual(a);return Ee.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ee.resolve()}Lr(t,s){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const s=this.Nr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(t){this.kr=t,this.docs=function(){return new cr(xt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const a=s.key,i=this.docs.get(a),c=i?i.size:0,o=this.kr(s);return this.docs=this.docs.insert(a,{document:s.mutableCopy(),size:o}),this.size+=o-c,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const a=this.docs.get(s);return Ee.resolve(a?a.document.mutableCopy():Tr.newInvalidDocument(s))}getEntries(t,s){let a=Fa();return s.forEach(i=>{const c=this.docs.get(i);a=a.insert(i,c?c.document.mutableCopy():Tr.newInvalidDocument(i))}),Ee.resolve(a)}getDocumentsMatchingQuery(t,s,a,i){let c=Fa();const o=s.path,d=new xt(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:m,value:{document:j}}=u.getNext();if(!o.isPrefixOf(m.path))break;m.path.length>o.length+1||ZD(KD(j),a)<=0||(i.has(j.key)||dx(s,j))&&(c=c.insert(j.key,j.mutableCopy()))}return Ee.resolve(c)}getAllFromCollectionGroup(t,s,a,i){mt()}qr(t,s){return Ee.forEach(this.docs,a=>s(a))}newChangeBuffer(t){return new g$(this)}getSize(t){return Ee.resolve(this.size)}}class g$ extends c${constructor(t){super(),this.Ir=t}applyChanges(t){const s=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?s.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(a)}),Ee.waitFor(s)}getFromCache(t,s){return this.Ir.getEntry(t,s)}getAllFromCache(t,s){return this.Ir.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(t){this.persistence=t,this.Qr=new _i(s=>Gf(s),Qf),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Jf,this.targetCount=0,this.Kr=Ro.Un()}forEachTarget(t,s){return this.Qr.forEach((a,i)=>s(i)),Ee.resolve()}getLastRemoteSnapshotVersion(t){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ee.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(t,s,a){return a&&(this.lastRemoteSnapshotVersion=a),s>this.$r&&(this.$r=s),Ee.resolve()}zn(t){this.Qr.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.Kr=new Ro(s),this.highestTargetId=s),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,s){return this.zn(s),this.targetCount+=1,Ee.resolve()}updateTargetData(t,s){return this.zn(s),Ee.resolve()}removeTargetData(t,s){return this.Qr.delete(s.target),this.Ur.br(s.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(t,s,a){let i=0;const c=[];return this.Qr.forEach((o,d)=>{d.sequenceNumber<=s&&a.get(d.targetId)===null&&(this.Qr.delete(o),c.push(this.removeMatchingKeysForTargetId(t,d.targetId)),i++)}),Ee.waitFor(c).next(()=>i)}getTargetCount(t){return Ee.resolve(this.targetCount)}getTargetData(t,s){const a=this.Qr.get(s)||null;return Ee.resolve(a)}addMatchingKeys(t,s,a){return this.Ur.yr(s,a),Ee.resolve()}removeMatchingKeys(t,s,a){this.Ur.Sr(s,a);const i=this.persistence.referenceDelegate,c=[];return i&&s.forEach(o=>{c.push(i.markPotentiallyOrphaned(t,o))}),Ee.waitFor(c)}removeMatchingKeysForTargetId(t,s){return this.Ur.br(s),Ee.resolve()}getMatchingKeysForTargetId(t,s){const a=this.Ur.vr(s);return Ee.resolve(a)}containsKey(t,s){return Ee.resolve(this.Ur.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(t,s){this.Wr={},this.overlays={},this.Gr=new ix(0),this.zr=!1,this.zr=!0,this.jr=new h$,this.referenceDelegate=t(this),this.Hr=new y$(this),this.indexManager=new r$,this.remoteDocumentCache=function(i){return new f$(i)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new e$(s),this.Yr=new x$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new m$,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let a=this.Wr[t.toKey()];return a||(a=new p$(s,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,s,a){Xe("MemoryPersistence","Starting transaction:",t);const i=new b$(this.Gr.next());return this.referenceDelegate.Zr(),a(i).next(c=>this.referenceDelegate.Xr(i).next(()=>c)).toPromise().then(c=>(i.raiseOnCommittedEvent(),c))}ei(t,s){return Ee.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,s)))}}class b$ extends XD{constructor(t){super(),this.currentSequenceNumber=t}}class eg{constructor(t){this.persistence=t,this.ti=new Jf,this.ni=null}static ri(t){return new eg(t)}get ii(){if(this.ni)return this.ni;throw mt()}addReference(t,s,a){return this.ti.addReference(a,s),this.ii.delete(a.toString()),Ee.resolve()}removeReference(t,s,a){return this.ti.removeReference(a,s),this.ii.add(a.toString()),Ee.resolve()}markPotentiallyOrphaned(t,s){return this.ii.add(s.toString()),Ee.resolve()}removeTarget(t,s){this.ti.br(s.targetId).forEach(i=>this.ii.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,s.targetId).next(i=>{i.forEach(c=>this.ii.add(c.toString()))}).next(()=>a.removeTargetData(t,s))}Zr(){this.ni=new Set}Xr(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.ii,a=>{const i=xt.fromPath(a);return this.si(t,i).next(c=>{c||s.removeEntry(i,ft.min())})}).next(()=>(this.ni=null,s.apply(t)))}updateLimboDocument(t,s){return this.si(t,s).next(a=>{a?this.ii.delete(s.toString()):this.ii.add(s.toString())})}Jr(t){return 0}si(t,s){return Ee.or([()=>Ee.resolve(this.ti.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.ei(t,s)])}}class mu{constructor(t,s){this.persistence=t,this.oi=new _i(a=>t_(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=l$(this,s)}static ri(t,s){return new mu(t,s)}Zr(){}Xr(t){return Ee.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}nr(t){const s=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>s.next(i=>a+i))}sr(t){let s=0;return this.rr(t,a=>{s++}).next(()=>s)}rr(t,s){return Ee.forEach(this.oi,(a,i)=>this.ar(t,a,i).next(c=>c?Ee.resolve():s(i)))}removeTargets(t,s,a){return this.persistence.getTargetCache().removeTargets(t,s,a)}removeOrphanedDocuments(t,s){let a=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.qr(t,o=>this.ar(t,o,s).next(d=>{d||(a++,c.removeEntry(o,ft.min()))})).next(()=>c.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,s){return this.oi.set(s,t.currentSequenceNumber),Ee.resolve()}removeTarget(t,s){const a=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,s,a){return this.oi.set(a,t.currentSequenceNumber),Ee.resolve()}removeReference(t,s,a){return this.oi.set(a,t.currentSequenceNumber),Ee.resolve()}updateLimboDocument(t,s){return this.oi.set(s,t.currentSequenceNumber),Ee.resolve()}Jr(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=b0(t.data.value)),s}ar(t,s,a){return Ee.or([()=>this.persistence.ei(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const i=this.oi.get(s);return Ee.resolve(i!==void 0&&i>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,s,a,i){this.targetId=t,this.fromCache=s,this.Hi=a,this.Ji=i}static Yi(t,s){let a=Dt(),i=Dt();for(const c of s.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new tg(t,s.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return bC()?8:JD(Zr())>0?6:4}()}initialize(t,s){this.ns=t,this.indexManager=s,this.Zi=!0}getDocumentsMatchingQuery(t,s,a,i){const c={result:null};return this.rs(t,s).next(o=>{c.result=o}).next(()=>{if(!c.result)return this.ss(t,s,i,a).next(o=>{c.result=o})}).next(()=>{if(c.result)return;const o=new v$;return this._s(t,s,o).next(d=>{if(c.result=d,this.Xi)return this.us(t,s,o,d.size)})}).next(()=>c.result)}us(t,s,a,i){return a.documentReadCount<this.es?(Hi()<=Ct.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",Wi(s),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ee.resolve()):(Hi()<=Ct.DEBUG&&Xe("QueryEngine","Query:",Wi(s),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ts*i?(Hi()<=Ct.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",Wi(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,xa(s))):Ee.resolve())}rs(t,s){if(oj(s))return Ee.resolve(null);let a=xa(s);return this.indexManager.getIndexType(t,a).next(i=>i===0?null:(s.limit!==null&&i===1&&(s=du(s,null,"F"),a=xa(s)),this.indexManager.getDocumentsMatchingTarget(t,a).next(c=>{const o=Dt(...c);return this.ns.getDocuments(t,o).next(d=>this.indexManager.getMinOffset(t,a).next(u=>{const m=this.cs(s,d);return this.ls(s,m,o,u.readTime)?this.rs(t,du(s,null,"F")):this.hs(t,m,s,u)}))})))}ss(t,s,a,i){return oj(s)||i.isEqual(ft.min())?Ee.resolve(null):this.ns.getDocuments(t,a).next(c=>{const o=this.cs(s,c);return this.ls(s,o,a,i)?Ee.resolve(null):(Hi()<=Ct.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wi(s)),this.hs(t,o,s,QD(i,Nc)).next(d=>d))})}cs(t,s){let a=new Nr(s6(t));return s.forEach((i,c)=>{dx(t,c)&&(a=a.add(c))}),a}ls(t,s,a,i){if(t.limit===null)return!1;if(a.size!==s.size)return!0;const c=t.limitType==="F"?s.last():s.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}_s(t,s,a){return Hi()<=Ct.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",Wi(s)),this.ns.getDocumentsMatchingQuery(t,s,Dn.min(),a)}hs(t,s,a,i){return this.ns.getDocumentsMatchingQuery(t,a,i).next(c=>(s.forEach(o=>{c=c.insert(o.key,o)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="LocalStore",w$=3e8;class N${constructor(t,s,a,i){this.persistence=t,this.Ps=s,this.serializer=i,this.Ts=new cr(St),this.Is=new _i(c=>Gf(c),Qf),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new u$(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>t.collect(s,this.Ts))}}function k$(r,t,s,a){return new N$(r,t,s,a)}async function D6(r,t){const s=vt(r);return await s.persistence.runTransaction("Handle user change","readonly",a=>{let i;return s.mutationQueue.getAllMutationBatches(a).next(c=>(i=c,s.As(t),s.mutationQueue.getAllMutationBatches(a))).next(c=>{const o=[],d=[];let u=Dt();for(const m of i){o.push(m.batchId);for(const j of m.mutations)u=u.add(j.key)}for(const m of c){d.push(m.batchId);for(const j of m.mutations)u=u.add(j.key)}return s.localDocuments.getDocuments(a,u).next(m=>({Rs:m,removedBatchIds:o,addedBatchIds:d}))})})}function S$(r,t){const s=vt(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=t.batch.keys(),c=s.ds.newChangeBuffer({trackRemovals:!0});return function(d,u,m,j){const k=m.batch,T=k.keys();let C=Ee.resolve();return T.forEach(v=>{C=C.next(()=>j.getEntry(u,v)).next(L=>{const $=m.docVersions.get(v);At($!==null),L.version.compareTo($)<0&&(k.applyToRemoteDocument(L,m),L.isValidDocument()&&(L.setReadTime(m.commitVersion),j.addEntry(L)))})}),C.next(()=>d.mutationQueue.removeMutationBatch(u,k))}(s,a,t,c).next(()=>c.apply(a)).next(()=>s.mutationQueue.performConsistencyCheck(a)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(a,i,t.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(d){let u=Dt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(u=u.add(d.batch.mutations[m].key));return u}(t))).next(()=>s.localDocuments.getDocuments(a,i))})}function _6(r){const t=vt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",s=>t.Hr.getLastRemoteSnapshotVersion(s))}function T$(r,t){const s=vt(r),a=t.snapshotVersion;let i=s.Ts;return s.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const o=s.ds.newChangeBuffer({trackRemovals:!0});i=s.Ts;const d=[];t.targetChanges.forEach((j,k)=>{const T=i.get(k);if(!T)return;d.push(s.Hr.removeMatchingKeys(c,j.removedDocuments,k).next(()=>s.Hr.addMatchingKeys(c,j.addedDocuments,k)));let C=T.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(k)!==null?C=C.withResumeToken(Vr.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):j.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(j.resumeToken,a)),i=i.insert(k,C),function(L,$,R){return L.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=w$?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(T,C,j)&&d.push(s.Hr.updateTargetData(c,C))});let u=Fa(),m=Dt();if(t.documentUpdates.forEach(j=>{t.resolvedLimboDocuments.has(j)&&d.push(s.persistence.referenceDelegate.updateLimboDocument(c,j))}),d.push(I$(c,o,t.documentUpdates).next(j=>{u=j.Vs,m=j.fs})),!a.isEqual(ft.min())){const j=s.Hr.getLastRemoteSnapshotVersion(c).next(k=>s.Hr.setTargetsMetadata(c,c.currentSequenceNumber,a));d.push(j)}return Ee.waitFor(d).next(()=>o.apply(c)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,u,m)).next(()=>u)}).then(c=>(s.Ts=i,c))}function I$(r,t,s){let a=Dt(),i=Dt();return s.forEach(c=>a=a.add(c)),t.getEntries(r,a).next(c=>{let o=Fa();return s.forEach((d,u)=>{const m=c.get(d);u.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),u.isNoDocument()&&u.version.isEqual(ft.min())?(t.removeEntry(d,u.readTime),o=o.insert(d,u)):!m.isValidDocument()||u.version.compareTo(m.version)>0||u.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(u),o=o.insert(d,u)):Xe(rg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",u.version)}),{Vs:o,fs:i}})}function P$(r,t){const s=vt(r);return s.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=Hf),s.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function E$(r,t){const s=vt(r);return s.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return s.Hr.getTargetData(a,t).next(c=>c?(i=c,Ee.resolve(i)):s.Hr.allocateTargetId(a).next(o=>(i=new mn(t,o,"TargetPurposeListen",a.currentSequenceNumber),s.Hr.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=s.Ts.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.Ts=s.Ts.insert(a.targetId,a),s.Is.set(t,a.targetId)),a})}async function ip(r,t,s){const a=vt(r),i=a.Ts.get(t),c=s?"readwrite":"readwrite-primary";try{s||await a.persistence.runTransaction("Release target",c,o=>a.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ko(o))throw o;Xe(rg,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ts=a.Ts.remove(t),a.Is.delete(i.target)}function vj(r,t,s){const a=vt(r);let i=ft.min(),c=Dt();return a.persistence.runTransaction("Execute query","readwrite",o=>function(u,m,j){const k=vt(u),T=k.Is.get(j);return T!==void 0?Ee.resolve(k.Ts.get(T)):k.Hr.getTargetData(m,j)}(a,o,xa(t)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(o,d.targetId).next(u=>{c=u})}).next(()=>a.Ps.getDocumentsMatchingQuery(o,t,s?i:ft.min(),s?c:Dt())).next(d=>(C$(a,b_(t),d),{documents:d,gs:c})))}function C$(r,t,s){let a=r.Es.get(t)||ft.min();s.forEach((i,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),r.Es.set(t,a)}class jj{constructor(){this.activeTargetIds=S_()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class D${constructor(){this.ho=new jj,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,a){}addLocalQueryTarget(t,s=!0){return s&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,s,a){this.Po[t]=s}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new jj,Promise.resolve()}handleUserChange(t,s,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="ConnectivityMonitor";class Nj{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Xe(wj,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Xe(wj,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd=null;function op(){return Yd===null?Yd=function(){return 268435456+Math.round(2147483648*Math.random())}():Yd++,"0x"+Yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="RestConnection",$$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A${get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=s+"://"+t.host,this.yo=`projects/${a}/databases/${i}`,this.wo=this.databaseId.database===ou?`project_id=${a}`:`project_id=${a}&database_id=${i}`}So(t,s,a,i,c){const o=op(),d=this.bo(t,s.toUriEncodedString());Xe(Im,`Sending RPC '${t}' ${o}:`,d,a);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,c),this.vo(t,d,u,a).then(m=>(Xe(Im,`Received RPC '${t}' ${o}: `,m),m),m=>{throw Do(Im,`RPC '${t}' ${o} failed with error: `,m,"url: ",d,"request:",a),m})}Co(t,s,a,i,c,o){return this.So(t,s,a,i,c)}Do(t,s,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Go}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((i,c)=>t[c]=i),a&&a.headers.forEach((i,c)=>t[c]=i)}bo(t,s){const a=$$[t];return`${this.po}/v1/${s}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="WebChannelConnection";class M$ extends A${constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,s,a,i){const c=op();return new Promise((o,d)=>{const u=new Ck;u.setWithCredentials(!0),u.listenOnce(Dk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case y0.NO_ERROR:const j=u.getResponseJson();Xe(Hr,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(j)),o(j);break;case y0.TIMEOUT:Xe(Hr,`RPC '${t}' ${c} timed out`),d(new Ke(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case y0.HTTP_ERROR:const k=u.getStatus();if(Xe(Hr,`RPC '${t}' ${c} failed with status:`,k,"response text:",u.getResponseText()),k>0){let T=u.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const v=function($){const R=$.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(R)>=0?R:Ne.UNKNOWN}(C.status);d(new Ke(v,C.message))}else d(new Ke(Ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else d(new Ke(Ne.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{Xe(Hr,`RPC '${t}' ${c} completed.`)}});const m=JSON.stringify(i);Xe(Hr,`RPC '${t}' ${c} sending request:`,i),u.send(s,"POST",m,a,15)})}Wo(t,s,a){const i=op(),c=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ak(),d=$k(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(u.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,s,a),u.encodeInitMessageHeaders=!0;const j=c.join("");Xe(Hr,`Creating RPC '${t}' stream ${i}: ${j}`,u);const k=o.createWebChannel(j,u);let T=!1,C=!1;const v=new R$({Fo:$=>{C?Xe(Hr,`Not sending because RPC '${t}' stream ${i} is closed:`,$):(T||(Xe(Hr,`Opening RPC '${t}' stream ${i} transport.`),k.open(),T=!0),Xe(Hr,`RPC '${t}' stream ${i} sending:`,$),k.send($))},Mo:()=>k.close()}),L=($,R,V)=>{$.listen(R,z=>{try{V(z)}catch(re){setTimeout(()=>{throw re},0)}})};return L(k,El.EventType.OPEN,()=>{C||(Xe(Hr,`RPC '${t}' stream ${i} transport opened.`),v.Qo())}),L(k,El.EventType.CLOSE,()=>{C||(C=!0,Xe(Hr,`RPC '${t}' stream ${i} transport closed`),v.Uo())}),L(k,El.EventType.ERROR,$=>{C||(C=!0,Do(Hr,`RPC '${t}' stream ${i} transport errored:`,$),v.Uo(new Ke(Ne.UNAVAILABLE,"The operation could not be completed")))}),L(k,El.EventType.MESSAGE,$=>{var R;if(!C){const V=$.data[0];At(!!V);const z=V,re=(z==null?void 0:z.error)||((R=z[0])===null||R===void 0?void 0:R.error);if(re){Xe(Hr,`RPC '${t}' stream ${i} received error:`,re);const q=re.status;let Q=function(W){const U=yr[W];if(U!==void 0)return y6(U)}(q),M=re.message;Q===void 0&&(Q=Ne.INTERNAL,M="Unknown error status: "+q+" with message "+re.message),C=!0,v.Uo(new Ke(Q,M)),k.close()}else Xe(Hr,`RPC '${t}' stream ${i} received:`,V),v.Ko(V)}}),L(d,_k.STAT_EVENT,$=>{$.stat===Zh.PROXY?Xe(Hr,`RPC '${t}' stream ${i} detected buffering proxy`):$.stat===Zh.NOPROXY&&Xe(Hr,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.$o()},0),v}}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(r){return new z_(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,s,a=1e3,i=1.5,c=6e4){this.Ti=t,this.timerId=s,this.Go=a,this.zo=i,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const s=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),i=Math.max(0,s-a);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${s} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="PersistentStream";class $6{constructor(t,s,a,i,c,o,d,u){this.Ti=t,this.n_=a,this.r_=i,this.connection=c,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new sg(t,s)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,s){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():s&&s.code===Ne.RESOURCE_EXHAUSTED?(Ua(s.toString()),Ua("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):s&&s.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(s)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),s=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.i_===s&&this.V_(a,i)},a=>{t(()=>{const i=new Ke(Ne.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(i)})})}V_(t,s){const a=this.R_(this.i_);this.stream=this.f_(t,s),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{a(()=>this.m_(i))}),this.stream.onMessage(i=>{a(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Xe(kj,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return s=>{this.Ti.enqueueAndForget(()=>this.i_===t?s():(Xe(kj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O$ extends $6{constructor(t,s,a,i,c,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,a,i,o),this.serializer=c}f_(t,s){return this.connection.Wo("Listen",t,s)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const s=H_(this.serializer,t),a=function(c){if(!("targetChange"in c))return ft.min();const o=c.targetChange;return o.targetIds&&o.targetIds.length?ft.min():o.readTime?Ts(o.readTime):ft.min()}(t);return this.listener.p_(s,a)}y_(t){const s={};s.database=np(this.serializer),s.addTarget=function(c,o){let d;const u=o.target;if(d=tp(u)?{documents:q_(c,u)}:{query:G_(c,u).ht},d.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){d.resumeToken=j6(c,o.resumeToken);const m=sp(c,o.expectedCount);m!==null&&(d.expectedCount=m)}else if(o.snapshotVersion.compareTo(ft.min())>0){d.readTime=uu(c,o.snapshotVersion.toTimestamp());const m=sp(c,o.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,t);const a=K_(this.serializer,t);a&&(s.labels=a),this.I_(s)}w_(t){const s={};s.database=np(this.serializer),s.removeTarget=t,this.I_(s)}}class L$ extends $6{constructor(t,s,a,i,c,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,a,i,o),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,s){return this.connection.Wo("Write",t,s)}g_(t){return At(!!t.streamToken),this.lastStreamToken=t.streamToken,At(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){At(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const s=W_(t.writeResults,t.commitTime),a=Ts(t.commitTime);return this.listener.v_(a,s)}C_(){const t={};t.database=np(this.serializer),this.I_(t)}b_(t){const s={streamToken:this.lastStreamToken,writes:t.map(a=>S6(this.serializer,a))};this.I_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${}class z$ extends V${constructor(t,s,a,i){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=a,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Ke(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,s,a,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,o])=>this.connection.So(t,ap(s,a),i,c,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ke(Ne.UNKNOWN,c.toString())})}Co(t,s,a,i,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,d])=>this.connection.Co(t,ap(s,a),i,o,d,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ke(Ne.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class B${constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ua(s),this.N_=!1):Xe("OnlineStateTracker",s)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="RemoteStore";class U${constructor(t,s,a,i,c){this.localStore=t,this.datastore=s,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(o=>{a.enqueueAndForget(async()=>{$i(this)&&(Xe(ji,"Restarting streams for network reachability change."),await async function(u){const m=vt(u);m.W_.add(4),await Jc(m),m.j_.set("Unknown"),m.W_.delete(4),await fx(m)}(this))})}),this.j_=new B$(a,i)}}async function fx(r){if($i(r))for(const t of r.G_)await t(!0)}async function Jc(r){for(const t of r.G_)await t(!1)}function A6(r,t){const s=vt(r);s.K_.has(t.targetId)||(s.K_.set(t.targetId,t),og(s)?ig(s):Yo(s).c_()&&ng(s,t))}function ag(r,t){const s=vt(r),a=Yo(s);s.K_.delete(t),a.c_()&&R6(s,t),s.K_.size===0&&(a.c_()?a.P_():$i(s)&&s.j_.set("Unknown"))}function ng(r,t){if(r.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ft.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Yo(r).y_(t)}function R6(r,t){r.H_.Ne(t),Yo(r).w_(t)}function ig(r){r.H_=new M_({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>r.K_.get(t)||null,it:()=>r.datastore.serializer.databaseId}),Yo(r).start(),r.j_.B_()}function og(r){return $i(r)&&!Yo(r).u_()&&r.K_.size>0}function $i(r){return vt(r).W_.size===0}function M6(r){r.H_=void 0}async function F$(r){r.j_.set("Online")}async function H$(r){r.K_.forEach((t,s)=>{ng(r,t)})}async function W$(r,t){M6(r),og(r)?(r.j_.q_(t),ig(r)):r.j_.set("Unknown")}async function q$(r,t,s){if(r.j_.set("Online"),t instanceof v6&&t.state===2&&t.cause)try{await async function(i,c){const o=c.cause;for(const d of c.targetIds)i.K_.has(d)&&(await i.remoteSyncer.rejectListen(d,o),i.K_.delete(d),i.H_.removeTarget(d))}(r,t)}catch(a){Xe(ji,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await hu(r,a)}else if(t instanceof w0?r.H_.We(t):t instanceof b6?r.H_.Ze(t):r.H_.je(t),!s.isEqual(ft.min()))try{const a=await _6(r.localStore);s.compareTo(a)>=0&&await function(c,o){const d=c.H_.ot(o);return d.targetChanges.forEach((u,m)=>{if(u.resumeToken.approximateByteSize()>0){const j=c.K_.get(m);j&&c.K_.set(m,j.withResumeToken(u.resumeToken,o))}}),d.targetMismatches.forEach((u,m)=>{const j=c.K_.get(u);if(!j)return;c.K_.set(u,j.withResumeToken(Vr.EMPTY_BYTE_STRING,j.snapshotVersion)),R6(c,u);const k=new mn(j.target,u,m,j.sequenceNumber);ng(c,k)}),c.remoteSyncer.applyRemoteEvent(d)}(r,s)}catch(a){Xe(ji,"Failed to raise snapshot:",a),await hu(r,a)}}async function hu(r,t,s){if(!Ko(t))throw t;r.W_.add(1),await Jc(r),r.j_.set("Offline"),s||(s=()=>_6(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Xe(ji,"Retrying IndexedDB access"),await s(),r.W_.delete(1),await fx(r)})}function O6(r,t){return t().catch(s=>hu(r,s,t))}async function gx(r){const t=vt(r),s=Rn(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:Hf;for(;G$(t);)try{const i=await P$(t.localStore,a);if(i===null){t.U_.length===0&&s.P_();break}a=i.batchId,Q$(t,i)}catch(i){await hu(t,i)}L6(t)&&V6(t)}function G$(r){return $i(r)&&r.U_.length<10}function Q$(r,t){r.U_.push(t);const s=Rn(r);s.c_()&&s.S_&&s.b_(t.mutations)}function L6(r){return $i(r)&&!Rn(r).u_()&&r.U_.length>0}function V6(r){Rn(r).start()}async function K$(r){Rn(r).C_()}async function Z$(r){const t=Rn(r);for(const s of r.U_)t.b_(s.mutations)}async function Y$(r,t,s){const a=r.U_.shift(),i=Zf.from(a,t,s);await O6(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await gx(r)}async function X$(r,t){t&&Rn(r).S_&&await async function(a,i){if(function(o){return g6(o)&&o!==Ne.ABORTED}(i.code)){const c=a.U_.shift();Rn(a).h_(),await O6(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,i)),await gx(a)}}(r,t),L6(r)&&V6(r)}async function Sj(r,t){const s=vt(r);s.asyncQueue.verifyOperationInProgress(),Xe(ji,"RemoteStore received new credentials");const a=$i(s);s.W_.add(3),await Jc(s),a&&s.j_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.W_.delete(3),await fx(s)}async function J$(r,t){const s=vt(r);t?(s.W_.delete(2),await fx(s)):t||(s.W_.add(2),await Jc(s),s.j_.set("Unknown"))}function Yo(r){return r.J_||(r.J_=function(s,a,i){const c=vt(s);return c.M_(),new O$(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)}(r.datastore,r.asyncQueue,{xo:F$.bind(null,r),No:H$.bind(null,r),Lo:W$.bind(null,r),p_:q$.bind(null,r)}),r.G_.push(async t=>{t?(r.J_.h_(),og(r)?ig(r):r.j_.set("Unknown")):(await r.J_.stop(),M6(r))})),r.J_}function Rn(r){return r.Y_||(r.Y_=function(s,a,i){const c=vt(s);return c.M_(),new L$(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:K$.bind(null,r),Lo:X$.bind(null,r),D_:Z$.bind(null,r),v_:Y$.bind(null,r)}),r.G_.push(async t=>{t?(r.Y_.h_(),await gx(r)):(await r.Y_.stop(),r.U_.length>0&&(Xe(ji,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,s,a,i,c){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=a,this.op=i,this.removalCallback=c,this.deferred=new ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,s,a,i,c){const o=Date.now()+a,d=new lg(t,s,o,i,c);return d.start(a),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Ne.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(r,t){if(Ua("AsyncQueue",`${t}: ${r}`),Ko(r))return new Ke(Ne.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{static emptySet(t){return new vo(t.comparator)}constructor(t){this.comparator=t?(s,a)=>t(s,a)||xt.comparator(s.key,a.key):(s,a)=>xt.comparator(s.key,a.key),this.keyedMap=Cl(),this.sortedSet=new cr(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((s,a)=>(t(s),!1))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof vo)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,c=a.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(s=>{t.push(s.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const a=new vo;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=s,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.Z_=new cr(xt.comparator)}track(t){const s=t.doc.key,a=this.Z_.get(s);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(s,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(s,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(s,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(s,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(s):t.type===1&&a.type===2?this.Z_=this.Z_.insert(s,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(s,{type:2,doc:t.doc}):mt():this.Z_=this.Z_.insert(s,t)}X_(){const t=[];return this.Z_.inorderTraversal((s,a)=>{t.push(a)}),t}}class Mo{constructor(t,s,a,i,c,o,d,u,m){this.query=t,this.docs=s,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=c,this.fromCache=o,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=m}static fromInitialDocuments(t,s,a,i,c){const o=[];return s.forEach(d=>{o.push({type:0,doc:d})}),new Mo(t,s,vo.emptySet(s),o,a,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&cx(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,a=t.docChanges;if(s.length!==a.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==a[i].type||!s[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class tA{constructor(){this.queries=Ij(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(s,a){const i=vt(s),c=i.queries;i.queries=Ij(),c.forEach((o,d)=>{for(const u of d.ta)u.onError(a)})})(this,new Ke(Ne.ABORTED,"Firestore shutting down"))}}function Ij(){return new _i(r=>r6(r),cx)}async function dg(r,t){const s=vt(r);let a=3;const i=t.query;let c=s.queries.get(i);c?!c.na()&&t.ra()&&(a=2):(c=new eA,a=t.ra()?0:1);try{switch(a){case 0:c.ea=await s.onListen(i,!0);break;case 1:c.ea=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(o){const d=cg(o,`Initialization of query '${Wi(t.query)}' failed`);return void t.onError(d)}s.queries.set(i,c),c.ta.push(t),t.sa(s.onlineState),c.ea&&t.oa(c.ea)&&xg(s)}async function ug(r,t){const s=vt(r),a=t.query;let i=3;const c=s.queries.get(a);if(c){const o=c.ta.indexOf(t);o>=0&&(c.ta.splice(o,1),c.ta.length===0?i=t.ra()?0:1:!c.na()&&t.ra()&&(i=2))}switch(i){case 0:return s.queries.delete(a),s.onUnlisten(a,!0);case 1:return s.queries.delete(a),s.onUnlisten(a,!1);case 2:return s.onLastRemoteStoreUnlisten(a);default:return}}function rA(r,t){const s=vt(r);let a=!1;for(const i of t){const c=i.query,o=s.queries.get(c);if(o){for(const d of o.ta)d.oa(i)&&(a=!0);o.ea=i}}a&&xg(s)}function sA(r,t,s){const a=vt(r),i=a.queries.get(t);if(i)for(const c of i.ta)c.onError(s);a.queries.delete(t)}function xg(r){r.ia.forEach(t=>{t.next()})}var lp,Pj;(Pj=lp||(lp={}))._a="default",Pj.Cache="cache";class mg{constructor(t,s,a){this.query=t,this.aa=s,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const i of t.docChanges)i.type!==3&&a.push(i);t=new Mo(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.ua?this.la(t)&&(this.aa.next(t),s=!0):this.ha(t,this.onlineState)&&(this.Pa(t),s=!0),this.ca=t,s}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let s=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),s=!0),s}ha(t,s){if(!t.fromCache||!this.ra())return!0;const a=s!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}la(t){if(t.docChanges.length>0)return!0;const s=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Pa(t){t=Mo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(t){this.key=t}}class B6{constructor(t){this.key=t}}class aA{constructor(t,s){this.query=t,this.fa=s,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Dt(),this.mutatedKeys=Dt(),this.ya=s6(t),this.wa=new vo(this.ya)}get Sa(){return this.fa}ba(t,s){const a=s?s.Da:new Tj,i=s?s.wa:this.wa;let c=s?s.mutatedKeys:this.mutatedKeys,o=i,d=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((j,k)=>{const T=i.get(j),C=dx(this.query,k)?k:null,v=!!T&&this.mutatedKeys.has(T.key),L=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let $=!1;T&&C?T.data.isEqual(C.data)?v!==L&&(a.track({type:3,doc:C}),$=!0):this.va(T,C)||(a.track({type:2,doc:C}),$=!0,(u&&this.ya(C,u)>0||m&&this.ya(C,m)<0)&&(d=!0)):!T&&C?(a.track({type:0,doc:C}),$=!0):T&&!C&&(a.track({type:1,doc:T}),$=!0,(u||m)&&(d=!0)),$&&(C?(o=o.add(C),c=L?c.add(j):c.delete(j)):(o=o.delete(j),c=c.delete(j)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const j=this.query.limitType==="F"?o.last():o.first();o=o.delete(j.key),c=c.delete(j.key),a.track({type:1,doc:j})}return{wa:o,Da:a,ls:d,mutatedKeys:c}}va(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,a,i){const c=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((j,k)=>function(C,v){const L=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return L(C)-L(v)}(j.type,k.type)||this.ya(j.doc,k.doc)),this.Ca(a),i=i!=null&&i;const d=s&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,m=u!==this.ga;return this.ga=u,o.length!==0||m?{snapshot:new Mo(this.query,t.wa,c,o,t.mutatedKeys,u===0,m,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Tj,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(s=>this.fa=this.fa.add(s)),t.modifiedDocuments.forEach(s=>{}),t.removedDocuments.forEach(s=>this.fa=this.fa.delete(s)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Dt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const s=[];return t.forEach(a=>{this.pa.has(a)||s.push(new B6(a))}),this.pa.forEach(a=>{t.has(a)||s.push(new z6(a))}),s}Oa(t){this.fa=t.gs,this.pa=Dt();const s=this.ba(t.documents);return this.applyChanges(s,!0)}Na(){return Mo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const hg="SyncEngine";class nA{constructor(t,s,a){this.query=t,this.targetId=s,this.view=a}}class iA{constructor(t){this.key=t,this.Ba=!1}}class oA{constructor(t,s,a,i,c,o){this.localStore=t,this.remoteStore=s,this.eventManager=a,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new _i(d=>r6(d),cx),this.qa=new Map,this.Qa=new Set,this.$a=new cr(xt.comparator),this.Ua=new Map,this.Ka=new Jf,this.Wa={},this.Ga=new Map,this.za=Ro.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function lA(r,t,s=!0){const a=G6(r);let i;const c=a.ka.get(t);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.Na()):i=await U6(a,t,s,!0),i}async function cA(r,t){const s=G6(r);await U6(s,t,!0,!1)}async function U6(r,t,s,a){const i=await E$(r.localStore,xa(t)),c=i.targetId,o=r.sharedClientState.addLocalQueryTarget(c,s);let d;return a&&(d=await dA(r,t,c,o==="current",i.resumeToken)),r.isPrimaryClient&&s&&A6(r.remoteStore,i),d}async function dA(r,t,s,a,i){r.Ha=(k,T,C)=>async function(L,$,R,V){let z=$.view.ba(R);z.ls&&(z=await vj(L.localStore,$.query,!1).then(({documents:M})=>$.view.ba(M,z)));const re=V&&V.targetChanges.get($.targetId),q=V&&V.targetMismatches.get($.targetId)!=null,Q=$.view.applyChanges(z,L.isPrimaryClient,re,q);return Cj(L,$.targetId,Q.Ma),Q.snapshot}(r,k,T,C);const c=await vj(r.localStore,t,!0),o=new aA(t,c.gs),d=o.ba(c.documents),u=Xc.createSynthesizedTargetChangeForCurrentChange(s,a&&r.onlineState!=="Offline",i),m=o.applyChanges(d,r.isPrimaryClient,u);Cj(r,s,m.Ma);const j=new nA(t,s,o);return r.ka.set(t,j),r.qa.has(s)?r.qa.get(s).push(t):r.qa.set(s,[t]),m.snapshot}async function uA(r,t,s){const a=vt(r),i=a.ka.get(t),c=a.qa.get(i.targetId);if(c.length>1)return a.qa.set(i.targetId,c.filter(o=>!cx(o,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await ip(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),s&&ag(a.remoteStore,i.targetId),cp(a,i.targetId)}).catch(Qo)):(cp(a,i.targetId),await ip(a.localStore,i.targetId,!0))}async function xA(r,t){const s=vt(r),a=s.ka.get(t),i=s.qa.get(a.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(a.targetId),ag(s.remoteStore,a.targetId))}async function mA(r,t,s){const a=vA(r);try{const i=await function(o,d){const u=vt(o),m=Kt.now(),j=d.reduce((C,v)=>C.add(v.key),Dt());let k,T;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let v=Fa(),L=Dt();return u.ds.getEntries(C,j).next($=>{v=$,v.forEach((R,V)=>{V.isValidDocument()||(L=L.add(R))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,v)).next($=>{k=$;const R=[];for(const V of d){const z=D_(V,k.get(V.key).overlayedDocument);z!=null&&R.push(new Hn(V.key,z,Qk(z.value.mapValue),Ar.exists(!0)))}return u.mutationQueue.addMutationBatch(C,m,R,d)}).next($=>{T=$;const R=$.applyToLocalDocumentSet(k,L);return u.documentOverlayCache.saveOverlays(C,$.batchId,R)})}).then(()=>({batchId:T.batchId,changes:n6(k)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(i.batchId),function(o,d,u){let m=o.Wa[o.currentUser.toKey()];m||(m=new cr(St)),m=m.insert(d,u),o.Wa[o.currentUser.toKey()]=m}(a,i.batchId,s),await ed(a,i.changes),await gx(a.remoteStore)}catch(i){const c=cg(i,"Failed to persist write");s.reject(c)}}async function F6(r,t){const s=vt(r);try{const a=await T$(s.localStore,t);t.targetChanges.forEach((i,c)=>{const o=s.Ua.get(c);o&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?At(o.Ba):i.removedDocuments.size>0&&(At(o.Ba),o.Ba=!1))}),await ed(s,a,t)}catch(a){await Qo(a)}}function Ej(r,t,s){const a=vt(r);if(a.isPrimaryClient&&s===0||!a.isPrimaryClient&&s===1){const i=[];a.ka.forEach((c,o)=>{const d=o.view.sa(t);d.snapshot&&i.push(d.snapshot)}),function(o,d){const u=vt(o);u.onlineState=d;let m=!1;u.queries.forEach((j,k)=>{for(const T of k.ta)T.sa(d)&&(m=!0)}),m&&xg(u)}(a.eventManager,t),i.length&&a.La.p_(i),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function hA(r,t,s){const a=vt(r);a.sharedClientState.updateQueryState(t,"rejected",s);const i=a.Ua.get(t),c=i&&i.key;if(c){let o=new cr(xt.comparator);o=o.insert(c,Tr.newNoDocument(c,ft.min()));const d=Dt().add(c),u=new hx(ft.min(),new Map,new cr(St),o,d);await F6(a,u),a.$a=a.$a.remove(c),a.Ua.delete(t),pg(a)}else await ip(a.localStore,t,!1).then(()=>cp(a,t,s)).catch(Qo)}async function pA(r,t){const s=vt(r),a=t.batch.batchId;try{const i=await S$(s.localStore,t);W6(s,a,null),H6(s,a),s.sharedClientState.updateMutationState(a,"acknowledged"),await ed(s,i)}catch(i){await Qo(i)}}async function fA(r,t,s){const a=vt(r);try{const i=await function(o,d){const u=vt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let j;return u.mutationQueue.lookupMutationBatch(m,d).next(k=>(At(k!==null),j=k.keys(),u.mutationQueue.removeMutationBatch(m,k))).next(()=>u.mutationQueue.performConsistencyCheck(m)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(m,j,d)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,j)).next(()=>u.localDocuments.getDocuments(m,j))})}(a.localStore,t);W6(a,t,s),H6(a,t),a.sharedClientState.updateMutationState(t,"rejected",s),await ed(a,i)}catch(i){await Qo(i)}}function H6(r,t){(r.Ga.get(t)||[]).forEach(s=>{s.resolve()}),r.Ga.delete(t)}function W6(r,t,s){const a=vt(r);let i=a.Wa[a.currentUser.toKey()];if(i){const c=i.get(t);c&&(s?c.reject(s):c.resolve(),i=i.remove(t)),a.Wa[a.currentUser.toKey()]=i}}function cp(r,t,s=null){r.sharedClientState.removeLocalQueryTarget(t);for(const a of r.qa.get(t))r.ka.delete(a),s&&r.La.Ja(a,s);r.qa.delete(t),r.isPrimaryClient&&r.Ka.br(t).forEach(a=>{r.Ka.containsKey(a)||q6(r,a)})}function q6(r,t){r.Qa.delete(t.path.canonicalString());const s=r.$a.get(t);s!==null&&(ag(r.remoteStore,s),r.$a=r.$a.remove(t),r.Ua.delete(s),pg(r))}function Cj(r,t,s){for(const a of s)a instanceof z6?(r.Ka.addReference(a.key,t),gA(r,a)):a instanceof B6?(Xe(hg,"Document no longer in limbo: "+a.key),r.Ka.removeReference(a.key,t),r.Ka.containsKey(a.key)||q6(r,a.key)):mt()}function gA(r,t){const s=t.key,a=s.path.canonicalString();r.$a.get(s)||r.Qa.has(a)||(Xe(hg,"New document in limbo: "+s),r.Qa.add(a),pg(r))}function pg(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const t=r.Qa.values().next().value;r.Qa.delete(t);const s=new xt(Qt.fromString(t)),a=r.za.next();r.Ua.set(a,new iA(s)),r.$a=r.$a.insert(s,a),A6(r.remoteStore,new mn(xa(lx(s.path)),a,"TargetPurposeLimboResolution",ix.ae))}}async function ed(r,t,s){const a=vt(r),i=[],c=[],o=[];a.ka.isEmpty()||(a.ka.forEach((d,u)=>{o.push(a.Ha(u,t,s).then(m=>{var j;if((m||s)&&a.isPrimaryClient){const k=m?!m.fromCache:(j=s==null?void 0:s.targetChanges.get(u.targetId))===null||j===void 0?void 0:j.current;a.sharedClientState.updateQueryState(u.targetId,k?"current":"not-current")}if(m){i.push(m);const k=tg.Yi(u.targetId,m);c.push(k)}}))}),await Promise.all(o),a.La.p_(i),await async function(u,m){const j=vt(u);try{await j.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>Ee.forEach(m,T=>Ee.forEach(T.Hi,C=>j.persistence.referenceDelegate.addReference(k,T.targetId,C)).next(()=>Ee.forEach(T.Ji,C=>j.persistence.referenceDelegate.removeReference(k,T.targetId,C)))))}catch(k){if(!Ko(k))throw k;Xe(rg,"Failed to update sequence numbers: "+k)}for(const k of m){const T=k.targetId;if(!k.fromCache){const C=j.Ts.get(T),v=C.snapshotVersion,L=C.withLastLimboFreeSnapshotVersion(v);j.Ts=j.Ts.insert(T,L)}}}(a.localStore,c))}async function yA(r,t){const s=vt(r);if(!s.currentUser.isEqual(t)){Xe(hg,"User change. New user:",t.toKey());const a=await D6(s.localStore,t);s.currentUser=t,function(c,o){c.Ga.forEach(d=>{d.forEach(u=>{u.reject(new Ke(Ne.CANCELLED,o))})}),c.Ga.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await ed(s,a.Rs)}}function bA(r,t){const s=vt(r),a=s.Ua.get(t);if(a&&a.Ba)return Dt().add(a.key);{let i=Dt();const c=s.qa.get(t);if(!c)return i;for(const o of c){const d=s.ka.get(o);i=i.unionWith(d.view.Sa)}return i}}function G6(r){const t=vt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=F6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hA.bind(null,t),t.La.p_=rA.bind(null,t.eventManager),t.La.Ja=sA.bind(null,t.eventManager),t}function vA(r){const t=vt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fA.bind(null,t),t}class pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=px(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,s){return null}nu(t,s){return null}eu(t){return k$(this.persistence,new j$,t.initialUser,this.serializer)}Xa(t){return new C6(eg.ri,this.serializer)}Za(t){return new D$}async terminate(){var t,s;(t=this.gcScheduler)===null||t===void 0||t.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pu.provider={build:()=>new pu};class jA extends pu{constructor(t){super(),this.cacheSizeBytes=t}tu(t,s){At(this.persistence.referenceDelegate instanceof mu);const a=this.persistence.referenceDelegate.garbageCollector;return new i$(a,t.asyncQueue,s)}Xa(t){const s=this.cacheSizeBytes!==void 0?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new C6(a=>mu.ri(a,s),this.serializer)}}class dp{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Ej(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=yA.bind(null,this.syncEngine),await J$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new tA}()}createDatastore(t){const s=px(t.databaseInfo.databaseId),a=function(c){return new M$(c)}(t.databaseInfo);return function(c,o,d,u){return new z$(c,o,d,u)}(t.authCredentials,t.appCheckCredentials,a,s)}createRemoteStore(t){return function(a,i,c,o,d){return new U$(a,i,c,o,d)}(this.localStore,this.datastore,t.asyncQueue,s=>Ej(this.syncEngine,s,0),function(){return Nj.D()?new Nj:new _$}())}createSyncEngine(t,s){return function(i,c,o,d,u,m,j){const k=new oA(i,c,o,d,u,m);return j&&(k.ja=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await async function(i){const c=vt(i);Xe(ji,"RemoteStore shutting down."),c.W_.add(5),await Jc(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}dp.provider={build:()=>new dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Ua("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,s){setTimeout(()=>{this.muted||t(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ke(Ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const s=await async function(i,c){const o=vt(i),d={documents:c.map(k=>xu(o.serializer,k))},u=await o.Co("BatchGetDocuments",o.serializer.databaseId,Qt.emptyPath(),d,c.length),m=new Map;u.forEach(k=>{const T=F_(o.serializer,k);m.set(T.key.toString(),T)});const j=[];return c.forEach(k=>{const T=m.get(k.toString());At(!!T),j.push(T)}),j}(this.datastore,t);return s.forEach(a=>this.recordVersion(a)),s}set(t,s){this.write(s.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,s){try{this.write(s.toMutation(t,this.preconditionForUpdate(t)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(t.toString())}delete(t){this.write(new mx(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const i=xt.fromPath(a);this.mutations.push(new f6(i,this.precondition(i)))}),await async function(a,i){const c=vt(a),o={writes:i.map(d=>S6(c.serializer,d))};await c.So("Commit",c.serializer.databaseId,Qt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let s;if(t.isFoundDocument())s=t.version;else{if(!t.isNoDocument())throw mt();s=ft.min()}const a=this.readVersions.get(t.key.toString());if(a){if(!s.isEqual(a))throw new Ke(Ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),s)}precondition(t){const s=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&s?s.isEqual(ft.min())?Ar.exists(!1):Ar.updateTime(s):Ar.none()}preconditionForUpdate(t){const s=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&s){if(s.isEqual(ft.min()))throw new Ke(Ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ar.updateTime(s)}return Ar.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(t,s,a,i,c){this.asyncQueue=t,this.datastore=s,this.options=a,this.updateFunction=i,this.deferred=c,this.Tu=a.maxAttempts,this.a_=new sg(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new wA(this.datastore),s=this.du(t);s&&s.then(a=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(a)}).catch(i=>{this.Au(i)}))}).catch(a=>{this.Au(a)})})}du(t){try{const s=this.updateFunction(t);return!Zc(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const s=t.code;return s==="aborted"||s==="failed-precondition"||s==="already-exists"||!g6(s)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="FirestoreClient";class kA{constructor(t,s,a,i,c){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=a,this.databaseInfo=i,this.user=qr.UNAUTHENTICATED,this.clientId=Ok.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async o=>{Xe(Mn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(Xe(Mn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=cg(s,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function Em(r,t){r.asyncQueue.verifyOperationInProgress(),Xe(Mn,"Initializing OfflineComponentProvider");const s=r.configuration;await t.initialize(s);let a=s.initialUser;r.setCredentialChangeListener(async i=>{a.isEqual(i)||(await D6(t.localStore,i),a=i)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function Dj(r,t){r.asyncQueue.verifyOperationInProgress();const s=await SA(r);Xe(Mn,"Initializing OnlineComponentProvider"),await t.initialize(s,r.configuration),r.setCredentialChangeListener(a=>Sj(t.remoteStore,a)),r.setAppCheckTokenChangeListener((a,i)=>Sj(t.remoteStore,i)),r._onlineComponents=t}async function SA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Xe(Mn,"Using user provided OfflineComponentProvider");try{await Em(r,r._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!function(i){return i.name==="FirebaseError"?i.code===Ne.FAILED_PRECONDITION||i.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(s))throw s;Do("Error using user provided cache. Falling back to memory cache: "+s),await Em(r,new pu)}}else Xe(Mn,"Using default OfflineComponentProvider"),await Em(r,new jA(void 0));return r._offlineComponents}async function gg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Xe(Mn,"Using user provided OnlineComponentProvider"),await Dj(r,r._uninitializedComponentsProvider._online)):(Xe(Mn,"Using default OnlineComponentProvider"),await Dj(r,new dp))),r._onlineComponents}function TA(r){return gg(r).then(t=>t.syncEngine)}function IA(r){return gg(r).then(t=>t.datastore)}async function fu(r){const t=await gg(r),s=t.eventManager;return s.onListen=lA.bind(null,t.syncEngine),s.onUnlisten=uA.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=cA.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=xA.bind(null,t.syncEngine),s}function PA(r,t,s={}){const a=new ua;return r.asyncQueue.enqueueAndForget(async()=>function(c,o,d,u,m){const j=new fg({next:T=>{j.su(),o.enqueueAndForget(()=>ug(c,k));const C=T.docs.has(d);!C&&T.fromCache?m.reject(new Ke(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&u&&u.source==="server"?m.reject(new Ke(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),k=new mg(lx(d.path),j,{includeMetadataChanges:!0,Ta:!0});return dg(c,k)}(await fu(r),r.asyncQueue,t,s,a)),a.promise}function EA(r,t,s={}){const a=new ua;return r.asyncQueue.enqueueAndForget(async()=>function(c,o,d,u,m){const j=new fg({next:T=>{j.su(),o.enqueueAndForget(()=>ug(c,k)),T.fromCache&&u.source==="server"?m.reject(new Ke(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),k=new mg(d,j,{includeMetadataChanges:!0,Ta:!0});return dg(c,k)}(await fu(r),r.asyncQueue,t,s,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(r,t,s){if(!s)throw new Ke(Ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function CA(r,t,s,a){if(t===!0&&a===!0)throw new Ke(Ne.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function $j(r){if(!xt.isDocumentKey(r))throw new Ke(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Aj(r){if(xt.isDocumentKey(r))throw new Ke(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function yx(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":mt()}function rs(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new Ke(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=yx(r);throw new Ke(Ne.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return r}function DA(r,t){if(t<=0)throw new Ke(Ne.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="firestore.googleapis.com",Rj=!0;class Mj{constructor(t){var s,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Ke(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z6,this.ssl=Rj}else this.host=t.host,this.ssl=(s=t.ssl)!==null&&s!==void 0?s:Rj;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=E6;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<a$)throw new Ke(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}CA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q6((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Ke(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ke(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ke(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bx{constructor(t,s,a,i){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ke(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mj(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new VD;switch(a.type){case"firstParty":return new FD(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ke(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const a=_j.get(s);a&&(Xe("ComponentProvider","Removing Datastore"),_j.delete(s),a.terminate())}(this),Promise.resolve()}}function _A(r,t,s,a={}){var i;const c=(r=rs(r,bx))._getSettings(),o=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),d=`${t}:${s}`;c.host!==Z6&&c.host!==d&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},c),{host:d,ssl:!1,emulatorOptions:a});if(!Cn(u,o)&&(r._setSettings(u),a.mockUserToken)){let m,j;if(typeof a.mockUserToken=="string")m=a.mockUserToken,j=qr.MOCK_USER;else{m=bk(a.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const k=a.mockUserToken.sub||a.mockUserToken.user_id;if(!k)throw new Ke(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");j=new qr(k)}r._authCredentials=new zD(new Rk(m,j))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t,s,a){this.converter=s,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new Ka(this.firestore,t,this._query)}}class Or{constructor(t,s,a){this.converter=s,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Or(this.firestore,t,this._key)}}class Tn extends Ka{constructor(t,s,a){super(t,s,lx(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Or(this.firestore,null,new xt(t))}withConverter(t){return new Tn(this.firestore,t,this._path)}}function te(r,t,...s){if(r=tr(r),K6("collection","path",t),r instanceof bx){const a=Qt.fromString(t,...s);return Aj(a),new Tn(r,null,a)}{if(!(r instanceof Or||r instanceof Tn))throw new Ke(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Qt.fromString(t,...s));return Aj(a),new Tn(r.firestore,null,a)}}function F(r,t,...s){if(r=tr(r),arguments.length===1&&(t=Ok.newId()),K6("doc","path",t),r instanceof bx){const a=Qt.fromString(t,...s);return $j(a),new Or(r,null,new xt(a))}{if(!(r instanceof Or||r instanceof Tn))throw new Ke(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Qt.fromString(t,...s));return $j(a),new Or(r.firestore,r instanceof Tn?r.converter:null,new xt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="AsyncQueue";class Lj{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new sg(this,"async_queue_retry"),this.Su=()=>{const a=Pm();a&&Xe(Oj,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const s=Pm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const s=Pm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const s=new ua;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Ko(t))throw t;Xe(Oj,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const s=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const i=function(o){let d=o.message||"";return o.stack&&(d=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),d}(a);throw Ua("INTERNAL UNHANDLED ERROR: ",i),a}).then(a=>(this.pu=!1,a))));return this.bu=s,s}enqueueAfterDelay(t,s,a){this.Du(),this.wu.indexOf(t)>-1&&(s=0);const i=lg.createAndSchedule(this,t,s,a,c=>this.Fu(c));return this.fu.push(i),i}Du(){this.gu&&mt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const s of this.fu)if(s.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((s,a)=>s.targetTimeMs-a.targetTimeMs);for(const s of this.fu)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const s=this.fu.indexOf(t);this.fu.splice(s,1)}}function Vj(r){return function(s,a){if(typeof s!="object"||s===null)return!1;const i=s;for(const c of a)if(c in i&&typeof i[c]=="function")return!0;return!1}(r,["next","error","complete"])}class va extends bx{constructor(t,s,a,i){super(t,s,a,i),this.type="firestore",this._queue=new Lj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Lj(t),this._firestoreClient=void 0,await t}}}function $A(r,t){const s=typeof r=="object"?r:nx(),a=typeof r=="string"?r:t||ou,i=Un(s,"firestore").getImmediate({identifier:a});if(!i._initialized){const c=fk("firestore");c&&_A(i,...c)}return i}function td(r){if(r._terminated)throw new Ke(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||AA(r),r._firestoreClient}function AA(r){var t,s,a;const i=r._freezeSettings(),c=function(d,u,m,j){return new a_(d,u,m,j.host,j.ssl,j.experimentalForceLongPolling,j.experimentalAutoDetectLongPolling,Q6(j.experimentalLongPollingOptions),j.useFetchStreams)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((a=i.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new kA(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wi(Vr.fromBase64String(t))}catch(s){throw new Ke(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new wi(Vr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new Ke(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $r(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new Ke(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new Ke(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return St(this._lat,t._lat)||St(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(t){this._values=(t||[]).map(s=>s)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,i){if(a.length!==i.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==i[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=/^__.*__$/;class MA{constructor(t,s,a){this.data=t,this.fieldMask=s,this.fieldTransforms=a}toMutation(t,s){return this.fieldMask!==null?new Hn(t,this.data,this.fieldMask,s,this.fieldTransforms):new Yc(t,this.data,s,this.fieldTransforms)}}class Y6{constructor(t,s,a){this.data=t,this.fieldMask=s,this.fieldTransforms=a}toMutation(t,s){return new Hn(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function X6(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class vg{constructor(t,s,a,i,c,o){this.settings=t,this.databaseId=s,this.serializer=a,this.ignoreUndefinedProperties=i,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new vg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var s;const a=(s=this.path)===null||s===void 0?void 0:s.child(t),i=this.ku({path:a,Qu:!1});return i.$u(t),i}Uu(t){var s;const a=(s=this.path)===null||s===void 0?void 0:s.child(t),i=this.ku({path:a,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return gu(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(s=>t.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>t.isPrefixOf(s.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(X6(this.Lu)&&RA.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class OA{constructor(t,s,a){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=a||px(t)}ju(t,s,a,i=!1){return new vg({Lu:t,methodName:s,zu:a,path:$r.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ad(r){const t=r._freezeSettings(),s=px(r._databaseId);return new OA(r._databaseId,!!t.ignoreUndefinedProperties,s)}function jg(r,t,s,a,i,c={}){const o=r.ju(c.merge||c.mergeFields?2:0,t,s,i);kg("Data must be an object, but it was:",o,a);const d=t1(a,o);let u,m;if(c.merge)u=new ks(o.fieldMask),m=o.fieldTransforms;else if(c.mergeFields){const j=[];for(const k of c.mergeFields){const T=up(t,k,s);if(!o.contains(T))throw new Ke(Ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);s1(j,T)||j.push(T)}u=new ks(j),m=o.fieldTransforms.filter(k=>u.covers(k.field))}else u=null,m=o.fieldTransforms;return new MA(new Jr(d),u,m)}class vx extends sd{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vx}}class wg extends sd{_toFieldTransform(t){return new m6(t.path,new Pc)}isEqual(t){return t instanceof wg}}class Ng extends sd{constructor(t,s){super(t),this.Ju=s}_toFieldTransform(t){const s=new Dc(t.serializer,l6(t.serializer,this.Ju));return new m6(t.path,s)}isEqual(t){return t instanceof Ng&&this.Ju===t.Ju}}function J6(r,t,s,a){const i=r.ju(1,t,s);kg("Data must be an object, but it was:",i,a);const c=[],o=Jr.empty();Fn(a,(u,m)=>{const j=Sg(t,u,s);m=tr(m);const k=i.Uu(j);if(m instanceof vx)c.push(j);else{const T=nd(m,k);T!=null&&(c.push(j),o.set(j,T))}});const d=new ks(c);return new Y6(o,d,i.fieldTransforms)}function e1(r,t,s,a,i,c){const o=r.ju(1,t,s),d=[up(t,a,s)],u=[i];if(c.length%2!=0)throw new Ke(Ne.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)d.push(up(t,c[T])),u.push(c[T+1]);const m=[],j=Jr.empty();for(let T=d.length-1;T>=0;--T)if(!s1(m,d[T])){const C=d[T];let v=u[T];v=tr(v);const L=o.Uu(C);if(v instanceof vx)m.push(C);else{const $=nd(v,L);$!=null&&(m.push(C),j.set(C,$))}}const k=new ks(m);return new Y6(j,k,o.fieldTransforms)}function LA(r,t,s,a=!1){return nd(s,r.ju(a?4:3,t))}function nd(r,t){if(r1(r=tr(r)))return kg("Unsupported field value:",t,r),t1(r,t);if(r instanceof sd)return function(a,i){if(!X6(i.Lu))throw i.Wu(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(i);c&&i.fieldTransforms.push(c)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,i){const c=[];let o=0;for(const d of a){let u=nd(d,i.Ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),c.push(u),o++}return{arrayValue:{values:c}}}(r,t)}return function(a,i){if((a=tr(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return l6(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=Kt.fromDate(a);return{timestampValue:uu(i.serializer,c)}}if(a instanceof Kt){const c=new Kt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:uu(i.serializer,c)}}if(a instanceof yg)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof wi)return{bytesValue:j6(i.serializer,a._byteString)};if(a instanceof Or){const c=i.databaseId,o=a.firestore._databaseId;if(!o.isEqual(c))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Xf(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof bg)return function(o,d){return{mapValue:{fields:{[Wk]:{stringValue:Gk},[lu]:{arrayValue:{values:o.toArray().map(m=>{if(typeof m!="number")throw d.Wu("VectorValues must only contain numeric values.");return Kf(d.serializer,m)})}}}}}}(a,i);throw i.Wu(`Unsupported field value: ${yx(a)}`)}(r,t)}function t1(r,t){const s={};return Vk(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fn(r,(a,i)=>{const c=nd(i,t.qu(a));c!=null&&(s[a]=c)}),{mapValue:{fields:s}}}function r1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Kt||r instanceof yg||r instanceof wi||r instanceof Or||r instanceof sd||r instanceof bg)}function kg(r,t,s){if(!r1(s)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(s)){const a=yx(s);throw a==="an object"?t.Wu(r+" a custom object"):t.Wu(r+" "+a)}}function up(r,t,s){if((t=tr(t))instanceof rd)return t._internalPath;if(typeof t=="string")return Sg(r,t);throw gu("Field path arguments must be of type string or ",r,!1,void 0,s)}const VA=new RegExp("[~\\*/\\[\\]]");function Sg(r,t,s){if(t.search(VA)>=0)throw gu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new rd(...t.split("."))._internalPath}catch{throw gu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function gu(r,t,s,a,i){const c=a&&!a.isEmpty(),o=i!==void 0;let d=`Function ${t}() called with invalid data`;s&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(c||o)&&(u+=" (found",c&&(u+=` in field ${a}`),o&&(u+=` in document ${i}`),u+=")"),new Ke(Ne.INVALID_ARGUMENT,d+r+u)}function s1(r,t){return r.some(s=>s.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t,s,a,i,c){this._firestore=t,this._userDataWriter=s,this._key=a,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new zA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const s=this._document.data.field(jx("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class zA extends yu{data(){return super.data()}}function jx(r,t){return typeof t=="string"?Sg(r,t):t instanceof rd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ke(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class Ig extends Tg{}function xe(r,t,...s){let a=[];t instanceof Tg&&a.push(t),a=a.concat(s),function(c){const o=c.filter(u=>u instanceof Pg).length,d=c.filter(u=>u instanceof wx).length;if(o>1||o>0&&d>0)throw new Ke(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)r=i._apply(r);return r}class wx extends Ig{constructor(t,s,a){super(),this._field=t,this._op=s,this._value=a,this.type="where"}static _create(t,s,a){return new wx(t,s,a)}_apply(t){const s=this._parse(t);return n1(t._query,s),new Ka(t.firestore,t.converter,rp(t._query,s))}_parse(t){const s=ad(t.firestore);return function(c,o,d,u,m,j,k){let T;if(m.isKeyField()){if(j==="array-contains"||j==="array-contains-any")throw new Ke(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if(j==="in"||j==="not-in"){Bj(k,j);const v=[];for(const L of k)v.push(zj(u,c,L));T={arrayValue:{values:v}}}else T=zj(u,c,k)}else j!=="in"&&j!=="not-in"&&j!=="array-contains-any"||Bj(k,j),T=LA(d,o,k,j==="in"||j==="not-in");return vr.create(m,j,T)}(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}function pe(r,t,s){const a=t,i=jx("where",r);return wx._create(i,a,s)}class Pg extends Tg{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new Pg(t,s)}_parse(t){const s=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return s.length===1?s[0]:ra.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:(function(i,c){let o=i;const d=c.getFlattenedFilters();for(const u of d)n1(o,u),o=rp(o,u)}(t._query,s),new Ka(t.firestore,t.converter,rp(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eg extends Ig{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new Eg(t,s)}_apply(t){const s=function(i,c,o){if(i.startAt!==null)throw new Ke(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ke(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ic(c,o)}(t._query,this._field,this._direction);return new Ka(t.firestore,t.converter,function(i,c){const o=i.explicitOrderBy.concat([c]);return new Zo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,s))}}function BA(r,t="asc"){const s=t,a=jx("orderBy",r);return Eg._create(a,s)}class Cg extends Ig{constructor(t,s,a){super(),this.type=t,this._limit=s,this._limitType=a}static _create(t,s,a){return new Cg(t,s,a)}_apply(t){return new Ka(t.firestore,t.converter,du(t._query,this._limit,this._limitType))}}function Ut(r){return DA("limit",r),Cg._create("limit",r,"F")}function zj(r,t,s){if(typeof(s=tr(s))=="string"){if(s==="")throw new Ke(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t6(t)&&s.indexOf("/")!==-1)throw new Ke(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const a=t.path.child(Qt.fromString(s));if(!xt.isDocumentKey(a))throw new Ke(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return tj(r,new xt(a))}if(s instanceof Or)return tj(r,s._key);throw new Ke(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yx(s)}.`)}function Bj(r,t){if(!Array.isArray(r)||r.length===0)throw new Ke(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function n1(r,t){const s=function(i,c){for(const o of i)for(const d of o.getFlattenedFilters())if(c.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(s!==null)throw s===t.op?new Ke(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ke(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}class i1{convertValue(t,s="none"){switch(An(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes($n(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw mt()}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const a={};return Fn(t,(i,c)=>{a[i]=this.convertValue(c,s)}),a}convertVectorValue(t){var s,a,i;const c=(i=(a=(s=t.fields)===null||s===void 0?void 0:s[lu].arrayValue)===null||a===void 0?void 0:a.values)===null||i===void 0?void 0:i.map(o=>pr(o.doubleValue));return new bg(c)}convertGeoPoint(t){return new yg(pr(t.latitude),pr(t.longitude))}convertArray(t,s){return(t.values||[]).map(a=>this.convertValue(a,s))}convertServerTimestamp(t,s){switch(s){case"previous":const a=ox(t);return a==null?null:this.convertValue(a,s);case"estimate":return this.convertTimestamp(kc(t));default:return null}}convertTimestamp(t){const s=_n(t);return new Kt(s.seconds,s.nanos)}convertDocumentKey(t,s){const a=Qt.fromString(t);At(P6(a));const i=new Sc(a.get(1),a.get(3)),c=new xt(a.popFirst(5));return i.isEqual(s)||Ua(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(r,t,s){let a;return a=r?s&&(s.merge||s.mergeFields)?r.toFirestore(t,s):r.toFirestore(t):t,a}class UA extends i1{constructor(t){super(),this.firestore=t}convertBytes(t){return new wi(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new Or(this.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _g extends yu{constructor(t,s,a,i,c,o){super(t,s,a,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new N0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const a=this._document.data.field(jx("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,s.serverTimestamps)}}}class N0 extends _g{data(t={}){return super.data(t)}}class o1{constructor(t,s,a,i){this._firestore=t,this._userDataWriter=s,this._snapshot=i,this.metadata=new io(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const t=[];return this.forEach(s=>t.push(s)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach(a=>{t.call(s,new N0(this._firestore,this._userDataWriter,a.key,a,new io(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Ke(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(i,c){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(d=>{const u=new N0(i._firestore,i._userDataWriter,d.doc.key,d.doc,new io(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>c||d.type!==3).map(d=>{const u=new N0(i._firestore,i._userDataWriter,d.doc.key,d.doc,new io(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,j=-1;return d.type!==0&&(m=o.indexOf(d.doc.key),o=o.delete(d.doc.key)),d.type!==1&&(o=o.add(d.doc),j=o.indexOf(d.doc.key)),{type:FA(d.type),doc:u,oldIndex:m,newIndex:j}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function FA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(r){r=rs(r,Or);const t=rs(r.firestore,va);return PA(td(t),r._key).then(s=>l1(t,r,s))}class Nx extends i1{constructor(t){super(),this.firestore=t}convertBytes(t){return new wi(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new Or(this.firestore,null,s)}}function jt(r){r=rs(r,Ka);const t=rs(r.firestore,va),s=td(t),a=new Nx(t);return a1(r._query),EA(s,r._query).then(i=>new o1(t,a,r,i))}function Kl(r,t,s){r=rs(r,Or);const a=rs(r.firestore,va),i=Dg(r.converter,t,s);return kx(a,[jg(ad(a),"setDoc",r._key,i,r.converter!==null,s).toMutation(r._key,Ar.none())])}function Rr(r,t,s,...a){r=rs(r,Or);const i=rs(r.firestore,va),c=ad(i);let o;return o=typeof(t=tr(t))=="string"||t instanceof rd?e1(c,"updateDoc",r._key,t,s,a):J6(c,"updateDoc",r._key,t),kx(i,[o.toMutation(r._key,Ar.exists(!0))])}function k0(r){return kx(rs(r.firestore,va),[new mx(r._key,Ar.none())])}function In(r,t){const s=rs(r.firestore,va),a=F(r),i=Dg(r.converter,t);return kx(s,[jg(ad(r.firestore),"addDoc",a._key,i,r.converter!==null,{}).toMutation(a._key,Ar.exists(!1))]).then(()=>a)}function fe(r,...t){var s,a,i;r=tr(r);let c={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Vj(t[o])||(c=t[o],o++);const d={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Vj(t[o])){const k=t[o];t[o]=(s=k.next)===null||s===void 0?void 0:s.bind(k),t[o+1]=(a=k.error)===null||a===void 0?void 0:a.bind(k),t[o+2]=(i=k.complete)===null||i===void 0?void 0:i.bind(k)}let u,m,j;if(r instanceof Or)m=rs(r.firestore,va),j=lx(r._key.path),u={next:k=>{t[o]&&t[o](l1(m,r,k))},error:t[o+1],complete:t[o+2]};else{const k=rs(r,Ka);m=rs(k.firestore,va),j=k._query;const T=new Nx(m);u={next:C=>{t[o]&&t[o](new o1(m,T,k,C))},error:t[o+1],complete:t[o+2]},a1(r._query)}return function(T,C,v,L){const $=new fg(L),R=new mg(C,$,v);return T.asyncQueue.enqueueAndForget(async()=>dg(await fu(T),R)),()=>{$.su(),T.asyncQueue.enqueueAndForget(async()=>ug(await fu(T),R))}}(td(m),j,d,u)}function kx(r,t){return function(a,i){const c=new ua;return a.asyncQueue.enqueueAndForget(async()=>mA(await TA(a),i,c)),c.promise}(td(r),t)}function l1(r,t,s){const a=s.docs.get(t._key),i=new Nx(r);return new _g(r,i,t._key,a,new io(s.hasPendingWrites,s.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={maxAttempts:5};function _l(r,t){if((r=tr(r)).firestore!==t)throw new Ke(Ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t,s){this._firestore=t,this._transaction=s,this._dataReader=ad(t)}get(t){const s=_l(t,this._firestore),a=new UA(this._firestore);return this._transaction.lookup([s._key]).then(i=>{if(!i||i.length!==1)return mt();const c=i[0];if(c.isFoundDocument())return new yu(this._firestore,a,c.key,c,s.converter);if(c.isNoDocument())return new yu(this._firestore,a,s._key,null,s.converter);throw mt()})}set(t,s,a){const i=_l(t,this._firestore),c=Dg(i.converter,s,a),o=jg(this._dataReader,"Transaction.set",i._key,c,i.converter!==null,a);return this._transaction.set(i._key,o),this}update(t,s,a,...i){const c=_l(t,this._firestore);let o;return o=typeof(s=tr(s))=="string"||s instanceof rd?e1(this._dataReader,"Transaction.update",c._key,s,a,i):J6(this._dataReader,"Transaction.update",c._key,s),this._transaction.update(c._key,o),this}delete(t){const s=_l(t,this._firestore);return this._transaction.delete(s._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA extends WA{constructor(t,s){super(t,s),this._firestore=t}get(t){const s=_l(t,this._firestore),a=new Nx(this._firestore);return super.get(t).then(i=>new _g(this._firestore,a,s._key,i._document,new io(!1,!1),s.converter))}}function nt(r,t,s){r=rs(r,va);const a=Object.assign(Object.assign({},HA),s);return function(c){if(c.maxAttempts<1)throw new Ke(Ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(c,o,d){const u=new ua;return c.asyncQueue.enqueueAndForget(async()=>{const m=await IA(c);new NA(c.asyncQueue,m,d,o,u).Iu()}),u.promise}(td(r),i=>t(new qA(r,i)),a)}function ve(){return new wg("serverTimestamp")}function it(r){return new Ng("increment",r)}(function(t,s=!0){(function(i){Go=i})(Di),ta(new Bs("firestore",(a,{instanceIdentifier:i,options:c})=>{const o=a.getProvider("app").getImmediate(),d=new va(new BD(a.getProvider("auth-internal")),new HD(o,a.getProvider("app-check-internal")),function(m,j){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ke(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(m.options.projectId,j)}(o,i),o);return c=Object.assign({useFetchStreams:s},c),d._setSettings(c),d},"PUBLIC").setMultipleInstances(!0)),fs(Fv,Hv,t),fs(Fv,Hv,"esm2017")})();var GA="firebase",QA="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(GA,QA,"app");const c1="@firebase/installations",$g="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1e4,u1=`w:${$g}`,x1="FIS_v2",KA="https://firebaseinstallations.googleapis.com/v1",ZA=60*60*1e3,YA="installations",XA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ni=new Ci(YA,XA,JA);function m1(r){return r instanceof Us&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1({projectId:r}){return`${KA}/projects/${r}/installations`}function p1(r){return{token:r.token,requestStatus:2,expiresIn:tR(r.expiresIn),creationTime:Date.now()}}async function f1(r,t){const a=(await t.json()).error;return Ni.create("request-failed",{requestName:r,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function g1({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function eR(r,{refreshToken:t}){const s=g1(r);return s.append("Authorization",rR(t)),s}async function y1(r){const t=await r();return t.status>=500&&t.status<600?r():t}function tR(r){return Number(r.replace("s","000"))}function rR(r){return`${x1} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR({appConfig:r,heartbeatServiceProvider:t},{fid:s}){const a=h1(r),i=g1(r),c=t.getImmediate({optional:!0});if(c){const m=await c.getHeartbeatsHeader();m&&i.append("x-firebase-client",m)}const o={fid:s,authVersion:x1,appId:r.appId,sdkVersion:u1},d={method:"POST",headers:i,body:JSON.stringify(o)},u=await y1(()=>fetch(a,d));if(u.ok){const m=await u.json();return{fid:m.fid||s,registrationStatus:2,refreshToken:m.refreshToken,authToken:p1(m.authToken)}}else throw await f1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(r){return new Promise(t=>{setTimeout(t,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=/^[cdef][\w-]{21}$/,xp="";function iR(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const s=oR(r);return nR.test(s)?s:xp}catch{return xp}}function oR(r){return aR(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new Map;function j1(r,t){const s=Sx(r);w1(s,t),lR(s,t)}function w1(r,t){const s=v1.get(r);if(s)for(const a of s)a(t)}function lR(r,t){const s=cR();s&&s.postMessage({key:r,fid:t}),dR()}let oi=null;function cR(){return!oi&&"BroadcastChannel"in self&&(oi=new BroadcastChannel("[Firebase] FID Change"),oi.onmessage=r=>{w1(r.data.key,r.data.fid)}),oi}function dR(){v1.size===0&&oi&&(oi.close(),oi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebase-installations-database",xR=1,ki="firebase-installations-store";let Cm=null;function Ag(){return Cm||(Cm=Sk(uR,xR,{upgrade:(r,t)=>{switch(t){case 0:r.createObjectStore(ki)}}})),Cm}async function bu(r,t){const s=Sx(r),i=(await Ag()).transaction(ki,"readwrite"),c=i.objectStore(ki),o=await c.get(s);return await c.put(t,s),await i.done,(!o||o.fid!==t.fid)&&j1(r,t.fid),t}async function N1(r){const t=Sx(r),a=(await Ag()).transaction(ki,"readwrite");await a.objectStore(ki).delete(t),await a.done}async function Tx(r,t){const s=Sx(r),i=(await Ag()).transaction(ki,"readwrite"),c=i.objectStore(ki),o=await c.get(s),d=t(o);return d===void 0?await c.delete(s):await c.put(d,s),await i.done,d&&(!o||o.fid!==d.fid)&&j1(r,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rg(r){let t;const s=await Tx(r.appConfig,a=>{const i=mR(a),c=hR(r,i);return t=c.registrationPromise,c.installationEntry});return s.fid===xp?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}function mR(r){const t=r||{fid:iR(),registrationStatus:0};return k1(t)}function hR(r,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ni.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=pR(r,s);return{installationEntry:s,registrationPromise:a}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:fR(r)}:{installationEntry:t}}async function pR(r,t){try{const s=await sR(r,t);return bu(r.appConfig,s)}catch(s){throw m1(s)&&s.customData.serverCode===409?await N1(r.appConfig):await bu(r.appConfig,{fid:t.fid,registrationStatus:0}),s}}async function fR(r){let t=await Uj(r.appConfig);for(;t.registrationStatus===1;)await b1(100),t=await Uj(r.appConfig);if(t.registrationStatus===0){const{installationEntry:s,registrationPromise:a}=await Rg(r);return a||s}return t}function Uj(r){return Tx(r,t=>{if(!t)throw Ni.create("installation-not-found");return k1(t)})}function k1(r){return gR(r)?{fid:r.fid,registrationStatus:0}:r}function gR(r){return r.registrationStatus===1&&r.registrationTime+d1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR({appConfig:r,heartbeatServiceProvider:t},s){const a=bR(r,s),i=eR(r,s),c=t.getImmediate({optional:!0});if(c){const m=await c.getHeartbeatsHeader();m&&i.append("x-firebase-client",m)}const o={installation:{sdkVersion:u1,appId:r.appId}},d={method:"POST",headers:i,body:JSON.stringify(o)},u=await y1(()=>fetch(a,d));if(u.ok){const m=await u.json();return p1(m)}else throw await f1("Generate Auth Token",u)}function bR(r,{fid:t}){return`${h1(r)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(r,t=!1){let s;const a=await Tx(r.appConfig,c=>{if(!S1(c))throw Ni.create("not-registered");const o=c.authToken;if(!t&&wR(o))return c;if(o.requestStatus===1)return s=vR(r,t),c;{if(!navigator.onLine)throw Ni.create("app-offline");const d=kR(c);return s=jR(r,d),d}});return s?await s:a.authToken}async function vR(r,t){let s=await Fj(r.appConfig);for(;s.authToken.requestStatus===1;)await b1(100),s=await Fj(r.appConfig);const a=s.authToken;return a.requestStatus===0?Mg(r,t):a}function Fj(r){return Tx(r,t=>{if(!S1(t))throw Ni.create("not-registered");const s=t.authToken;return SR(s)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function jR(r,t){try{const s=await yR(r,t),a=Object.assign(Object.assign({},t),{authToken:s});return await bu(r.appConfig,a),s}catch(s){if(m1(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await N1(r.appConfig);else{const a=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await bu(r.appConfig,a)}throw s}}function S1(r){return r!==void 0&&r.registrationStatus===2}function wR(r){return r.requestStatus===2&&!NR(r)}function NR(r){const t=Date.now();return t<r.creationTime||r.creationTime+r.expiresIn<t+ZA}function kR(r){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:t})}function SR(r){return r.requestStatus===1&&r.requestTime+d1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(r){const t=r,{installationEntry:s,registrationPromise:a}=await Rg(t);return a?a.catch(console.error):Mg(t).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(r,t=!1){const s=r;return await PR(s),(await Mg(s,t)).token}async function PR(r){const{registrationPromise:t}=await Rg(r);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(r){if(!r||!r.options)throw Dm("App Configuration");if(!r.name)throw Dm("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!r.options[s])throw Dm(s);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Dm(r){return Ni.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="installations",CR="installations-internal",DR=r=>{const t=r.getProvider("app").getImmediate(),s=ER(t),a=Un(t,"heartbeat");return{app:t,appConfig:s,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},_R=r=>{const t=r.getProvider("app").getImmediate(),s=Un(t,T1).getImmediate();return{getId:()=>TR(s),getToken:i=>IR(s,i)}};function $R(){ta(new Bs(T1,DR,"PUBLIC")),ta(new Bs(CR,_R,"PRIVATE"))}$R();fs(c1,$g);fs(c1,$g,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="analytics",AR="firebase_id",RR="origin",MR=60*1e3,OR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Og="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new ax("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Is=new Ci("analytics","Analytics",LR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r){if(!r.startsWith(Og)){const t=Is.create("invalid-gtag-resource",{gtagURL:r});return gs.warn(t.message),""}return r}function I1(r){return Promise.all(r.map(t=>t.catch(s=>s)))}function zR(r,t){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(r,t)),s}function BR(r,t){const s=zR("firebase-js-sdk-policy",{createScriptURL:VR}),a=document.createElement("script"),i=`${Og}?l=${r}&id=${t}`;a.src=s?s==null?void 0:s.createScriptURL(i):i,a.async=!0,document.head.appendChild(a)}function UR(r){let t=[];return Array.isArray(window[r])?t=window[r]:window[r]=t,t}async function FR(r,t,s,a,i,c){const o=a[i];try{if(o)await t[o];else{const u=(await I1(s)).find(m=>m.measurementId===i);u&&await t[u.appId]}}catch(d){gs.error(d)}r("config",i,c)}async function HR(r,t,s,a,i){try{let c=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const d=await I1(s);for(const u of o){const m=d.find(k=>k.measurementId===u),j=m&&t[m.appId];if(j)c.push(j);else{c=[];break}}}c.length===0&&(c=Object.values(t)),await Promise.all(c),r("event",a,i||{})}catch(c){gs.error(c)}}function WR(r,t,s,a){async function i(c,...o){try{if(c==="event"){const[d,u]=o;await HR(r,t,s,d,u)}else if(c==="config"){const[d,u]=o;await FR(r,t,s,a,d,u)}else if(c==="consent"){const[d,u]=o;r("consent",d,u)}else if(c==="get"){const[d,u,m]=o;r("get",d,u,m)}else if(c==="set"){const[d]=o;r("set",d)}else r(c,...o)}catch(d){gs.error(d)}}return i}function qR(r,t,s,a,i){let c=function(...o){window[a].push(arguments)};return window[i]&&typeof window[i]=="function"&&(c=window[i]),window[i]=WR(c,r,t,s),{gtagCore:c,wrappedGtag:window[i]}}function GR(r){const t=window.document.getElementsByTagName("script");for(const s of Object.values(t))if(s.src&&s.src.includes(Og)&&s.src.includes(r))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=30,KR=1e3;class ZR{constructor(t={},s=KR){this.throttleMetadata=t,this.intervalMillis=s}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,s){this.throttleMetadata[t]=s}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const P1=new ZR;function YR(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function XR(r){var t;const{appId:s,apiKey:a}=r,i={method:"GET",headers:YR(a)},c=OR.replace("{app-id}",s),o=await fetch(c,i);if(o.status!==200&&o.status!==304){let d="";try{const u=await o.json();!((t=u.error)===null||t===void 0)&&t.message&&(d=u.error.message)}catch{}throw Is.create("config-fetch-failed",{httpStatus:o.status,responseMessage:d})}return o.json()}async function JR(r,t=P1,s){const{appId:a,apiKey:i,measurementId:c}=r.options;if(!a)throw Is.create("no-app-id");if(!i){if(c)return{measurementId:c,appId:a};throw Is.create("no-api-key")}const o=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new r8;return setTimeout(async()=>{d.abort()},s!==void 0?s:MR),E1({appId:a,apiKey:i,measurementId:c},o,d,t)}async function E1(r,{throttleEndTimeMillis:t,backoffCount:s},a,i=P1){var c;const{appId:o,measurementId:d}=r;try{await e8(a,t)}catch(u){if(d)return gs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:d};throw u}try{const u=await XR(r);return i.deleteThrottleMetadata(o),u}catch(u){const m=u;if(!t8(m)){if(i.deleteThrottleMetadata(o),d)return gs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:o,measurementId:d};throw u}const j=Number((c=m==null?void 0:m.customData)===null||c===void 0?void 0:c.httpStatus)===503?$v(s,i.intervalMillis,QR):$v(s,i.intervalMillis),k={throttleEndTimeMillis:Date.now()+j,backoffCount:s+1};return i.setThrottleMetadata(o,k),gs.debug(`Calling attemptFetch again in ${j} millis`),E1(r,k,a,i)}}function e8(r,t){return new Promise((s,a)=>{const i=Math.max(t-Date.now(),0),c=setTimeout(s,i);r.addEventListener(()=>{clearTimeout(c),a(Is.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function t8(r){if(!(r instanceof Us)||!r.customData)return!1;const t=Number(r.customData.httpStatus);return t===429||t===500||t===503||t===504}class r8{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function s8(r,t,s,a,i){if(i&&i.global){r("event",s,a);return}else{const c=await t,o=Object.assign(Object.assign({},a),{send_to:c});r("event",s,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8(){if(jk())try{await wk()}catch(r){return gs.warn(Is.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return gs.warn(Is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function n8(r,t,s,a,i,c,o){var d;const u=JR(r);u.then(C=>{s[C.measurementId]=C.appId,r.options.measurementId&&C.measurementId!==r.options.measurementId&&gs.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${C.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(C=>gs.error(C)),t.push(u);const m=a8().then(C=>{if(C)return a.getId()}),[j,k]=await Promise.all([u,m]);GR(c)||BR(c,j.measurementId),i("js",new Date);const T=(d=o==null?void 0:o.config)!==null&&d!==void 0?d:{};return T[RR]="firebase",T.update=!0,k!=null&&(T[AR]=k),i("config",j.measurementId,T),j.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(t){this.app=t}_delete(){return delete Zl[this.app.options.appId],Promise.resolve()}}let Zl={},Hj=[];const Wj={};let _m="dataLayer",o8="gtag",qj,C1,Gj=!1;function l8(){const r=[];if(vk()&&r.push("This is a browser extension environment."),vC()||r.push("Cookies are not available."),r.length>0){const t=r.map((a,i)=>`(${i+1}) ${a}`).join(" "),s=Is.create("invalid-analytics-context",{errorInfo:t});gs.warn(s.message)}}function c8(r,t,s){l8();const a=r.options.appId;if(!a)throw Is.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)gs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Is.create("no-api-key");if(Zl[a]!=null)throw Is.create("already-exists",{id:a});if(!Gj){UR(_m);const{wrappedGtag:c,gtagCore:o}=qR(Zl,Hj,Wj,_m,o8);C1=c,qj=o,Gj=!0}return Zl[a]=n8(r,Hj,Wj,t,qj,_m,s),new i8(r)}function d8(r=nx()){r=tr(r);const t=Un(r,vu);return t.isInitialized()?t.getImmediate():u8(r)}function u8(r,t={}){const s=Un(r,vu);if(s.isInitialized()){const i=s.getImmediate();if(Cn(t,s.getOptions()))return i;throw Is.create("already-initialized")}return s.initialize({options:t})}function x8(r,t,s,a){r=tr(r),s8(C1,Zl[r.app.options.appId],t,s,a).catch(i=>gs.error(i))}const Qj="@firebase/analytics",Kj="0.10.12";function m8(){ta(new Bs(vu,(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return c8(a,i,s)},"PUBLIC")),ta(new Bs("analytics-internal",r,"PRIVATE")),fs(Qj,Kj),fs(Qj,Kj,"esm2017");function r(t){try{const s=t.getProvider(vu).getImmediate();return{logEvent:(a,i,c)=>x8(s,a,i,c)}}catch(s){throw Is.create("interop-component-reg-failed",{reason:s})}}}m8();function Lg(r,t){var s={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&t.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(r);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(r,a[i])&&(s[a[i]]=r[a[i]]);return s}function D1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h8=D1,_1=new Ci("auth","Firebase",D1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new ax("@firebase/auth");function p8(r,...t){ju.logLevel<=Ct.WARN&&ju.warn(`Auth (${Di}): ${r}`,...t)}function S0(r,...t){ju.logLevel<=Ct.ERROR&&ju.error(`Auth (${Di}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(r,...t){throw Vg(r,...t)}function ma(r,...t){return Vg(r,...t)}function $1(r,t,s){const a=Object.assign(Object.assign({},h8()),{[t]:s});return new Ci("auth","Firebase",a).create(t,{appName:r.name})}function Ra(r){return $1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vg(r,...t){if(typeof r!="string"){const s=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(s,...a)}return _1.create(r,...t)}function gt(r,t,...s){if(!r)throw Vg(t,...s)}function Da(r){const t="INTERNAL ASSERTION FAILED: "+r;throw S0(t),new Error(t)}function Ha(r,t){r||Da(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function f8(){return Zj()==="http:"||Zj()==="https:"}function Zj(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f8()||vk()||"connection"in navigator)?navigator.onLine:!0}function y8(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t,s){this.shortDelay=t,this.longDelay=s,Ha(s>t,"Short delay should be less than long delay!"),this.isMobile=hC()||gC()}get(){return g8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(r,t){Ha(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{static initialize(t,s,a){this.fetchImpl=t,s&&(this.headersImpl=s),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Da("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Da("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Da("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],j8=new id(3e4,6e4);function Wn(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function Za(r,t,s,a,i={}){return R1(r,i,async()=>{let c={},o={};a&&(t==="GET"?o=a:c={body:JSON.stringify(a)});const d=Kc(Object.assign({key:r.config.apiKey},o)).slice(1),u=await r._getAdditionalHeaders();u["Content-Type"]="application/json",r.languageCode&&(u["X-Firebase-Locale"]=r.languageCode);const m=Object.assign({method:t,headers:u},c);return fC()||(m.referrerPolicy="no-referrer"),A1.fetch()(await M1(r,r.config.apiHost,s,d),m)})}async function R1(r,t,s){r._canInitEmulator=!1;const a=Object.assign(Object.assign({},b8),t);try{const i=new N8(r),c=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const o=await c.json();if("needConfirmation"in o)throw Xd(r,"account-exists-with-different-credential",o);if(c.ok&&!("errorMessage"in o))return o;{const d=c.ok?o.errorMessage:o.error.message,[u,m]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xd(r,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Xd(r,"email-already-in-use",o);if(u==="USER_DISABLED")throw Xd(r,"user-disabled",o);const j=a[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw $1(r,j,m);sa(r,j)}}catch(i){if(i instanceof Us)throw i;sa(r,"network-request-failed",{message:String(i)})}}async function od(r,t,s,a,i={}){const c=await Za(r,t,s,a,i);return"mfaPendingCredential"in c&&sa(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function M1(r,t,s,a){const i=`${t}${s}?${a}`,c=r,o=c.config.emulator?zg(r.config,i):`${r.config.apiScheme}://${i}`;return v8.includes(s)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(o).toString():o}function w8(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((s,a)=>{this.timer=setTimeout(()=>a(ma(this.auth,"network-request-failed")),j8.get())})}}function Xd(r,t,s){const a={appName:r.name};s.email&&(a.email=s.email),s.phoneNumber&&(a.phoneNumber=s.phoneNumber);const i=ma(r,t,a);return i.customData._tokenResponse=s,i}function Yj(r){return r!==void 0&&r.enterprise!==void 0}class k8{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===t)return w8(s.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function S8(r,t){return Za(r,"GET","/v2/recaptchaConfig",Wn(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(r,t){return Za(r,"POST","/v1/accounts:delete",t)}async function wu(r,t){return Za(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function I8(r,t=!1){const s=tr(r),a=await s.getIdToken(t),i=Bg(a);gt(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,o=c==null?void 0:c.sign_in_provider;return{claims:i,token:a,authTime:Yl($m(i.auth_time)),issuedAtTime:Yl($m(i.iat)),expirationTime:Yl($m(i.exp)),signInProvider:o||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function $m(r){return Number(r)*1e3}function Bg(r){const[t,s,a]=r.split(".");if(t===void 0||s===void 0||a===void 0)return S0("JWT malformed, contained fewer than 3 sections"),null;try{const i=hk(s);return i?JSON.parse(i):(S0("Failed to decode base64 JWT payload"),null)}catch(i){return S0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Xj(r){const t=Bg(r);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(r,t,s=!1){if(s)return t;try{return await t}catch(a){throw a instanceof Us&&P8(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function P8({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var s;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const s=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t,s){this.createdAt=t,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(r){var t;const s=r.auth,a=await r.getIdToken(),i=await Oo(r,wu(s,{idToken:a}));gt(i==null?void 0:i.users.length,s,"internal-error");const c=i.users[0];r._notifyReloadListener(c);const o=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?O1(c.providerUserInfo):[],d=D8(r.providerData,o),u=r.isAnonymous,m=!(r.email&&c.passwordHash)&&!(d!=null&&d.length),j=u?m:!1,k={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:d,metadata:new hp(c.createdAt,c.lastLoginAt),isAnonymous:j};Object.assign(r,k)}async function C8(r){const t=tr(r);await Nu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function D8(r,t){return[...r.filter(a=>!t.some(i=>i.providerId===a.providerId)),...t]}function O1(r){return r.map(t=>{var{providerId:s}=t,a=Lg(t,["providerId"]);return{providerId:s,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _8(r,t){const s=await R1(r,{},async()=>{const a=Kc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:c}=r.config,o=await M1(r,i,"/v1/token",`key=${c}`),d=await r._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",A1.fetch()(o,{method:"POST",headers:d,body:a})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function $8(r,t){return Za(r,"POST","/v2/accounts:revokeToken",Wn(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const s="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Xj(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,s)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const s=Xj(t);this.updateTokensAndExpiration(t,null,s)}async getToken(t,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,s){const{accessToken:a,refreshToken:i,expiresIn:c}=await _8(t,s);this.updateTokensAndExpiration(a,i,Number(c))}updateTokensAndExpiration(t,s,a){this.refreshToken=s||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,s){const{refreshToken:a,accessToken:i,expirationTime:c}=s,o=new jo;return a&&(gt(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),i&&(gt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),c&&(gt(typeof c=="number","internal-error",{appName:t}),o.expirationTime=c),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(r,t){gt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Zs{constructor(t){var{uid:s,auth:a,stsTokenManager:i}=t,c=Lg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new E8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=a,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new hp(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const s=await Oo(this,this.stsTokenManager.getToken(this.auth,t));return gt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(t){return I8(this,t)}reload(){return C8(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(s=>Object.assign({},s)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const s=new Zs(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,s=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),s&&await Nu(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ws(this.auth.app))return Promise.reject(Ra(this.auth));const t=await this.getIdToken();return await Oo(this,T8(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,s){var a,i,c,o,d,u,m,j;const k=(a=s.displayName)!==null&&a!==void 0?a:void 0,T=(i=s.email)!==null&&i!==void 0?i:void 0,C=(c=s.phoneNumber)!==null&&c!==void 0?c:void 0,v=(o=s.photoURL)!==null&&o!==void 0?o:void 0,L=(d=s.tenantId)!==null&&d!==void 0?d:void 0,$=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,R=(m=s.createdAt)!==null&&m!==void 0?m:void 0,V=(j=s.lastLoginAt)!==null&&j!==void 0?j:void 0,{uid:z,emailVerified:re,isAnonymous:q,providerData:Q,stsTokenManager:M}=s;gt(z&&M,t,"internal-error");const x=jo.fromJSON(this.name,M);gt(typeof z=="string",t,"internal-error"),en(k,t.name),en(T,t.name),gt(typeof re=="boolean",t,"internal-error"),gt(typeof q=="boolean",t,"internal-error"),en(C,t.name),en(v,t.name),en(L,t.name),en($,t.name),en(R,t.name),en(V,t.name);const W=new Zs({uid:z,auth:t,email:T,emailVerified:re,displayName:k,isAnonymous:q,photoURL:v,phoneNumber:C,tenantId:L,stsTokenManager:x,createdAt:R,lastLoginAt:V});return Q&&Array.isArray(Q)&&(W.providerData=Q.map(U=>Object.assign({},U))),$&&(W._redirectEventId=$),W}static async _fromIdTokenResponse(t,s,a=!1){const i=new jo;i.updateFromServerResponse(s);const c=new Zs({uid:s.localId,auth:t,stsTokenManager:i,isAnonymous:a});return await Nu(c),c}static async _fromGetAccountInfoResponse(t,s,a){const i=s.users[0];gt(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?O1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(c!=null&&c.length),d=new jo;d.updateFromIdToken(a);const u=new Zs({uid:i.localId,auth:t,stsTokenManager:d,isAnonymous:o}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new hp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(c!=null&&c.length)};return Object.assign(u,m),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=new Map;function _a(r){Ha(r instanceof Function,"Expected a class definition");let t=Jj.get(r);return t?(Ha(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,Jj.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,s){this.storage[t]=s}async _get(t){const s=this.storage[t];return s===void 0?null:s}async _remove(t){delete this.storage[t]}_addListener(t,s){}_removeListener(t,s){}}L1.type="NONE";const ew=L1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(r,t,s){return`firebase:${r}:${t}:${s}`}class wo{constructor(t,s,a){this.persistence=t,this.auth=s,this.userKey=a;const{config:i,name:c}=this.auth;this.fullUserKey=T0(this.userKey,i.apiKey,c),this.fullPersistenceKey=T0("persistence",i.apiKey,c),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const s=await wu(this.auth,{idToken:t}).catch(()=>{});return s?Zs._fromGetAccountInfoResponse(this.auth,s,t):null}return Zs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,s,a="authUser"){if(!s.length)return new wo(_a(ew),t,a);const i=(await Promise.all(s.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let c=i[0]||_a(ew);const o=T0(a,t.config.apiKey,t.name);let d=null;for(const m of s)try{const j=await m._get(o);if(j){let k;if(typeof j=="string"){const T=await wu(t,{idToken:j}).catch(()=>{});if(!T)break;k=await Zs._fromGetAccountInfoResponse(t,T,j)}else k=Zs._fromJSON(t,j);m!==c&&(d=k),c=m;break}}catch{}const u=i.filter(m=>m._shouldAllowMigration);return!c._shouldAllowMigration||!u.length?new wo(c,t,a):(c=u[0],d&&await c._set(o,d.toJSON()),await Promise.all(s.map(async m=>{if(m!==c)try{await m._remove(o)}catch{}})),new wo(c,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(U1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(V1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(H1(t))return"Blackberry";if(W1(t))return"Webos";if(z1(t))return"Safari";if((t.includes("chrome/")||B1(t))&&!t.includes("edge/"))return"Chrome";if(F1(t))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(s);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function V1(r=Zr()){return/firefox\//i.test(r)}function z1(r=Zr()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function B1(r=Zr()){return/crios\//i.test(r)}function U1(r=Zr()){return/iemobile/i.test(r)}function F1(r=Zr()){return/android/i.test(r)}function H1(r=Zr()){return/blackberry/i.test(r)}function W1(r=Zr()){return/webos/i.test(r)}function Ug(r=Zr()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function A8(r=Zr()){var t;return Ug(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function R8(){return yC()&&document.documentMode===10}function q1(r=Zr()){return Ug(r)||F1(r)||W1(r)||H1(r)||/windows phone/i.test(r)||U1(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(r,t=[]){let s;switch(r){case"Browser":s=tw(Zr());break;case"Worker":s=`${tw(Zr())}-${r}`;break;default:s=r}const a=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${Di}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,s){const a=c=>new Promise((o,d)=>{try{const u=t(c);o(u)}catch(u){d(u)}});a.onAbort=s,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const s=[];try{for(const a of this.queue)await a(t),a.onAbort&&s.push(a.onAbort)}catch(a){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O8(r,t={}){return Za(r,"GET","/v2/passwordPolicy",Wn(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=6;class V8{constructor(t){var s,a,i,c;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=o.minPasswordLength)!==null&&s!==void 0?s:L8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var s,a,i,c,o,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(c=u.containsUppercaseLetter)!==null&&c!==void 0?c:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(t,s){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(s.meetsMinPasswordLength=t.length>=a),i&&(s.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let a;for(let i=0;i<t.length;i++)a=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,s,a,i,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(t,s,a,i){this.app=t,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rw(this),this.idTokenSubscription=new rw(this),this.beforeStateQueue=new M8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,s){return s&&(this._popupRedirectResolver=_a(s)),this._initializationPromise=this.queue(async()=>{var a,i,c;if(!this._deleted&&(this.persistenceManager=await wo.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const s=await wu(this,{idToken:t}),a=await Zs._fromGetAccountInfoResponse(this,s,t);await this.directlySetCurrentUser(a)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(ws(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(d,d))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let i=a,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,d=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===d)&&(u!=null&&u.user)&&(i=u.user,c=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(t){try{await Nu(t)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=y8()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ws(this.app))return Promise.reject(Ra(this));const s=t?tr(t):null;return s&&gt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(t,s=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ws(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ws(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_a(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await O8(this),s=new V8(t);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ci("auth","Firebase",t())}onAuthStateChanged(t,s,a){return this.registerStateListener(this.authStateSubscription,t,s,a)}beforeAuthStateChanged(t,s){return this.beforeStateQueue.pushCallback(t,s)}onIdTokenChanged(t,s,a){return this.registerStateListener(this.idTokenSubscription,t,s,a)}authStateReady(){return new Promise((t,s)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},s)}})}async revokeAccessToken(t){if(this.currentUser){const s=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:s};this.tenantId!=null&&(a.tenantId=this.tenantId),await $8(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,s){const a=await this.getOrInitRedirectPersistenceManager(s);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const s=t&&_a(t)||this._popupRedirectResolver;gt(s,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[_a(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var s,a;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(s=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,s,a,i){if(this._deleted)return()=>{};const c=typeof s=="function"?s:s.next.bind(s);let o=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(d,this,"internal-error"),d.then(()=>{o||c(this.currentUser)}),typeof s=="function"){const u=t.addObserver(s,a,i);return()=>{o=!0,u()}}else{const u=t.addObserver(s);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=G1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(s["X-Firebase-Client"]=a);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var t;if(ws(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return s!=null&&s.error&&p8(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function Ai(r){return tr(r)}class rw{constructor(t){this.auth=t,this.observer=null,this.addObserver=SC(s=>this.observer=s)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ix={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B8(r){Ix=r}function Q1(r){return Ix.loadJS(r)}function U8(){return Ix.recaptchaEnterpriseScript}function F8(){return Ix.gapiScript}function H8(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class W8{constructor(){this.enterprise=new q8}ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}class q8{ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}const G8="recaptcha-enterprise",K1="NO_RECAPTCHA";class Q8{constructor(t){this.type=G8,this.auth=Ai(t)}async verify(t="verify",s=!1){async function a(c){if(!s){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(o,d)=>{S8(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new k8(u);return c.tenantId==null?c._agentRecaptchaConfig=m:c._tenantRecaptchaConfigs[c.tenantId]=m,o(m.siteKey)}}).catch(u=>{d(u)})})}function i(c,o,d){const u=window.grecaptcha;Yj(u)?u.enterprise.ready(()=>{u.enterprise.execute(c,{action:t}).then(m=>{o(m)}).catch(()=>{o(K1)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new W8().execute("siteKey",{action:"verify"}):new Promise((c,o)=>{a(this.auth).then(d=>{if(!s&&Yj(window.grecaptcha))i(d,c,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=U8();u.length!==0&&(u+=d),Q1(u).then(()=>{i(d,c,o)}).catch(m=>{o(m)})}}).catch(d=>{o(d)})})}}async function jl(r,t,s,a=!1,i=!1){const c=new Q8(r);let o;if(i)o=K1;else try{o=await c.verify(s)}catch{o=await c.verify(s,!0)}const d=Object.assign({},t);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const u=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:m,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const u=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return a?Object.assign(d,{captchaResp:o}):Object.assign(d,{captchaResponse:o}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function pp(r,t,s,a,i){var c,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((c=r._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await jl(r,t,s,s==="getOobCode");return a(r,d)}else return a(r,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await jl(r,t,s,s==="getOobCode");return a(r,u)}else return Promise.reject(d)});else if(i==="PHONE_PROVIDER")if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const d=await jl(r,t,s);return a(r,d).catch(async u=>{var m;if(((m=r._getRecaptchaConfig())===null||m===void 0?void 0:m.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${s} flow.`);const j=await jl(r,t,s,!1,!0);return a(r,j)}return Promise.reject(u)})}else{const d=await jl(r,t,s,!1,!0);return a(r,d)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(r,t){const s=Un(r,"auth");if(s.isInitialized()){const i=s.getImmediate(),c=s.getOptions();if(Cn(c,t??{}))return i;sa(i,"already-initialized")}return s.initialize({options:t})}function Z8(r,t){const s=(t==null?void 0:t.persistence)||[],a=(Array.isArray(s)?s:[s]).map(_a);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function Y8(r,t,s){const a=Ai(r);gt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const i=!!(s!=null&&s.disableWarnings),c=Z1(t),{host:o,port:d}=X8(t),u=d===null?"":`:${d}`,m={url:`${c}//${o}${u}/`},j=Object.freeze({host:o,port:d,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){gt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),gt(Cn(m,a.config.emulator)&&Cn(j,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=m,a.emulatorConfig=j,a.settings.appVerificationDisabledForTesting=!0,i||J8()}function Z1(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function X8(r){const t=Z1(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!s)return{host:"",port:null};const a=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const c=i[1];return{host:c,port:sw(a.substr(c.length+1))}}else{const[c,o]=a.split(":");return{host:c,port:sw(o)}}}function sw(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function J8(){function r(){const t=document.createElement("p"),s=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,s){this.providerId=t,this.signInMethod=s}toJSON(){return Da("not implemented")}_getIdTokenResponse(t){return Da("not implemented")}_linkToIdToken(t,s){return Da("not implemented")}_getReauthenticationResolver(t){return Da("not implemented")}}async function e9(r,t){return Za(r,"POST","/v1/accounts:update",t)}async function t9(r,t){return Za(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r9(r,t){return od(r,"POST","/v1/accounts:signInWithPassword",Wn(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s9(r,t){return od(r,"POST","/v1/accounts:signInWithEmailLink",Wn(r,t))}async function a9(r,t){return od(r,"POST","/v1/accounts:signInWithEmailLink",Wn(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends Fg{constructor(t,s,a,i=null){super("password",a),this._email=t,this._password=s,this._tenantId=i}static _fromEmailAndPassword(t,s){return new _c(t,s,"password")}static _fromEmailAndCode(t,s,a=null){return new _c(t,s,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pp(t,s,"signInWithPassword",r9,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return s9(t,{email:this._email,oobCode:this._password});default:sa(t,"internal-error")}}async _linkToIdToken(t,s){switch(this.signInMethod){case"password":const a={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pp(t,a,"signUpPassword",t9,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return a9(t,{idToken:s,email:this._email,oobCode:this._password});default:sa(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(r,t){return od(r,"POST","/v1/accounts:signInWithIdp",Wn(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9="http://localhost";class Si extends Fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const s=new Si(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(s.idToken=t.idToken),t.accessToken&&(s.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(s.nonce=t.nonce),t.pendingToken&&(s.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(s.accessToken=t.oauthToken,s.secret=t.oauthTokenSecret):sa("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:i}=s,c=Lg(s,["providerId","signInMethod"]);if(!a||!i)return null;const o=new Si(a,i);return o.idToken=c.idToken||void 0,o.accessToken=c.accessToken||void 0,o.secret=c.secret,o.nonce=c.nonce,o.pendingToken=c.pendingToken||null,o}_getIdTokenResponse(t){const s=this.buildRequest();return No(t,s)}_linkToIdToken(t,s){const a=this.buildRequest();return a.idToken=s,No(t,a)}_getReauthenticationResolver(t){const s=this.buildRequest();return s.autoCreate=!1,No(t,s)}buildRequest(){const t={requestUri:n9,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),t.postBody=Kc(s)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function o9(r){const t=Il(Pl(r)).link,s=t?Il(Pl(t)).deep_link_id:null,a=Il(Pl(r)).deep_link_id;return(a?Il(Pl(a)).link:null)||a||s||t||r}class Hg{constructor(t){var s,a,i,c,o,d;const u=Il(Pl(t)),m=(s=u.apiKey)!==null&&s!==void 0?s:null,j=(a=u.oobCode)!==null&&a!==void 0?a:null,k=i9((i=u.mode)!==null&&i!==void 0?i:null);gt(m&&j&&k,"argument-error"),this.apiKey=m,this.operation=k,this.code=j,this.continueUrl=(c=u.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(d=u.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const s=o9(t);try{return new Hg(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(t,s){return _c._fromEmailAndPassword(t,s)}static credentialWithLink(t,s){const a=Hg.parseLink(s);return gt(a,"argument-error"),_c._fromEmailAndCode(t,a.code,a.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends Y1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on extends ld{constructor(){super("facebook.com")}static credential(t){return Si._fromParams({providerId:on.PROVIDER_ID,signInMethod:on.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return on.credentialFromTaggedObject(t)}static credentialFromError(t){return on.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return on.credential(t.oauthAccessToken)}catch{return null}}}on.FACEBOOK_SIGN_IN_METHOD="facebook.com";on.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends ld{constructor(){super("google.com"),this.addScope("profile")}static credential(t,s){return Si._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:s})}static credentialFromResult(t){return ln.credentialFromTaggedObject(t)}static credentialFromError(t){return ln.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:s,oauthAccessToken:a}=t;if(!s&&!a)return null;try{return ln.credential(s,a)}catch{return null}}}ln.GOOGLE_SIGN_IN_METHOD="google.com";ln.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends ld{constructor(){super("github.com")}static credential(t){return Si._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return cn.credentialFromTaggedObject(t)}static credentialFromError(t){return cn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return cn.credential(t.oauthAccessToken)}catch{return null}}}cn.GITHUB_SIGN_IN_METHOD="github.com";cn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends ld{constructor(){super("twitter.com")}static credential(t,s){return Si._fromParams({providerId:dn.PROVIDER_ID,signInMethod:dn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:s})}static credentialFromResult(t){return dn.credentialFromTaggedObject(t)}static credentialFromError(t){return dn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:s,oauthTokenSecret:a}=t;if(!s||!a)return null;try{return dn.credential(s,a)}catch{return null}}}dn.TWITTER_SIGN_IN_METHOD="twitter.com";dn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l9(r,t){return od(r,"POST","/v1/accounts:signUp",Wn(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,s,a,i=!1){const c=await Zs._fromIdTokenResponse(t,a,i),o=aw(a);return new Ti({user:c,providerId:o,_tokenResponse:a,operationType:s})}static async _forOperation(t,s,a){await t._updateTokensIfNecessary(a,!0);const i=aw(a);return new Ti({user:t,providerId:i,_tokenResponse:a,operationType:s})}}function aw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Us{constructor(t,s,a,i){var c;super(s.code,s.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,ku.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:s.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,s,a,i){return new ku(t,s,a,i)}}function X1(r,t,s,a){return(t==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ku._fromErrorAndOperation(r,c,t,a):c})}async function c9(r,t,s=!1){const a=await Oo(r,t._linkToIdToken(r.auth,await r.getIdToken()),s);return Ti._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9(r,t,s=!1){const{auth:a}=r;if(ws(a.app))return Promise.reject(Ra(a));const i="reauthenticate";try{const c=await Oo(r,X1(a,i,t,r),s);gt(c.idToken,a,"internal-error");const o=Bg(c.idToken);gt(o,a,"internal-error");const{sub:d}=o;return gt(r.uid===d,a,"user-mismatch"),Ti._forOperation(r,i,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&sa(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(r,t,s=!1){if(ws(r.app))return Promise.reject(Ra(r));const a="signIn",i=await X1(r,a,t),c=await Ti._fromIdTokenResponse(r,a,i);return s||await r._updateCurrentUser(c.user),c}async function u9(r,t){return J1(Ai(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(r){const t=Ai(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function x9(r,t,s){if(ws(r.app))return Promise.reject(Ra(r));const a=Ai(r),o=await pp(a,{returnSecureToken:!0,email:t,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l9,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&e3(r),u}),d=await Ti._fromIdTokenResponse(a,"signIn",o);return await a._updateCurrentUser(d.user),d}function m9(r,t,s){return ws(r.app)?Promise.reject(Ra(r)):u9(tr(r),Xo.credential(t,s)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&e3(r),a})}function Wg(r,t){return h9(tr(r),null,t)}async function h9(r,t,s){const{auth:a}=r,c={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(c.email=t),s&&(c.password=s);const o=await Oo(r,e9(a,c));await r._updateTokensIfNecessary(o,!0)}function p9(r,t,s,a){return tr(r).onIdTokenChanged(t,s,a)}function f9(r,t,s){return tr(r).beforeAuthStateChanged(t,s)}function _t(r,t,s,a){return tr(r).onAuthStateChanged(t,s,a)}function Px(r){return tr(r).signOut()}const Su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(t,s){this.storageRetriever=t,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,s){return this.storage.setItem(t,JSON.stringify(s)),Promise.resolve()}_get(t){const s=this.storage.getItem(t);return Promise.resolve(s?JSON.parse(s):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=1e3,y9=10;class r3 extends t3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,s)=>this.onStorageEvent(t,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const s of Object.keys(this.listeners)){const a=this.storage.getItem(s),i=this.localCache[s];a!==i&&t(s,i,a)}}onStorageEvent(t,s=!1){if(!t.key){this.forAllChangedKeys((o,d,u)=>{this.notifyListeners(o,u)});return}const a=t.key;s?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(a);!s&&this.localCache[a]===o||this.notifyListeners(a,o)},c=this.storage.getItem(a);R8()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,y9):i()}notifyListeners(t,s){this.localCache[t]=s;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,s,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:s,newValue:a}),!0)})},g9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,s){await super._set(t,s),this.localCache[t]=JSON.stringify(s)}async _get(t){const s=await super._get(t);return this.localCache[t]=JSON.stringify(s),s}async _remove(t){await super._remove(t),delete this.localCache[t]}}r3.type="LOCAL";const b9=r3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3 extends t3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,s){}_removeListener(t,s){}}s3.type="SESSION";const a3=s3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const s=this.receivers.find(i=>i.isListeningto(t));if(s)return s;const a=new Ex(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const s=t,{eventId:a,eventType:i,data:c}=s.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const d=Array.from(o).map(async m=>m(s.origin,c)),u=await v9(d);s.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:u})}_subscribe(t,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(s)}_unsubscribe(t,s){this.handlersMap[t]&&s&&this.handlersMap[t].delete(s),(!s||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ex.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(r="",t=10){let s="";for(let a=0;a<t;a++)s+=Math.floor(Math.random()*10);return r+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,s,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,o;return new Promise((d,u)=>{const m=qg("",20);i.port1.start();const j=setTimeout(()=>{u(new Error("unsupported_event"))},a);o={messageChannel:i,onMessage(k){const T=k;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(j),c=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(T.data.response);break;default:clearTimeout(j),clearTimeout(c),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:m,data:s},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(){return window}function w9(r){ha().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(){return typeof ha().WorkerGlobalScope<"u"&&typeof ha().importScripts=="function"}async function N9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k9(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function S9(){return n3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="firebaseLocalStorageDb",T9=1,Tu="firebaseLocalStorage",o3="fbase_key";class cd{constructor(t){this.request=t}toPromise(){return new Promise((t,s)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Cx(r,t){return r.transaction([Tu],t?"readwrite":"readonly").objectStore(Tu)}function I9(){const r=indexedDB.deleteDatabase(i3);return new cd(r).toPromise()}function fp(){const r=indexedDB.open(i3,T9);return new Promise((t,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(Tu,{keyPath:o3})}catch(i){s(i)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(Tu)?t(a):(a.close(),await I9(),t(await fp()))})})}async function nw(r,t,s){const a=Cx(r,!0).put({[o3]:t,value:s});return new cd(a).toPromise()}async function P9(r,t){const s=Cx(r,!1).get(t),a=await new cd(s).toPromise();return a===void 0?null:a.value}function iw(r,t){const s=Cx(r,!0).delete(t);return new cd(s).toPromise()}const E9=800,C9=3;class l3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fp(),this.db)}async _withRetries(t){let s=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(s++>C9)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ex._getInstance(S9()),this.receiver._subscribe("keyChanged",async(t,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(t,s)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await N9(),!this.activeServiceWorker)return;this.sender=new j9(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((s=a[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||k9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await fp();return await nw(t,Su,"1"),await iw(t,Su),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,s){return this._withPendingWrite(async()=>(await this._withRetries(a=>nw(a,t,s)),this.localCache[t]=s,this.notifyServiceWorker(t)))}async _get(t){const s=await this._withRetries(a=>P9(a,t));return this.localCache[t]=s,s}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(s=>iw(s,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const c=Cx(i,!1).getAll();return new cd(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const s=[],a=new Set;if(t.length!==0)for(const{fbase_key:i,value:c}of t)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(t,s){this.localCache[t]=s;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l3.type="LOCAL";const D9=l3;new id(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(r,t){return t?_a(t):(gt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends Fg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return No(t,this._buildIdpRequest())}_linkToIdToken(t,s){return No(t,this._buildIdpRequest(s))}_getReauthenticationResolver(t){return No(t,this._buildIdpRequest())}_buildIdpRequest(t){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(s.idToken=t),s}}function $9(r){return J1(r.auth,new Gg(r),r.bypassAuthState)}function A9(r){const{auth:t,user:s}=r;return gt(s,t,"internal-error"),d9(s,new Gg(r),r.bypassAuthState)}async function R9(r){const{auth:t,user:s}=r;return gt(s,t,"internal-error"),c9(s,new Gg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(t,s,a,i,c=!1){this.auth=t,this.resolver=a,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(t,s)=>{this.pendingPromise={resolve:t,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:s,sessionId:a,postBody:i,tenantId:c,error:o,type:d}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:s,sessionId:a,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return $9;case"linkViaPopup":case"linkViaRedirect":return R9;case"reauthViaPopup":case"reauthViaRedirect":return A9;default:sa(this.auth,"internal-error")}}resolve(t){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=new id(2e3,1e4);class oo extends c3{constructor(t,s,a,i,c){super(t,s,i,c),this.provider=a,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){Ha(this.filter.length===1,"Popup operations only handle one event");const t=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(ma(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ma(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var s,a;if(!((a=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ma(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,M9.get())};t()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="pendingRedirect",I0=new Map;class L9 extends c3{constructor(t,s,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,a),this.eventId=null}async execute(){let t=I0.get(this.auth._key());if(!t){try{const a=await V9(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(s){t=()=>Promise.reject(s)}I0.set(this.auth._key(),t)}return this.bypassAuthState||I0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const s=await this.auth._redirectUserForId(t.eventId);if(s)return this.user=s,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function V9(r,t){const s=U9(t),a=B9(r);if(!await a._isAvailable())return!1;const i=await a._get(s)==="true";return await a._remove(s),i}function z9(r,t){I0.set(r._key(),t)}function B9(r){return _a(r._redirectPersistence)}function U9(r){return T0(O9,r.config.apiKey,r.name)}async function F9(r,t,s=!1){if(ws(r.app))return Promise.reject(Ra(r));const a=Ai(r),i=_9(a,t),o=await new L9(a,i,s).execute();return o&&!s&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=10*60*1e3;class W9{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let s=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(s=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!q9(t)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=t,s=!0)),s}sendToConsumer(t,s){var a;if(t.error&&!d3(t)){const i=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";s.onError(ma(this.auth,i))}else s.onAuthEvent(t)}isEventForConsumer(t,s){const a=s.eventId===null||!!t.eventId&&t.eventId===s.eventId;return s.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=H9&&this.cachedEventUids.clear(),this.cachedEventUids.has(ow(t))}saveEventToCache(t){this.cachedEventUids.add(ow(t)),this.lastProcessedEventTime=Date.now()}}function ow(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function d3({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function q9(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d3(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9(r,t={}){return Za(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K9=/^https?/;async function Z9(r){if(r.config.emulator)return;const{authorizedDomains:t}=await G9(r);for(const s of t)try{if(Y9(s))return}catch{}sa(r,"unauthorized-domain")}function Y9(r){const t=mp(),{protocol:s,hostname:a}=new URL(t);if(r.startsWith("chrome-extension://")){const o=new URL(r);return o.hostname===""&&a===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===a}if(!K9.test(s))return!1;if(Q9.test(r))return a===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=new id(3e4,6e4);function lw(){const r=ha().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function J9(r){return new Promise((t,s)=>{var a,i,c;function o(){lw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{lw(),s(ma(r,"network-request-failed"))},timeout:X9.get()})}if(!((i=(a=ha().gapi)===null||a===void 0?void 0:a.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((c=ha().gapi)===null||c===void 0)&&c.load)o();else{const d=H8("iframefcb");return ha()[d]=()=>{gapi.load?o():s(ma(r,"network-request-failed"))},Q1(`${F8()}?onload=${d}`).catch(u=>s(u))}}).catch(t=>{throw P0=null,t})}let P0=null;function eM(r){return P0=P0||J9(r),P0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new id(5e3,15e3),rM="__/auth/iframe",sM="emulator/auth/iframe",aM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iM(r){const t=r.config;gt(t.authDomain,r,"auth-domain-config-required");const s=t.emulator?zg(t,sM):`https://${r.config.authDomain}/${rM}`,a={apiKey:t.apiKey,appName:r.name,v:Di},i=nM.get(r.config.apiHost);i&&(a.eid=i);const c=r._getFrameworks();return c.length&&(a.fw=c.join(",")),`${s}?${Kc(a).slice(1)}`}async function oM(r){const t=await eM(r),s=ha().gapi;return gt(s,r,"internal-error"),t.open({where:document.body,url:iM(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aM,dontclear:!0},a=>new Promise(async(i,c)=>{await a.restyle({setHideOnLeave:!1});const o=ma(r,"network-request-failed"),d=ha().setTimeout(()=>{c(o)},tM.get());function u(){ha().clearTimeout(d),i(a)}a.ping(u).then(u,()=>{c(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cM=500,dM=600,uM="_blank",xM="http://localhost";class cw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mM(r,t,s,a=cM,i=dM){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const u=Object.assign(Object.assign({},lM),{width:a.toString(),height:i.toString(),top:c,left:o}),m=Zr().toLowerCase();s&&(d=B1(m)?uM:s),V1(m)&&(t=t||xM,u.scrollbars="yes");const j=Object.entries(u).reduce((T,[C,v])=>`${T}${C}=${v},`,"");if(A8(m)&&d!=="_self")return hM(t||"",d),new cw(null);const k=window.open(t||"",d,j);gt(k,r,"popup-blocked");try{k.focus()}catch{}return new cw(k)}function hM(r,t){const s=document.createElement("a");s.href=r,s.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="__/auth/handler",fM="emulator/auth/handler",gM=encodeURIComponent("fac");async function dw(r,t,s,a,i,c){gt(r.config.authDomain,r,"auth-domain-config-required"),gt(r.config.apiKey,r,"invalid-api-key");const o={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:a,v:Di,eventId:i};if(t instanceof Y1){t.setDefaultLanguage(r.languageCode),o.providerId=t.providerId||"",kC(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[j,k]of Object.entries(c||{}))o[j]=k}if(t instanceof ld){const j=t.getScopes().filter(k=>k!=="");j.length>0&&(o.scopes=j.join(","))}r.tenantId&&(o.tid=r.tenantId);const d=o;for(const j of Object.keys(d))d[j]===void 0&&delete d[j];const u=await r._getAppCheckToken(),m=u?`#${gM}=${encodeURIComponent(u)}`:"";return`${yM(r)}?${Kc(d).slice(1)}${m}`}function yM({config:r}){return r.emulator?zg(r,fM):`https://${r.authDomain}/${pM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="webStorageSupport";class bM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a3,this._completeRedirectFn=F9,this._overrideRedirectResult=z9}async _openPopup(t,s,a,i){var c;Ha((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await dw(t,s,a,mp(),i);return mM(t,o,qg())}async _openRedirect(t,s,a,i){await this._originValidation(t);const c=await dw(t,s,a,mp(),i);return w9(c),new Promise(()=>{})}_initialize(t){const s=t._key();if(this.eventManagers[s]){const{manager:i,promise:c}=this.eventManagers[s];return i?Promise.resolve(i):(Ha(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(t);return this.eventManagers[s]={promise:a},a.catch(()=>{delete this.eventManagers[s]}),a}async initAndGetManager(t){const s=await oM(t),a=new W9(t);return s.register("authEvent",i=>(gt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=s,a}_isIframeWebStorageSupported(t,s){this.iframes[t._key()].send(Am,{type:Am},i=>{var c;const o=(c=i==null?void 0:i[0])===null||c===void 0?void 0:c[Am];o!==void 0&&s(!!o),sa(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const s=t._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=Z9(t)),this.originValidationPromises[s]}get _shouldInitProactively(){return q1()||z1()||Ug()}}const vM=bM;var uw="@firebase/auth",xw="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const s=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,s),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const s=this.internalListeners.get(t);s&&(this.internalListeners.delete(t),s(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NM(r){ta(new Bs("auth",(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:o,authDomain:d}=a.options;gt(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const u={apiKey:o,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G1(r)},m=new z8(a,i,c,u);return Z8(m,s),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,s,a)=>{t.getProvider("auth-internal").initialize()})),ta(new Bs("auth-internal",t=>{const s=Ai(t.getProvider("auth").getImmediate());return(a=>new jM(a))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(uw,xw,wM(r)),fs(uw,xw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=5*60,SM=yk("authIdTokenMaxAge")||kM;let mw=null;const TM=r=>async t=>{const s=t&&await t.getIdTokenResult(),a=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(a&&a>SM)return;const i=s==null?void 0:s.token;mw!==i&&(mw=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Qg(r=nx()){const t=Un(r,"auth");if(t.isInitialized())return t.getImmediate();const s=K8(r,{popupRedirectResolver:vM,persistence:[D9,b9,a3]}),a=yk("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const o=TM(c.toString());f9(s,o,()=>o(s.currentUser)),p9(s,d=>o(d))}}const i=pk("auth");return i&&Y8(s,`http://${i}`),s}function IM(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}B8({loadJS(r){return new Promise((t,s)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=t,a.onerror=i=>{const c=ma("internal-error");c.customData=i,s(c)},a.type="text/javascript",a.charset="UTF-8",IM().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NM("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="firebasestorage.googleapis.com",PM="storageBucket",EM=2*60*1e3,CM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Us{constructor(t,s,a=0){super(Rm(t),`Firebase Storage: ${s} (${Rm(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Na.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Rm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ja;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ja||(ja={}));function Rm(r){return"storage/"+r}function DM(){const r="An unknown error occurred, please check the error payload for server response.";return new Na(ja.UNKNOWN,r)}function _M(){return new Na(ja.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $M(){return new Na(ja.CANCELED,"User canceled the upload/download.")}function AM(r){return new Na(ja.INVALID_URL,"Invalid URL '"+r+"'.")}function RM(r){return new Na(ja.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function hw(r){return new Na(ja.INVALID_ARGUMENT,r)}function x3(){return new Na(ja.APP_DELETED,"The Firebase app was deleted.")}function MM(r){return new Na(ja.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,s){this.bucket=t,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,s){let a;try{a=Ys.makeFromUrl(t,s)}catch{return new Ys(t,"")}if(a.path==="")return a;throw RM(t)}static makeFromUrl(t,s){let a=null;const i="([A-Za-z0-9.\\-_]+)";function c(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const o="(/(.*))?$",d=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function m(re){re.path_=decodeURIComponent(re.path)}const j="v[A-Za-z0-9_]+",k=s.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${k}/${j}/b/${i}/o${T}`,"i"),v={bucket:1,path:3},L=s===u3?"(?:storage.googleapis.com|storage.cloud.google.com)":s,$="([^?#]*)",R=new RegExp(`^https?://${L}/${i}/${$}`,"i"),z=[{regex:d,indices:u,postModify:c},{regex:C,indices:v,postModify:m},{regex:R,indices:{bucket:1,path:2},postModify:m}];for(let re=0;re<z.length;re++){const q=z[re],Q=q.regex.exec(t);if(Q){const M=Q[q.indices.bucket];let x=Q[q.indices.path];x||(x=""),a=new Ys(M,x),q.postModify(a);break}}if(a==null)throw AM(t);return a}}class OM{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(r,t,s){let a=1,i=null,c=null,o=!1,d=0;function u(){return d===2}let m=!1;function j(...$){m||(m=!0,t.apply(null,$))}function k($){i=setTimeout(()=>{i=null,r(C,u())},$)}function T(){c&&clearTimeout(c)}function C($,...R){if(m){T();return}if($){T(),j.call(null,$,...R);return}if(u()||o){T(),j.call(null,$,...R);return}a<64&&(a*=2);let z;d===1?(d=2,z=0):z=(a+Math.random())*1e3,k(z)}let v=!1;function L($){v||(v=!0,T(),!m&&(i!==null?($||(d=2),clearTimeout(i),k(0)):$||(d=1)))}return k(0),c=setTimeout(()=>{o=!0,L(!0)},s),L}function VM(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(r){return r!==void 0}function pw(r,t,s,a){if(a<t)throw hw(`Invalid value for '${r}'. Expected ${t} or greater.`);if(a>s)throw hw(`Invalid value for '${r}'. Expected ${s} or less.`)}function BM(r){const t=encodeURIComponent;let s="?";for(const a in r)if(r.hasOwnProperty(a)){const i=t(a)+"="+t(r[a]);s=s+i+"&"}return s=s.slice(0,-1),s}var Iu;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Iu||(Iu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(r,t){const s=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,c=t.indexOf(r)!==-1;return s||i||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(t,s,a,i,c,o,d,u,m,j,k,T=!0){this.url_=t,this.method_=s,this.headers_=a,this.body_=i,this.successCodes_=c,this.additionalRetryCodes_=o,this.callback_=d,this.errorCallback_=u,this.timeout_=m,this.progressCallback_=j,this.connectionFactory_=k,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,v)=>{this.resolve_=C,this.reject_=v,this.start_()})}start_(){const t=(a,i)=>{if(i){a(!1,new Jd(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const o=d=>{const u=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,m)};this.progressCallback_!==null&&c.addUploadProgressListener(o),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(o),this.pendingConnection_=null;const d=c.getErrorCode()===Iu.NO_ERROR,u=c.getStatus();if(!d||UM(u,this.additionalRetryCodes_)&&this.retry){const j=c.getErrorCode()===Iu.ABORT;a(!1,new Jd(!1,null,j));return}const m=this.successCodes_.indexOf(u)!==-1;a(!0,new Jd(m,c))})},s=(a,i)=>{const c=this.resolve_,o=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(d,d.getResponse());zM(u)?c(u):c()}catch(u){o(u)}else if(d!==null){const u=DM();u.serverResponse=d.getErrorText(),this.errorCallback_?o(this.errorCallback_(d,u)):o(u)}else if(i.canceled){const u=this.appDelete_?x3():$M();o(u)}else{const u=_M();o(u)}};this.canceled_?s(!1,new Jd(!1,null,!0)):this.backoffId_=LM(t,s,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&VM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jd{constructor(t,s,a){this.wasSuccessCode=t,this.connection=s,this.canceled=!!a}}function HM(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function WM(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function qM(r,t){t&&(r["X-Firebase-GMPID"]=t)}function GM(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function QM(r,t,s,a,i,c,o=!0){const d=BM(r.urlParams),u=r.url+d,m=Object.assign({},r.headers);return qM(m,t),HM(m,s),WM(m,c),GM(m,a),new FM(u,r.method,m,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function ZM(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t,s){this._service=t,s instanceof Ys?this._location=s:this._location=Ys.makeFromUrl(s,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,s){return new Pu(t,s)}get root(){const t=new Ys(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZM(this._location.path)}get storage(){return this._service}get parent(){const t=KM(this._location.path);if(t===null)return null;const s=new Ys(this._location.bucket,t);return new Pu(this._service,s)}_throwIfRoot(t){if(this._location.path==="")throw MM(t)}}function fw(r,t){const s=t==null?void 0:t[PM];return s==null?null:Ys.makeFromBucketSpec(s,r)}function YM(r,t,s,a={}){r.host=`${t}:${s}`,r._protocol="http";const{mockUserToken:i}=a;i&&(r._overrideAuthToken=typeof i=="string"?i:bk(i,r.app.options.projectId))}class XM{constructor(t,s,a,i,c){this.app=t,this._authProvider=s,this._appCheckProvider=a,this._url=i,this._firebaseVersion=c,this._bucket=null,this._host=u3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EM,this._maxUploadRetryTime=CM,this._requests=new Set,i!=null?this._bucket=Ys.makeFromBucketSpec(i,this._host):this._bucket=fw(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ys.makeFromBucketSpec(this._url,t):this._bucket=fw(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){pw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){pw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const s=await t.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(ws(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Pu(this,t)}_makeRequest(t,s,a,i,c=!0){if(this._deleted)return new OM(x3());{const o=QM(t,this._appId,a,i,s,this._firebaseVersion,c);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,s){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,s,a,i).getPromise()}}const gw="@firebase/storage",yw="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="storage";function JM(r=nx(),t){r=tr(r);const a=Un(r,m3).getImmediate({identifier:t}),i=fk("storage");return i&&eO(a,...i),a}function eO(r,t,s,a={}){YM(r,t,s,a)}function tO(r,{instanceIdentifier:t}){const s=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new XM(s,a,i,t,Di)}function rO(){ta(new Bs(m3,tO,"PUBLIC").setMultipleInstances(!0)),fs(gw,yw,""),fs(gw,yw,"esm2017")}rO();const sO={apiKey:"AIzaSyCh4KyvqB6d_uBpvZ6unY6BSqBAPFGAov4",authDomain:"sz-streaming.firebaseapp.com",projectId:"sz-streaming",storageBucket:"sz-streaming.firebasestorage.app",messagingSenderId:"883785518084",appId:"1:883785518084:web:92cdd90812b5e200277951",measurementId:"G-1R5T5PGGG0"},dd=Tk(sO);d8(dd);const E=$A(dd);JM(dd);const Ge=Qg(dd),Kg=b.createContext({});function Zg(r){const t=b.useRef(null);return t.current===null&&(t.current=r()),t.current}const Yg=typeof window<"u",h3=Yg?b.useLayoutEffect:b.useEffect,Dx=b.createContext(null);function Xg(r,t){r.indexOf(t)===-1&&r.push(t)}function Jg(r,t){const s=r.indexOf(t);s>-1&&r.splice(s,1)}const Wa=(r,t,s)=>s>t?t:s<r?r:s;let ey=()=>{};const qa={},p3=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function f3(r){return typeof r=="object"&&r!==null}const g3=r=>/^0[^.\s]+$/u.test(r);function ty(r){let t;return()=>(t===void 0&&(t=r()),t)}const Ls=r=>r,aO=(r,t)=>s=>t(r(s)),ud=(...r)=>r.reduce(aO),$c=(r,t,s)=>{const a=t-r;return a===0?1:(s-r)/a};class ry{constructor(){this.subscriptions=[]}add(t){return Xg(this.subscriptions,t),()=>Jg(this.subscriptions,t)}notify(t,s,a){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,s,a);else for(let c=0;c<i;c++){const o=this.subscriptions[c];o&&o(t,s,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pa=r=>r*1e3,fa=r=>r/1e3;function y3(r,t){return t?r*(1e3/t):0}const b3=(r,t,s)=>(((1-3*s+3*t)*r+(3*s-6*t))*r+3*t)*r,nO=1e-7,iO=12;function oO(r,t,s,a,i){let c,o,d=0;do o=t+(s-t)/2,c=b3(o,a,i)-r,c>0?s=o:t=o;while(Math.abs(c)>nO&&++d<iO);return o}function xd(r,t,s,a){if(r===t&&s===a)return Ls;const i=c=>oO(c,0,1,r,s);return c=>c===0||c===1?c:b3(i(c),t,a)}const v3=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,j3=r=>t=>1-r(1-t),w3=xd(.33,1.53,.69,.99),sy=j3(w3),N3=v3(sy),k3=r=>(r*=2)<1?.5*sy(r):.5*(2-Math.pow(2,-10*(r-1))),ay=r=>1-Math.sin(Math.acos(r)),S3=j3(ay),T3=v3(ay),lO=xd(.42,0,1,1),cO=xd(0,0,.58,1),I3=xd(.42,0,.58,1),dO=r=>Array.isArray(r)&&typeof r[0]!="number",P3=r=>Array.isArray(r)&&typeof r[0]=="number",uO={linear:Ls,easeIn:lO,easeInOut:I3,easeOut:cO,circIn:ay,circInOut:T3,circOut:S3,backIn:sy,backInOut:N3,backOut:w3,anticipate:k3},xO=r=>typeof r=="string",bw=r=>{if(P3(r)){ey(r.length===4);const[t,s,a,i]=r;return xd(t,s,a,i)}else if(xO(r))return uO[r];return r},e0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],vw={value:null,addProjectionMetrics:null};function mO(r,t){let s=new Set,a=new Set,i=!1,c=!1;const o=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1},u=0;function m(k){o.has(k)&&(j.schedule(k),r()),u++,k(d)}const j={schedule:(k,T=!1,C=!1)=>{const L=C&&i?s:a;return T&&o.add(k),L.has(k)||L.add(k),k},cancel:k=>{a.delete(k),o.delete(k)},process:k=>{if(d=k,i){c=!0;return}i=!0,[s,a]=[a,s],s.forEach(m),t&&vw.value&&vw.value.frameloop[t].push(u),u=0,s.clear(),i=!1,c&&(c=!1,j.process(k))}};return j}const hO=40;function E3(r,t){let s=!1,a=!0;const i={delta:0,timestamp:0,isProcessing:!1},c=()=>s=!0,o=e0.reduce((z,re)=>(z[re]=mO(c,t?re:void 0),z),{}),{setup:d,read:u,resolveKeyframes:m,preUpdate:j,update:k,preRender:T,render:C,postRender:v}=o,L=()=>{const z=qa.useManualTiming?i.timestamp:performance.now();s=!1,qa.useManualTiming||(i.delta=a?1e3/60:Math.max(Math.min(z-i.timestamp,hO),1)),i.timestamp=z,i.isProcessing=!0,d.process(i),u.process(i),m.process(i),j.process(i),k.process(i),T.process(i),C.process(i),v.process(i),i.isProcessing=!1,s&&t&&(a=!1,r(L))},$=()=>{s=!0,a=!0,i.isProcessing||r(L)};return{schedule:e0.reduce((z,re)=>{const q=o[re];return z[re]=(Q,M=!1,x=!1)=>(s||$(),q.schedule(Q,M,x)),z},{}),cancel:z=>{for(let re=0;re<e0.length;re++)o[e0[re]].cancel(z)},state:i,steps:o}}const{schedule:or,cancel:On,state:Dr,steps:Mm}=E3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ls,!0);let E0;function pO(){E0=void 0}const xs={now:()=>(E0===void 0&&xs.set(Dr.isProcessing||qa.useManualTiming?Dr.timestamp:performance.now()),E0),set:r=>{E0=r,queueMicrotask(pO)}},C3=r=>t=>typeof t=="string"&&t.startsWith(r),ny=C3("--"),fO=C3("var(--"),iy=r=>fO(r)?gO.test(r.split("/*")[0].trim()):!1,gO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Jo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Ac={...Jo,transform:r=>Wa(0,1,r)},t0={...Jo,default:1},Xl=r=>Math.round(r*1e5)/1e5,oy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yO(r){return r==null}const bO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ly=(r,t)=>s=>!!(typeof s=="string"&&bO.test(s)&&s.startsWith(r)||t&&!yO(s)&&Object.prototype.hasOwnProperty.call(s,t)),D3=(r,t,s)=>a=>{if(typeof a!="string")return a;const[i,c,o,d]=a.match(oy);return{[r]:parseFloat(i),[t]:parseFloat(c),[s]:parseFloat(o),alpha:d!==void 0?parseFloat(d):1}},vO=r=>Wa(0,255,r),Om={...Jo,transform:r=>Math.round(vO(r))},li={test:ly("rgb","red"),parse:D3("red","green","blue"),transform:({red:r,green:t,blue:s,alpha:a=1})=>"rgba("+Om.transform(r)+", "+Om.transform(t)+", "+Om.transform(s)+", "+Xl(Ac.transform(a))+")"};function jO(r){let t="",s="",a="",i="";return r.length>5?(t=r.substring(1,3),s=r.substring(3,5),a=r.substring(5,7),i=r.substring(7,9)):(t=r.substring(1,2),s=r.substring(2,3),a=r.substring(3,4),i=r.substring(4,5),t+=t,s+=s,a+=a,i+=i),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:i?parseInt(i,16)/255:1}}const gp={test:ly("#"),parse:jO,transform:li.transform},md=r=>({test:t=>typeof t=="string"&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),tn=md("deg"),ga=md("%"),bt=md("px"),wO=md("vh"),NO=md("vw"),jw=(()=>({...ga,parse:r=>ga.parse(r)/100,transform:r=>ga.transform(r*100)}))(),lo={test:ly("hsl","hue"),parse:D3("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:s,alpha:a=1})=>"hsla("+Math.round(r)+", "+ga.transform(Xl(t))+", "+ga.transform(Xl(s))+", "+Xl(Ac.transform(a))+")"},Wr={test:r=>li.test(r)||gp.test(r)||lo.test(r),parse:r=>li.test(r)?li.parse(r):lo.test(r)?lo.parse(r):gp.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?li.transform(r):lo.transform(r)},kO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function SO(r){var t,s;return isNaN(r)&&typeof r=="string"&&(((t=r.match(oy))==null?void 0:t.length)||0)+(((s=r.match(kO))==null?void 0:s.length)||0)>0}const _3="number",$3="color",TO="var",IO="var(",ww="${}",PO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rc(r){const t=r.toString(),s=[],a={color:[],number:[],var:[]},i=[];let c=0;const d=t.replace(PO,u=>(Wr.test(u)?(a.color.push(c),i.push($3),s.push(Wr.parse(u))):u.startsWith(IO)?(a.var.push(c),i.push(TO),s.push(u)):(a.number.push(c),i.push(_3),s.push(parseFloat(u))),++c,ww)).split(ww);return{values:s,split:d,indexes:a,types:i}}function A3(r){return Rc(r).values}function R3(r){const{split:t,types:s}=Rc(r),a=t.length;return i=>{let c="";for(let o=0;o<a;o++)if(c+=t[o],i[o]!==void 0){const d=s[o];d===_3?c+=Xl(i[o]):d===$3?c+=Wr.transform(i[o]):c+=i[o]}return c}}const EO=r=>typeof r=="number"?0:r;function CO(r){const t=A3(r);return R3(r)(t.map(EO))}const Ln={test:SO,parse:A3,createTransformer:R3,getAnimatableNone:CO};function Lm(r,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?r+(t-r)*6*s:s<1/2?t:s<2/3?r+(t-r)*(2/3-s)*6:r}function DO({hue:r,saturation:t,lightness:s,alpha:a}){r/=360,t/=100,s/=100;let i=0,c=0,o=0;if(!t)i=c=o=s;else{const d=s<.5?s*(1+t):s+t-s*t,u=2*s-d;i=Lm(u,d,r+1/3),c=Lm(u,d,r),o=Lm(u,d,r-1/3)}return{red:Math.round(i*255),green:Math.round(c*255),blue:Math.round(o*255),alpha:a}}function Eu(r,t){return s=>s>0?t:r}const ar=(r,t,s)=>r+(t-r)*s,Vm=(r,t,s)=>{const a=r*r,i=s*(t*t-a)+a;return i<0?0:Math.sqrt(i)},_O=[gp,li,lo],$O=r=>_O.find(t=>t.test(r));function Nw(r){const t=$O(r);if(!t)return!1;let s=t.parse(r);return t===lo&&(s=DO(s)),s}const kw=(r,t)=>{const s=Nw(r),a=Nw(t);if(!s||!a)return Eu(r,t);const i={...s};return c=>(i.red=Vm(s.red,a.red,c),i.green=Vm(s.green,a.green,c),i.blue=Vm(s.blue,a.blue,c),i.alpha=ar(s.alpha,a.alpha,c),li.transform(i))},yp=new Set(["none","hidden"]);function AO(r,t){return yp.has(r)?s=>s<=0?r:t:s=>s>=1?t:r}function RO(r,t){return s=>ar(r,t,s)}function cy(r){return typeof r=="number"?RO:typeof r=="string"?iy(r)?Eu:Wr.test(r)?kw:LO:Array.isArray(r)?M3:typeof r=="object"?Wr.test(r)?kw:MO:Eu}function M3(r,t){const s=[...r],a=s.length,i=r.map((c,o)=>cy(c)(c,t[o]));return c=>{for(let o=0;o<a;o++)s[o]=i[o](c);return s}}function MO(r,t){const s={...r,...t},a={};for(const i in s)r[i]!==void 0&&t[i]!==void 0&&(a[i]=cy(r[i])(r[i],t[i]));return i=>{for(const c in a)s[c]=a[c](i);return s}}function OO(r,t){const s=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const c=t.types[i],o=r.indexes[c][a[c]],d=r.values[o]??0;s[i]=d,a[c]++}return s}const LO=(r,t)=>{const s=Ln.createTransformer(t),a=Rc(r),i=Rc(t);return a.indexes.var.length===i.indexes.var.length&&a.indexes.color.length===i.indexes.color.length&&a.indexes.number.length>=i.indexes.number.length?yp.has(r)&&!i.values.length||yp.has(t)&&!a.values.length?AO(r,t):ud(M3(OO(a,i),i.values),s):Eu(r,t)};function O3(r,t,s){return typeof r=="number"&&typeof t=="number"&&typeof s=="number"?ar(r,t,s):cy(r)(r,t)}const VO=r=>{const t=({timestamp:s})=>r(s);return{start:(s=!0)=>or.update(t,s),stop:()=>On(t),now:()=>Dr.isProcessing?Dr.timestamp:xs.now()}},L3=(r,t,s=10)=>{let a="";const i=Math.max(Math.round(t/s),2);for(let c=0;c<i;c++)a+=r(c/(i-1))+", ";return`linear(${a.substring(0,a.length-2)})`},Cu=2e4;function dy(r){let t=0;const s=50;let a=r.next(t);for(;!a.done&&t<Cu;)t+=s,a=r.next(t);return t>=Cu?1/0:t}function zO(r,t=100,s){const a=s({...r,keyframes:[0,t]}),i=Math.min(dy(a),Cu);return{type:"keyframes",ease:c=>a.next(i*c).value/t,duration:fa(i)}}const BO=5;function V3(r,t,s){const a=Math.max(t-BO,0);return y3(s-r(a),t-a)}const xr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zm=.001;function UO({duration:r=xr.duration,bounce:t=xr.bounce,velocity:s=xr.velocity,mass:a=xr.mass}){let i,c,o=1-t;o=Wa(xr.minDamping,xr.maxDamping,o),r=Wa(xr.minDuration,xr.maxDuration,fa(r)),o<1?(i=m=>{const j=m*o,k=j*r,T=j-s,C=bp(m,o),v=Math.exp(-k);return zm-T/C*v},c=m=>{const k=m*o*r,T=k*s+s,C=Math.pow(o,2)*Math.pow(m,2)*r,v=Math.exp(-k),L=bp(Math.pow(m,2),o);return(-i(m)+zm>0?-1:1)*((T-C)*v)/L}):(i=m=>{const j=Math.exp(-m*r),k=(m-s)*r+1;return-zm+j*k},c=m=>{const j=Math.exp(-m*r),k=(s-m)*(r*r);return j*k});const d=5/r,u=HO(i,c,d);if(r=pa(r),isNaN(u))return{stiffness:xr.stiffness,damping:xr.damping,duration:r};{const m=Math.pow(u,2)*a;return{stiffness:m,damping:o*2*Math.sqrt(a*m),duration:r}}}const FO=12;function HO(r,t,s){let a=s;for(let i=1;i<FO;i++)a=a-r(a)/t(a);return a}function bp(r,t){return r*Math.sqrt(1-t*t)}const WO=["duration","bounce"],qO=["stiffness","damping","mass"];function Sw(r,t){return t.some(s=>r[s]!==void 0)}function GO(r){let t={velocity:xr.velocity,stiffness:xr.stiffness,damping:xr.damping,mass:xr.mass,isResolvedFromDuration:!1,...r};if(!Sw(r,qO)&&Sw(r,WO))if(r.visualDuration){const s=r.visualDuration,a=2*Math.PI/(s*1.2),i=a*a,c=2*Wa(.05,1,1-(r.bounce||0))*Math.sqrt(i);t={...t,mass:xr.mass,stiffness:i,damping:c}}else{const s=UO(r);t={...t,...s,mass:xr.mass},t.isResolvedFromDuration=!0}return t}function Du(r=xr.visualDuration,t=xr.bounce){const s=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:t}:r;let{restSpeed:a,restDelta:i}=s;const c=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],d={done:!1,value:c},{stiffness:u,damping:m,mass:j,duration:k,velocity:T,isResolvedFromDuration:C}=GO({...s,velocity:-fa(s.velocity||0)}),v=T||0,L=m/(2*Math.sqrt(u*j)),$=o-c,R=fa(Math.sqrt(u/j)),V=Math.abs($)<5;a||(a=V?xr.restSpeed.granular:xr.restSpeed.default),i||(i=V?xr.restDelta.granular:xr.restDelta.default);let z;if(L<1){const q=bp(R,L);z=Q=>{const M=Math.exp(-L*R*Q);return o-M*((v+L*R*$)/q*Math.sin(q*Q)+$*Math.cos(q*Q))}}else if(L===1)z=q=>o-Math.exp(-R*q)*($+(v+R*$)*q);else{const q=R*Math.sqrt(L*L-1);z=Q=>{const M=Math.exp(-L*R*Q),x=Math.min(q*Q,300);return o-M*((v+L*R*$)*Math.sinh(x)+q*$*Math.cosh(x))/q}}const re={calculatedDuration:C&&k||null,next:q=>{const Q=z(q);if(C)d.done=q>=k;else{let M=q===0?v:0;L<1&&(M=q===0?pa(v):V3(z,q,Q));const x=Math.abs(M)<=a,W=Math.abs(o-Q)<=i;d.done=x&&W}return d.value=d.done?o:Q,d},toString:()=>{const q=Math.min(dy(re),Cu),Q=L3(M=>re.next(q*M).value,q,30);return q+"ms "+Q},toTransition:()=>{}};return re}Du.applyToOptions=r=>{const t=zO(r,100,Du);return r.ease=t.ease,r.duration=pa(t.duration),r.type="keyframes",r};function vp({keyframes:r,velocity:t=0,power:s=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:c=500,modifyTarget:o,min:d,max:u,restDelta:m=.5,restSpeed:j}){const k=r[0],T={done:!1,value:k},C=x=>d!==void 0&&x<d||u!==void 0&&x>u,v=x=>d===void 0?u:u===void 0||Math.abs(d-x)<Math.abs(u-x)?d:u;let L=s*t;const $=k+L,R=o===void 0?$:o($);R!==$&&(L=R-k);const V=x=>-L*Math.exp(-x/a),z=x=>R+V(x),re=x=>{const W=V(x),U=z(x);T.done=Math.abs(W)<=m,T.value=T.done?R:U};let q,Q;const M=x=>{C(T.value)&&(q=x,Q=Du({keyframes:[T.value,v(T.value)],velocity:V3(z,x,T.value),damping:i,stiffness:c,restDelta:m,restSpeed:j}))};return M(0),{calculatedDuration:null,next:x=>{let W=!1;return!Q&&q===void 0&&(W=!0,re(x),M(x)),q!==void 0&&x>=q?Q.next(x-q):(!W&&re(x),T)}}}function QO(r,t,s){const a=[],i=s||qa.mix||O3,c=r.length-1;for(let o=0;o<c;o++){let d=i(r[o],r[o+1]);if(t){const u=Array.isArray(t)?t[o]||Ls:t;d=ud(u,d)}a.push(d)}return a}function KO(r,t,{clamp:s=!0,ease:a,mixer:i}={}){const c=r.length;if(ey(c===t.length),c===1)return()=>t[0];if(c===2&&t[0]===t[1])return()=>t[1];const o=r[0]===r[1];r[0]>r[c-1]&&(r=[...r].reverse(),t=[...t].reverse());const d=QO(t,a,i),u=d.length,m=j=>{if(o&&j<r[0])return t[0];let k=0;if(u>1)for(;k<r.length-2&&!(j<r[k+1]);k++);const T=$c(r[k],r[k+1],j);return d[k](T)};return s?j=>m(Wa(r[0],r[c-1],j)):m}function ZO(r,t){const s=r[r.length-1];for(let a=1;a<=t;a++){const i=$c(0,t,a);r.push(ar(s,1,i))}}function YO(r){const t=[0];return ZO(t,r.length-1),t}function XO(r,t){return r.map(s=>s*t)}function JO(r,t){return r.map(()=>t||I3).splice(0,r.length-1)}function Jl({duration:r=300,keyframes:t,times:s,ease:a="easeInOut"}){const i=dO(a)?a.map(bw):bw(a),c={done:!1,value:t[0]},o=XO(s&&s.length===t.length?s:YO(t),r),d=KO(o,t,{ease:Array.isArray(i)?i:JO(t,i)});return{calculatedDuration:r,next:u=>(c.value=d(u),c.done=u>=r,c)}}const eL=r=>r!==null;function uy(r,{repeat:t,repeatType:s="loop"},a,i=1){const c=r.filter(eL),d=i<0||t&&s!=="loop"&&t%2===1?0:c.length-1;return!d||a===void 0?c[d]:a}const tL={decay:vp,inertia:vp,tween:Jl,keyframes:Jl,spring:Du};function z3(r){typeof r.type=="string"&&(r.type=tL[r.type])}class xy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const rL=r=>r/100;class my extends xy{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(s=!0)=>{var a,i;if(s){const{motionValue:c}=this.options;c&&c.updatedAt!==xs.now()&&this.tick(xs.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(a=this.options).onStop)==null||i.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;z3(t);const{type:s=Jl,repeat:a=0,repeatDelay:i=0,repeatType:c,velocity:o=0}=t;let{keyframes:d}=t;const u=s||Jl;u!==Jl&&typeof d[0]!="number"&&(this.mixKeyframes=ud(rL,O3(d[0],d[1])),d=[0,100]);const m=u({...t,keyframes:d});c==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...d].reverse(),velocity:-o})),m.calculatedDuration===null&&(m.calculatedDuration=dy(m));const{calculatedDuration:j}=m;this.calculatedDuration=j,this.resolvedDuration=j+i,this.totalDuration=this.resolvedDuration*(a+1)-i,this.generator=m}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:a,totalDuration:i,mixKeyframes:c,mirroredGenerator:o,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return a.next(0);const{delay:m=0,keyframes:j,repeat:k,repeatType:T,repeatDelay:C,type:v,onUpdate:L,finalKeyframe:$}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const R=this.currentTime-m*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?R<0:R>i;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let z=this.currentTime,re=a;if(k){const x=Math.min(this.currentTime,i)/d;let W=Math.floor(x),U=x%1;!U&&x>=1&&(U=1),U===1&&W--,W=Math.min(W,k+1),!!(W%2)&&(T==="reverse"?(U=1-U,C&&(U-=C/d)):T==="mirror"&&(re=o)),z=Wa(0,1,U)*d}const q=V?{done:!1,value:j[0]}:re.next(z);c&&(q.value=c(q.value));let{done:Q}=q;!V&&u!==null&&(Q=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Q);return M&&v!==vp&&(q.value=uy(j,this.options,$,this.speed)),L&&L(q.value),M&&this.finish(),q}then(t,s){return this.finished.then(t,s)}get duration(){return fa(this.calculatedDuration)}get time(){return fa(this.currentTime)}set time(t){var s;t=pa(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(xs.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=fa(this.currentTime))}play(){var i,c;if(this.isStopped)return;const{driver:t=VO,startTime:s}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(c=(i=this.options).onPlay)==null||c.call(i);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=s??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(xs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function sL(r){for(let t=1;t<r.length;t++)r[t]??(r[t]=r[t-1])}const ci=r=>r*180/Math.PI,jp=r=>{const t=ci(Math.atan2(r[1],r[0]));return wp(t)},aL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:jp,rotateZ:jp,skewX:r=>ci(Math.atan(r[1])),skewY:r=>ci(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},wp=r=>(r=r%360,r<0&&(r+=360),r),Tw=jp,Iw=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),Pw=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),nL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Iw,scaleY:Pw,scale:r=>(Iw(r)+Pw(r))/2,rotateX:r=>wp(ci(Math.atan2(r[6],r[5]))),rotateY:r=>wp(ci(Math.atan2(-r[2],r[0]))),rotateZ:Tw,rotate:Tw,skewX:r=>ci(Math.atan(r[4])),skewY:r=>ci(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Np(r){return r.includes("scale")?1:0}function kp(r,t){if(!r||r==="none")return Np(t);const s=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,i;if(s)a=nL,i=s;else{const d=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=aL,i=d}if(!i)return Np(t);const c=a[t],o=i[1].split(",").map(oL);return typeof c=="function"?c(o):o[c]}const iL=(r,t)=>{const{transform:s="none"}=getComputedStyle(r);return kp(s,t)};function oL(r){return parseFloat(r.trim())}const el=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tl=(()=>new Set(el))(),Ew=r=>r===Jo||r===bt,lL=new Set(["x","y","z"]),cL=el.filter(r=>!lL.has(r));function dL(r){const t=[];return cL.forEach(s=>{const a=r.getValue(s);a!==void 0&&(t.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),t}const mi={width:({x:r},{paddingLeft:t="0",paddingRight:s="0"})=>r.max-r.min-parseFloat(t)-parseFloat(s),height:({y:r},{paddingTop:t="0",paddingBottom:s="0"})=>r.max-r.min-parseFloat(t)-parseFloat(s),top:(r,{top:t})=>parseFloat(t),left:(r,{left:t})=>parseFloat(t),bottom:({y:r},{top:t})=>parseFloat(t)+(r.max-r.min),right:({x:r},{left:t})=>parseFloat(t)+(r.max-r.min),x:(r,{transform:t})=>kp(t,"x"),y:(r,{transform:t})=>kp(t,"y")};mi.translateX=mi.x;mi.translateY=mi.y;const hi=new Set;let Sp=!1,Tp=!1,Ip=!1;function B3(){if(Tp){const r=Array.from(hi).filter(a=>a.needsMeasurement),t=new Set(r.map(a=>a.element)),s=new Map;t.forEach(a=>{const i=dL(a);i.length&&(s.set(a,i),a.render())}),r.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const i=s.get(a);i&&i.forEach(([c,o])=>{var d;(d=a.getValue(c))==null||d.set(o)})}),r.forEach(a=>a.measureEndState()),r.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Tp=!1,Sp=!1,hi.forEach(r=>r.complete(Ip)),hi.clear()}function U3(){hi.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Tp=!0)})}function uL(){Ip=!0,U3(),B3(),Ip=!1}class hy{constructor(t,s,a,i,c,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=a,this.motionValue=i,this.element=c,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(hi.add(this),Sp||(Sp=!0,or.read(U3),or.resolveKeyframes(B3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:a,motionValue:i}=this;if(t[0]===null){const c=i==null?void 0:i.get(),o=t[t.length-1];if(c!==void 0)t[0]=c;else if(a&&s){const d=a.readValue(s,o);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=o),i&&c===void 0&&i.set(t[0])}sL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),hi.delete(this)}cancel(){this.state==="scheduled"&&(hi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xL=r=>r.startsWith("--");function mL(r,t,s){xL(t)?r.style.setProperty(t,s):r.style[t]=s}const hL=ty(()=>window.ScrollTimeline!==void 0),pL={};function fL(r,t){const s=ty(r);return()=>pL[t]??s()}const F3=fL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$l=([r,t,s,a])=>`cubic-bezier(${r}, ${t}, ${s}, ${a})`,Cw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$l([0,.65,.55,1]),circOut:$l([.55,0,1,.45]),backIn:$l([.31,.01,.66,-.59]),backOut:$l([.33,1.53,.69,.99])};function H3(r,t){if(r)return typeof r=="function"?F3()?L3(r,t):"ease-out":P3(r)?$l(r):Array.isArray(r)?r.map(s=>H3(s,t)||Cw.easeOut):Cw[r]}function gL(r,t,s,{delay:a=0,duration:i=300,repeat:c=0,repeatType:o="loop",ease:d="easeOut",times:u}={},m=void 0){const j={[t]:s};u&&(j.offset=u);const k=H3(d,i);Array.isArray(k)&&(j.easing=k);const T={delay:a,duration:i,easing:Array.isArray(k)?"linear":k,fill:"both",iterations:c+1,direction:o==="reverse"?"alternate":"normal"};return m&&(T.pseudoElement=m),r.animate(j,T)}function W3(r){return typeof r=="function"&&"applyToOptions"in r}function yL({type:r,...t}){return W3(r)&&F3()?r.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class bL extends xy{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:a,keyframes:i,pseudoElement:c,allowFlatten:o=!1,finalKeyframe:d,onComplete:u}=t;this.isPseudoElement=!!c,this.allowFlatten=o,this.options=t,ey(typeof t.type!="string");const m=yL(t);this.animation=gL(s,a,i,m,c),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const j=uy(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(j):mL(s,a,j),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,a;const t=((a=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:a.call(s).duration)||0;return fa(Number(t))}get time(){return fa(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=pa(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&hL()?(this.animation.timeline=t,Ls):s(this)}}const q3={anticipate:k3,backInOut:N3,circInOut:T3};function vL(r){return r in q3}function jL(r){typeof r.ease=="string"&&vL(r.ease)&&(r.ease=q3[r.ease])}const Dw=10;class wL extends bL{constructor(t){jL(t),z3(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:a,onComplete:i,element:c,...o}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const d=new my({...o,autoplay:!1}),u=pa(this.finishedTime??this.time);s.setWithVelocity(d.sample(u-Dw).value,d.sample(u).value,Dw),d.stop()}}const _w=(r,t)=>t==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Ln.test(r)||r==="0")&&!r.startsWith("url("));function NL(r){const t=r[0];if(r.length===1)return!0;for(let s=0;s<r.length;s++)if(r[s]!==t)return!0}function kL(r,t,s,a){const i=r[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const c=r[r.length-1],o=_w(i,t),d=_w(c,t);return!o||!d?!1:NL(r)||(s==="spring"||W3(s))&&a}function py(r){return f3(r)&&"offsetHeight"in r}const SL=new Set(["opacity","clipPath","filter","transform"]),TL=ty(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function IL(r){var m;const{motionValue:t,name:s,repeatDelay:a,repeatType:i,damping:c,type:o}=r;if(!py((m=t==null?void 0:t.owner)==null?void 0:m.current))return!1;const{onUpdate:d,transformTemplate:u}=t.owner.getProps();return TL()&&s&&SL.has(s)&&(s!=="transform"||!u)&&!d&&!a&&i!=="mirror"&&c!==0&&o!=="inertia"}const PL=40;class EL extends xy{constructor({autoplay:t=!0,delay:s=0,type:a="keyframes",repeat:i=0,repeatDelay:c=0,repeatType:o="loop",keyframes:d,name:u,motionValue:m,element:j,...k}){var v;super(),this.stop=()=>{var L,$;this._animation&&(this._animation.stop(),(L=this.stopTimeline)==null||L.call(this)),($=this.keyframeResolver)==null||$.cancel()},this.createdAt=xs.now();const T={autoplay:t,delay:s,type:a,repeat:i,repeatDelay:c,repeatType:o,name:u,motionValue:m,element:j,...k},C=(j==null?void 0:j.KeyframeResolver)||hy;this.keyframeResolver=new C(d,(L,$,R)=>this.onKeyframesResolved(L,$,T,!R),u,m,j),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,s,a,i){this.keyframeResolver=void 0;const{name:c,type:o,velocity:d,delay:u,isHandoff:m,onUpdate:j}=a;this.resolvedAt=xs.now(),kL(t,c,o,d)||((qa.instantAnimations||!u)&&(j==null||j(uy(t,a,s))),t[0]=t[t.length-1],a.duration=0,a.repeat=0);const T={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>PL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...a,keyframes:t},C=!m&&IL(T)?new wL({...T,element:T.motionValue.owner.current}):new my(T);C.finished.then(()=>this.notifyFinished()).catch(Ls),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),uL()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const CL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function DL(r){const t=CL.exec(r);if(!t)return[,];const[,s,a,i]=t;return[`--${s??a}`,i]}function G3(r,t,s=1){const[a,i]=DL(r);if(!a)return;const c=window.getComputedStyle(t).getPropertyValue(a);if(c){const o=c.trim();return p3(o)?parseFloat(o):o}return iy(i)?G3(i,t,s+1):i}function fy(r,t){return(r==null?void 0:r[t])??(r==null?void 0:r.default)??r}const Q3=new Set(["width","height","top","left","right","bottom",...el]),_L={test:r=>r==="auto",parse:r=>r},K3=r=>t=>t.test(r),Z3=[Jo,bt,ga,tn,NO,wO,_L],$w=r=>Z3.find(K3(r));function $L(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||g3(r):!0}const AL=new Set(["brightness","contrast","saturate","opacity"]);function RL(r){const[t,s]=r.slice(0,-1).split("(");if(t==="drop-shadow")return r;const[a]=s.match(oy)||[];if(!a)return r;const i=s.replace(a,"");let c=AL.has(t)?1:0;return a!==s&&(c*=100),t+"("+c+i+")"}const ML=/\b([a-z-]*)\(.*?\)/gu,Pp={...Ln,getAnimatableNone:r=>{const t=r.match(ML);return t?t.map(RL).join(" "):r}},Aw={...Jo,transform:Math.round},OL={rotate:tn,rotateX:tn,rotateY:tn,rotateZ:tn,scale:t0,scaleX:t0,scaleY:t0,scaleZ:t0,skew:tn,skewX:tn,skewY:tn,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Ac,originX:jw,originY:jw,originZ:bt},gy={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...OL,zIndex:Aw,fillOpacity:Ac,strokeOpacity:Ac,numOctaves:Aw},LL={...gy,color:Wr,backgroundColor:Wr,outlineColor:Wr,fill:Wr,stroke:Wr,borderColor:Wr,borderTopColor:Wr,borderRightColor:Wr,borderBottomColor:Wr,borderLeftColor:Wr,filter:Pp,WebkitFilter:Pp},Y3=r=>LL[r];function X3(r,t){let s=Y3(r);return s!==Pp&&(s=Ln),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const VL=new Set(["auto","none","0"]);function zL(r,t,s){let a=0,i;for(;a<r.length&&!i;){const c=r[a];typeof c=="string"&&!VL.has(c)&&Rc(c).values.length&&(i=r[a]),a++}if(i&&s)for(const c of t)r[c]=X3(s,i)}class BL extends hy{constructor(t,s,a,i,c){super(t,s,a,i,c,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:a}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let m=t[u];if(typeof m=="string"&&(m=m.trim(),iy(m))){const j=G3(m,s.current);j!==void 0&&(t[u]=j),u===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!Q3.has(a)||t.length!==2)return;const[i,c]=t,o=$w(i),d=$w(c);if(o!==d)if(Ew(o)&&Ew(d))for(let u=0;u<t.length;u++){const m=t[u];typeof m=="string"&&(t[u]=parseFloat(m))}else mi[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,a=[];for(let i=0;i<t.length;i++)(t[i]===null||$L(t[i]))&&a.push(i);a.length&&zL(t,a,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mi[a](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&t.getValue(a,i).jump(i,!1)}measureEndState(){var d;const{element:t,name:s,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const i=t.getValue(s);i&&i.jump(this.measuredOrigin,!1);const c=a.length-1,o=a[c];a[c]=mi[s](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([u,m])=>{t.getValue(u).set(m)}),this.resolveNoneKeyframes()}}function UL(r,t,s){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let a=document;t&&(a=t.current);const i=(s==null?void 0:s[r])??a.querySelectorAll(r);return i?Array.from(i):[]}return Array.from(r)}const Rw=30,FL=r=>!isNaN(parseFloat(r));class HL{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,i=!0)=>{var o,d;const c=xs.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();i&&((d=this.events.renderRequest)==null||d.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=xs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=FL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new ry);const a=this.events[t].add(s);return t==="change"?()=>{a(),or.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,a){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=xs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Rw)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Rw);return y3(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lo(r,t){return new HL(r,t)}const J3=(r,t)=>t&&typeof r=="number"?t.transform(r):r,{schedule:yy,cancel:pH}=E3(queueMicrotask,!1),qs={x:!1,y:!1};function e4(){return qs.x||qs.y}function WL(r){return r==="x"||r==="y"?qs[r]?null:(qs[r]=!0,()=>{qs[r]=!1}):qs.x||qs.y?null:(qs.x=qs.y=!0,()=>{qs.x=qs.y=!1})}function t4(r,t){const s=UL(r),a=new AbortController,i={passive:!0,...t,signal:a.signal};return[s,i,()=>a.abort()]}function Mw(r){return!(r.pointerType==="touch"||e4())}function qL(r,t,s={}){const[a,i,c]=t4(r,s),o=d=>{if(!Mw(d))return;const{target:u}=d,m=t(u,d);if(typeof m!="function"||!u)return;const j=k=>{Mw(k)&&(m(k),u.removeEventListener("pointerleave",j))};u.addEventListener("pointerleave",j,i)};return a.forEach(d=>{d.addEventListener("pointerenter",o,i)}),c}const r4=(r,t)=>t?r===t?!0:r4(r,t.parentElement):!1,by=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,GL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QL(r){return GL.has(r.tagName)||r.tabIndex!==-1}const C0=new WeakSet;function Ow(r){return t=>{t.key==="Enter"&&r(t)}}function Bm(r,t){r.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const KL=(r,t)=>{const s=r.currentTarget;if(!s)return;const a=Ow(()=>{if(C0.has(s))return;Bm(s,"down");const i=Ow(()=>{Bm(s,"up")}),c=()=>Bm(s,"cancel");s.addEventListener("keyup",i,t),s.addEventListener("blur",c,t)});s.addEventListener("keydown",a,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",a),t)};function Lw(r){return by(r)&&!e4()}function ZL(r,t,s={}){const[a,i,c]=t4(r,s),o=d=>{const u=d.currentTarget;if(!Lw(d))return;C0.add(u);const m=t(u,d),j=(C,v)=>{window.removeEventListener("pointerup",k),window.removeEventListener("pointercancel",T),C0.has(u)&&C0.delete(u),Lw(C)&&typeof m=="function"&&m(C,{success:v})},k=C=>{j(C,u===window||u===document||s.useGlobalTarget||r4(u,C.target))},T=C=>{j(C,!1)};window.addEventListener("pointerup",k,i),window.addEventListener("pointercancel",T,i)};return a.forEach(d=>{(s.useGlobalTarget?window:d).addEventListener("pointerdown",o,i),py(d)&&(d.addEventListener("focus",m=>KL(m,i)),!QL(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),c}function s4(r){return f3(r)&&"ownerSVGElement"in r}function YL(r){return s4(r)&&r.tagName==="svg"}const Qr=r=>!!(r&&r.getVelocity),XL=[...Z3,Wr,Ln],JL=r=>XL.find(K3(r)),vy=b.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class e7 extends b.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const a=s.offsetParent,i=py(a)&&a.offsetWidth||0,c=this.props.sizeRef.current;c.height=s.offsetHeight||0,c.width=s.offsetWidth||0,c.top=s.offsetTop,c.left=s.offsetLeft,c.right=i-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function t7({children:r,isPresent:t,anchorX:s}){const a=b.useId(),i=b.useRef(null),c=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=b.useContext(vy);return b.useInsertionEffect(()=>{const{width:d,height:u,top:m,left:j,right:k}=c.current;if(t||!i.current||!d||!u)return;const T=s==="left"?`left: ${j}`:`right: ${k}`;i.current.dataset.motionPopId=a;const C=document.createElement("style");return o&&(C.nonce=o),document.head.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${u}px !important;
            ${T}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.contains(C)&&document.head.removeChild(C)}},[t]),e.jsx(e7,{isPresent:t,childRef:i,sizeRef:c,children:b.cloneElement(r,{ref:i})})}const r7=({children:r,initial:t,isPresent:s,onExitComplete:a,custom:i,presenceAffectsLayout:c,mode:o,anchorX:d})=>{const u=Zg(s7),m=b.useId();let j=!0,k=b.useMemo(()=>(j=!1,{id:m,initial:t,isPresent:s,custom:i,onExitComplete:T=>{u.set(T,!0);for(const C of u.values())if(!C)return;a&&a()},register:T=>(u.set(T,!1),()=>u.delete(T))}),[s,u,a]);return c&&j&&(k={...k}),b.useMemo(()=>{u.forEach((T,C)=>u.set(C,!1))},[s]),b.useEffect(()=>{!s&&!u.size&&a&&a()},[s]),o==="popLayout"&&(r=e.jsx(t7,{isPresent:s,anchorX:d,children:r})),e.jsx(Dx.Provider,{value:k,children:r})};function s7(){return new Map}function a4(r=!0){const t=b.useContext(Dx);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:a,register:i}=t,c=b.useId();b.useEffect(()=>{if(r)return i(c)},[r]);const o=b.useCallback(()=>r&&a&&a(c),[c,a,r]);return!s&&a?[!1,o]:[!0]}const r0=r=>r.key||"";function Vw(r){const t=[];return b.Children.forEach(r,s=>{b.isValidElement(s)&&t.push(s)}),t}const jy=({children:r,custom:t,initial:s=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:c="sync",propagate:o=!1,anchorX:d="left"})=>{const[u,m]=a4(o),j=b.useMemo(()=>Vw(r),[r]),k=o&&!u?[]:j.map(r0),T=b.useRef(!0),C=b.useRef(j),v=Zg(()=>new Map),[L,$]=b.useState(j),[R,V]=b.useState(j);h3(()=>{T.current=!1,C.current=j;for(let q=0;q<R.length;q++){const Q=r0(R[q]);k.includes(Q)?v.delete(Q):v.get(Q)!==!0&&v.set(Q,!1)}},[R,k.length,k.join("-")]);const z=[];if(j!==L){let q=[...j];for(let Q=0;Q<R.length;Q++){const M=R[Q],x=r0(M);k.includes(x)||(q.splice(Q,0,M),z.push(M))}return c==="wait"&&z.length&&(q=z),V(Vw(q)),$(j),null}const{forceRender:re}=b.useContext(Kg);return e.jsx(e.Fragment,{children:R.map(q=>{const Q=r0(q),M=o&&!u?!1:j===R||k.includes(Q),x=()=>{if(v.has(Q))v.set(Q,!0);else return;let W=!0;v.forEach(U=>{U||(W=!1)}),W&&(re==null||re(),V(C.current),o&&(m==null||m()),a&&a())};return e.jsx(r7,{isPresent:M,initial:!T.current||s?void 0:!1,custom:t,presenceAffectsLayout:i,mode:c,onExitComplete:M?void 0:x,anchorX:d,children:q},Q)})})},n4=b.createContext({strict:!1}),zw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vo={};for(const r in zw)Vo[r]={isEnabled:t=>zw[r].some(s=>!!t[s])};function a7(r){for(const t in r)Vo[t]={...Vo[t],...r[t]}}const n7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _u(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||n7.has(r)}let i4=r=>!_u(r);function i7(r){r&&(i4=t=>t.startsWith("on")?!_u(t):r(t))}try{i7(require("@emotion/is-prop-valid").default)}catch{}function o7(r,t,s){const a={};for(const i in r)i==="values"&&typeof r.values=="object"||(i4(i)||s===!0&&_u(i)||!t&&!_u(i)||r.draggable&&i.startsWith("onDrag"))&&(a[i]=r[i]);return a}function l7(r){if(typeof Proxy>"u")return r;const t=new Map,s=(...a)=>r(...a);return new Proxy(s,{get:(a,i)=>i==="create"?r:(t.has(i)||t.set(i,r(i)),t.get(i))})}const _x=b.createContext({});function $x(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function Mc(r){return typeof r=="string"||Array.isArray(r)}const wy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ny=["initial",...wy];function Ax(r){return $x(r.animate)||Ny.some(t=>Mc(r[t]))}function o4(r){return!!(Ax(r)||r.variants)}function c7(r,t){if(Ax(r)){const{initial:s,animate:a}=r;return{initial:s===!1||Mc(s)?s:void 0,animate:Mc(a)?a:void 0}}return r.inherit!==!1?t:{}}function d7(r){const{initial:t,animate:s}=c7(r,b.useContext(_x));return b.useMemo(()=>({initial:t,animate:s}),[Bw(t),Bw(s)])}function Bw(r){return Array.isArray(r)?r.join(" "):r}const u7=Symbol.for("motionComponentSymbol");function co(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function x7(r,t,s){return b.useCallback(a=>{a&&r.onMount&&r.onMount(a),t&&(a?t.mount(a):t.unmount()),s&&(typeof s=="function"?s(a):co(s)&&(s.current=a))},[t])}const ky=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),m7="framerAppearId",l4="data-"+ky(m7),c4=b.createContext({});function h7(r,t,s,a,i){var L,$;const{visualElement:c}=b.useContext(_x),o=b.useContext(n4),d=b.useContext(Dx),u=b.useContext(vy).reducedMotion,m=b.useRef(null);a=a||o.renderer,!m.current&&a&&(m.current=a(r,{visualState:t,parent:c,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const j=m.current,k=b.useContext(c4);j&&!j.projection&&i&&(j.type==="html"||j.type==="svg")&&p7(m.current,s,i,k);const T=b.useRef(!1);b.useInsertionEffect(()=>{j&&T.current&&j.update(s,d)});const C=s[l4],v=b.useRef(!!C&&!((L=window.MotionHandoffIsComplete)!=null&&L.call(window,C))&&(($=window.MotionHasOptimisedAnimation)==null?void 0:$.call(window,C)));return h3(()=>{j&&(T.current=!0,window.MotionIsMounted=!0,j.updateFeatures(),yy.render(j.render),v.current&&j.animationState&&j.animationState.animateChanges())}),b.useEffect(()=>{j&&(!v.current&&j.animationState&&j.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,C)}),v.current=!1))}),j}function p7(r,t,s,a){const{layoutId:i,layout:c,drag:o,dragConstraints:d,layoutScroll:u,layoutRoot:m,layoutCrossfade:j}=t;r.projection=new s(r.latestValues,t["data-framer-portal-id"]?void 0:d4(r.parent)),r.projection.setOptions({layoutId:i,layout:c,alwaysMeasureLayout:!!o||d&&co(d),visualElement:r,animationType:typeof c=="string"?c:"both",initialPromotionConfig:a,crossfade:j,layoutScroll:u,layoutRoot:m})}function d4(r){if(r)return r.options.allowProjection!==!1?r.projection:d4(r.parent)}function f7({preloadedFeatures:r,createVisualElement:t,useRender:s,useVisualState:a,Component:i}){r&&a7(r);function c(d,u){let m;const j={...b.useContext(vy),...d,layoutId:g7(d)},{isStatic:k}=j,T=d7(d),C=a(d,k);if(!k&&Yg){y7();const v=b7(j);m=v.MeasureLayout,T.visualElement=h7(i,C,j,t,v.ProjectionNode)}return e.jsxs(_x.Provider,{value:T,children:[m&&T.visualElement?e.jsx(m,{visualElement:T.visualElement,...j}):null,s(i,d,x7(C,T.visualElement,u),C,k,T.visualElement)]})}c.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=b.forwardRef(c);return o[u7]=i,o}function g7({layoutId:r}){const t=b.useContext(Kg).id;return t&&r!==void 0?t+"-"+r:r}function y7(r,t){b.useContext(n4).strict}function b7(r){const{drag:t,layout:s}=Vo;if(!t&&!s)return{};const a={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(r)||s!=null&&s.isEnabled(r)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const Oc={};function v7(r){for(const t in r)Oc[t]=r[t],ny(t)&&(Oc[t].isCSSVariable=!0)}function u4(r,{layout:t,layoutId:s}){return tl.has(r)||r.startsWith("origin")||(t||s!==void 0)&&(!!Oc[r]||r==="opacity")}const j7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},w7=el.length;function N7(r,t,s){let a="",i=!0;for(let c=0;c<w7;c++){const o=el[c],d=r[o];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(o.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||s){const m=J3(d,gy[o]);if(!u){i=!1;const j=j7[o]||o;a+=`${j}(${m}) `}s&&(t[o]=m)}}return a=a.trim(),s?a=s(t,i?"":a):i&&(a="none"),a}function Sy(r,t,s){const{style:a,vars:i,transformOrigin:c}=r;let o=!1,d=!1;for(const u in t){const m=t[u];if(tl.has(u)){o=!0;continue}else if(ny(u)){i[u]=m;continue}else{const j=J3(m,gy[u]);u.startsWith("origin")?(d=!0,c[u]=j):a[u]=j}}if(t.transform||(o||s?a.transform=N7(t,r.transform,s):a.transform&&(a.transform="none")),d){const{originX:u="50%",originY:m="50%",originZ:j=0}=c;a.transformOrigin=`${u} ${m} ${j}`}}const Ty=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function x4(r,t,s){for(const a in t)!Qr(t[a])&&!u4(a,s)&&(r[a]=t[a])}function k7({transformTemplate:r},t){return b.useMemo(()=>{const s=Ty();return Sy(s,t,r),Object.assign({},s.vars,s.style)},[t])}function S7(r,t){const s=r.style||{},a={};return x4(a,s,r),Object.assign(a,k7(r,t)),a}function T7(r,t){const s={},a=S7(r,t);return r.drag&&r.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(s.tabIndex=0),s.style=a,s}const I7={offset:"stroke-dashoffset",array:"stroke-dasharray"},P7={offset:"strokeDashoffset",array:"strokeDasharray"};function E7(r,t,s=1,a=0,i=!0){r.pathLength=1;const c=i?I7:P7;r[c.offset]=bt.transform(-a);const o=bt.transform(t),d=bt.transform(s);r[c.array]=`${o} ${d}`}function m4(r,{attrX:t,attrY:s,attrScale:a,pathLength:i,pathSpacing:c=1,pathOffset:o=0,...d},u,m,j){if(Sy(r,d,m),u){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:k,style:T}=r;k.transform&&(T.transform=k.transform,delete k.transform),(T.transform||k.transformOrigin)&&(T.transformOrigin=k.transformOrigin??"50% 50%",delete k.transformOrigin),T.transform&&(T.transformBox=(j==null?void 0:j.transformBox)??"fill-box",delete k.transformBox),t!==void 0&&(k.x=t),s!==void 0&&(k.y=s),a!==void 0&&(k.scale=a),i!==void 0&&E7(k,i,c,o,!1)}const h4=()=>({...Ty(),attrs:{}}),p4=r=>typeof r=="string"&&r.toLowerCase()==="svg";function C7(r,t,s,a){const i=b.useMemo(()=>{const c=h4();return m4(c,t,p4(a),r.transformTemplate,r.style),{...c.attrs,style:{...c.style}}},[t]);if(r.style){const c={};x4(c,r.style,r),i.style={...c,...i.style}}return i}const D7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Iy(r){return typeof r!="string"||r.includes("-")?!1:!!(D7.indexOf(r)>-1||/[A-Z]/u.test(r))}function _7(r=!1){return(s,a,i,{latestValues:c},o)=>{const u=(Iy(s)?C7:T7)(a,c,o,s),m=o7(a,typeof s=="string",r),j=s!==b.Fragment?{...m,...u,ref:i}:{},{children:k}=a,T=b.useMemo(()=>Qr(k)?k.get():k,[k]);return b.createElement(s,{...j,children:T})}}function Uw(r){const t=[{},{}];return r==null||r.values.forEach((s,a)=>{t[0][a]=s.get(),t[1][a]=s.getVelocity()}),t}function Py(r,t,s,a){if(typeof t=="function"){const[i,c]=Uw(a);t=t(s!==void 0?s:r.custom,i,c)}if(typeof t=="string"&&(t=r.variants&&r.variants[t]),typeof t=="function"){const[i,c]=Uw(a);t=t(s!==void 0?s:r.custom,i,c)}return t}function D0(r){return Qr(r)?r.get():r}function $7({scrapeMotionValuesFromProps:r,createRenderState:t},s,a,i){return{latestValues:A7(s,a,i,r),renderState:t()}}const f4=r=>(t,s)=>{const a=b.useContext(_x),i=b.useContext(Dx),c=()=>$7(r,t,a,i);return s?c():Zg(c)};function A7(r,t,s,a){const i={},c=a(r,{});for(const T in c)i[T]=D0(c[T]);let{initial:o,animate:d}=r;const u=Ax(r),m=o4(r);t&&m&&!u&&r.inherit!==!1&&(o===void 0&&(o=t.initial),d===void 0&&(d=t.animate));let j=s?s.initial===!1:!1;j=j||o===!1;const k=j?d:o;if(k&&typeof k!="boolean"&&!$x(k)){const T=Array.isArray(k)?k:[k];for(let C=0;C<T.length;C++){const v=Py(r,T[C]);if(v){const{transitionEnd:L,transition:$,...R}=v;for(const V in R){let z=R[V];if(Array.isArray(z)){const re=j?z.length-1:0;z=z[re]}z!==null&&(i[V]=z)}for(const V in L)i[V]=L[V]}}}return i}function Ey(r,t,s){var c;const{style:a}=r,i={};for(const o in a)(Qr(a[o])||t.style&&Qr(t.style[o])||u4(o,r)||((c=s==null?void 0:s.getValue(o))==null?void 0:c.liveStyle)!==void 0)&&(i[o]=a[o]);return i}const R7={useVisualState:f4({scrapeMotionValuesFromProps:Ey,createRenderState:Ty})};function g4(r,t,s){const a=Ey(r,t,s);for(const i in r)if(Qr(r[i])||Qr(t[i])){const c=el.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;a[c]=r[i]}return a}const M7={useVisualState:f4({scrapeMotionValuesFromProps:g4,createRenderState:h4})};function O7(r,t){return function(a,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Iy(a)?M7:R7,preloadedFeatures:r,useRender:_7(i),createVisualElement:t,Component:a};return f7(o)}}function Lc(r,t,s){const a=r.getProps();return Py(a,t,s!==void 0?s:a.custom,r)}const Ep=r=>Array.isArray(r);function L7(r,t,s){r.hasValue(t)?r.getValue(t).set(s):r.addValue(t,Lo(s))}function V7(r){return Ep(r)?r[r.length-1]||0:r}function z7(r,t){const s=Lc(r,t);let{transitionEnd:a={},transition:i={},...c}=s||{};c={...c,...a};for(const o in c){const d=V7(c[o]);L7(r,o,d)}}function B7(r){return!!(Qr(r)&&r.add)}function Cp(r,t){const s=r.getValue("willChange");if(B7(s))return s.add(t);if(!s&&qa.WillChange){const a=new qa.WillChange("auto");r.addValue("willChange",a),a.add(t)}}function y4(r){return r.props[l4]}const U7=r=>r!==null;function F7(r,{repeat:t,repeatType:s="loop"},a){const i=r.filter(U7),c=t&&s!=="loop"&&t%2===1?0:i.length-1;return!c||a===void 0?i[c]:a}const H7={type:"spring",stiffness:500,damping:25,restSpeed:10},W7=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),q7={type:"keyframes",duration:.8},G7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Q7=(r,{keyframes:t})=>t.length>2?q7:tl.has(r)?r.startsWith("scale")?W7(t[1]):H7:G7;function K7({when:r,delay:t,delayChildren:s,staggerChildren:a,staggerDirection:i,repeat:c,repeatType:o,repeatDelay:d,from:u,elapsed:m,...j}){return!!Object.keys(j).length}const Cy=(r,t,s,a={},i,c)=>o=>{const d=fy(a,r)||{},u=d.delay||a.delay||0;let{elapsed:m=0}=a;m=m-pa(u);const j={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...d,delay:-m,onUpdate:T=>{t.set(T),d.onUpdate&&d.onUpdate(T)},onComplete:()=>{o(),d.onComplete&&d.onComplete()},name:r,motionValue:t,element:c?void 0:i};K7(d)||Object.assign(j,Q7(r,j)),j.duration&&(j.duration=pa(j.duration)),j.repeatDelay&&(j.repeatDelay=pa(j.repeatDelay)),j.from!==void 0&&(j.keyframes[0]=j.from);let k=!1;if((j.type===!1||j.duration===0&&!j.repeatDelay)&&(j.duration=0,j.delay===0&&(k=!0)),(qa.instantAnimations||qa.skipAnimations)&&(k=!0,j.duration=0,j.delay=0),j.allowFlatten=!d.type&&!d.ease,k&&!c&&t.get()!==void 0){const T=F7(j.keyframes,d);if(T!==void 0){or.update(()=>{j.onUpdate(T),j.onComplete()});return}}return d.isSync?new my(j):new EL(j)};function Z7({protectedKeys:r,needsAnimating:t},s){const a=r.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,a}function b4(r,t,{delay:s=0,transitionOverride:a,type:i}={}){let{transition:c=r.getDefaultTransition(),transitionEnd:o,...d}=t;a&&(c=a);const u=[],m=i&&r.animationState&&r.animationState.getState()[i];for(const j in d){const k=r.getValue(j,r.latestValues[j]??null),T=d[j];if(T===void 0||m&&Z7(m,j))continue;const C={delay:s,...fy(c||{},j)},v=k.get();if(v!==void 0&&!k.isAnimating&&!Array.isArray(T)&&T===v&&!C.velocity)continue;let L=!1;if(window.MotionHandoffAnimation){const R=y4(r);if(R){const V=window.MotionHandoffAnimation(R,j,or);V!==null&&(C.startTime=V,L=!0)}}Cp(r,j),k.start(Cy(j,k,T,r.shouldReduceMotion&&Q3.has(j)?{type:!1}:C,r,L));const $=k.animation;$&&u.push($)}return o&&Promise.all(u).then(()=>{or.update(()=>{o&&z7(r,o)})}),u}function Dp(r,t,s={}){var u;const a=Lc(r,t,s.type==="exit"?(u=r.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=r.getDefaultTransition()||{}}=a||{};s.transitionOverride&&(i=s.transitionOverride);const c=a?()=>Promise.all(b4(r,a,s)):()=>Promise.resolve(),o=r.variantChildren&&r.variantChildren.size?(m=0)=>{const{delayChildren:j=0,staggerChildren:k,staggerDirection:T}=i;return Y7(r,t,j+m,k,T,s)}:()=>Promise.resolve(),{when:d}=i;if(d){const[m,j]=d==="beforeChildren"?[c,o]:[o,c];return m().then(()=>j())}else return Promise.all([c(),o(s.delay)])}function Y7(r,t,s=0,a=0,i=1,c){const o=[],d=(r.variantChildren.size-1)*a,u=i===1?(m=0)=>m*a:(m=0)=>d-m*a;return Array.from(r.variantChildren).sort(X7).forEach((m,j)=>{m.notify("AnimationStart",t),o.push(Dp(m,t,{...c,delay:s+u(j)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(o)}function X7(r,t){return r.sortNodePosition(t)}function J7(r,t,s={}){r.notify("AnimationStart",t);let a;if(Array.isArray(t)){const i=t.map(c=>Dp(r,c,s));a=Promise.all(i)}else if(typeof t=="string")a=Dp(r,t,s);else{const i=typeof t=="function"?Lc(r,t,s.custom):t;a=Promise.all(b4(r,i,s))}return a.then(()=>{r.notify("AnimationComplete",t)})}function v4(r,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==r.length)return!1;for(let a=0;a<s;a++)if(t[a]!==r[a])return!1;return!0}const eV=Ny.length;function j4(r){if(!r)return;if(!r.isControllingVariants){const s=r.parent?j4(r.parent)||{}:{};return r.props.initial!==void 0&&(s.initial=r.props.initial),s}const t={};for(let s=0;s<eV;s++){const a=Ny[s],i=r.props[a];(Mc(i)||i===!1)&&(t[a]=i)}return t}const tV=[...wy].reverse(),rV=wy.length;function sV(r){return t=>Promise.all(t.map(({animation:s,options:a})=>J7(r,s,a)))}function aV(r){let t=sV(r),s=Fw(),a=!0;const i=u=>(m,j)=>{var T;const k=Lc(r,j,u==="exit"?(T=r.presenceContext)==null?void 0:T.custom:void 0);if(k){const{transition:C,transitionEnd:v,...L}=k;m={...m,...L,...v}}return m};function c(u){t=u(r)}function o(u){const{props:m}=r,j=j4(r.parent)||{},k=[],T=new Set;let C={},v=1/0;for(let $=0;$<rV;$++){const R=tV[$],V=s[R],z=m[R]!==void 0?m[R]:j[R],re=Mc(z),q=R===u?V.isActive:null;q===!1&&(v=$);let Q=z===j[R]&&z!==m[R]&&re;if(Q&&a&&r.manuallyAnimateOnMount&&(Q=!1),V.protectedKeys={...C},!V.isActive&&q===null||!z&&!V.prevProp||$x(z)||typeof z=="boolean")continue;const M=nV(V.prevProp,z);let x=M||R===u&&V.isActive&&!Q&&re||$>v&&re,W=!1;const U=Array.isArray(z)?z:[z];let ee=U.reduce(i(R),{});q===!1&&(ee={});const{prevResolvedValues:se={}}=V,X={...se,...ee},G=de=>{x=!0,T.has(de)&&(W=!0,T.delete(de)),V.needsAnimating[de]=!0;const ue=r.getValue(de);ue&&(ue.liveStyle=!1)};for(const de in X){const ue=ee[de],je=se[de];if(C.hasOwnProperty(de))continue;let ye=!1;Ep(ue)&&Ep(je)?ye=!v4(ue,je):ye=ue!==je,ye?ue!=null?G(de):T.add(de):ue!==void 0&&T.has(de)?G(de):V.protectedKeys[de]=!0}V.prevProp=z,V.prevResolvedValues=ee,V.isActive&&(C={...C,...ee}),a&&r.blockInitialAnimation&&(x=!1),x&&(!(Q&&M)||W)&&k.push(...U.map(de=>({animation:de,options:{type:R}})))}if(T.size){const $={};if(typeof m.initial!="boolean"){const R=Lc(r,Array.isArray(m.initial)?m.initial[0]:m.initial);R&&R.transition&&($.transition=R.transition)}T.forEach(R=>{const V=r.getBaseTarget(R),z=r.getValue(R);z&&(z.liveStyle=!0),$[R]=V??null}),k.push({animation:$})}let L=!!k.length;return a&&(m.initial===!1||m.initial===m.animate)&&!r.manuallyAnimateOnMount&&(L=!1),a=!1,L?t(k):Promise.resolve()}function d(u,m){var k;if(s[u].isActive===m)return Promise.resolve();(k=r.variantChildren)==null||k.forEach(T=>{var C;return(C=T.animationState)==null?void 0:C.setActive(u,m)}),s[u].isActive=m;const j=o(u);for(const T in s)s[T].protectedKeys={};return j}return{animateChanges:o,setActive:d,setAnimateFunction:c,getState:()=>s,reset:()=>{s=Fw(),a=!0}}}function nV(r,t){return typeof t=="string"?t!==r:Array.isArray(t)?!v4(t,r):!1}function Xn(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Fw(){return{animate:Xn(!0),whileInView:Xn(),whileHover:Xn(),whileTap:Xn(),whileDrag:Xn(),whileFocus:Xn(),exit:Xn()}}class qn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class iV extends qn{constructor(t){super(t),t.animationState||(t.animationState=aV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();$x(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let oV=0;class lV extends qn{constructor(){super(...arguments),this.id=oV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t);s&&!t&&i.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const cV={animation:{Feature:iV},exit:{Feature:lV}};function Vc(r,t,s,a={passive:!0}){return r.addEventListener(t,s,a),()=>r.removeEventListener(t,s)}function hd(r){return{point:{x:r.pageX,y:r.pageY}}}const dV=r=>t=>by(t)&&r(t,hd(t));function ec(r,t,s,a){return Vc(r,t,dV(s),a)}function w4({top:r,left:t,right:s,bottom:a}){return{x:{min:t,max:s},y:{min:r,max:a}}}function uV({x:r,y:t}){return{top:t.min,right:r.max,bottom:t.max,left:r.min}}function xV(r,t){if(!t)return r;const s=t({x:r.left,y:r.top}),a=t({x:r.right,y:r.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}const N4=1e-4,mV=1-N4,hV=1+N4,k4=.01,pV=0-k4,fV=0+k4;function es(r){return r.max-r.min}function gV(r,t,s){return Math.abs(r-t)<=s}function Hw(r,t,s,a=.5){r.origin=a,r.originPoint=ar(t.min,t.max,r.origin),r.scale=es(s)/es(t),r.translate=ar(s.min,s.max,r.origin)-r.originPoint,(r.scale>=mV&&r.scale<=hV||isNaN(r.scale))&&(r.scale=1),(r.translate>=pV&&r.translate<=fV||isNaN(r.translate))&&(r.translate=0)}function tc(r,t,s,a){Hw(r.x,t.x,s.x,a?a.originX:void 0),Hw(r.y,t.y,s.y,a?a.originY:void 0)}function Ww(r,t,s){r.min=s.min+t.min,r.max=r.min+es(t)}function yV(r,t,s){Ww(r.x,t.x,s.x),Ww(r.y,t.y,s.y)}function qw(r,t,s){r.min=t.min-s.min,r.max=r.min+es(t)}function rc(r,t,s){qw(r.x,t.x,s.x),qw(r.y,t.y,s.y)}const Gw=()=>({translate:0,scale:1,origin:0,originPoint:0}),uo=()=>({x:Gw(),y:Gw()}),Qw=()=>({min:0,max:0}),hr=()=>({x:Qw(),y:Qw()});function $s(r){return[r("x"),r("y")]}function Um(r){return r===void 0||r===1}function _p({scale:r,scaleX:t,scaleY:s}){return!Um(r)||!Um(t)||!Um(s)}function ri(r){return _p(r)||S4(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function S4(r){return Kw(r.x)||Kw(r.y)}function Kw(r){return r&&r!=="0%"}function $u(r,t,s){const a=r-s,i=t*a;return s+i}function Zw(r,t,s,a,i){return i!==void 0&&(r=$u(r,i,a)),$u(r,s,a)+t}function $p(r,t=0,s=1,a,i){r.min=Zw(r.min,t,s,a,i),r.max=Zw(r.max,t,s,a,i)}function T4(r,{x:t,y:s}){$p(r.x,t.translate,t.scale,t.originPoint),$p(r.y,s.translate,s.scale,s.originPoint)}const Yw=.999999999999,Xw=1.0000000000001;function bV(r,t,s,a=!1){const i=s.length;if(!i)return;t.x=t.y=1;let c,o;for(let d=0;d<i;d++){c=s[d],o=c.projectionDelta;const{visualElement:u}=c.options;u&&u.props.style&&u.props.style.display==="contents"||(a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&mo(r,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,T4(r,o)),a&&ri(c.latestValues)&&mo(r,c.latestValues))}t.x<Xw&&t.x>Yw&&(t.x=1),t.y<Xw&&t.y>Yw&&(t.y=1)}function xo(r,t){r.min=r.min+t,r.max=r.max+t}function Jw(r,t,s,a,i=.5){const c=ar(r.min,r.max,i);$p(r,t,s,c,a)}function mo(r,t){Jw(r.x,t.x,t.scaleX,t.scale,t.originX),Jw(r.y,t.y,t.scaleY,t.scale,t.originY)}function I4(r,t){return w4(xV(r.getBoundingClientRect(),t))}function vV(r,t,s){const a=I4(r,s),{scroll:i}=t;return i&&(xo(a.x,i.offset.x),xo(a.y,i.offset.y)),a}const P4=({current:r})=>r?r.ownerDocument.defaultView:null,eN=(r,t)=>Math.abs(r-t);function jV(r,t){const s=eN(r.x,t.x),a=eN(r.y,t.y);return Math.sqrt(s**2+a**2)}class E4{constructor(t,s,{transformPagePoint:a,contextWindow:i,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Hm(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,C=jV(k.offset,{x:0,y:0})>=3;if(!T&&!C)return;const{point:v}=k,{timestamp:L}=Dr;this.history.push({...v,timestamp:L});const{onStart:$,onMove:R}=this.handlers;T||($&&$(this.lastMoveEvent,k),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,k)},this.handlePointerMove=(k,T)=>{this.lastMoveEvent=k,this.lastMoveEventInfo=Fm(T,this.transformPagePoint),or.update(this.updatePoint,!0)},this.handlePointerUp=(k,T)=>{this.end();const{onEnd:C,onSessionEnd:v,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const $=Hm(k.type==="pointercancel"?this.lastMoveEventInfo:Fm(T,this.transformPagePoint),this.history);this.startEvent&&C&&C(k,$),v&&v(k,$)},!by(t))return;this.dragSnapToOrigin=c,this.handlers=s,this.transformPagePoint=a,this.contextWindow=i||window;const o=hd(t),d=Fm(o,this.transformPagePoint),{point:u}=d,{timestamp:m}=Dr;this.history=[{...u,timestamp:m}];const{onSessionStart:j}=s;j&&j(t,Hm(d,this.history)),this.removeListeners=ud(ec(this.contextWindow,"pointermove",this.handlePointerMove),ec(this.contextWindow,"pointerup",this.handlePointerUp),ec(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),On(this.updatePoint)}}function Fm(r,t){return t?{point:t(r.point)}:r}function tN(r,t){return{x:r.x-t.x,y:r.y-t.y}}function Hm({point:r},t){return{point:r,delta:tN(r,C4(t)),offset:tN(r,wV(t)),velocity:NV(t,.1)}}function wV(r){return r[0]}function C4(r){return r[r.length-1]}function NV(r,t){if(r.length<2)return{x:0,y:0};let s=r.length-1,a=null;const i=C4(r);for(;s>=0&&(a=r[s],!(i.timestamp-a.timestamp>pa(t)));)s--;if(!a)return{x:0,y:0};const c=fa(i.timestamp-a.timestamp);if(c===0)return{x:0,y:0};const o={x:(i.x-a.x)/c,y:(i.y-a.y)/c};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function kV(r,{min:t,max:s},a){return t!==void 0&&r<t?r=a?ar(t,r,a.min):Math.max(r,t):s!==void 0&&r>s&&(r=a?ar(s,r,a.max):Math.min(r,s)),r}function rN(r,t,s){return{min:t!==void 0?r.min+t:void 0,max:s!==void 0?r.max+s-(r.max-r.min):void 0}}function SV(r,{top:t,left:s,bottom:a,right:i}){return{x:rN(r.x,s,i),y:rN(r.y,t,a)}}function sN(r,t){let s=t.min-r.min,a=t.max-r.max;return t.max-t.min<r.max-r.min&&([s,a]=[a,s]),{min:s,max:a}}function TV(r,t){return{x:sN(r.x,t.x),y:sN(r.y,t.y)}}function IV(r,t){let s=.5;const a=es(r),i=es(t);return i>a?s=$c(t.min,t.max-a,r.min):a>i&&(s=$c(r.min,r.max-i,t.min)),Wa(0,1,s)}function PV(r,t){const s={};return t.min!==void 0&&(s.min=t.min-r.min),t.max!==void 0&&(s.max=t.max-r.min),s}const Ap=.35;function EV(r=Ap){return r===!1?r=0:r===!0&&(r=Ap),{x:aN(r,"left","right"),y:aN(r,"top","bottom")}}function aN(r,t,s){return{min:nN(r,t),max:nN(r,s)}}function nN(r,t){return typeof r=="number"?r:r[t]||0}const CV=new WeakMap;class DV{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hr(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=j=>{const{dragSnapToOrigin:k}=this.getProps();k?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(hd(j).point)},c=(j,k)=>{const{drag:T,dragPropagation:C,onDragStart:v}=this.getProps();if(T&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WL(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$s($=>{let R=this.getAxisMotionValue($).get()||0;if(ga.test(R)){const{projection:V}=this.visualElement;if(V&&V.layout){const z=V.layout.layoutBox[$];z&&(R=es(z)*(parseFloat(R)/100))}}this.originPoint[$]=R}),v&&or.postRender(()=>v(j,k)),Cp(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},o=(j,k)=>{const{dragPropagation:T,dragDirectionLock:C,onDirectionLock:v,onDrag:L}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:$}=k;if(C&&this.currentDirection===null){this.currentDirection=_V($),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",k.point,$),this.updateAxis("y",k.point,$),this.visualElement.render(),L&&L(j,k)},d=(j,k)=>this.stop(j,k),u=()=>$s(j=>{var k;return this.getAnimationState(j)==="paused"&&((k=this.getAxisMotionValue(j).animation)==null?void 0:k.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new E4(t,{onSessionStart:i,onStart:c,onMove:o,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:P4(this.visualElement)})}stop(t,s){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:c}=this.getProps();c&&or.postRender(()=>c(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,a){const{drag:i}=this.getProps();if(!a||!s0(t,i,this.currentDirection))return;const c=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=kV(o,this.constraints[t],this.elastic[t])),c.set(o)}resolveConstraints(){var c;const{dragConstraints:t,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,i=this.constraints;t&&co(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=SV(a.layoutBox,t):this.constraints=!1,this.elastic=EV(s),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&$s(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=PV(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!co(t))return!1;const a=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const c=vV(a,i.root,this.visualElement.getTransformPagePoint());let o=TV(i.layout.layoutBox,c);if(s){const d=s(uV(o));this.hasMutatedConstraints=!!d,d&&(o=w4(d))}return o}startAnimation(t){const{drag:s,dragMomentum:a,dragElastic:i,dragTransition:c,dragSnapToOrigin:o,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},m=$s(j=>{if(!s0(j,s,this.currentDirection))return;let k=u&&u[j]||{};o&&(k={min:0,max:0});const T=i?200:1e6,C=i?40:1e7,v={type:"inertia",velocity:a?t[j]:0,bounceStiffness:T,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...c,...k};return this.startAxisValueAnimation(j,v)});return Promise.all(m).then(d)}startAxisValueAnimation(t,s){const a=this.getAxisMotionValue(t);return Cp(this.visualElement,t),a.start(Cy(t,a,0,s,this.visualElement,!1))}stopAnimation(){$s(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){$s(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),i=a[s];return i||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){$s(s=>{const{drag:a}=this.getProps();if(!s0(s,a,this.currentDirection))return;const{projection:i}=this.visualElement,c=this.getAxisMotionValue(s);if(i&&i.layout){const{min:o,max:d}=i.layout.layoutBox[s];c.set(t[s]-ar(o,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:a}=this.visualElement;if(!co(s)||!a||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$s(o=>{const d=this.getAxisMotionValue(o);if(d&&this.constraints!==!1){const u=d.get();i[o]=IV({min:u,max:u},this.constraints[o])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),$s(o=>{if(!s0(o,t,null))return;const d=this.getAxisMotionValue(o),{min:u,max:m}=this.constraints[o];d.set(ar(u,m,i[o]))})}addListeners(){if(!this.visualElement.current)return;CV.set(this.visualElement,this);const t=this.visualElement.current,s=ec(t,"pointerdown",u=>{const{drag:m,dragListener:j=!0}=this.getProps();m&&j&&this.start(u)}),a=()=>{const{dragConstraints:u}=this.getProps();co(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,c=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),or.read(a);const o=Vc(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:m})=>{this.isDragging&&m&&($s(j=>{const k=this.getAxisMotionValue(j);k&&(this.originPoint[j]+=u[j].translate,k.set(k.get()+u[j].translate))}),this.visualElement.render())});return()=>{o(),s(),c(),d&&d()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:a=!1,dragPropagation:i=!1,dragConstraints:c=!1,dragElastic:o=Ap,dragMomentum:d=!0}=t;return{...t,drag:s,dragDirectionLock:a,dragPropagation:i,dragConstraints:c,dragElastic:o,dragMomentum:d}}}function s0(r,t,s){return(t===!0||t===r)&&(s===null||s===r)}function _V(r,t=10){let s=null;return Math.abs(r.y)>t?s="y":Math.abs(r.x)>t&&(s="x"),s}class $V extends qn{constructor(t){super(t),this.removeGroupControls=Ls,this.removeListeners=Ls,this.controls=new DV(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ls}unmount(){this.removeGroupControls(),this.removeListeners()}}const iN=r=>(t,s)=>{r&&or.postRender(()=>r(t,s))};class AV extends qn{constructor(){super(...arguments),this.removePointerDownListener=Ls}onPointerDown(t){this.session=new E4(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:P4(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:a,onPanEnd:i}=this.node.getProps();return{onSessionStart:iN(t),onStart:iN(s),onMove:a,onEnd:(c,o)=>{delete this.session,i&&or.postRender(()=>i(c,o))}}}mount(){this.removePointerDownListener=ec(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function oN(r,t){return t.max===t.min?0:r/(t.max-t.min)*100}const wl={correct:(r,t)=>{if(!t.target)return r;if(typeof r=="string")if(bt.test(r))r=parseFloat(r);else return r;const s=oN(r,t.target.x),a=oN(r,t.target.y);return`${s}% ${a}%`}},RV={correct:(r,{treeScale:t,projectionDelta:s})=>{const a=r,i=Ln.parse(r);if(i.length>5)return a;const c=Ln.createTransformer(r),o=typeof i[0]!="number"?1:0,d=s.x.scale*t.x,u=s.y.scale*t.y;i[0+o]/=d,i[1+o]/=u;const m=ar(d,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=m),typeof i[3+o]=="number"&&(i[3+o]/=m),c(i)}};class MV extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:a,layoutId:i}=this.props,{projection:c}=t;v7(OV),c&&(s.group&&s.group.add(c),a&&a.register&&i&&a.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),_0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:a,drag:i,isPresent:c}=this.props,{projection:o}=a;return o&&(o.isPresent=c,i||t.layoutDependency!==s||s===void 0||t.isPresent!==c?o.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?o.promote():o.relegate()||or.postRender(()=>{const d=o.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),yy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:a}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),a&&a.deregister&&a.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function D4(r){const[t,s]=a4(),a=b.useContext(Kg);return e.jsx(MV,{...r,layoutGroup:a,switchLayoutGroup:b.useContext(c4),isPresent:t,safeToRemove:s})}const OV={borderRadius:{...wl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wl,borderTopRightRadius:wl,borderBottomLeftRadius:wl,borderBottomRightRadius:wl,boxShadow:RV};function LV(r,t,s){const a=Qr(r)?r:Lo(r);return a.start(Cy("",a,t,s)),a.animation}const VV=(r,t)=>r.depth-t.depth;class zV{constructor(){this.children=[],this.isDirty=!1}add(t){Xg(this.children,t),this.isDirty=!0}remove(t){Jg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(VV),this.isDirty=!1,this.children.forEach(t)}}function BV(r,t){const s=xs.now(),a=({timestamp:i})=>{const c=i-s;c>=t&&(On(a),r(c-t))};return or.setup(a,!0),()=>On(a)}const _4=["TopLeft","TopRight","BottomLeft","BottomRight"],UV=_4.length,lN=r=>typeof r=="string"?parseFloat(r):r,cN=r=>typeof r=="number"||bt.test(r);function FV(r,t,s,a,i,c){i?(r.opacity=ar(0,s.opacity??1,HV(a)),r.opacityExit=ar(t.opacity??1,0,WV(a))):c&&(r.opacity=ar(t.opacity??1,s.opacity??1,a));for(let o=0;o<UV;o++){const d=`border${_4[o]}Radius`;let u=dN(t,d),m=dN(s,d);if(u===void 0&&m===void 0)continue;u||(u=0),m||(m=0),u===0||m===0||cN(u)===cN(m)?(r[d]=Math.max(ar(lN(u),lN(m),a),0),(ga.test(m)||ga.test(u))&&(r[d]+="%")):r[d]=m}(t.rotate||s.rotate)&&(r.rotate=ar(t.rotate||0,s.rotate||0,a))}function dN(r,t){return r[t]!==void 0?r[t]:r.borderRadius}const HV=$4(0,.5,S3),WV=$4(.5,.95,Ls);function $4(r,t,s){return a=>a<r?0:a>t?1:s($c(r,t,a))}function uN(r,t){r.min=t.min,r.max=t.max}function _s(r,t){uN(r.x,t.x),uN(r.y,t.y)}function xN(r,t){r.translate=t.translate,r.scale=t.scale,r.originPoint=t.originPoint,r.origin=t.origin}function mN(r,t,s,a,i){return r-=t,r=$u(r,1/s,a),i!==void 0&&(r=$u(r,1/i,a)),r}function qV(r,t=0,s=1,a=.5,i,c=r,o=r){if(ga.test(t)&&(t=parseFloat(t),t=ar(o.min,o.max,t/100)-o.min),typeof t!="number")return;let d=ar(c.min,c.max,a);r===c&&(d-=t),r.min=mN(r.min,t,s,d,i),r.max=mN(r.max,t,s,d,i)}function hN(r,t,[s,a,i],c,o){qV(r,t[s],t[a],t[i],t.scale,c,o)}const GV=["x","scaleX","originX"],QV=["y","scaleY","originY"];function pN(r,t,s,a){hN(r.x,t,GV,s?s.x:void 0,a?a.x:void 0),hN(r.y,t,QV,s?s.y:void 0,a?a.y:void 0)}function fN(r){return r.translate===0&&r.scale===1}function A4(r){return fN(r.x)&&fN(r.y)}function gN(r,t){return r.min===t.min&&r.max===t.max}function KV(r,t){return gN(r.x,t.x)&&gN(r.y,t.y)}function yN(r,t){return Math.round(r.min)===Math.round(t.min)&&Math.round(r.max)===Math.round(t.max)}function R4(r,t){return yN(r.x,t.x)&&yN(r.y,t.y)}function bN(r){return es(r.x)/es(r.y)}function vN(r,t){return r.translate===t.translate&&r.scale===t.scale&&r.originPoint===t.originPoint}class ZV{constructor(){this.members=[]}add(t){Xg(this.members,t),t.scheduleRender()}remove(t){if(Jg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(i=>t===i);if(s===0)return!1;let a;for(let i=s;i>=0;i--){const c=this.members[i];if(c.isPresent!==!1){a=c;break}}return a?(this.promote(a),!0):!1}promote(t,s){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,s&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:a}=t;s.onExitComplete&&s.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YV(r,t,s){let a="";const i=r.x.translate/t.x,c=r.y.translate/t.y,o=(s==null?void 0:s.z)||0;if((i||c||o)&&(a=`translate3d(${i}px, ${c}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:m,rotate:j,rotateX:k,rotateY:T,skewX:C,skewY:v}=s;m&&(a=`perspective(${m}px) ${a}`),j&&(a+=`rotate(${j}deg) `),k&&(a+=`rotateX(${k}deg) `),T&&(a+=`rotateY(${T}deg) `),C&&(a+=`skewX(${C}deg) `),v&&(a+=`skewY(${v}deg) `)}const d=r.x.scale*t.x,u=r.y.scale*t.y;return(d!==1||u!==1)&&(a+=`scale(${d}, ${u})`),a||"none"}const Wm=["","X","Y","Z"],XV={visibility:"hidden"},JV=1e3;let ez=0;function qm(r,t,s,a){const{latestValues:i}=t;i[r]&&(s[r]=i[r],t.setStaticValue(r,0),a&&(a[r]=0))}function M4(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:t}=r.options;if(!t)return;const s=y4(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:c}=r.options;window.MotionCancelOptimisedAnimation(s,"transform",or,!(i||c))}const{parent:a}=r;a&&!a.hasCheckedOptimisedAppear&&M4(a)}function O4({attachResizeListener:r,defaultParent:t,measureScroll:s,checkIsScrollRoot:a,resetTransform:i}){return class{constructor(o={},d=t==null?void 0:t()){this.id=ez++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(sz),this.nodes.forEach(lz),this.nodes.forEach(cz),this.nodes.forEach(az)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new zV)}addEventListener(o,d){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ry),this.eventHandlers.get(o).add(d)}notifyListeners(o,...d){const u=this.eventHandlers.get(o);u&&u.notify(...d)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=s4(o)&&!YL(o),this.instance=o;const{layoutId:d,layout:u,visualElement:m}=this.options;if(m&&!m.current&&m.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),r){let j;const k=()=>this.root.updateBlockedByResize=!1;r(o,()=>{this.root.updateBlockedByResize=!0,j&&j(),j=BV(k,250),_0.hasAnimatedSinceResize&&(_0.hasAnimatedSinceResize=!1,this.nodes.forEach(wN))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||u)&&this.addEventListener("didUpdate",({delta:j,hasLayoutChanged:k,hasRelativeLayoutChanged:T,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||m.getDefaultTransition()||hz,{onLayoutAnimationStart:L,onLayoutAnimationComplete:$}=m.getProps(),R=!this.targetLayout||!R4(this.targetLayout,C),V=!k&&T;if(this.options.layoutRoot||this.resumeFrom||V||k&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(j,V);const z={...fy(v,"layout"),onPlay:L,onComplete:$};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else k||wN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),On(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(dz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&M4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let j=0;j<this.path.length;j++){const k=this.path[j];k.shouldResetTransform=!0,k.updateScroll("snapshot"),k.options.layoutRoot&&k.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jN);return}this.isUpdating||this.nodes.forEach(iz),this.isUpdating=!1,this.nodes.forEach(oz),this.nodes.forEach(tz),this.nodes.forEach(rz),this.clearAllSnapshots();const d=xs.now();Dr.delta=Wa(0,1e3/60,d-Dr.timestamp),Dr.timestamp=d,Dr.isProcessing=!0,Mm.update.process(Dr),Mm.preRender.process(Dr),Mm.render.process(Dr),Dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nz),this.sharedNodes.forEach(uz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,or.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){or.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!es(this.snapshot.measuredBox.x)&&!es(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(d=!1),d&&this.instance){const u=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!A4(this.projectionDelta),u=this.getTransformTemplate(),m=u?u(this.latestValues,""):void 0,j=m!==this.prevTransformTemplateValue;o&&this.instance&&(d||ri(this.latestValues)||j)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return o&&(u=this.removeTransform(u)),pz(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:o}=this.options;if(!o)return hr();const d=o.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(fz))){const{scroll:j}=this.root;j&&(xo(d.x,j.offset.x),xo(d.y,j.offset.y))}return d}removeElementScroll(o){var u;const d=hr();if(_s(d,o),(u=this.scroll)!=null&&u.wasRoot)return d;for(let m=0;m<this.path.length;m++){const j=this.path[m],{scroll:k,options:T}=j;j!==this.root&&k&&T.layoutScroll&&(k.wasRoot&&_s(d,o),xo(d.x,k.offset.x),xo(d.y,k.offset.y))}return d}applyTransform(o,d=!1){const u=hr();_s(u,o);for(let m=0;m<this.path.length;m++){const j=this.path[m];!d&&j.options.layoutScroll&&j.scroll&&j!==j.root&&mo(u,{x:-j.scroll.offset.x,y:-j.scroll.offset.y}),ri(j.latestValues)&&mo(u,j.latestValues)}return ri(this.latestValues)&&mo(u,this.latestValues),u}removeTransform(o){const d=hr();_s(d,o);for(let u=0;u<this.path.length;u++){const m=this.path[u];if(!m.instance||!ri(m.latestValues))continue;_p(m.latestValues)&&m.updateSnapshot();const j=hr(),k=m.measurePageBox();_s(j,k),pN(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,j)}return ri(this.latestValues)&&pN(d,this.latestValues),d}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var T;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:j,layoutId:k}=this.options;if(!(!this.layout||!(j||k))){if(this.resolvedRelativeTargetAt=Dr.timestamp,!this.targetDelta&&!this.relativeTarget){const C=this.getClosestProjectingParent();C&&C.layout&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),rc(this.relativeTargetOrigin,this.layout.layoutBox,C.layout.layoutBox),_s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hr(),this.targetWithTransforms=hr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_s(this.target,this.layout.layoutBox),T4(this.target,this.targetDelta)):_s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const C=this.getClosestProjectingParent();C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),rc(this.relativeTargetOrigin,this.target,C.target),_s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_p(this.parent.latestValues)||S4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),d=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Dr.timestamp&&(u=!1),u)return;const{layout:m,layoutId:j}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||j))return;_s(this.layoutCorrected,this.layout.layoutBox);const k=this.treeScale.x,T=this.treeScale.y;bV(this.layoutCorrected,this.treeScale,this.path,d),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=hr());const{target:C}=o;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xN(this.prevProjectionDelta.x,this.projectionDelta.x),xN(this.prevProjectionDelta.y,this.projectionDelta.y)),tc(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==k||this.treeScale.y!==T||!vN(this.projectionDelta.x,this.prevProjectionDelta.x)||!vN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uo(),this.projectionDelta=uo(),this.projectionDeltaWithTransform=uo()}setAnimationOrigin(o,d=!1){const u=this.snapshot,m=u?u.latestValues:{},j={...this.latestValues},k=uo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const T=hr(),C=u?u.source:void 0,v=this.layout?this.layout.source:void 0,L=C!==v,$=this.getStack(),R=!$||$.members.length<=1,V=!!(L&&!R&&this.options.crossfade===!0&&!this.path.some(mz));this.animationProgress=0;let z;this.mixTargetDelta=re=>{const q=re/1e3;NN(k.x,o.x,q),NN(k.y,o.y,q),this.setTargetDelta(k),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rc(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xz(this.relativeTarget,this.relativeTargetOrigin,T,q),z&&KV(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=hr()),_s(z,this.relativeTarget)),L&&(this.animationValues=j,FV(j,m,this.latestValues,q,V,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var d,u,m;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(!1),(m=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||m.stop(!1),this.pendingAnimation&&(On(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=or.update(()=>{_0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Lo(0)),this.currentAnimation=LV(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:j=>{this.mixTargetDelta(j),o.onUpdate&&o.onUpdate(j)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JV),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:d,target:u,layout:m,latestValues:j}=o;if(!(!d||!u||!m)){if(this!==o&&this.layout&&m&&L4(this.options.animationType,this.layout.layoutBox,m.layoutBox)){u=this.target||hr();const k=es(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+k;const T=es(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+T}_s(d,u),mo(d,j),tc(this.projectionDeltaWithTransform,this.layoutCorrected,d,j)}}registerSharedNode(o,d){this.sharedNodes.has(o)||this.sharedNodes.set(o,new ZV),this.sharedNodes.get(o).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var d;const{layoutId:o}=this.options;return o?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:o}=this.options;return o?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:d,preserveFollowOpacity:u}={}){const m=this.getStack();m&&m.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let d=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const m={};u.z&&qm("z",o,m,this.animationValues);for(let j=0;j<Wm.length;j++)qm(`rotate${Wm[j]}`,o,m,this.animationValues),qm(`skew${Wm[j]}`,o,m,this.animationValues);o.render();for(const j in m)o.setStaticValue(j,m[j]),this.animationValues&&(this.animationValues[j]=m[j]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return XV;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=D0(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=D0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ri(this.latestValues)&&(C.transform=u?u({},""):"none",this.hasProjected=!1),C}const j=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=YV(this.projectionDeltaWithTransform,this.treeScale,j),u&&(d.transform=u(j,d.transform));const{x:k,y:T}=this.projectionDelta;d.transformOrigin=`${k.origin*100}% ${T.origin*100}% 0`,m.animationValues?d.opacity=m===this?j.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:j.opacityExit:d.opacity=m===this?j.opacity!==void 0?j.opacity:"":j.opacityExit!==void 0?j.opacityExit:0;for(const C in Oc){if(j[C]===void 0)continue;const{correct:v,applyTo:L,isCSSVariable:$}=Oc[C],R=d.transform==="none"?j[C]:v(j[C],m);if(L){const V=L.length;for(let z=0;z<V;z++)d[L[z]]=R}else $?this.options.visualElement.renderState.vars[C]=R:d[C]=R}return this.options.layoutId&&(d.pointerEvents=m===this?D0(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var d;return(d=o.currentAnimation)==null?void 0:d.stop(!1)}),this.root.nodes.forEach(jN),this.root.sharedNodes.clear()}}}function tz(r){r.updateLayout()}function rz(r){var s;const t=((s=r.resumeFrom)==null?void 0:s.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:i}=r.layout,{animationType:c}=r.options,o=t.source!==r.layout.source;c==="size"?$s(k=>{const T=o?t.measuredBox[k]:t.layoutBox[k],C=es(T);T.min=a[k].min,T.max=T.min+C}):L4(c,t.layoutBox,a)&&$s(k=>{const T=o?t.measuredBox[k]:t.layoutBox[k],C=es(a[k]);T.max=T.min+C,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[k].max=r.relativeTarget[k].min+C)});const d=uo();tc(d,a,t.layoutBox);const u=uo();o?tc(u,r.applyTransform(i,!0),t.measuredBox):tc(u,a,t.layoutBox);const m=!A4(d);let j=!1;if(!r.resumeFrom){const k=r.getClosestProjectingParent();if(k&&!k.resumeFrom){const{snapshot:T,layout:C}=k;if(T&&C){const v=hr();rc(v,t.layoutBox,T.layoutBox);const L=hr();rc(L,a,C.layoutBox),R4(v,L)||(j=!0),k.options.layoutRoot&&(r.relativeTarget=L,r.relativeTargetOrigin=v,r.relativeParent=k)}}}r.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:u,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:j})}else if(r.isLead()){const{onExitComplete:a}=r.options;a&&a()}r.options.transition=void 0}function sz(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function az(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function nz(r){r.clearSnapshot()}function jN(r){r.clearMeasurements()}function iz(r){r.isLayoutDirty=!1}function oz(r){const{visualElement:t}=r.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),r.resetTransform()}function wN(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function lz(r){r.resolveTargetDelta()}function cz(r){r.calcProjection()}function dz(r){r.resetSkewAndRotation()}function uz(r){r.removeLeadSnapshot()}function NN(r,t,s){r.translate=ar(t.translate,0,s),r.scale=ar(t.scale,1,s),r.origin=t.origin,r.originPoint=t.originPoint}function kN(r,t,s,a){r.min=ar(t.min,s.min,a),r.max=ar(t.max,s.max,a)}function xz(r,t,s,a){kN(r.x,t.x,s.x,a),kN(r.y,t.y,s.y,a)}function mz(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const hz={duration:.45,ease:[.4,0,.1,1]},SN=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),TN=SN("applewebkit/")&&!SN("chrome/")?Math.round:Ls;function IN(r){r.min=TN(r.min),r.max=TN(r.max)}function pz(r){IN(r.x),IN(r.y)}function L4(r,t,s){return r==="position"||r==="preserve-aspect"&&!gV(bN(t),bN(s),.2)}function fz(r){var t;return r!==r.root&&((t=r.scroll)==null?void 0:t.wasRoot)}const gz=O4({attachResizeListener:(r,t)=>Vc(r,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gm={current:void 0},V4=O4({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Gm.current){const r=new gz({});r.mount(window),r.setOptions({layoutScroll:!0}),Gm.current=r}return Gm.current},resetTransform:(r,t)=>{r.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),yz={pan:{Feature:AV},drag:{Feature:$V,ProjectionNode:V4,MeasureLayout:D4}};function PN(r,t,s){const{props:a}=r;r.animationState&&a.whileHover&&r.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,c=a[i];c&&or.postRender(()=>c(t,hd(t)))}class bz extends qn{mount(){const{current:t}=this.node;t&&(this.unmount=qL(t,(s,a)=>(PN(this.node,a,"Start"),i=>PN(this.node,i,"End"))))}unmount(){}}class vz extends qn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ud(Vc(this.node.current,"focus",()=>this.onFocus()),Vc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function EN(r,t,s){const{props:a}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&a.whileTap&&r.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),c=a[i];c&&or.postRender(()=>c(t,hd(t)))}class jz extends qn{mount(){const{current:t}=this.node;t&&(this.unmount=ZL(t,(s,a)=>(EN(this.node,a,"Start"),(i,{success:c})=>EN(this.node,i,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Rp=new WeakMap,Qm=new WeakMap,wz=r=>{const t=Rp.get(r.target);t&&t(r)},Nz=r=>{r.forEach(wz)};function kz({root:r,...t}){const s=r||document;Qm.has(s)||Qm.set(s,{});const a=Qm.get(s),i=JSON.stringify(t);return a[i]||(a[i]=new IntersectionObserver(Nz,{root:r,...t})),a[i]}function Sz(r,t,s){const a=kz(t);return Rp.set(r,s),a.observe(r),()=>{Rp.delete(r),a.unobserve(r)}}const Tz={some:0,all:1};class Iz extends qn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:a,amount:i="some",once:c}=t,o={root:s?s.current:void 0,rootMargin:a,threshold:typeof i=="number"?i:Tz[i]},d=u=>{const{isIntersecting:m}=u;if(this.isInView===m||(this.isInView=m,c&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:j,onViewportLeave:k}=this.node.getProps(),T=m?j:k;T&&T(u)};return Sz(this.node.current,o,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(Pz(t,s))&&this.startObserver()}unmount(){}}function Pz({viewport:r={}},{viewport:t={}}={}){return s=>r[s]!==t[s]}const Ez={inView:{Feature:Iz},tap:{Feature:jz},focus:{Feature:vz},hover:{Feature:bz}},Cz={layout:{ProjectionNode:V4,MeasureLayout:D4}},Mp={current:null},z4={current:!1};function Dz(){if(z4.current=!0,!!Yg)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),t=()=>Mp.current=r.matches;r.addListener(t),t()}else Mp.current=!1}const _z=new WeakMap;function $z(r,t,s){for(const a in t){const i=t[a],c=s[a];if(Qr(i))r.addValue(a,i);else if(Qr(c))r.addValue(a,Lo(i,{owner:r}));else if(c!==i)if(r.hasValue(a)){const o=r.getValue(a);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=r.getStaticValue(a);r.addValue(a,Lo(o!==void 0?o:i,{owner:r}))}}for(const a in s)t[a]===void 0&&r.removeValue(a);return t}const CN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Az{scrapeMotionValuesFromProps(t,s,a){return{}}constructor({parent:t,props:s,presenceContext:a,reducedMotionConfig:i,blockInitialAnimation:c,visualState:o},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=xs.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,or.render(this.render,!1,!0))};const{latestValues:u,renderState:m}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=m,this.parent=t,this.props=s,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!c,this.isControllingVariants=Ax(s),this.isVariantNode=o4(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:j,...k}=this.scrapeMotionValuesFromProps(s,{},this);for(const T in k){const C=k[T];u[T]!==void 0&&Qr(C)&&C.set(u[T],!1)}}mount(t){this.current=t,_z.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),z4.current||Dz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),On(this.notifyUpdate),On(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=tl.has(t);a&&this.onBindTransform&&this.onBindTransform();const i=s.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&or.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),c=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{i(),c(),o&&o(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Vo){const s=Vo[t];if(!s)continue;const{isEnabled:a,Feature:i}=s;if(!this.features[t]&&i&&a(this.props)&&(this.features[t]=new i(this)),this.features[t]){const c=this.features[t];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let a=0;a<CN.length;a++){const i=CN[a];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const c="on"+i,o=t[c];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=$z(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const a=this.values.get(t);s!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&s!==void 0&&(a=Lo(s===null?void 0:s,{owner:this}),this.addValue(t,a)),a}readValue(t,s){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(p3(a)||g3(a))?a=parseFloat(a):!JL(a)&&Ln.test(s)&&(a=X3(t,s)),this.setBaseTarget(t,Qr(a)?a.get():a)),Qr(a)?a.get():a}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var c;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const o=Py(this.props,s,(c=this.presenceContext)==null?void 0:c.custom);o&&(a=o[t])}if(s&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Qr(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new ry),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class B4 extends Az{constructor(){super(...arguments),this.KeyframeResolver=BL}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:a}){delete s[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qr(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function U4(r,{style:t,vars:s},a,i){Object.assign(r.style,t,i&&i.getProjectionStyles(a));for(const c in s)r.style.setProperty(c,s[c])}function Rz(r){return window.getComputedStyle(r)}class Mz extends B4{constructor(){super(...arguments),this.type="html",this.renderInstance=U4}readValueFromInstance(t,s){var a;if(tl.has(s))return(a=this.projection)!=null&&a.isProjecting?Np(s):iL(t,s);{const i=Rz(t),c=(ny(s)?i.getPropertyValue(s):i[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:s}){return I4(t,s)}build(t,s,a){Sy(t,s,a.transformTemplate)}scrapeMotionValuesFromProps(t,s,a){return Ey(t,s,a)}}const F4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Oz(r,t,s,a){U4(r,t,void 0,a);for(const i in t.attrs)r.setAttribute(F4.has(i)?i:ky(i),t.attrs[i])}class Lz extends B4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hr}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(tl.has(s)){const a=Y3(s);return a&&a.default||0}return s=F4.has(s)?s:ky(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,a){return g4(t,s,a)}build(t,s,a){m4(t,s,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,s,a,i){Oz(t,s,a,i)}mount(t){this.isSVGTag=p4(t.tagName),super.mount(t)}}const Vz=(r,t)=>Iy(r)?new Lz(t):new Mz(t,{allowProjection:r!==b.Fragment}),zz=O7({...cV,...Ez,...yz,...Cz},Vz),y=l7(zz);var H4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},DN=hn.createContext&&hn.createContext(H4),Bz=["attr","size","title"];function Uz(r,t){if(r==null)return{};var s=Fz(r,t),a,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(i=0;i<c.length;i++)a=c[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(s[a]=r[a])}return s}function Fz(r,t){if(r==null)return{};var s={};for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){if(t.indexOf(a)>=0)continue;s[a]=r[a]}return s}function Au(){return Au=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])}return r},Au.apply(this,arguments)}function _N(r,t){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),s.push.apply(s,a)}return s}function Ru(r){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?_N(Object(s),!0).forEach(function(a){Hz(r,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):_N(Object(s)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(s,a))})}return r}function Hz(r,t,s){return t=Wz(t),t in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function Wz(r){var t=qz(r,"string");return typeof t=="symbol"?t:t+""}function qz(r,t){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var a=s.call(r,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function W4(r){return r&&r.map((t,s)=>hn.createElement(t.tag,Ru({key:s},t.attr),W4(t.child)))}function st(r){return t=>hn.createElement(Gz,Au({attr:Ru({},r.attr)},t),W4(r.child))}function Gz(r){var t=s=>{var{attr:a,size:i,title:c}=r,o=Uz(r,Bz),d=i||s.size||"1em",u;return s.className&&(u=s.className),r.className&&(u=(u?u+" ":"")+r.className),hn.createElement("svg",Au({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,o,{className:u,style:Ru(Ru({color:r.color||s.color},s.style),r.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&hn.createElement("title",null,c),r.children)};return DN!==void 0?hn.createElement(DN.Consumer,null,s=>t(s)):t(H4)}function Qz(r){return st({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(r)}function Op(r){return st({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(r)}function $N(r){return st({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(r)}function Kz(r){return st({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(r)}function Zz(r){return st({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(r)}function AN(r){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"},child:[]}]})(r)}function Mt(r){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(r)}function Lp(r){return st({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM160 368c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V240c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v128zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V144c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v224zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-64c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v64z"},child:[]}]})(r)}function Al(r){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(r)}function Mu(r){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(r)}function RN(r){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(r)}function Ot(r){return st({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(r)}function MN(r){return st({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(r)}function sc(r){return st({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}const kt="/assets/logo-fb5fa587.png",Yz="/assets/brooklyn99-7c1a6c47.png",Xz="/assets/stranger-things-31a579dc.png",Jz="/assets/breaking-bad-482f4098.png",eB="/assets/naruto-54b60bd0.png",tB="/assets/alice-5ff5523e.png",rB="/assets/netflix-e3c8e0d2.png",sB="/assets/spotify-d09996b4.png",aB="/assets/disney-0c4f0934.png",nB="/assets/max-c00a4c65.png",iB="/assets/prime-video-72b85c51.png",oB="/assets/vix-ee8ed6dc.png",lB="/assets/Canva-e7a7d520.png",cB="/assets/ChatGPT-b8d712b1.png",dB="/assets/crunchyroll-562435fc.png",uB="/assets/redessociales-65298696.png",xB="/assets/dgo-7ac16535.png",mB="/assets/ligamax-7ac6606f.png",hB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",pB="/assets/youtube-49ca55e1.png",fB="/assets/deezer-17be4fc1.png",gB="/assets/tidal-d3f361cb.png",yB="/assets/vpn-62bcb4e7.png",bB="/assets/wintv-4112ccf1.png",vB="/assets/applemusic-67f0cc24.png",jB="/assets/appletv-e2fd6c55.png",wB="/assets/iptv-a55016d0.png",NB="/assets/flujotv-4d1c58b0.png",kB="/assets/vikirakuten-116faf85.png",SB="/assets/pornhub-46f32d0d.png",TB="/assets/paramount-5ab87b8f.png",IB="/assets/licencias-80ba80ab.png",PB="/assets/capcut-bc65a6c0.png",EB="/assets/duolingo-4d803f89.png",CB="/assets/buscapersonas-88e00efa.png",vs=[{src:Yz,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:Xz,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:Jz,title:"Breaking Bad",description:"Un descenso al mundo del crimen"},{src:eB,title:"Naruto",description:"Aventuras ninja épicas"},{src:tB,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],DB=[{name:"Netflix",logo:rB,route:"/netflix",color:"#FF0000"},{name:"Spotify",logo:sB,route:"/spotify",color:"#FF0000"},{name:"Disney+",logo:aB,route:"/disney",color:"#FF0000"},{name:"Max",logo:nB,route:"/max",color:"#FF0000"},{name:"Prime Video",logo:iB,route:"/primevideo",color:"#FF0000"},{name:"Vix",logo:oB,route:"/vix",color:"#FF0000"},{name:"Canva",logo:lB,route:"/canva",color:"#FF0000"},{name:"ChatGPT",logo:cB,route:"/chatgpt",color:"#FF0000"},{name:"Crunchyroll",logo:dB,route:"/crunchyroll",color:"#FF0000"},{name:"Redes Sociales",logo:uB,route:"/redessociales",color:"#FF0000"},{name:"Dgo",logo:xB,route:"/dgo",color:"#FF0000"},{name:"Liga Max",logo:mB,route:"/ligamax",color:"#FF0000"},{name:"Movistar Play",logo:hB,route:"/movistarplay",color:"#FF0000"},{name:"Youtube",logo:pB,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:fB,route:"/deezer",color:"#FF0000"},{name:"Tidal",logo:gB,route:"/tidal",color:"#FF0000"},{name:"Vpn",logo:yB,route:"/vpn",color:"#FF0000"},{name:"Win Tv",logo:bB,route:"/wintv",color:"#FF0000"},{name:"Apple Music",logo:vB,route:"/applemusic",color:"#FF0000"},{name:"Apple Tv",logo:jB,route:"/appletv",color:"#FF0000"},{name:"Iptv",logo:wB,route:"/iptv",color:"#FF0000"},{name:"Flujo Tv",logo:NB,route:"/flujotv",color:"#FF0000"},{name:"Viki Rakuten",logo:kB,route:"/vikirakuten",color:"#FF0000"},{name:"Pornhub",logo:SB,route:"/pornhub",color:"#FF0000"},{name:"Paramount",logo:TB,route:"/paramount",color:"#FF0000"},{name:"Licencias",logo:IB,route:"/licencias",color:"#FF0000"},{name:"Cap cut",logo:PB,route:"/capcut",color:"#FF0000"},{name:"Duolingo",logo:EB,route:"/duolingo",color:"#FF0000"},{name:"Busca Personas",logo:CB,route:"/buscapersonas",color:"#FF0000"}],q4=b.createContext({theme:"dark",toggleTheme:()=>{}}),_B=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(q4.Provider,{value:{theme:t,toggleTheme:a},children:e.jsx("div",{className:`min-h-screen font-inter transition-colors duration-300 ${t==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black text-gray-200":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100 text-gray-900"} flex flex-col`,children:r})})},$B=({isOpen:r,onClose:t,message:s,theme:a})=>e.jsx(jy,{children:r&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(y.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:`rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border-2 ${a==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Op,{className:"text-red-500 text-2xl"}),e.jsx("h3",{className:`text-xl font-bold ${a==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"})]}),e.jsx("p",{className:`mb-6 ${a==="dark"?"text-gray-300":"text-gray-600"}`,children:s}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"w-full py-2 rounded-xl bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white transition-colors",children:"Cerrar"})]})})}),AB=({isOpen:r,onClose:t,onSubmit:s,user:a,theme:i})=>{const[c,o]=b.useState(0),[d,u]=b.useState(0),[m,j]=b.useState(""),[k,T]=b.useState(""),[C,v]=b.useState(""),L=async $=>{if($.preventDefault(),!a){t();return}try{const R=te(E,"surveys"),V=xe(R,pe("userEmail","==",a.email));if(!(await jt(V)).empty){t();return}await s({websiteSatisfaction:c,providerSatisfaction:d,recommendedProvider:m,notRecommendedProvider:k,improvementSuggestions:C,timestamp:new Date,userEmail:a.email,username:a.name}),o(0),u(0),j(""),T(""),v(""),t()}catch(R){console.error("Error submitting survey:",R)}};return e.jsx(jy,{children:r&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(y.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:`rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border-2 ${i==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Lp,{className:"text-red-500 text-2xl"}),e.jsx("h3",{className:`text-xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:"Encuesta de Satisfacción"})]}),a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Estás satisfecho con la página? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map($=>e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>o($),className:`w-10 h-10 rounded-full border-2 ${c===$?"bg-red-500 text-white border-red-500":i==="dark"?"bg-gray-800 border-gray-600":"bg-gray-200 border-gray-400"} flex items-center justify-center transition-all`,children:$},$))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Estás satisfecho con los proveedores? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map($=>e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>u($),className:`w-10 h-10 rounded-full border-2 ${d===$?"bg-red-500 text-white border-red-500":i==="dark"?"bg-gray-800 border-gray-600":"bg-gray-200 border-gray-400"} flex items-center justify-center transition-all`,children:$},$))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Qué proveedor recomiendas?"}),e.jsx("input",{type:"text",value:m,onChange:$=>j($.target.value),className:`w-full py-2 px-3 rounded-xl bg-transparent border ${i==="dark"?"border-gray-600/50 text-white placeholder-gray-400":"border-gray-400/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all`,placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Qué proveedor no recomiendas?"}),e.jsx("input",{type:"text",value:k,onChange:$=>T($.target.value),className:`w-full py-2 px-3 rounded-xl bg-transparent border ${i==="dark"?"border-gray-600/50 text-white placeholder-gray-400":"border-gray-400/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all`,placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i==="dark"?"text-gray-200":"text-gray-700"}`,children:"¿Qué mejorarías de la página?"}),e.jsx("textarea",{value:C,onChange:$=>v($.target.value),className:`w-full py-2 px-3 rounded-xl bg-transparent border ${i==="dark"?"border-gray-600/50 text-white placeholder-gray-400":"border-gray-400/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all`,placeholder:"Escribe tus sugerencias",rows:"4"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:t,className:`w-full py-2 rounded-xl ${i==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-300 hover:bg-gray-400"} text-gray-100 transition-colors`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",onClick:L,className:"w-full py-2 rounded-xl bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white transition-colors disabled:opacity-50",disabled:c===0||d===0,children:"Enviar"})]})]}):e.jsx("p",{className:`mb-6 ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"Por favor, inicia sesión para completar la encuesta."})]})})})},RB=()=>{const[r,t]=b.useState(0),[s,a]=b.useState(null),[i,c]=b.useState(0),[o,d]=b.useState("user"),[u,m]=b.useState(""),[j,k]=b.useState([]),[T,C]=b.useState({isOpen:!1,message:""}),[v,L]=b.useState(!1),[$,R]=b.useState(!1),[V,z]=b.useState(!1),re=Tt(),{theme:q,toggleTheme:Q}=b.useContext(q4);b.useEffect(()=>{const l=setInterval(()=>{t(_e=>(_e+1)%vs.length)},5e3);return()=>clearInterval(l)},[]),b.useEffect(()=>(document.body.style.overflow=V?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[V]),b.useEffect(()=>{(async()=>{if(Ge.currentUser)try{const _e=te(E,"users"),de=xe(_e,pe("email","==",Ge.currentUser.email)),ue=await jt(de);if(!ue.empty){const ye=ue.docs[0].data();a({name:ye.username||"Usuario",email:Ge.currentUser.email}),c(ye.balance||0),d(ye.role||"user")}const je=await et(F(E,"notifications","adminMessage"));if(je.exists()){const ye=je.data();C({isOpen:!0,message:ye.message||"Mensaje del administrador no disponible."})}}catch(_e){console.error("Error al cargar datos:",_e),C({isOpen:!0,message:"Hubo un error al cargar los datos. Por favor, intenta de nuevo."})}})()},[]);const M=async()=>{try{const l=await et(F(E,"notifications","adminMessage"));if(l.exists()){const _e=l.data();C({isOpen:!0,message:_e.message||"Mensaje del administrador no disponible."})}else C({isOpen:!0,message:"No hay notificaciones del administrador en este momento."})}catch(l){console.error("Error al cargar notificación:",l),C({isOpen:!0,message:"Error al cargar la notificación. Por favor, intenta de nuevo."})}},x=async l=>{try{await In(te(E,"surveys"),l),C({isOpen:!0,message:"¡Gracias por tu opinión! La encuesta se ha enviado correctamente."})}catch(_e){console.error("Error al enviar la encuesta:",_e),C({isOpen:!0,message:"Error al enviar la encuesta. Por favor, intenta de nuevo."})}},W=async()=>{try{await Ge.signOut(),a(null),re("/login")}catch(l){console.error("Error al cerrar sesión:",l),C({isOpen:!0,message:"Error al cerrar sesión. Por favor, intenta de nuevo."})}},U=()=>{re({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[o]||"/dashboard/user")},ee=async l=>{if(l.preventDefault(),!u.trim()){k([]);return}try{const _e=te(E,"products"),de=xe(_e,pe("name",">=",u.toUpperCase()),pe("name","<=",u.toUpperCase()+"")),je=(await jt(de)).docs.map(ye=>({id:ye.id,...ye.data()}));k(je)}catch(_e){console.error("Error al buscar productos:",_e),C({isOpen:!0,message:"Error al realizar la búsqueda. Por favor, intenta de nuevo."}),k([])}},se=()=>{R(l=>!l)},X=()=>{z(l=>!l)},G=l=>{l.key==="Enter"&&ee(l)};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx($B,{isOpen:T.isOpen,onClose:()=>C({...T,isOpen:!1}),message:T.message,theme:q}),e.jsx(AB,{isOpen:v,onClose:()=>L(!1),onSubmit:x,user:s,theme:q}),e.jsxs(y.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:`sticky top-0 z-50 backdrop-blur-md border-b ${q==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center",children:[e.jsx("div",{className:"flex-1 flex items-center",children:e.jsxs(N,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${q==="dark"?"from-red-500/50 to-red-700/50 text-red-500":"from-red-600/50 to-red-800/50 text-red-600"} bg-clip-text`,children:"SZ Streaming"})]})}),e.jsx("div",{className:"flex-1 hidden lg:flex justify-center",children:e.jsxs(y.div,{className:"relative max-w-xl w-full",initial:{scale:.9},animate:{scale:1},children:[e.jsx(Al,{className:`absolute top-3.5 left-4 ${q==="dark"?"text-gray-400":"text-gray-600"} text-xl`}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:`w-full pl-12 pr-4 py-3 rounded-full bg-transparent border-2 ${q==="dark"?"border-red-500/50 text-white placeholder-gray-400":"border-red-600/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500 focus:border-red-500 shadow-lg backdrop-blur-sm transition-all hover:shadow-xl`,value:u,onChange:l=>m(l.target.value),onKeyDown:G}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:ee,className:"absolute right-4 top-1/2 -translate-y-1/2 text-red-500 text-xl","aria-label":"Buscar",children:e.jsx(Al,{})})]})}),e.jsxs("div",{className:"flex-1 flex justify-end items-center",children:[e.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:Q,className:`p-2 rounded-full ${q==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:q==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),s?e.jsxs(e.Fragment,{children:[e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:M,className:`p-2 rounded-full ${q==="dark"?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Ver notificaciones",children:e.jsx(Op,{className:"text-red-500",size:22})}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>L(!0),className:`p-2 rounded-full ${q==="dark"?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Abrir encuesta",children:e.jsx(Lp,{className:"text-red-500",size:22})}),e.jsx(y.span,{className:`text-base font-medium ${q==="dark"?"text-red-500":"text-red-600"}`,initial:{opacity:0},animate:{opacity:1},children:s.name}),e.jsxs(y.span,{className:`text-base font-medium px-4 py-1.5 rounded-full ${q==="dark"?"bg-gray-800 text-white":"bg-gray-200 text-gray-900"}`,whileHover:{scale:1.05},children:["S/ ",i.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:U,className:`p-2 rounded-full ${q==="dark"?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Panel de control",children:e.jsx(AN,{className:"text-red-500",size:22})}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:se,className:`p-2 rounded-full ${$?"bg-red-500 hover:bg-red-600":q==="dark"?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":$?"Desactivar modo live":"Activar modo live",children:e.jsx($N,{className:$?"text-white":"text-red-500",size:22})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:W,className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 shadow-md transition-all duration-300",children:[e.jsx(RN,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(N,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900",children:[e.jsx(Mu,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(N,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800",children:[e.jsx(sc,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:X,className:"p-2 rounded-full text-red-500 hover:bg-gray-700/50 lg:hidden","aria-label":"Toggle menu",children:V?e.jsx(MN,{size:22}):e.jsx(Qz,{size:22})})]})]}),e.jsx(jy,{children:V&&e.jsx(y.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:`lg:hidden fixed top-0 left-0 h-full w-64 ${q==="dark"?"bg-black border-gray-800/50":"bg-gray-100 border-gray-300/50"} z-50 shadow-2xl border-r border-red-500/20`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-red-500/20",children:[e.jsx("span",{className:`text-xl font-bold ${q==="dark"?"text-red-500":"text-red-600"}`,children:"Menú"}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:X,className:`p-2 rounded-full ${q==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"}`,"aria-label":"Cerrar menú",children:e.jsx(MN,{size:22})})]}),e.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Al,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent border ${q==="dark"?"border-gray-600/50 text-white placeholder-gray-400":"border-gray-400/50 text-gray-900 placeholder-gray-600"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all`,value:u,onChange:l=>m(l.target.value),onKeyDown:G}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:ee,className:"absolute right-3 top-1/2 -translate-y-1/2 text-red-500","aria-label":"Buscar",children:e.jsx(Al,{size:18})})]}),s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-base font-medium ${q==="dark"?"text-red-500":"text-red-600"}`,children:s.name}),e.jsxs("span",{className:`text-base font-medium px-4 py-1.5 rounded-full ${q==="dark"?"bg-gray-800 text-white":"bg-gray-200 text-gray-900"}`,children:["S/ ",i.toFixed(2)]})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{M(),X()},className:`flex items-center space-x-2 text-base text-left ${q==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(Op,{size:18}),e.jsx("span",{children:"Notificaciones"})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{L(!0),X()},className:`flex items-center space-x-2 text-base text-left ${q==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(Lp,{size:18}),e.jsx("span",{children:"Encuesta"})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{U(),X()},className:`flex items-center space-x-2 text-base text-left ${q==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(AN,{size:18}),e.jsx("span",{children:"Panel de control"})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{se(),X()},className:`flex items-center space-x-2 text-base text-left ${$?"text-red-500":q==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx($N,{size:18}),e.jsx("span",{children:$?"Desactivar modo live":"Activar modo live"})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{W(),X()},className:`flex items-center space-x-2 text-base text-left ${q==="dark"?"text-red-500 hover:text-red-600":"text-red-600 hover:text-red-700"}`,children:[e.jsx(RN,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{re("/login"),X()},className:`flex items-center space-x-2 text-base text-left ${q==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(Mu,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{re("/register"),X()},className:`flex items-center space-x-2 text-base text-left ${q==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(sc,{size:18}),e.jsx("span",{children:"Registrarse"})]})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q(),X()},className:`flex items-center space-x-2 text-base text-left ${q==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[q==="dark"?e.jsx(Ot,{size:18}):e.jsx(Mt,{size:18}),e.jsx("span",{children:"Cambiar tema"})]})]})]})})})]}),e.jsxs("main",{className:"flex-grow pt-24",children:[j.length>0&&e.jsxs(y.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 ${q==="dark"?"text-white":"text-gray-900"}`,children:"Resultados de búsqueda"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(l=>{var _e;return e.jsxs(y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},className:`p-6 rounded-2xl shadow-md border-2 ${q==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${q==="dark"?"text-red-500":"text-red-600"}`,children:l.name}),e.jsx("p",{className:`text-base line-clamp-2 mb-2 ${q==="dark"?"text-gray-300":"text-gray-600"}`,children:l.details||l.description}),e.jsxs("p",{className:`text-base font-medium mb-1 ${q==="dark"?"text-gray-200":"text-gray-700"}`,children:["Plataforma: ",l.category]}),e.jsxs("p",{className:`text-base font-bold ${q==="dark"?"text-red-500":"text-red-600"}`,children:["Precio: S/ ",(_e=l.price)==null?void 0:_e.toFixed(2)]})]},l.id)})})]}),u.trim()&&j.length===0&&e.jsx(y.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto text-center",children:e.jsxs("p",{className:`text-lg ${q==="dark"?"text-gray-300":"text-gray-600"}`,children:['No se encontraron productos para "',u,'".']})}),e.jsxs(y.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-8 px-6 text-center",children:[e.jsxs("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight ${q==="dark"?"text-white":"text-gray-900"}`,children:["SZ ",e.jsx("span",{className:q==="dark"?"text-red-500":"text-red-600",children:"Streaming"})]}),e.jsx("p",{className:`mt-4 text-lg sm:text-xl max-w-3xl mx-auto ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Accede a todo tu entretenimiento y herramientas con SZ Streaming."})]}),e.jsxs("section",{className:"relative py-6 px-6 sm:px-8",children:[e.jsxs(y.div,{className:"flex justify-center items-center space-x-4 perspective-1000",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(y.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform -rotate-y-15",initial:{x:-100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:vs[(r-1+vs.length)%vs.length].src,alt:"Programa anterior",className:"w-full h-full object-cover scale-110"})}),e.jsxs(y.div,{className:"relative rounded-2xl overflow-hidden shadow-2xl border-2 border-red-500/20",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:100},children:[e.jsx("img",{src:vs[r].src,alt:"Programa destacado",className:"w-72 h-96 sm:w-96 sm:h-[28rem] object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),e.jsxs(y.div,{className:"absolute bottom-0 w-full p-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${q==="dark"?"text-white":"text-gray-900"} drop-shadow-lg`,children:vs[r].title}),e.jsx("p",{className:`text-sm ${q==="dark"?"text-gray-300":"text-gray-600"}`,children:vs[r].description})]})]}),e.jsx(y.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform rotate-y-15",initial:{x:100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:vs[(r+1)%vs.length].src,alt:"Próximo programa",className:"w-full h-full object-cover scale-110"})}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(l=>(l-1+vs.length)%vs.length),className:`absolute left-4 top-1/2 -translate-y-1/2 ${q==="dark"?"bg-black/60 hover:bg-red-500/60 border-red-500/20":"bg-gray-100/60 hover:bg-red-500/60 border-red-500/20"} backdrop-blur-md p-3 rounded-full border-2`,"aria-label":"Programa anterior",children:e.jsx(Kz,{className:"text-red-500 text-xl"})}),e.jsx(y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(l=>(l+1)%vs.length),className:`absolute right-4 top-1/2 -translate-y-1/2 ${q==="dark"?"bg-black/60 hover:bg-red-500/60 border-red-500/20":"bg-gray-100/60 hover:bg-red-500/60 border-red-500/20"} backdrop-blur-md p-3 rounded-full border-2`,"aria-label":"Próximo programa",children:e.jsx(Zz,{className:"text-red-500 text-xl"})})]}),e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:vs.map((l,_e)=>e.jsx(y.div,{whileHover:{scale:1.2},className:`w-2 h-2 rounded-full transition-colors ${_e===r?"bg-red-500":q==="dark"?"bg-gray-600":"bg-gray-400"}`,"aria-label":`Ir a ${_e+1}`},_e))})]}),e.jsxs(y.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"py-16 container mx-auto px-6",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx(y.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:`text-3xl md:text-4xl font-bold ${q==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Plataformas de Streaming"}),e.jsx(y.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`max-w-2xl mx-auto ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Acceso a todas tus plataformas favoritas en un solo lugar."})]}),e.jsx(y.div,{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:DB.map(l=>e.jsx(y.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.05},className:"w-full h-32",children:e.jsxs(N,{to:l.route,className:`group relative flex items-center justify-center h-full rounded-2xl shadow-lg transition-all duration-300 ${q==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} border-2`,"aria-label":`Ir a ${l.name}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:l.logo,alt:l.name,className:"w-20 h-20 object-contain",style:{transform:$?"scaleX(-1)":"scaleX(1)"}}),e.jsx("span",{className:`font-semibold text-center text-base ${q==="dark"?"text-white":"text-gray-900"}`,children:l.name})]}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-300 bg-gradient-to-r from-red-500 to-red-700"})]})},l.name))})]}),!s&&e.jsx(y.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-16 bg-gradient-to-r from-red-600 to-red-800",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx(y.h2,{initial:{scale:.9},animate:{scale:1},className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"¿Listo para adquirir?"}),e.jsx("p",{className:"text-gray-200 max-w-2xl mx-auto mb-6",children:"Únete a miles de usuarios satisfechos accediendo a todas tus plataformas favoritas en un solo lugar."}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>re("/register"),className:"inline-flex items-center space-x-2 px-6 py-3 rounded-xl text-base font-semibold text-white bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 shadow-md transition-all duration-300",children:[e.jsx(sc,{size:18}),e.jsx("span",{children:"Regístrate"})]})]})})]}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${q==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"SZ Streaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${q==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"})]}),e.jsxs("div",{className:`text-sm text-center ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})})]})},MB=()=>e.jsx(_B,{children:e.jsx(RB,{})});function Dy(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(r)}function Ze(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(r)}function G4(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(r)}function zo(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(r)}function ot(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(r)}function Ou(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(r)}function zc(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(r)}function Q4(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(r)}function Lt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(r)}function OB(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(r)}function LB(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(r)}function Vp(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(r)}function Ir(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(r)}function K4(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(r)}function zp(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(r)}function Z4(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(r)}function Y4(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(r)}function Oe(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(r)}function Le(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(r)}function lt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(r)}function Rx(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(r)}function Bt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(r)}function ut(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(r)}function _y(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(r)}function It(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(r)}function Mx(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(r)}function Vt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(r)}function ds(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(r)}function Wt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(r)}function Se(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(r)}function ct(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(r)}function Lu(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(r)}function dt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(r)}function ON(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(r)}function X4(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(r)}function rt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(r)}function pd(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(r)}function Nt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(r)}function Me(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(r)}function Km(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(r)}function J4(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(r)}function di(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(r)}function le(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(r)}function VB(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(r)}function $y(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(r)}function Be(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(r)}function Bo(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(r)}function Ve(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(r)}function yt(r){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(r)}const eS=b.createContext({theme:"dark",toggleTheme:()=>{}}),zB=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{console.log("Toggling theme from",t);const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i),console.log("Theme set to",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(eS.Provider,{value:{theme:t,toggleTheme:a},children:r})},BB=()=>{const[r,t]=b.useState(""),[s,a]=b.useState(""),[i,c]=b.useState(null),[o,d]=b.useState(!1),u=Tt(),{theme:m,toggleTheme:j}=b.useContext(eS),k=async C=>{C.preventDefault(),c(null);try{const v=te(E,"users"),L=xe(v,pe("username","==",r)),$=await jt(L);if($.empty){c("Nombre de usuario no encontrado.");return}const z=$.docs[0].data().email,q=(await m9(Ge,z,s)).user;u("/")}catch{c("Usuario o contraseña incorrectos.")}},T=()=>{c(null)};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${m==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black text-gray-200":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${m==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(N,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${m==="dark"?"from-red-500/50 to-red-700/50 text-red-500":"from-red-600/50 to-red-800/50 text-red-600"} bg-clip-text`,children:"SZ Streaming"})]})}),e.jsx(y.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-red-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:j,className:`p-2 rounded-full ${m==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:m==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),e.jsxs(N,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900",children:[e.jsx(Mu,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(N,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800",children:[e.jsx(sc,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${m==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsx(y.div,{className:"flex justify-center mb-6",children:e.jsx(y.img,{whileHover:{scale:1.05},src:kt,alt:"SZ Streaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${m==="dark"?"text-white":"text-gray-900"}`,children:["SZ",e.jsx("span",{className:m==="dark"?"text-red-500":"text-red-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${m==="dark"?"text-gray-400":"text-gray-600"}`,children:"Bienvenido de nuevo. Inicia sesión para continuar."}),i&&e.jsxs("div",{className:"mb-6 p-3 bg-gradient-to-r from-red-900/80 to-red-800/80 border-l-4 border-red-500 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-400"}),e.jsx("span",{className:"text-red-300",children:i})]}),e.jsx("button",{onClick:T,className:"text-red-400 hover:text-red-300",children:e.jsx(yt,{size:18})})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${m==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute top-3 left-3 ${m==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",placeholder:"Tu nombre de usuario",value:r,onChange:C=>t(C.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${m==="dark"?"text-white":"text-gray-900"} border ${m==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${m==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${m==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(_y,{className:`absolute top-3 left-3 ${m==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:o?"text":"password",placeholder:"••••••••",value:s,onChange:C=>a(C.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${m==="dark"?"text-white":"text-gray-900"} border ${m==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${m==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0}),e.jsx("button",{type:"button",onClick:()=>d(!o),className:`absolute top-3 right-3 ${m==="dark"?"text-gray-400 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-colors`,"aria-label":o?"Ocultar contraseña":"Mostrar contraseña",children:o?e.jsx(Z4,{size:18}):e.jsx(Y4,{size:18})})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white font-medium rounded-xl shadow-lg transition-all duration-300",children:"Iniciar Sesión"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(N,{to:"/register",className:`flex items-center justify-center transition-all text-lg ${m==="dark"?"text-gray-400 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(G4,{className:"mr-1"})," ¿No tienes una cuenta? Regístrate"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${m==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"SZ Streaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${m==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"})]}),e.jsxs("div",{className:`text-sm text-center ${m==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${m==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})})]})},UB=()=>e.jsx(zB,{children:e.jsx(BB,{})}),FB=[],tS=b.createContext({theme:"dark",toggleTheme:()=>{}}),HB=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(tS.Provider,{value:{theme:t,toggleTheme:a},children:r})},WB=({isOpen:r,message:t,type:s,onClose:a})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md p-6 rounded-2xl shadow-2xl max-w-sm w-full border transform transition-all duration-300 border-red-500 scale-100",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[s==="success"?e.jsx(zc,{className:"text-red-400 text-2xl mr-2"}):e.jsx(Ze,{className:"text-red-400 text-2xl mr-2"}),e.jsx("h3",{className:"text-lg font-bold text-red-400",children:s==="success"?"Éxito":"Error"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("button",{onClick:a,className:"w-full py-2 rounded-xl font-medium transition-all duration-300 bg-red-600 hover:bg-red-700 text-white",children:"Cerrar"})]})}):null,qB=()=>{const[r,t]=b.useState(""),[s,a]=b.useState(""),[i,c]=b.useState(""),[o,d]=b.useState(""),[u,m]=b.useState("+51"),[j,k]=b.useState("user"),[T,C]=b.useState(""),[v,L]=b.useState(!1),[$,R]=b.useState({isOpen:!1,message:"",type:"success"}),[V,z]=b.useState(!1),re=Tt(),{theme:q,toggleTheme:Q}=b.useContext(tS),M=async x=>{x.preventDefault(),R({isOpen:!1,message:"",type:"success"}),L(!0);try{if(!r||r.length<3)throw new Error("El nombre de usuario debe tener al menos 3 caracteres.");if(!s||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))throw new Error("Por favor, ingresa un correo electrónico válido.");if(!i||i.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres.");if(!o||!/^\d{7,15}$/.test(o))throw new Error("Por favor, ingresa un número de teléfono válido (7-15 dígitos).");if(!["user","affiliate","provider"].includes(j))throw new Error("Rol no válido.");const W=await x9(Ge,s,i);await Kl(F(E,"users",W.user.uid),{username:r,email:s,phone:`${u}${o}`,role:j,referrerCode:T||null,createdAt:new Date().toISOString()}),R({isOpen:!0,message:"¡Registro exitoso! Ahora puedes iniciar sesión.",type:"success"}),setTimeout(()=>{re("/login")},2e3)}catch(W){let U=W.message||"Error al enviar la solicitud de registro. Por favor, inténtalo de nuevo.";W.code==="auth/email-already-in-use"&&(U="El correo electrónico ya está en uso."),R({isOpen:!0,message:U,type:"error"})}finally{L(!1)}};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${q==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black text-gray-200":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${q==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(N,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${q==="dark"?"from-red-500/50 to-red-700/50 text-red-500":"from-red-600/50 to-red-800/50 text-red-600"} bg-clip-text`,children:"SZ Streaming"})]})}),e.jsx(y.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-red-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:Q,className:`p-2 rounded-full ${q==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:q==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),e.jsxs(N,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900",children:[e.jsx(Mu,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(N,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800",children:[e.jsx(sc,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${q==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsx(y.div,{className:"flex justify-center mb-6",children:e.jsx(y.img,{whileHover:{scale:1.05},src:kt,alt:"SZ Streaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${q==="dark"?"text-white":"text-gray-900"}`,children:["SZ",e.jsx("span",{className:q==="dark"?"text-red-500":"text-red-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Regístrate para acceder al sistema."}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:r,onChange:x=>t(x.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige un nombre de usuario",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Correo Electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx(Mx,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"email",value:s,onChange:x=>a(x.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu correo electrónico",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Número de Teléfono"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-48",children:[e.jsx("select",{value:u,onChange:x=>m(x.target.value),className:`w-full px-4 py-2.5 rounded-xl ${q==="dark"?"bg-gray-700/50 text-white":"bg-gray-200/50 text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all appearance-none`,children:FB.map(x=>e.jsxs("option",{value:x.code,children:[x.flag," ",x.name," (",x.code,")"]},x.code+x.name))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${q==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(Lu,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"tel",value:o,onChange:x=>d(x.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu número de teléfono",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(_y,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:V?"text":"password",value:i,onChange:x=>c(x.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige una contraseña",required:!0}),e.jsx("button",{type:"button",onClick:()=>z(!V),className:`absolute top-3 right-3 ${q==="dark"?"text-gray-400 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-colors`,"aria-label":V?"Ocultar contraseña":"Mostrar contraseña",children:V?e.jsx(Z4,{size:18}):e.jsx(Y4,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Rol"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:j,onChange:x=>k(x.target.value),className:`w-full px-4 py-2.5 rounded-xl ${q==="dark"?"bg-gray-700/50":"bg-gray-200/50"} ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all appearance-none`,children:e.jsx("option",{value:"user",children:"Usuario"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${q==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Código de Referido (opcional)"}),e.jsx("input",{type:"text",value:T,onChange:x=>C(x.target.value),className:`w-full pl-4 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Ingresa un código de referido (si tienes)"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:v,className:`w-full py-3 rounded-xl font-medium transition-all duration-300 ${v?"bg-gray-600 text-gray-400 cursor-not-allowed":q==="dark"?"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white":"bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 text-white"}`,children:v?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})]}),"Registrando..."]}):"Registrarse"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(N,{to:"/login",className:`flex items-center justify-center transition-all text-lg ${q==="dark"?"text-gray-400 hover:text-red-500":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(G4,{className:"mr-1"})," ¿Ya tienes una cuenta? Inicia sesión"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${q==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"SZ Streaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${q==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"})]}),e.jsxs("div",{className:`text-sm text-center ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})}),e.jsx(WB,{isOpen:$.isOpen,message:$.message,type:$.type,onClose:()=>R({isOpen:!1,message:"",type:"success"})})]})},GB=()=>e.jsx(HB,{children:e.jsx(qB,{})}),QB=({isOpen:r,message:t,title:s,onClose:a})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,KB=({isOpen:r,user:t,onClose:s,onSave:a})=>{const[i,c]=b.useState((t==null?void 0:t.username)||""),[o,d]=b.useState(""),u=m=>{if(m.preventDefault(),d(""),!i.trim()){d("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:m=>c(m.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},ZB=({isOpen:r,provider:t,onClose:s,onRate:a})=>{const[i,c]=b.useState(0),[o,d]=b.useState(""),u=m=>{if(m.preventDefault(),d(""),i<1||i>5){d("Por favor, selecciona una calificación entre 1 y 5 estrellas.");return}a(t.id,i),c(0)};return r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Calificar Proveedor"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Proveedor: ",t.name]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(m=>e.jsx(Me,{size:24,className:`cursor-pointer ${m<=i?"text-red-400 fill-current":"text-gray-400"}`,onClick:()=>c(m)},m))}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Enviar Calificación"})]})]})]})})}):null},YB=({userName:r,email:t,balance:s,orders:a,notifications:i,setActivePage:c,formatDate:o})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-red-400",children:r.username})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Be,{className:"mr-2 text-red-400"}),e.jsx("span",{children:r.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(ds,{className:"mr-2 text-red-400"}),e.jsx("span",{children:t})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Lu,{className:"mr-2 text-red-400"}),e.jsx("span",{children:r.phone||"No especificado"})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",s.toFixed(2)]}),e.jsx("button",{onClick:()=>c("recargar"),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:"Pedidos activos"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:a.filter(d=>new Date(d.endDate)>new Date&&d.status==="completed").length}),e.jsx("button",{onClick:()=>c("pedidos"),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Ver pedidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),a.length>0?a.slice(0,3).map(d=>{const u=new Date(d.endDate)>new Date&&d.status==="completed",m=d.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-white",children:d.productName||"Producto sin nombre"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d.status==="pending"?"bg-yellow-900/80 text-yellow-400":u?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:m?"A pedido":u?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",o(d.endDate)]})]},d.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),a.length>3&&e.jsx("button",{onClick:()=>c("pedidos"),className:"w-full mt-3 text-center text-red-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),i.length>0?i.map(d=>{var u,m;return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:d.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o(((m=(u=d.updatedAt)==null?void 0:u.toDate)==null?void 0:m.call(u))||new Date)})]},d.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]}),XB=({notifications:r,formatDate:t})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(s=>{var a,i;return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:s.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:t(((i=(a=s.updatedAt)==null?void 0:a.toDate)==null?void 0:i.call(a))||new Date)})]},s.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(zo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]}),JB=({amount:r,setAmount:t,topUps:s,actionLoading:a,handleTopUpRequest:i,formatDate:c})=>{const[o,d]=b.useState("PEN"),[u,m]=b.useState(3.75*1.1),[j,k]=b.useState(!1),[T,C]=b.useState(""),[v,L]=b.useState("Yape");b.useEffect(()=>{(async()=>{k(!0);try{const q=(await(await fetch("https://api.exchangerate-api.com/v4/latest/USD")).json()).rates.PEN||3.75;m(q*1.1)}catch(z){console.error("Error fetching exchange rate:",z)}finally{k(!1)}})()},[]),b.useEffect(()=>{const V=parseFloat(T);if(isNaN(V))t("");else{const z=o==="USD"?V*u:V;t(z.toFixed(2))}},[T,o,u,t]);const $=V=>{const z=V.target.value;C(z)},R=r&&!isNaN(parseFloat(r))?parseFloat(r).toFixed(2):"0.00";return e.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-0",children:[e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-lg p-6 sm:p-8 rounded-3xl shadow-2xl border border-gray-700/30",children:[e.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-white mb-6 text-center",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-lg mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2 font-medium",children:"Moneda"}),e.jsxs("select",{value:o,onChange:V=>{d(V.target.value),C("")},className:"w-full px-4 py-3 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300",children:[e.jsx("option",{value:"PEN",children:"S/ (PEN)"}),e.jsx("option",{value:"USD",children:"$ (USD)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2 font-medium",children:["Monto a recargar (",o==="PEN"?"S/":"$",")"]}),e.jsx("input",{type:"number",value:T,onChange:$,className:"w-full px-4 py-3 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 placeholder-gray-500",placeholder:`Mínimo ${o==="PEN"?"S/ 10.00":"$ "+(10/u).toFixed(2)}`,min:o==="PEN"?"10":(10/u).toFixed(2),step:"0.01"}),o==="USD"&&!isNaN(parseFloat(T))&&e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Equivalente: S/ ",R," (Tasa: 1 USD = ",u.toFixed(2)," PEN, incluye 10% adicional)",j&&" (Cargando tasa...)"]})]}),e.jsx("button",{onClick:i,disabled:a.topUp||!r||parseFloat(r)<10,className:`w-full py-3 px-4 rounded-xl font-medium text-lg transition-all duration-300 ${r&&parseFloat(r)>=10&&!a.topUp?"bg-purple-500 hover:bg-purple-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:a.topUp?e.jsx("div",{className:"animate-spin h-6 w-6 border-3 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"})]}),e.jsxs("div",{className:"mt-8 bg-gray-800/50 backdrop-blur-lg p-6 rounded-2xl border border-gray-700/30 max-w-lg mx-auto",children:[e.jsxs("div",{className:"flex justify-center mb-6 space-x-2",children:[e.jsx("button",{onClick:()=>L("Yape"),className:`px-6 py-2 text-lg font-medium rounded-xl transition-all duration-300 ${v==="Yape"?"bg-purple-600 text-white":"bg-gray-700/50 text-gray-300 hover:bg-purple-500/50"}`,children:"Yape"}),e.jsx("button",{onClick:()=>L("Binance"),className:`px-6 py-2 text-lg font-medium rounded-xl transition-all duration-300 ${v==="Binance"?"bg-yellow-500 text-black":"bg-gray-700/50 text-gray-300 hover:bg-yellow-500/50"}`,children:"Binance Pay"})]}),v==="Yape"?e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h4",{className:"text-lg font-semibold text-purple-400 mb-4 flex items-center",children:[e.jsx(Ir,{className:"mr-2"})," Pago con Yape"]}),e.jsxs("p",{className:"text-gray-300 mb-3",children:["Escanea el código QR o usa ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," con el número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-3",children:"📱 940505969"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-white p-4 rounded-xl border-4 border-purple-600 shadow-md",children:e.jsx("img",{src:"/src/images/yape-sz.png",alt:"Yape QR Code",className:"w-48 h-48 object-contain"})})}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Realiza el pago de S/ ",R,o==="USD"?" (equivalente a tu monto en USD con 10% adicional)":"",". Confirma tu recarga vía WhatsApp."]}),e.jsxs("a",{href:`https://wa.me/51940505969?text=${encodeURIComponent(`Hola 😊, he realizado una recarga a través de Yape por S/ ${R}. Por favor, confirma mi pago.`)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(ds,{className:"mr-2"})," Confirmar por WhatsApp"]})]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h4",{className:"text-lg font-semibold text-yellow-400 mb-4 flex items-center",children:[e.jsx(LB,{className:"mr-2"})," Pago con Binance Pay"]}),e.jsxs("p",{className:"text-gray-300 mb-3",children:["Escanea el código QR o usa el enlace de ",e.jsx("span",{className:"font-semibold text-white",children:"Binance Pay"})," para pagar en USDT:"]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-white p-4 rounded-xl border-4 border-yellow-500 shadow-md",children:e.jsx("img",{src:"/src/images/binance-sz.png",alt:"Binance Pay QR Code",className:"w-48 h-48 object-contain"})})}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Paga S/ ",R," (equivalente en USDT al tipo de cambio actual con 10% adicional). Confirma tu transacción enviándonos el ID de transacción vía WhatsApp."]}),e.jsxs("a",{href:`https://wa.me/51940505969?text=${encodeURIComponent(`Hola 😊, he realizado una recarga a través de Binance Pay por S/ ${R} (en USDT). Por favor, confirma mi pago. ID de transacción: [Ingresa tu ID].`)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-black rounded-xl font-medium transition-all duration-300",children:[e.jsx(ds,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-lg p-6 sm:p-8 rounded-3xl shadow-2xl border border-gray-700/30",children:[e.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-white mb-6 text-center",children:"Historial de recargas"}),s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:s.map(V=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white font-medium",children:["S/ ",V.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${V.status==="aprobado"?"bg-green-900/80 text-green-400":V.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:V.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:c(V.date)})]},V.id))})]})}):e.jsx("p",{className:"text-gray-400 py-8 text-center text-lg",children:"No hay recargas registradas"})]})]})},eU=({providers:r,openRateProviderModal:t})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Proveedores"}),r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsx("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Teléfono: ",s.phone]})]}),e.jsxs("button",{onClick:()=>t(s),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300 flex items-center gap-2",children:[e.jsx(Me,{size:16}),"Calificar"]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay proveedores"}),e.jsx("p",{className:"text-gray-400",children:"No has realizado compras con proveedores aún."})]})]}),tU=({orders:r,searchQuery:t,setSearchQuery:s,formatDate:a,handleRenewal:i,actionLoading:c,balance:o})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-3 sm:p-4 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative w-48 sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"w-full px-3 py-1.5 rounded-lg bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300 text-sm placeholder-gray-500",value:t,onChange:d=>s(d.target.value)}),e.jsx(rt,{className:"absolute right-2 top-2 text-gray-400",size:16})]})]}),r.length>0?r.filter(d=>(d.productName||"").toLowerCase().includes(t.toLowerCase())||(d.orderId||"").toLowerCase().includes(t.toLowerCase())).map(d=>{var re,q,Q,M,x,W,U,ee,se,X,G,l;console.log("Order data:",d);const u=parseFloat(d.price)||0,m=parseFloat(d.renewalPrice)||0,j=new Date(d.endDate)>new Date&&d.status==="completed",k=d.status==="pending",T=d.daysRemaining||0,C=d.timeElapsedPercentage||0;let v="bg-red-400";C>70&&C<=90?v="bg-yellow-400":C>90&&(v="bg-red-400");const L=k?e.jsx(Lt,{className:"text-yellow-400",size:16}):j?e.jsx(zc,{className:"text-green-400",size:16}):e.jsx(Ze,{className:"text-red-400",size:16}),$=encodeURIComponent(`*Consulta sobre Pedido - ${d.productName||"Sin nombre"}*

*N° Pedido:* ${d.orderId||"No especificado"}
*Producto:* ${d.productName||"Sin nombre"}
*Precio:* S/ ${u.toFixed(2)}
`+(d.renewalPrice?`*Precio de Renovación:* S/ ${m.toFixed(2)}
`:"")+`*Estado:* ${k?"A pedido":j?"Activo":"Expirado"}
*Fecha de Inicio:* ${a(d.startDate)}
*Fecha de Vencimiento:* ${a(d.endDate)}
`+(k?`Hola 😊, he comprado un producto a pedido (${d.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),R=encodeURIComponent(`😊 Estimado/a ${((re=d.client)==null?void 0:re.customerName)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${d.productName||"Sin nombre"}.
🔢 Código: ${d.orderId||"No especificado"}
`+(k?"":`📧 Correo: ${((q=d.account)==null?void 0:q.email)||"No especificado"}
🔐 Contraseña: ${((Q=d.account)==null?void 0:Q.password)||"No especificado"}
👤 Perfil: ${((M=d.account)==null?void 0:M.profile)||"No especificado"}
📌 PIN: ${((x=d.account)==null?void 0:x.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${a(d.startDate)}
📅 Fecha de vencimiento: ${a(d.endDate)}
🏁 Días contratados: ${d.durationDays||30} días.

`+(k?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${d.terms||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),V=d.providerPhone?d.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999",z=(W=d.client)!=null&&W.phone?d.client.phone.replace(/^\+/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-3 py-2 border-b border-gray-600/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[L,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white text-sm",children:d.productName||"Producto sin nombre"}),d.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N°: ",d.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",u.toFixed(1)]}),e.jsx("p",{className:"text-xs text-gray-500",children:d.renewalPrice&&`Ren: S/ ${m.toFixed(1)}`}),e.jsx("p",{className:`text-xs ${k?"text-yellow-400":v.replace("bg-","text-")}`,children:k?"Pendiente":`${T} día${T===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-3 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"w-full bg-gray-600/40 rounded-full h-1",children:e.jsx("div",{className:`h-1 rounded-full ${v}`,style:{width:`${Math.min(C,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 text-right",children:[C.toFixed(0),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Be,{className:"mr-0.5",size:12})," Cuenta"]}),e.jsx("div",{className:"space-y-0.5 text-xs text-gray-300",children:k?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:"text-gray-200",children:"No"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:"text-gray-200",children:((U=d.account)==null?void 0:U.email)||"No especificado"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:"text-gray-200",children:((ee=d.account)==null?void 0:ee.password)||"No especificado"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:"text-gray-200",children:((se=d.account)==null?void 0:se.profile)||"No especificado"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:"text-gray-200",children:((X=d.account)==null?void 0:X.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Oe,{className:"mr-0.5",size:12})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-300",children:[e.jsxs("p",{children:["Inicio: ",e.jsx("span",{className:"text-gray-200",children:a(d.startDate)})]}),e.jsxs("p",{children:["Vencimiento: ",e.jsx("span",{className:"text-gray-200",children:a(d.endDate)})]}),e.jsxs("p",{children:["Estado: ",e.jsx("span",{className:"text-gray-200",children:k?"A pedido":j?"Activo":"Expirado"})]})]})]}),e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Be,{className:"mr-0.5",size:12})," Cliente"]}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-300",children:[e.jsxs("p",{children:["Nombre: ",e.jsx("span",{className:"text-gray-200",children:((G=d.client)==null?void 0:G.customerName)||"No especificado"})]}),e.jsxs("p",{children:["Teléfono: ",e.jsx("span",{className:"text-gray-200",children:((l=d.client)==null?void 0:l.phone)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[e.jsxs("a",{href:`https://wa.me/51${V}?text=${$}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all duration-300 text-sm flex items-center gap-1",children:[e.jsx(ds,{size:16})," Contactar proveedor"]}),j&&d.renewable&&e.jsx("button",{onClick:()=>i(d),disabled:c[`renew_${d.id}`]||o<m,className:`px-4 py-2 rounded-xl flex items-center gap-1 ${c[`renew_${d.id}`]||o<m?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"} transition-all duration-300 text-sm`,children:c[`renew_${d.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(X4,{size:16})," Renovar (S/ ",m.toFixed(1),")"]})}),e.jsxs("a",{href:`https://wa.me/51${z}?text=${R}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300 text-sm flex items-center gap-1",children:[e.jsx(ds,{size:16})," Contactar cliente"]})]})]})]},d.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nt,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos"}),e.jsx("p",{className:"text-gray-400",children:"Aún no has realizado ningún pedido."})]})]}),rU=({userName:r,email:t,actionLoading:s,handleUpdatePassword:a,openEditProfileModal:i,handleLogout:c})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Be,{className:"mr-2"})," Perfil"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Be,{className:"mr-2 text-red-400"})," Nombre: ",r.username]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Mx,{className:"mr-2 text-red-400"})," Correo: ",t]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Lu,{className:"mr-2 text-red-400"})," Teléfono: ",r.phone||"No especificado"]})]}),e.jsx("button",{onClick:()=>i({id:r.id,username:r.username}),className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Editar Perfil"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Lu,{className:"mr-2"})," Seguridad"]}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-1",children:"Nueva Contraseña"}),e.jsx("input",{type:"password",name:"password",className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300",placeholder:"Ingrese nueva contraseña"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-1",children:"Nuevo Teléfono"}),e.jsx("input",{type:"tel",name:"phone",className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300",placeholder:"Ingrese nuevo teléfono"})]}),e.jsx("button",{type:"submit",disabled:s.password,className:`w-full py-2 rounded-xl text-white transition-all duration-300 ${s.password?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-500 hover:bg-red-600"}`,children:s.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(It,{className:"mr-2"})," Sesión"]}),e.jsxs("button",{onClick:c,className:"w-full py-2 flex items-center justify-center gap-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:[e.jsx(It,{size:16}),"Cerrar Sesión"]})]})]})]}),sU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState(""),[i,c]=b.useState([]),[o,d]=b.useState({username:"",phone:""}),[u,m]=b.useState(""),[j,k]=b.useState(0),[T,C]=b.useState(null),[v,L]=b.useState("inicio"),[$,R]=b.useState([]),[V,z]=b.useState({}),[re,q]=b.useState([]),[Q,M]=b.useState(!0),[x,W]=b.useState({}),[U,ee]=b.useState(null),[se,X]=b.useState({isOpen:!1,message:"",title:""}),[G,l]=b.useState({isOpen:!1,user:null}),[_e,de]=b.useState({isOpen:!1,provider:null}),[ue,je]=b.useState(""),[ye,$e]=b.useState([]),be=Tt(),Te=(_,P)=>{X({isOpen:!0,title:_,message:P})},qe=()=>{X({isOpen:!1,message:"",title:""})},Ce=_=>{l({isOpen:!0,user:_})},ze=()=>{l({isOpen:!1,user:null})},De=_=>{de({isOpen:!0,provider:_})},n=()=>{de({isOpen:!1,provider:null})},w=async(_,P)=>{try{W(g=>({...g,profile:!0}));const h=F(E,"users",_);await Rr(h,{username:P,updatedAt:ve()}),d(g=>({...g,username:P})),Te("Éxito","Perfil actualizado exitosamente"),ze()}catch(h){console.error("Error al actualizar perfil:",h),Te("Error",h.message||"Error al actualizar el perfil")}finally{W(h=>({...h,profile:!1}))}},p=async(_,P)=>{try{W(h=>({...h,[`rate_${_}`]:!0})),await In(te(E,"ratings"),{userId:T,providerId:_,rating:P,ratedAt:ve()}),Te("Éxito","Calificación enviada exitosamente"),n()}catch(h){console.error("Error al calificar proveedor:",h),Te("Error",h.message||"Error al enviar la calificación")}finally{W(h=>({...h,[`rate_${_}`]:!1}))}};b.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const P=xe(te(E,"products")),h=await jt(P);console.log("Products fetched:",h.docs.length);const g={};h.forEach(S=>{g[S.id]=S.data()}),z(g)}catch(P){console.error("Error fetching products:",P),ee("Error al cargar productos: "+P.message)}})()},[]),b.useEffect(()=>{const _=fe(F(E,"notifications","adminMessage"),P=>{if(P.exists()){const h=P.data(),g="user";h.roles&&h.roles.includes(g)?q([{id:P.id,...h}]):q([])}else q([])},P=>{console.error("Error in notifications listener:",P),ee("Error al cargar notificaciones: "+P.message)});return()=>_()},[]),b.useEffect(()=>{if(!T)return;(async()=>{try{const P=xe(te(E,"sales"),pe("customerId","==",T)),h=await jt(P),g=new Set,S=[];h.forEach(Z=>{const Y=Z.data();Y.providerId&&!g.has(Y.providerId)&&(g.add(Y.providerId),S.push({id:Y.providerId,name:Y.provider||"Proveedor desconocido",phone:Y.providerPhone||"No especificado"}))}),$e(S)}catch(P){console.error("Error fetching providers:",P),ee("Error al cargar proveedores: "+P.message)}})()},[T]);const A=async _=>{try{W(J=>({...J,[`renew_${_.id}`]:!0}));const P=parseFloat(_.renewalPrice)||parseFloat(_.price)||0;if(j<P){Te("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const h=parseInt(_.durationDays)||30,g=Kt.now(),S=g.toDate(),Z=S,Y=new Date(Z.getTime()+h*24*60*60*1e3),ie=Kt.fromDate(Y),ce=F(E,"sales",_.id);await Rr(ce,{startDate:g,endDate:ie,renewedAt:g,status:"completed",updatedAt:ve()});const oe=F(E,"users",T);await Rr(oe,{balance:j-P}),k(J=>J-P),R(J=>J.map(he=>he.id===_.id?{...he,startDate:Z,endDate:Y,renewedAt:S,status:"completed",daysRemaining:h,totalDays:h,timeElapsedPercentage:0}:he)),Te("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${ne(Y)}`)}catch(P){console.error("Error al renovar el pedido:",P),Te("Error","Error al renovar el pedido: "+P.message)}finally{W(P=>({...P,[`renew_${_.id}`]:!1}))}},B=async()=>{try{await Px(Ge),be("/")}catch(_){console.error("Error al cerrar sesión:",_),Te("Error",_.message||"Error al cerrar sesión")}};b.useEffect(()=>{const _=_t(Ge,P=>{P?(C(P.uid),m(P.email||"No especificado"),M(!1)):be("/login")});return()=>_()},[be]),b.useEffect(()=>{if(!T)return;const _=F(E,"users",T),P=fe(_,h=>{if(h.exists()){const g=h.data();d({username:g.username||"Usuario",phone:g.phone||""}),m(g.email||"No especificado"),k(Number(g.balance)||0)}else ee("Usuario no encontrado")},h=>{console.error("Error in user data listener:",h),ee("Error al cargar datos del usuario: "+h.message)});return()=>P()},[T]),b.useEffect(()=>{if(!T)return;const _=xe(te(E,"sales"),pe("customerId","==",T)),P=fe(_,async g=>{var ie,ce;if(g.empty){R([]),M(!1);return}const S=new Date,Z=5*24*60*60*1e3;for(const oe of g.docs){const he=((ce=(ie=oe.data().endDate)==null?void 0:ie.toDate)==null?void 0:ce.call(ie))||new Date;if(he<S&&S.getTime()-he.getTime()>Z)try{await k0(F(E,"sales",oe.id)),console.log(`Deleted expired order: ${oe.id}`)}catch(ke){console.error(`Error deleting order ${oe.id}:`,ke)}}const Y=g.docs.map(oe=>{var qt,Ft,ht,ns,dr,is,gr,ys,Yt,Yr,os;const J=oe.data(),ke=((Ft=(qt=J.saleDate)==null?void 0:qt.toDate)==null?void 0:Ft.call(qt))||((ns=(ht=J.createdAt)==null?void 0:ht.toDate)==null?void 0:ns.call(ht))||new Date;let Ue=(is=(dr=J.startDate)==null?void 0:dr.toDate)==null?void 0:is.call(dr),Pe=Ue||ke,pt=!1;Ue||(pt=!0);const Fe=J.durationDays||30;let We;J.endDate?We=J.endDate.toDate?J.endDate.toDate():new Date(J.endDate):(We=new Date(Pe.getTime()+Fe*24*60*60*1e3),pt=!0),pt&&Rr(F(E,"sales",oe.id),{startDate:Ue||Kt.fromDate(ke),endDate:Kt.fromDate(We),durationDays:Fe}).catch(Ds=>{console.error("Error al actualizar startDate/endDate en Firestore:",Ds)});const Ie=We.getTime()-Pe.getTime(),Qe=S.getTime()-Pe.getTime(),Ye=We.getTime()-S.getTime(),we=Math.ceil(Ie/(1e3*60*60*24)),Re=Math.max(0,Math.ceil(Ye/(1e3*60*60*24))),tt=Math.ceil(Qe/(1e3*60*60*24)),at=we>0?tt/we*100:100,wt=((gr=V[J.providerId])==null?void 0:gr.terms)||"No se especificaron términos y condiciones.";return{id:oe.id,productName:J.productName||"Producto sin nombre",category:J.type||"netflix",price:parseFloat(J.price)||0,renewalPrice:parseFloat(J.renewalPrice)||0,provider:J.provider||"No especificado",providerId:J.providerId||"",providerPhone:J.providerPhone||J.providerWhatsapp||"51999999999",status:J.status||"completed",saleDate:ke,startDate:Pe,endDate:We,durationDays:Fe,daysRemaining:Re,totalDays:we,timeElapsedPercentage:at,account:{email:((ys=J.accountDetails)==null?void 0:ys.email)||"No especificado",password:((Yt=J.accountDetails)==null?void 0:Yt.password)||"No especificado",profile:((Yr=J.accountDetails)==null?void 0:Yr.profile)||"No especificado",pin:((os=J.accountDetails)==null?void 0:os.pin)||"No especificado"},client:{customerName:J.customerName||"Cliente desconocido",email:J.customerEmail||"No especificado",phone:J.phoneNumber||"No especificado"},paymentMethod:"SZStreaming",orderId:`SZ-${oe.id.slice(0,8).toUpperCase()}`,termsAndConditions:wt,renewable:J.renewable!==void 0?J.renewable:!0}}).filter(oe=>{const J=new Date(oe.endDate);return!(J<S&&S.getTime()-J.getTime()>Z)});R(Y),M(!1)},g=>{console.error("Error al obtener pedidos:",g),ee("Error al cargar pedidos: "+g.message),M(!1)}),h=setInterval(()=>{const g=new Date,S=5*24*60*60*1e3;R(Z=>Z.map(Y=>{const ie=new Date(Y.endDate).getTime()-new Date(Y.startDate).getTime(),ce=g.getTime()-new Date(Y.startDate).getTime(),oe=new Date(Y.endDate).getTime()-g.getTime(),J=Math.ceil(ie/(1e3*60*60*24)),he=Math.max(0,Math.ceil(oe/(1e3*60*60*24))),ke=Math.ceil(ce/(1e3*60*60*24)),Ue=J>0?ke/J*100:100;return{...Y,daysRemaining:he,totalDays:J,timeElapsedPercentage:Ue}}).filter(Y=>{const ie=new Date(Y.endDate);return!(ie<g&&g.getTime()-ie.getTime()>S)}))},6e4);return()=>{P(),clearInterval(h)}},[T,V]),b.useEffect(()=>{if(!T)return;const _=xe(te(E,"pendingTopUps"),pe("userId","==",T)),P=fe(_,h=>{const g=h.docs.map(S=>{var Z,Y;return{id:S.id,...S.data(),date:((Y=(Z=S.data().requestedAt)==null?void 0:Z.toDate)==null?void 0:Y.call(Z))||new Date,amount:parseFloat(S.data().amount)||0}});c(g)},h=>{console.error("Error al obtener recargas:",h),ee("Error al cargar recargas: "+h.message)});return()=>P()},[T]);const H=async()=>{try{if(W(P=>({...P,topUp:!0})),!s||isNaN(s)){Te("Error","Ingrese un monto válido");return}const _=parseFloat(s);if(_<10){Te("Error","El monto mínimo de recarga es S/ 10.00");return}await In(te(E,"pendingTopUps"),{userId:T,username:o.username,amount:_,status:"pendiente",requestedAt:ve()}),a(""),Te("Éxito","Solicitud de recarga enviada correctamente")}catch(_){console.error("Error al solicitar recarga:",_),Te("Error",_.message||"Error al enviar solicitud de recarga")}finally{W(_=>({..._,topUp:!1}))}},ae=async _=>{_.preventDefault();try{W(Y=>({...Y,password:!0}));const P=_.target.password.value,h=_.target.phone.value,g=Ge.currentUser,S=F(E,"users",T),Z={};if(P){if(P.length<6){Te("Error","La contraseña debe tener al menos 6 caracteres");return}await Wg(g,P),Z.updatedAt=ve()}h&&(Z.phone=h,Z.updatedAt=ve()),Object.keys(Z).length>0&&await Rr(S,Z),d(Y=>({...Y,phone:h||Y.phone})),Te("Éxito","Cambios guardados correctamente"),_.target.reset()}catch(P){console.error("Error al actualizar los datos:",P),Te("Error",P.message||"Error al guardar los cambios")}finally{W(P=>({...P,password:!1}))}},ne=_=>{if(!_)return"No especificada";try{const P=_ instanceof Date?_:new Date(_);return isNaN(P.getTime())?"Fecha inválida":P.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},I=()=>{if(Q)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-400"})});if(U)return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:U}),e.jsx("button",{onClick:()=>ee(null),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})]});switch(v){case"inicio":return e.jsx(YB,{userName:o,email:u,balance:j,orders:$,notifications:re,setActivePage:L,formatDate:ne});case"notificaciones":return e.jsx(XB,{notifications:re,formatDate:ne});case"recargar":return e.jsx(JB,{amount:s,setAmount:a,topUps:i,actionLoading:x,handleTopUpRequest:H,formatDate:ne,showModal:Te});case"proveedores":return e.jsx(eU,{providers:ye,openRateProviderModal:De});case"pedidos":return e.jsx(tU,{orders:$,searchQuery:ue,setSearchQuery:je,formatDate:ne,handleRenewal:A,actionLoading:x});case"configuracion":return e.jsx(rU,{userName:o,email:u,actionLoading:x,handleUpdatePassword:ae,openEditProfileModal:Ce,handleLogout:B});default:return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>L("inicio"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black to-gray-900 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!r),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>{be("/"),t(!1)},className:"text-xl font-bold text-red-400 hover:text-red-300 transition-all duration-300",children:"SZ Streaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(yt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white font-bold",children:o.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:o.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Usuario"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Rx},{id:"notificaciones",label:"Notificaciones",icon:zo},{id:"recargar",label:"Recargar saldo",icon:Ir},{id:"pedidos",label:"Mis pedidos",icon:Nt},{id:"proveedores",label:"Proveedores",icon:Be},{id:"configuracion",label:"Configuración",icon:pd}].map(_=>e.jsxs("button",{onClick:()=>{L(_.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${v===_.id?"bg-red-500/20 text-red-400 border border-red-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-red-400"}`,children:[e.jsx(_.icon,{className:"text-lg"}),e.jsx("span",{children:_.label})]},_.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:B,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:I()}),e.jsx(QB,{isOpen:se.isOpen,title:se.title,message:se.message,onClose:qe}),e.jsx(KB,{isOpen:G.isOpen,user:G.user,onClose:ze,onSave:w}),e.jsx(ZB,{isOpen:_e.isOpen,provider:_e.provider,onClose:n,onRate:p}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},aU=({isOpen:r,message:t,title:s,onClose:a})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,nU=({isOpen:r,user:t,onClose:s,onSave:a})=>{const[i,c]=b.useState((t==null?void 0:t.username)||""),[o,d]=b.useState(""),u=m=>{if(m.preventDefault(),d(""),!i.trim()){d("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:m=>c(m.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},iU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState("inicio"),[i,c]=b.useState(""),[o,d]=b.useState(""),[u,m]=b.useState(""),[j,k]=b.useState([]),[T,C]=b.useState(0),[v,L]=b.useState(0),[$,R]=b.useState(null),[V,z]=b.useState(!0),[re,q]=b.useState({}),[Q,M]=b.useState(null),[x,W]=b.useState([]),[U,ee]=b.useState(!1),[se,X]=b.useState(""),[G,l]=b.useState(""),[_e,de]=b.useState([]),[ue,je]=b.useState([]),[ye,$e]=b.useState({}),[be,Te]=b.useState([]),[qe,Ce]=b.useState({isOpen:!1,message:"",title:""}),[ze,De]=b.useState({isOpen:!1,user:null}),n=Tt(),w=(S,Z)=>{Ce({isOpen:!0,title:S,message:Z})},p=()=>{Ce({isOpen:!1,message:"",title:""})},A=S=>{De({isOpen:!0,user:S})},B=()=>{De({isOpen:!1,user:null})},H=async(S,Z)=>{try{q(ce=>({...ce,profile:!0}));const Y=F(E,"users",S),ie=F(E,"affiliates",S);await Rr(Y,{username:Z,updatedAt:ve()}),await Rr(ie,{username:Z,updatedAt:ve()}),c(Z),w("Éxito","Perfil actualizado exitosamente"),B()}catch(Y){console.error("Error al actualizar perfil:",Y),w("Error",Y.message||"Error al actualizar el perfil")}finally{q(Y=>({...Y,profile:!1}))}};b.useEffect(()=>{const S=_t(Ge,Z=>{Z?(R(Z.uid),d(Z.email||"No especificado"),z(!1)):n("/login")});return()=>S()},[n]),b.useEffect(()=>{(async()=>{try{const Z=xe(te(E,"products")),Y=await jt(Z),ie={};Y.forEach(ce=>{ie[ce.id]=ce.data()}),$e(ie)}catch(Z){console.error("Error fetching products:",Z),M("Error al cargar productos")}})()},[]),b.useEffect(()=>{(()=>fe(F(E,"notifications","adminMessage"),Y=>{if(Y.exists()){const ie=Y.data(),ce="affiliate";ie.roles&&ie.roles.includes(ce)?Te([{id:Y.id,...ie}]):Te([])}else Te([])}))()},[]),b.useEffect(()=>{(async()=>{if($)try{const Z=F(E,"users",$),Y=await et(Z);if(Y.exists()){const oe=Y.data();c(oe.username||"Usuario"),L(Number(oe.balance)||0)}const ie=F(E,"affiliates",$),ce=await et(ie);if(ce.exists()){const oe=ce.data();m(oe.affiliateCode||""),C(Number(oe.earnings)||0)}else{const oe=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await Kl(ie,{username:i||"Nuevo Afiliado",email:o,affiliateCode:oe,earnings:0,createdAt:ve(),updatedAt:ve()}),m(oe)}}catch(Z){console.error("Error al manejar datos:",Z),M("Error al cargar datos")}finally{z(!1)}})()},[$,o,i]),b.useEffect(()=>{if(!$)return;(()=>{const Z=xe(te(E,"pendingTopUps"),pe("userId","==",$));return fe(Z,ie=>{const ce=ie.docs.map(oe=>{var J,he;return{id:oe.id,...oe.data(),date:((he=(J=oe.data().requestedAt)==null?void 0:J.toDate)==null?void 0:he.call(J))||new Date,amount:parseFloat(oe.data().amount)||0}});de(ce)},ie=>{console.error("Error al obtener recargas:",ie),M("Error al cargar recargas")})})()},[$]),b.useEffect(()=>{if(!u)return;const S=xe(te(E,"users"),pe("referrerCode","==",u),BA("createdAt","desc"),Ut(5)),Z=fe(S,Y=>{const ie=Y.docs.map(ce=>{var oe;return{id:ce.id,...ce.data(),joinDate:((oe=ce.data().createdAt)==null?void 0:oe.toDate())||new Date}});W(ie)});return()=>Z()},[u]),b.useEffect(()=>{if(!u)return;const S=xe(te(E,"users"),pe("referrerCode","==",u)),Z=fe(S,Y=>{const ie=Y.docs.map(ce=>{var oe;return{id:ce.id,...ce.data(),joinDate:((oe=ce.data().createdAt)==null?void 0:oe.toDate())||new Date}});k(ie)});return()=>Z()},[u]),b.useEffect(()=>{if(!$)return;(()=>{const Z=xe(te(E,"sales"),pe("customerId","==",$)),Y=fe(Z,ce=>{if(ce.empty){je([]),z(!1);return}const oe=ce.docs.map(J=>{var ht,ns,dr,is,gr,ys,Yt,Yr,os,Ds,Ri;const he=J.data(),Ue=((ns=(ht=he.saleDate)==null?void 0:ht.toDate)==null?void 0:ns.call(ht))||((is=(dr=he.createdAt)==null?void 0:dr.toDate)==null?void 0:is.call(dr))||new Date;let Pe=(ys=(gr=he.startDate)==null?void 0:gr.toDate)==null?void 0:ys.call(gr),pt=Pe||Ue,Fe=!1;Pe||(Fe=!0);const We=he.durationDays||30;let Ie;he.endDate?Ie=new Date(he.endDate):(Ie=new Date(pt.getTime()+We*24*60*60*1e3),Fe=!0),Fe&&Rr(F(E,"sales",J.id),{startDate:Pe||Kt.fromDate(Ue),endDate:Ie.toISOString(),durationDays:We}).catch(rl=>{console.error("Error al actualizar startDate/endDate en Firestore:",rl)});const Qe=new Date,Ye=Ie.getTime()-pt.getTime(),we=Qe.getTime()-pt.getTime(),Re=Ie.getTime()-Qe.getTime(),tt=Math.ceil(Ye/(1e3*60*60*24)),at=Math.max(0,Math.ceil(Re/(1e3*60*60*24))),wt=Math.ceil(we/(1e3*60*60*24)),qt=tt>0?wt/tt*100:100,Ft=((Yt=ye[he.providerId])==null?void 0:Yt.terms)||"No se especificaron términos y condiciones.";return{id:J.id,productName:he.productName||"Producto sin nombre",category:he.type||"netflix",price:parseFloat(he.price)||0,provider:he.provider||"No especificado",providerId:he.providerId||"",providerPhone:he.providerPhone||he.providerWhatsapp||"51999999999",status:he.status||"completed",saleDate:Ue,startDate:pt,endDate:Ie,durationDays:We,daysRemaining:at,totalDays:tt,timeElapsedPercentage:qt,account:{email:((Yr=he.accountDetails)==null?void 0:Yr.email)||"No especificado",password:((os=he.accountDetails)==null?void 0:os.password)||"No especificado",profile:((Ds=he.accountDetails)==null?void 0:Ds.profile)||"No especificado",pin:((Ri=he.accountDetails)==null?void 0:Ri.pin)||"No especificado"},client:{name:he.customerName||"Cliente desconocido",email:he.customerEmail||"No especificado",phone:he.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${J.id.slice(0,8).toUpperCase()}`,termsAndConditions:Ft,renewable:he.renewable!==void 0?he.renewable:!0}});je(oe),z(!1)},ce=>{console.error("Error al obtener pedidos:",ce),M("Error al cargar pedidos: "+ce.message),z(!1)}),ie=setInterval(()=>{je(ce=>ce.map(oe=>{const J=new Date,he=new Date(oe.endDate).getTime()-new Date(oe.startDate).getTime(),ke=J.getTime()-new Date(oe.startDate).getTime(),Ue=new Date(oe.endDate).getTime()-J.getTime(),Pe=Math.ceil(he/(1e3*60*60*24)),pt=Math.max(0,Math.ceil(Ue/(1e3*60*60*24))),Fe=Math.ceil(ke/(1e3*60*60*24)),We=Pe>0?Fe/Pe*100:100;return{...oe,daysRemaining:pt,totalDays:Pe,timeElapsedPercentage:We}}))},6e4);return()=>{Y(),clearInterval(ie)}})()},[$,ye]);const ae=async()=>{try{if(q(Z=>({...Z,topUp:!0})),!G||isNaN(G)){w("Error","Ingrese un monto válido");return}const S=parseFloat(G);if(S<10){w("Error","El monto mínimo de recarga es S/ 10.00");return}await In(te(E,"pendingTopUps"),{userId:$,username:i,amount:S,status:"pendiente",requestedAt:ve(),processed:!1}),l(""),w("Éxito","Solicitud de recarga enviada correctamente")}catch(S){console.error("Error al solicitar recarga:",S),w("Error",S.message||"Error al enviar solicitud de recarga")}finally{q(S=>({...S,topUp:!1}))}},ne=async S=>{var Z,Y,ie,ce,oe,J,he;try{q(we=>({...we,[`renew_${S.id}`]:!0}));const ke=parseFloat(S.price)||0;if(v<ke){w("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const Ue=parseInt(S.durationDays)||30,Pe=Kt.now(),pt=Pe.toDate(),Fe=new Date(pt.getTime()+Ue*24*60*60*1e3),We=Fe.toISOString(),Ie={customerId:$,customerName:((Z=S.client)==null?void 0:Z.name)||"Cliente desconocido",customerEmail:((Y=S.client)==null?void 0:Y.email)||o,phoneNumber:((ie=S.client)==null?void 0:ie.phone)||"No especificado",productName:S.productName||"Producto sin nombre",type:S.category||"netflix",price:ke,accountDetails:{email:((ce=S.account)==null?void 0:ce.email)||"No especificado",password:((oe=S.account)==null?void 0:oe.password)||"No especificado",profile:((J=S.account)==null?void 0:J.profile)||"No especificado",pin:((he=S.account)==null?void 0:he.pin)||"No especificado"},provider:S.provider||"Proveedor desconocido",providerId:S.providerId||"",providerPhone:S.providerPhone||S.providerWhatsapp||"51999999999",status:"completed",createdAt:Pe,saleDate:Pe,startDate:Pe,endDate:We,durationDays:Ue,renewedAt:Pe,renewable:S.renewable!==void 0?S.renewable:!0},Qe=await In(te(E,"sales"),Ie),Ye=F(E,"users",$);await Rr(Ye,{balance:v-ke}),L(we=>we-ke),je(we=>{var Re;return[...we,{...Ie,id:Qe.id,saleDate:pt,startDate:pt,endDate:Fe,account:Ie.accountDetails,client:{name:Ie.customerName,email:Ie.customerEmail,phone:Ie.phoneNumber},orderId:`BS-${Qe.id.slice(0,8).toUpperCase()}`,renewable:Ie.renewable,daysRemaining:Ue,totalDays:Ue,timeElapsedPercentage:0,termsAndConditions:((Re=ye[Ie.providerId])==null?void 0:Re.terms)||"No se especificaron términos y condiciones."}]}),w("Éxito","¡Pedido renovado exitosamente!")}catch(ke){console.error("Error al renovar el pedido:",ke),w("Error","Error al renovar el pedido: "+ke.message)}finally{q(ke=>({...ke,[`renew_${S.id}`]:!1}))}},I=()=>{u&&(navigator.clipboard.writeText(u),ee(!0),setTimeout(()=>ee(!1),2e3))},_=S=>{if(!S)return"No especificada";try{const Z=S instanceof Date?S:new Date(S);return isNaN(Z.getTime())?"Fecha inválida":Z.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},P=async()=>{try{await Px(Ge),n("/")}catch(S){console.error("Error al cerrar sesión:",S),w("Error",S.message||"Error al cerrar sesión")}},h=async S=>{S.preventDefault();try{q(ie=>({...ie,password:!0}));const Z=S.target.password.value;if(!Z){w("Error","Por favor, ingrese una nueva contraseña");return}if(Z.length<6){w("Error","La contraseña debe tener al menos 6 caracteres");return}const Y=Ge.currentUser;Y&&(await Wg(Y,Z),w("Éxito","Contraseña actualizada correctamente"),S.target.reset())}catch(Z){console.error("Error al actualizar la contraseña:",Z),w("Error",Z.message||"Error al actualizar la contraseña")}finally{q(Z=>({...Z,password:!1}))}},g=()=>{if(V)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(Q)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:Q}),e.jsx("button",{onClick:()=>M(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(s){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Be,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(ds,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",v.toFixed(2)]}),e.jsx("button",{onClick:()=>a("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",T.toFixed(2)]}),e.jsx("button",{onClick:()=>a("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:I,disabled:!u,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${u?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(OB,{size:16}),U?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:u||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:u?`https://blackkstreaming.com/register?ref=${u}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),x.length>0?x.map(S=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:S.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",_(S.joinDate)]})]},S.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),x.length>0&&e.jsx("button",{onClick:()=>a("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),ue.length>0?ue.slice(0,3).map(S=>{const Z=new Date(S.endDate)>new Date&&S.status==="completed",Y=S.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:S.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Y?"bg-yellow-900/80 text-yellow-400":Z?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:Y?"A pedido":Z?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",_(S.endDate)]})]},S.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),ue.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),be.length>0?be.map(S=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:S.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:_(S.updatedAt)})]},S.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),be.length>0?e.jsx("div",{className:"space-y-4",children:be.map(S=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:S.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:_(S.updatedAt)})]},S.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(zo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:G,onChange:S=>l(S.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:ae,disabled:re.topUp||!G||parseFloat(G)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${G&&parseFloat(G)>=10&&!re.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:re.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ir,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(ds,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),_e.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:_e.map(S=>{var Y,ie;const Z=encodeURIComponent(`Hola, he pedido una recarga de S/ ${((Y=S.amount)==null?void 0:Y.toFixed(2))||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",((ie=S.amount)==null?void 0:ie.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${S.status==="aprobado"?"bg-green-900/80 text-green-400":S.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:S.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:_(S.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:S.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${Z}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(ds,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},S.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ir,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:se,onChange:S=>X(S.target.value)}),e.jsx(rt,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),ue.length>0?e.jsx("div",{className:"space-y-6",children:ue.filter(S=>(S.productName||"").toLowerCase().includes(se.toLowerCase())||(S.orderId||"").toLowerCase().includes(se.toLowerCase())).map(S=>{var pt,Fe,We,Ie,Qe,Ye,we,Re,tt,at,wt,qt,Ft;const Z=parseFloat(S.price)||0,Y=new Date(S.endDate)>new Date&&S.status==="completed",ie=S.status==="pending",ce=S.daysRemaining||0,oe=S.timeElapsedPercentage||0;let J="bg-green-400";oe>70&&oe<=90?J="bg-yellow-400":oe>90&&(J="bg-red-400");const he=ie?e.jsx(Lt,{className:"text-yellow-400"}):Y?e.jsx(zc,{className:"text-green-400"}):e.jsx(Ze,{className:"text-red-400"}),ke=encodeURIComponent(`*Consulta sobre Pedido - ${S.productName||"Sin nombre"}*

*N° Pedido:* ${S.orderId||"No especificado"}
*Producto:* ${S.productName||"No especificado"}
*Precio:* S/ ${Z.toFixed(2)}
*Estado:* ${ie?"A pedido":Y?"Activo":"Expirado"}
*Fecha de Inicio:* ${_(S.startDate)}
*Fecha de Vencimiento:* ${_(S.endDate)}

`+(ie?`Hola 😊, he comprado un producto a pedido (${S.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),Ue=encodeURIComponent(`😊 Estimado/a ${((pt=S.client)==null?void 0:pt.name)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${S.productName||"Sin nombre"}.
🔢 Código: ${S.orderId||"No especificado"}
`+(ie?"":`📧 Correo: ${((Fe=S.account)==null?void 0:Fe.email)||"No especificado"}
🔐 Contraseña: ${((We=S.account)==null?void 0:We.password)||"No especificado"}
👤 Perfil: ${((Ie=S.account)==null?void 0:Ie.profile)||"No especificado"}
📌 PIN: ${((Qe=S.account)==null?void 0:Qe.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${_(S.startDate)}
📅 Fecha de vencimiento: ${_(S.endDate)}
🏁 Días contratados: ${S.durationDays||30} días.

`+(ie?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${S.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),Pe=S.providerPhone?S.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[he,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:S.productName||"Producto sin nombre"}),S.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",S.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",Z.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${ie?"text-yellow-400":J.replace("bg-","text-")}`,children:ie?"Pendiente de activación":`${ce} día${ce===1?"":"s"} restante${ce===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${J}`,style:{width:`${Math.min(oe,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[oe.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Be,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:ie?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((Ye=S.account)==null?void 0:Ye.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((we=S.account)==null?void 0:we.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((Re=S.account)==null?void 0:Re.profile)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:((tt=S.account)==null?void 0:tt.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Oe,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:S.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:S.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${ie?"bg-yellow-900/80 text-yellow-400":Y?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ie?"A pedido":Y?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:_(S.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:_(S.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${J.replace("bg-","text-")}`,children:ce})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Be,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((at=S.client)==null?void 0:at.name)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((wt=S.client)==null?void 0:wt.phone)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:((qt=S.client)==null?void 0:qt.email)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${Pe}?text=${ke}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(ds,{size:18})," Contactar Proveedor"]}),S.renewable&&e.jsx("button",{onClick:()=>ne(S),disabled:re[`renew_${S.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${re[`renew_${S.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:re[`renew_${S.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(X4,{size:18})," Renovar Pedido"]})}),((Ft=S.client)==null?void 0:Ft.phone)&&e.jsxs("a",{href:`https://wa.me/${S.client.phone.replace(/^\+/,"")}?text=${Ue}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(ds,{size:18})," Contactar Cliente"]})]})]})]},S.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nt,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",j.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:se,onChange:S=>X(S.target.value)}),e.jsx(rt,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),j.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:j.filter(S=>{const Z=S.username||"",Y=S.email||"";return Z.toLowerCase().includes(se.toLowerCase())||Y.toLowerCase().includes(se.toLowerCase())}).map(S=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:S.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:S.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:S.joinDate?_(S.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:S.status||"Activo"})})]},S.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",T.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[j.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(di,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),j.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:j.map(S=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:S.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:S.joinDate?_(S.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},S.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ir,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>A({id:$,username:i}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(zp,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:re.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:re.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:P,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(It,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!r),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(yt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Rx},{id:"notificaciones",label:"Notificaciones",icon:zo},{id:"recargas",label:"Recargas",icon:Ir},{id:"pedidos",label:"Pedidos",icon:Nt},{id:"referidos",label:"Referidos",icon:Bo},{id:"ganancias",label:"Ganancias",icon:di},{id:"configuracion",label:"Configuración",icon:pd}].map(S=>e.jsxs("button",{onClick:()=>{a(S.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s===S.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(S.icon,{className:"text-lg"}),e.jsx("span",{children:S.label})]},S.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:P,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:g()}),e.jsx(aU,{isOpen:qe.isOpen,title:qe.title,message:qe.message,onClose:p}),e.jsx(nU,{isOpen:ze.isOpen,user:ze.user,onClose:B,onSave:H}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},oU=({isOpen:r,message:t,title:s,onClose:a})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,lU=({username:r="Usuario",products:t=[],orders:s=[],providerBalance:a=0,balanceLoading:i=!1,totalStock:c=0,totalEarnings:o=0,isAdmin:d=!1,email:u="",notifications:m=[],setActiveSection:j=()=>{},formatDate:k=T=>new Date(T).toLocaleDateString()})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(Be,{className:"mr-2"})," Bienvenido, ",e.jsx("span",{className:"text-red-400 ml-1",children:r})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 border border-gray-700/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Ou,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:t.length}),e.jsx("p",{className:"text-gray-400",children:"Productos registrados"}),e.jsxs("p",{className:"text-gray-400",children:["Stock total: ",c]}),e.jsx("button",{onClick:()=>j("inventario"),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Ver inventario"})]}),e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 border border-gray-700/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Ir,{className:"mr-2"})," Ganancias"]}),i?e.jsx("div",{className:"animate-pulse text-gray-400",children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",o.toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:[s.length," ventas realizadas"]}),e.jsxs("p",{className:"text-gray-400",children:["Disponible: S/ ",a.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 border border-gray-700/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center",children:[e.jsx(Be,{className:"mr-2"})," Mi Cuenta"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Be,{className:"mr-2 text-red-400"}),e.jsx("span",{children:r})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(ds,{className:"mr-2 text-red-400"}),e.jsx("span",{children:u})]}),e.jsx("p",{className:"text-xs mt-2 bg-gray-900/80 text-red-400 py-1 px-2 rounded-full inline-block border border-gray-700/50",children:d?"Administrador":"Proveedor"})]}),e.jsx("button",{onClick:()=>j("configuracion"),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Editar perfil"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-700/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(Nt,{className:"mr-2"})," Pedidos recientes"]}),s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nt,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos recientes"}),e.jsx("p",{className:"text-gray-400",children:"Tus pedidos aparecerán aquí"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:"bg-gray-900/80 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/70 divide-y divide-gray-700/50",children:s.slice(0,3).map((T,C)=>{const v=new Date(T.endDate)>new Date&&T.status==="completed",L=T.status==="pending";return e.jsxs("tr",{className:"hover:bg-red-900/20 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-white truncate max-w-xs",children:T.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:T.buyer}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(T.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${L?"bg-yellow-900/80 text-yellow-400 border border-yellow-500/50":v?"bg-green-900/80 text-green-400 border border-green-500/50":"bg-red-900/80 text-red-400 border border-red-500/50"}`,children:L?"A pedido":v?"Activo":"Expirado"})})]},C)})})]}),s.length>3&&e.jsx("button",{onClick:()=>j("pedidos"),className:"w-full mt-3 text-center text-red-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]}),e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-700/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(ds,{className:"mr-2"})," Notificaciones"]}),m.length>0?m.map(T=>{var C,v;return e.jsxs("div",{className:"border-b border-gray-700/50 py-3 last:border-0 hover:bg-red-900/20 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:T.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:k(((v=(C=T.updatedAt)==null?void 0:C.toDate)==null?void 0:v.call(C))||new Date)})]},T.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ds,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"Tus notificaciones aparecerán aquí"})]})]})]})]}),cU=({products:r,setActiveSection:t,handleEdit:s,handleDelete:a,getCategoryDisplayName:i,totalStock:c})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(Ou,{className:"mr-2"})," Inventario"]}),e.jsxs("button",{onClick:()=>t("subirProducto"),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center w-full md:w-auto justify-center transition-all duration-300",children:[e.jsx(ON,{className:"mr-2"})," Nuevo Producto"]})]}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:"bg-gray-900/80 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/70 divide-y divide-gray-700/50",children:r.map(o=>e.jsxs("tr",{className:"hover:bg-red-900/20 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:o.image,alt:o.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:o.name}),e.jsx("div",{className:"text-xs text-gray-400",children:i(o.category)})]})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(parseFloat(o.price)||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:o.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.status==="En stock"?"bg-red-500/20 text-red-400 border border-red-500/50":o.status==="A pedido"?"bg-gray-800/50 text-yellow-400 border border-gray-700/50":"bg-gray-900/80 text-gray-300 border border-gray-700/50"}`,children:o.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>s(o),className:"text-red-400 hover:text-red-500 mr-3",title:"Editar",children:e.jsx(K4,{})}),e.jsx("button",{onClick:()=>a(o.id),className:"text-red-400 hover:text-red-500",title:"Eliminar",children:e.jsx(J4,{})})]})]},o.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ou,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes productos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Agrega tu primer producto para comenzar"}),e.jsxs("button",{onClick:()=>t("subirProducto"),className:"mt-4 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center mx-auto transition-all duration-300",children:[e.jsx(ON,{className:"mr-2"})," Agregar Producto"]})]})]}),dU=({soldAccounts:r,formatDate:t})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Vp,{className:"mr-2"})," Cuentas Vendidas"]}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:"bg-gray-900/80 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Perfil"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de Venta"})]})}),e.jsx("tbody",{className:"bg-gray-800/70 divide-y divide-gray-700/50",children:r.map((s,a)=>e.jsxs("tr",{className:"hover:bg-red-900/20 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:s.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:s.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:s.profile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:t(s.saleDate)})]},a))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Vp,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay cuentas vendidas"}),e.jsx("p",{className:"text-gray-400",children:"Las cuentas vendidas aparecerán aquí"})]})]}),uU=({product:r,setProduct:t,handleChange:s,handleFileChange:a,handleStockChange:i,handleAccountFieldChange:c,handleSubmit:o,setActiveSection:d})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Subir Nuevo Producto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-700/50 border-dashed rounded-xl bg-gray-900/80 backdrop-blur-sm",children:r.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>t({...r,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(yt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-900/50 rounded-xl font-medium text-red-400 hover:text-red-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:u=>a(u),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:r.category,onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:r.accountType,onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:r.status,onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:r.status==="Agotado"?0:r.stock,onChange:i,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",min:"0",required:!0,disabled:r.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:r.price,onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:r.renewal,onChange:s,className:"h-4 w-4 text-red-400 focus:ring-red-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),r.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:r.renewalPrice,onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:r.duration,onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",r.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:r.providerPhone,onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:r.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"URL del producto (opcional)"}),e.jsx("input",{type:"url",name:"productUrl",value:r.productUrl||"",onChange:s,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: https://www.ejemplo.com/producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:r.details,onChange:s,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:r.terms,onChange:s,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),r.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:r.accounts.map((u,m)=>e.jsxs("div",{className:"border border-gray-700/50 rounded-xl p-4 bg-gray-900/70 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",m+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:u.email,onChange:j=>c(m,"email",j.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:u.password,onChange:j=>c(m,"password",j.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:u.profile,onChange:j=>c(m,"profile",j.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:u.pin,onChange:j=>c(m,"pin",j.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},m))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>d("inventario"),className:"px-4 py-2 bg-gray-900/70 text-gray-300 rounded-xl hover:bg-red-900/20 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:o,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-all duration-300",children:"Subir Producto"})]})]})]}),xU=({orders:r,totalEarnings:t,providerBalance:s,balanceLoading:a,getCategoryDisplayName:i,formatDate:c})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Ir,{className:"mr-2"})," Ganancias"]}),e.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-700/50 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-1",children:"Ganancias totales"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.length," ventas realizadas"]}),a?e.jsx("p",{className:"text-sm text-gray-400",children:"Disponible: Cargando..."}):e.jsxs("p",{className:"text-sm text-gray-400",children:["Disponible: S/ ",(s||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white mt-2 md:mt-0",children:["S/ ",t.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:"bg-gray-900/80 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/70 divide-y divide-gray-700/50",children:r.map((o,d)=>e.jsxs("tr",{className:"hover:bg-red-900/20 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:o.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:i(o.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:o.buyer}),e.jsx("div",{className:"text-xs text-gray-400",children:o.buyerEmail})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:o.buyerPhone}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:c(o.saleDate)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",(o.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-500/20 text-red-400 border border-red-500/50",children:"Completado"})})]},d))})]})}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ir,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay ventas registradas"}),e.jsx("p",{className:"text-gray-400",children:"Tus ventas aparecerán aquí."})]})]}),mU=({orders:r,searchQuery:t,setSearchQuery:s,getCategoryDisplayName:a,formatDate:i,handleEditOrder:c,handleActivateOrder:o,handleDeleteOrder:d})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative w-48 sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"w-full px-3 py-1.5 rounded-lg bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all duration-300 text-sm placeholder-gray-500",value:t,onChange:u=>s(u.target.value)}),e.jsx(rt,{className:"absolute right-2 top-2 text-gray-400",size:16})]})]}),r.length>0?e.jsx("div",{className:"space-y-6",children:r.filter(u=>(u.productName||"").toLowerCase().includes(t.toLowerCase())||(u.category||"").toLowerCase().includes(t.toLowerCase())).map(u=>{const m=u.status==="pending",j=u.status==="refunded",k=u.daysRemaining||0,T=u.timeElapsedPercentage||0;let C="bg-red-400";T>70&&T<=90?C="bg-yellow-400":T>90&&(C="bg-red-400");const v=j?e.jsx(Ze,{className:"text-red-400"}):m?e.jsx(Lt,{className:"text-yellow-400"}):e.jsx(zc,{className:"text-green-400"}),L=u.buyerPhone?u.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,$=encodeURIComponent(`Hola ${u.buyer||"Cliente"}, 😊

Soy el proveedor de tu suscripción ${u.productName||"Sin nombre"} (N° Pedido: ${u.id||"No especificado"}). ¿En qué puedo ayudarte hoy? Por favor, indícame tu consulta o problema.

Atentamente, BlackStreaming`),R=encodeURIComponent(`Hola ${u.buyer||"Cliente"}, 😊

Te informamos que tu suscripción ${u.productName||"Sin nombre"} (N° Pedido: ${u.id||"No especificado"}) vencerá en ${k} día${k===1?"":"s"}. Te recomendamos renovarla a tiempo.

Detalles:
- Fecha de vencimiento: ${i(u.endDate)}
- Precio: S/ ${(u.amount||0).toFixed(2)}

Si necesitas ayuda, contáctanos. ¡Gracias por tu preferencia!
Atentamente, BlackStreaming`);return e.jsxs("div",{className:"border border-gray-600/50 rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-3 py-2 border-b border-gray-600/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[v,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white text-sm",children:u.productName||"Producto sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Categoría: ",a(u.category)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",(u.amount||0).toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${C.replace("bg-","text-")}`,children:m?"Pendiente de activación":`${k} día${k===1?"":"s"} restante${k===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/40 rounded-full h-1",children:e.jsx("div",{className:`h-1 rounded-full ${C}`,style:{width:`${Math.min(T,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[T.toFixed(0),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-700/50",children:[e.jsx("h5",{className:"text-sm font-medium text-red-400 mb-3",children:"Información del Comprador"}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Comprador: ",u.buyer]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Teléfono: ",u.buyerPhone]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-700/50",children:[e.jsx("h5",{className:"text-sm font-medium text-red-400 mb-3",children:"Detalles de la Cuenta"}),u.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-300",children:["Email: ",u.accountDetails.email]}),e.jsxs("p",{className:"text-gray-400",children:["Contraseña: ",u.accountDetails.password]}),e.jsxs("p",{className:"text-gray-400",children:["Perfil: ",u.accountDetails.profile||"N/A"]}),e.jsxs("p",{className:"text-gray-400",children:["PIN: ",u.accountDetails.pin||"N/A"]})]}):e.jsx("p",{className:"text-gray-400",children:"No disponible"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>c(u),className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Editar cuenta",children:[e.jsx(K4,{size:18})," Editar Cuenta"]}),u.status==="pending"&&e.jsxs("button",{onClick:()=>o(u.id),className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Activar pedido",children:[e.jsx(zc,{size:18})," Activar Pedido"]}),L&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:`https://wa.me/${L}?text=${$}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Contactar cliente",children:[e.jsx(ds,{size:18})," Contactar"]}),!j&&k<=7&&e.jsxs("a",{href:`https://wa.me/${L}?text=${R}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Notificar vencimiento",children:[e.jsx(zo,{size:18})," Notificar"]})]}),e.jsxs("button",{onClick:()=>d(u.id),className:"flex-1 py-3 px-4 bg-gray-700 text-gray-400 hover:bg-gray-600 hover:text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Eliminar pedido",children:[e.jsx(J4,{size:18})," Eliminar"]})]})]})]},u.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nt,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Tus pedidos aparecerán aquí"})]})]}),hU=({accountDetails:r,handleAccountChange:t,handleUpdateAccount:s})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(pd,{className:"mr-2"})," Configuración"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:r.email,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",value:r.password,onChange:t,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Dejar en blanco para no cambiar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:r.preferences,onChange:t,rows:"4",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Especifica tus preferencias o notas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:s,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})})]})]}),pU=({editModalOpen:r,setEditModalOpen:t,selectedProduct:s,setSelectedProduct:a,editError:i,setEditError:c,handleFileChange:o,handleEditStockChange:d,handleEditAccountFieldChange:u,handleUpdateProduct:m})=>{if(!r)return null;const j=k=>{const{name:T,value:C,type:v,checked:L}=k.target;a($=>({...$,[T]:v==="checkbox"?L:C,...T==="status"&&{stock:C==="Agotado"?0:$.stock||1,accounts:C==="En stock"?$.accounts.length?$.accounts:Array($.stock||1).fill({email:"",password:"",profile:"",pin:""}):[]}}))};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl w-full max-w-4xl border border-gray-700/50 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Editar Producto"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),i&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-900/50 text-red-400 rounded-xl",children:i}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-700/50 border-dashed rounded-xl bg-gray-900/80 backdrop-blur-sm",children:s.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>a({...s,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(yt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"edit-file-upload",className:"relative cursor-pointer bg-gray-900/50 rounded-xl font-medium text-red-400 hover:text-red-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:k=>o(k,!0),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:s.category,onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:s.accountType,onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:s.status,onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:s.status==="Agotado"?0:s.stock,onChange:d,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",min:"0",required:!0,disabled:s.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:s.price,onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:s.renewal,onChange:j,className:"h-4 w-4 text-red-400 focus:ring-red-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),s.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:s.renewalPrice,onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:s.duration,onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",s.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:s.providerPhone,onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:s.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"URL del producto (opcional)"}),e.jsx("input",{type:"url",name:"productUrl",value:s.productUrl||"",onChange:j,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Ej: https://www.ejemplo.com/producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:s.details,onChange:j,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:s.terms,onChange:j,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),s.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:s.accounts.map((k,T)=>e.jsxs("div",{className:"border border-gray-700/50 rounded-xl p-4 bg-gray-900/70 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",T+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:k.email,onChange:C=>u(T,"email",C.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:k.password,onChange:C=>u(T,"password",C.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:k.profile,onChange:C=>u(T,"profile",C.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:k.pin,onChange:C=>u(T,"pin",C.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-700/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},T))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 bg-gray-900/70 text-gray-300 rounded-xl hover:bg-red-900/20 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:m,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-all duration-300",children:"Actualizar Producto"})]})]})]})})})},fU=({editOrderModalOpen:r,setEditOrderModalOpen:t,selectedOrder:s,handleOrderAccountChange:a,editOrderError:i,setEditOrderError:c,handleUpdateOrder:o})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl w-full max-w-md border border-gray-700/50 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Editar Detalles de Cuenta"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),i&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-900/50 text-red-400 rounded-xl",children:i}),e.jsxs("div",{className:"border border-gray-700/50 rounded-xl p-4 bg-gray-900/70 backdrop-blur-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:s.accountDetails.email,onChange:a,className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: usuario@ejemplo.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",name:"password",value:s.accountDetails.password,onChange:a,className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: contraseña123",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",name:"profile",value:s.accountDetails.profile,onChange:a,className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",name:"pin",value:s.accountDetails.pin,onChange:a,className:"w-full px-3 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 bg-gray-900/70 text-gray-300 rounded-xl hover:bg-red-900/20 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:o,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})]})]})})}):null,gU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState("inicio"),[i,c]=b.useState("Usuario"),[o,d]=b.useState(""),[u,m]=b.useState(""),[j,k]=b.useState([]),[T,C]=b.useState([]),[v,L]=b.useState([]),[$,R]=b.useState(!0),[V,z]=b.useState(""),[re,q]=b.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[Q,M]=b.useState(null),[x,W]=b.useState(!1),[U,ee]=b.useState(""),[se,X]=b.useState(""),[G,l]=b.useState({isOpen:!1,message:"",title:""}),[_e,de]=b.useState({email:"",password:"",preferences:""}),[ue,je]=b.useState(!1),[ye,$e]=b.useState(!0),[be,Te]=b.useState(0),[qe,Ce]=b.useState(!1),[ze,De]=b.useState(null),[n,w]=b.useState(""),p=Tt(),A=Qg(),B=(we,Re)=>{l({isOpen:!0,title:we,message:Re})},H=()=>{l({isOpen:!1,message:"",title:""})},ae=we=>{var Re;if(!we)return"No especificada";try{const tt=we instanceof Date?we:((Re=we==null?void 0:we.toDate)==null?void 0:Re.call(we))||new Date(we);return isNaN(tt.getTime())?"Fecha inválida":tt.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(tt){return console.error("Error formatting date:",tt),"Fecha inválida"}},ne=we=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[we==null?void 0:we.toLowerCase()]||"Otro";b.useEffect(()=>{const we=_t(A,Re=>{Re?(d(Re.email||""),m(Re.uid),I(Re.uid)):p("/login")});return()=>we()},[A,p]);const I=async we=>{try{const Re=F(E,"users",we),tt=await et(Re);if(tt.exists()){const at=tt.data();c(at.username||"Usuario"),de({email:at.email||"",password:"",preferences:at.preferences||""})}R(!1)}catch(Re){z("Error al cargar datos del usuario"),console.error("Error fetching user data:",Re),R(!1)}};b.useEffect(()=>{o&&(async Re=>{try{const tt=await et(F(E,"admins",Re));je(tt.exists())}catch(tt){console.error("Error checking admin status:",tt)}})(o)},[o]),b.useEffect(()=>{if(!i)return;const we=xe(te(E,"products"),pe("provider","==",i)),Re=fe(we,tt=>{const at=tt.docs.map(wt=>({id:wt.id,...wt.data()}));C(at)},tt=>{console.error("Error fetching products:",tt),z("Error al cargar productos")});return()=>Re()},[i]),b.useEffect(()=>{if(!u)return;const we=xe(te(E,"sales"),pe("providerId","==",u)),Re=fe(we,at=>{if(at.empty){k([]),$e(!1);return}const wt=at.docs.map(Ft=>{var Gn,Oi,ka,Fs,Qn,sl,Li,Vi;const ht=Ft.data(),dr=((Oi=(Gn=ht.saleDate)==null?void 0:Gn.toDate)==null?void 0:Oi.call(Gn))||((Fs=(ka=ht.createdAt)==null?void 0:ka.toDate)==null?void 0:Fs.call(ka))||new Date;let is=(sl=(Qn=ht.startDate)==null?void 0:Qn.toDate)==null?void 0:sl.call(Qn),gr=is||dr,ys=!is;const Yt=ht.durationDays||30;let Yr;ht.endDate?Yr=typeof ht.endDate=="string"?new Date(ht.endDate):((Vi=(Li=ht.endDate).toDate)==null?void 0:Vi.call(Li))||new Date(ht.endDate):(Yr=new Date(gr.getTime()+Yt*24*60*60*1e3),ys=!0),ys&&Rr(F(E,"sales",Ft.id),{startDate:is||Kt.fromDate(dr),endDate:Kt.fromDate(Yr),durationDays:Yt}).catch(fd=>{console.error("Error al actualizar startDate/endDate en Firestore:",fd)});const os=new Date,Ds=Yr.getTime()-gr.getTime(),Ri=os.getTime()-gr.getTime(),rl=Yr.getTime()-os.getTime(),aa=Math.max(1,Math.ceil(Ds/(1e3*60*60*24))),Ox=Math.max(0,Math.ceil(rl/(1e3*60*60*24))),Lx=Math.ceil(Ri/(1e3*60*60*24)),Mi=aa>0?Math.min(100,Lx/aa*100):100;return{id:Ft.id,productName:ht.productName||"Producto sin nombre",category:ht.type||"netflix",amount:parseFloat(ht.price)||0,buyer:ht.buyerName||ht.customerName||"Comprador desconocido",buyerPhone:ht.buyerPhone||"No especificado",buyerEmail:ht.customerEmail||"No especificado",status:ht.status||"completed",saleDate:dr,startDate:gr,endDate:Yr,durationDays:Yt,daysRemaining:Ox,totalDays:aa,timeElapsedPercentage:Mi,accountDetails:ht.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(ht.price)||0}});k(wt);const qt=wt.filter(Ft=>Ft.status==="completed"&&Ft.accountDetails).map(Ft=>({...Ft.accountDetails,productName:Ft.productName,saleDate:Ft.saleDate,orderId:Ft.id}));L(qt),$e(!1)},at=>{console.error("Error fetching sales:",at),z("Error al cargar ventas"),$e(!1)}),tt=setInterval(()=>{k(at=>at.map(wt=>{const qt=new Date,Ft=new Date(wt.endDate).getTime()-new Date(wt.startDate).getTime(),ht=qt.getTime()-new Date(wt.startDate).getTime(),ns=new Date(wt.endDate).getTime()-qt.getTime(),dr=Math.max(1,Math.ceil(Ft/(1e3*60*60*24))),is=Math.max(0,Math.ceil(ns/(1e3*60*60*24))),gr=Math.ceil(ht/(1e3*60*60*24)),ys=dr>0?Math.min(100,gr/dr*100):100;return{...wt,daysRemaining:is,totalDays:dr,timeElapsedPercentage:ys}}))},6e4);return()=>{Re(),clearInterval(tt)}},[u]),b.useEffect(()=>{if(!i)return;const we=F(E,"providerBalances",i),Re=fe(we,tt=>{tt.exists()?Te(tt.data().balance||0):(Kl(we,{balance:0,provider:i,updatedAt:ve()}),Te(0)),$e(!1)},tt=>{console.error("Error fetching provider balance:",tt),z("Error al cargar el saldo del proveedor"),$e(!1)});return()=>Re()},[i]);const _=async()=>{try{await Px(A),p("/login")}catch(we){console.error("Error al cerrar sesión:",we),B("Error","Error al cerrar sesión")}},P=we=>{const{name:Re,value:tt,type:at,checked:wt}=we.target;q(qt=>({...qt,[Re]:at==="checkbox"?wt:tt}))},h=we=>{const{name:Re,value:tt}=we.target;de(at=>({...at,[Re]:tt}))},g=(we,Re=!1)=>{const tt=we.target.files[0];if(tt){if(tt.size>10485760){Re?ee("La imagen no debe exceder los 10MB"):z("La imagen no debe exceder los 10MB");return}const wt=new FileReader;wt.onloadend=()=>{Re?M(qt=>({...qt,image:wt.result})):q(qt=>({...qt,image:wt.result}))},wt.readAsDataURL(tt)}},S=we=>{const Re=parseInt(we.target.value)||1,tt=re.accounts||[];if(Re>tt.length){const at=[...tt];for(;at.length<Re;)at.push({email:"",password:"",profile:"",pin:""});q({...re,stock:Re,accounts:at})}else if(Re<tt.length){const at=tt.slice(0,Math.max(Re,1));q({...re,stock:Re,accounts:at})}else q({...re,stock:Re})},Z=we=>{const Re=parseInt(we.target.value)||1;let at=[...Q.accounts||[]];if(Re>at.length)for(;at.length<Re;)at.push({email:"",password:"",profile:"",pin:""});else Re<at.length&&(at=at.slice(0,Math.max(Re,1)));M({...Q,stock:Re,accounts:at})},Y=(we,Re,tt)=>{const at=[...re.accounts];at[we]={...at[we],[Re]:tt},q({...re,accounts:at})},ie=(we,Re,tt)=>{M(at=>({...at,accounts:at.accounts.map((wt,qt)=>qt===we?{...wt,[Re]:tt}:wt)}))},ce=we=>{const{name:Re,value:tt}=we.target;De(at=>({...at,accountDetails:{...at.accountDetails,[Re]:tt}}))},oe=async()=>{if(z(""),!re.name||!re.price){B("Error","Por favor complete todos los campos obligatorios");return}if(re.renewal&&!re.renewalPrice){B("Error","Por favor ingrese el precio de renovación");return}if(re.status==="En stock"&&re.accounts.some(Re=>!Re.email||!Re.password)){B("Error","Por favor complete todos los campos de las cuentas");return}try{const we={...re,provider:i,providerId:u,providerPhone:re.status==="En stock"?re.providerPhone||"":re.providerPhone||"No especificado",createdAt:ve(),availableAccounts:re.status==="En stock"?re.accounts.length:0},Re=await In(te(E,"products"),we);if(re.status==="En stock"){const tt=te(E,`products/${Re.id}/accounts`);for(const at of re.accounts)await In(tt,{email:at.email,password:at.password,profile:at.profile||"",pin:at.pin||"",status:"available"})}q({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),a("inventario"),B("Éxito","Producto subido exitosamente!")}catch(we){console.error("Error al subir el producto:",we),B("Error",`Error al subir el producto: ${we.message}`)}},J=async we=>{ee("");try{const Re=xe(te(E,"sales"),pe("providerId","==",u),pe("productName","==",we.name)),at=(await jt(Re)).docs.filter(ht=>{var ns;return ht.data().status==="completed"&&((ns=ht.data().accountDetails)==null?void 0:ns.email)}).map(ht=>ht.data().accountDetails.email),wt=te(E,`products/${we.id}/accounts`),Ft=(await jt(wt)).docs.filter(ht=>ht.data().status==="available").map(ht=>({email:ht.data().email||"",password:ht.data().password||"",profile:ht.data().profile||"",pin:ht.data().pin||""}));M({id:we.id,name:we.name||"",image:we.image||"",category:we.category||"Netflix",accountType:we.accountType||"Premium",status:we.status||"En stock",stock:Ft.length||we.stock||1,price:we.price||"",renewal:we.renewal||!1,renewalPrice:we.renewalPrice||"",duration:we.duration||"",providerPhone:we.providerPhone||"",details:we.details||"",terms:we.terms||"",providerId:we.providerId||u,accounts:we.status==="En stock"?Ft.length>0?Ft:Array(Math.max(we.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),W(!0)}catch(Re){console.error("Error al preparar edición del producto:",Re),ee("Error al preparar edición del producto")}},he=async()=>{var we;if(ee(""),!Q.name||!Q.price){ee("Por favor complete todos los campos obligatorios");return}if(Q.renewal&&!Q.renewalPrice){ee("Por favor ingrese el precio de renovación");return}if(Q.status==="En stock"&&Q.accounts.some(tt=>!tt.email||!tt.password)){ee("Por favor complete todos los campos de las cuentas");return}try{const Re=F(E,"products",Q.id);if(await Kl(Re,{...Q,providerId:Q.providerId||u,availableAccounts:Q.status==="En stock"&&((we=Q.accounts)==null?void 0:we.length)||0},{merge:!0}),Q.status==="En stock"){const tt=te(E,`products/${Q.id}/accounts`),at=await jt(tt);for(const wt of at.docs)await k0(wt.ref);for(const wt of Q.accounts)await In(tt,{email:wt.email,password:wt.password,profile:wt.profile||"",pin:wt.pin||"",status:"available"})}W(!1),B("Éxito","Producto actualizado exitosamente!")}catch(Re){console.error("Error al actualizar el producto:",Re),ee("Error al actualizar el producto")}},ke=async we=>{try{await k0(F(E,"products",we)),B("Éxito","Producto eliminado exitosamente!")}catch(Re){console.error("Error al eliminar el producto:",Re),B("Error","Error al eliminar el producto")}},Ue=async we=>{try{await k0(F(E,"sales",we)),B("Éxito","Pedido eliminado exitosamente!")}catch(Re){console.error("Error al eliminar el pedido:",Re),B("Error","Error al eliminar el pedido")}},Pe=async()=>{try{const we=A.currentUser;if(we){const Re=F(E,"users",we.uid);await Kl(Re,{preferences:_e.preferences,..._e.password&&{password:_e.password}},{merge:!0}),B("Éxito","Configuración actualizada correctamente!")}}catch(we){console.error("Error al actualizar la configuración:",we),B("Error","Error al actualizar la configuración")}},pt=we=>{w(""),De({...we,accountDetails:{email:we.accountDetails.email||"",password:we.accountDetails.password||"",profile:we.accountDetails.profile||"",pin:we.accountDetails.pin||""}}),Ce(!0)},Fe=async()=>{if(w(""),!ze.accountDetails.email||!ze.accountDetails.password){w("Por favor complete todos los campos obligatorios de la cuenta");return}try{const we=F(E,"sales",ze.id);await Rr(we,{accountDetails:ze.accountDetails,updatedAt:ve()}),Ce(!1),B("Éxito","Detalles de la cuenta actualizados exitosamente!")}catch(we){console.error("Error al actualizar los detalles de la cuenta:",we),w("Error al actualizar los detalles de la cuenta")}},We=async we=>{try{const Re=F(E,"sales",we);await Rr(Re,{status:"completed",updatedAt:ve()}),B("Éxito","Pedido activado exitosamente!")}catch(Re){console.error("Error al activar el pedido:",Re),B("Error","Error al activar el pedido")}},Ie=ye?0:j.reduce((we,Re)=>we+(Re.amount||0),0),Qe=T.reduce((we,Re)=>we+(parseInt(Re.stock)||0),0),Ye=()=>{if($)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-400"})});if(V)return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:V}),e.jsx("button",{onClick:()=>z(""),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})]});switch(s){case"inicio":return e.jsx(lU,{username:i,products:T,orders:j,providerBalance:be,balanceLoading:ye,totalStock:Qe,totalEarnings:Ie,isAdmin:ue,email:o,setActiveSection:a,formatDate:ae});case"inventario":return e.jsx(cU,{products:T,setActiveSection:a,handleEdit:J,handleDelete:ke,getCategoryDisplayName:ne,totalStock:Qe});case"cuentas":return e.jsx(dU,{soldAccounts:v,formatDate:ae});case"subirProducto":return e.jsx(uU,{product:re,setProduct:q,handleChange:P,handleFileChange:g,handleStockChange:S,handleAccountFieldChange:Y,handleSubmit:oe,setActiveSection:a});case"ganancias":return e.jsx(xU,{orders:j,totalEarnings:Ie,providerBalance:be,balanceLoading:ye,getCategoryDisplayName:ne,formatDate:ae});case"pedidos":return e.jsx(mU,{orders:j,searchQuery:se,setSearchQuery:X,getCategoryDisplayName:ne,formatDate:ae,handleEditOrder:pt,handleActivateOrder:We,handleDeleteOrder:Ue});case"configuracion":return e.jsx(hU,{accountDetails:_e,handleAccountChange:h,handleUpdateAccount:Pe});default:return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black to-gray-900 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!r),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>{p("/"),t(!1)},className:"text-xl font-bold text-red-400 hover:text-red-300 transition-all duration-300",children:"SZ Streaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(yt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:ue?"Admin":"Proveedor"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Rx},{id:"inventario",label:"Inventario",icon:Ou},{id:"cuentas",label:"Cuentas Vendidas",icon:Vp},{id:"pedidos",label:"Pedidos",icon:Nt},{id:"ganancias",label:"Ganancias",icon:Ir},{id:"subirProducto",label:"Subir Producto",icon:VB},{id:"configuracion",label:"Configuración",icon:pd}].map(we=>e.jsxs("button",{onClick:()=>{a(we.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s===we.id?"bg-red-500/20 text-red-400 border border-red-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-red-400"}`,children:[e.jsx(we.icon,{className:"text-lg"}),e.jsx("span",{children:we.label})]},we.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:_,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:Ye()}),e.jsx(oU,{isOpen:G.isOpen,title:G.title,message:G.message,onClose:H}),e.jsx(pU,{editModalOpen:x,setEditModalOpen:W,selectedProduct:Q,setSelectedProduct:M,editError:U,setEditError:ee,handleFileChange:g,handleEditStockChange:Z,handleEditAccountFieldChange:ie,handleUpdateProduct:he}),e.jsx(fU,{editOrderModalOpen:qe,setEditOrderModalOpen:Ce,selectedOrder:ze,handleOrderAccountChange:ce,editOrderError:n,setEditOrderError:w,handleUpdateOrder:Fe}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},yU=()=>{const[r,t]=b.useState(""),[s,a]=b.useState(""),[i,c]=b.useState(0),[o,d]=b.useState([]),[u,m]=b.useState([]),[j,k]=b.useState([]),[T,C]=b.useState([]),[v,L]=b.useState([]),[$,R]=b.useState(0),[V,z]=b.useState({day:0,week:0,month:0,total:0}),[re,q]=b.useState(!0),[Q,M]=b.useState(null),x=Tt();b.useEffect(()=>{const ee=_t(Ge,se=>{se?(a(se.email),W(se.uid),q(!1)):x("/login")});return()=>ee()},[x]);const W=async ee=>{try{const se=F(E,"users",ee),X=await et(se);if(X.exists()){const G=X.data();t(G.username||G.email.split("@")[0])}else M("Usuario no encontrado en la base de datos")}catch(se){console.error("Error al obtener el nombre de usuario:",se),M("Error al cargar datos del usuario")}},U=ee=>{const X=ee*5,G=X*.25,l=X*.05;z({day:l,week:G,month:X,total:X})};return b.useEffect(()=>{(async()=>{try{const de=await jt(te(E,"users")),ue=de.size,je=de.docs.map(w=>({id:w.id,...w.data()}));c(ue),d(je.slice(-5)),U(ue);const ye=xe(te(E,"pendingRegistrations"),pe("status","==","pending")),$e=await jt(ye);m($e.docs.map(w=>({id:w.id,...w.data()})));const be=xe(te(E,"pendingTopUps"),pe("status","==","pendiente")),Te=await jt(be);k(Te.docs.map(w=>({id:w.id,...w.data()})));const qe=xe(te(E,"withdrawals"),pe("status","==","pending")),Ce=await jt(qe);C(Ce.docs.map(w=>({id:w.id,...w.data()})));const De=(await jt(te(E,"sales"))).docs.map(w=>({id:w.id,...w.data()}));L(De);const n=De.reduce((w,p)=>w+(p.price||0),0);R(n)}catch(de){console.error("Error al obtener datos:",de),M("Error al cargar datos")}})();const se=fe(te(E,"users"),de=>{const ue=de.size,je=de.docs.map(ye=>({id:ye.id,...ye.data()}));c(ue),d(je.slice(-5)),U(ue)}),X=fe(xe(te(E,"pendingRegistrations"),pe("status","==","pending")),de=>{m(de.docs.map(ue=>({id:ue.id,...ue.data()})))}),G=fe(xe(te(E,"pendingTopUps"),pe("status","==","pendiente")),de=>{k(de.docs.map(ue=>({id:ue.id,...ue.data()})))}),l=fe(xe(te(E,"withdrawals"),pe("status","==","pending")),de=>{C(de.docs.map(ue=>({id:ue.id,...ue.data()})))}),_e=fe(te(E,"sales"),de=>{const ue=de.docs.map(ye=>({id:ye.id,...ye.data()}));L(ue);const je=ue.reduce((ye,$e)=>ye+($e.price||0),0);R(je)});return()=>{se(),X(),G(),l(),_e()}},[]),re?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})}):Q?e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:Q}),e.jsx("button",{onClick:()=>M(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]}):e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:r})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Bo,{className:"mr-2"})," Total Usuarios"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:i}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",onClick:()=>x("/usuarios"),children:"Ver usuarios"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Nt,{className:"mr-2"})," Total Ventas"]}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",$.toFixed(2)]}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",onClick:()=>x("/pedidos"),children:"Ver ventas"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-700/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ir,{className:"mr-2"})," Ganancias del Mes"]}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",V.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"(5 soles por usuario)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Últimos Usuarios"}),o.length>0?o.map(ee=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:ee.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-900/80 text-cyan-400",children:ee.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:ee.email})]},ee.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Solicitudes Pendientes"}),u.length>0?u.slice(0,3).map(ee=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:ee.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-900/80 text-purple-400",children:ee.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:ee.email})]},ee.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Retiros Pendientes"}),T.length>0?T.slice(0,3).map(ee=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:ee.provider||"Sin proveedor"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-900/80 text-yellow-400",children:["S/ ",(ee.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Método: ",ee.method||"No especificado"]})]},ee.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay retiros pendientes"})]})]})]})},bU=({notificationForm:r={message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}},setNotificationForm:t=()=>{},handleNotificationSubmit:s=()=>{},actionLoading:a={notification:!1}})=>{const i=r.roles||{user:!1,affiliate:!1,provider:!1,admin:!1},c=Object.values(i).some(o=>o);return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:["Enviar ",e.jsx("span",{className:"text-red-400",children:"Notificación"})]}),e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Mensaje de la Notificación"}),e.jsx("textarea",{value:r.message||"",onChange:o=>t({...r,message:o.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all resize-y",rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Enviar a los siguientes roles"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(o=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i[o]||!1,onChange:d=>t({...r,roles:{...i,[o]:d.target.checked}}),className:"h-4 w-4 text-red-400 focus:ring-red-400 border-gray-600 rounded"}),e.jsx("span",{className:"text-gray-300 capitalize",children:o})]},o))})]}),e.jsx("button",{type:"submit",disabled:a.notification||!c,className:"w-full py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-all duration-300 disabled:bg-red-800",children:a.notification?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Enviar Notificación"}),!c&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:"Selecciona al menos un rol para enviar la notificación"})]})]})},rS=[{value:"user",label:"Usuario"},{value:"affiliate",label:"Afiliador"},{value:"provider",label:"Proveedor"},{value:"admin",label:"Administrador"}],vU=r=>{const t=rS.find(s=>s.value===r);return t?t.label:r},jU=({isOpen:r,user:t,onClose:s,onSave:a,loading:i})=>{const[c,o]=b.useState((t==null?void 0:t.balance)||0),[d,u]=b.useState("");b.useEffect(()=>{o((t==null?void 0:t.balance)||0),u("")},[t]);const m=j=>{if(j.preventDefault(),u(""),isNaN(c)||c<0){u("Por favor, ingrese un saldo válido (número no negativo).");return}a(t.id,parseFloat(c))};return!r||!t?null:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-all duration-300",children:"✕"})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:c,onChange:j=>o(j.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",min:"0",step:"0.01",required:!0}),d&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:d})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:i?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})},wU=({isOpen:r,user:t,onClose:s,onSave:a,loading:i})=>{const[c,o]=b.useState((t==null?void 0:t.role)||"user");return b.useEffect(()=>{o((t==null?void 0:t.role)||"user")},[t]),!r||!t?null:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Cambiar Rol de ",t.username]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-all duration-300",children:"✕"})]}),e.jsxs("form",{onSubmit:d=>{d.preventDefault(),a(t.id,c)},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Rol"}),e.jsx("select",{value:c,onChange:d=>o(d.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",children:rS.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:i?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})},NU=()=>{var re,q;const[r,t]=b.useState([]),[s,a]=b.useState(""),[i,c]=b.useState({isOpen:!1,user:null}),[o,d]=b.useState({isOpen:!1,user:null}),[u,m]=b.useState(!0),[j,k]=b.useState({}),[T,C]=b.useState(null);b.useEffect(()=>{(async()=>{m(!0);try{const x=(await jt(te(E,"users"))).docs.map(W=>({id:W.id,...W.data()}));t(x)}catch(M){C("No se pudieron obtener los usuarios: "+M.message)}m(!1)})()},[]);const v=Q=>c({isOpen:!0,user:Q}),L=()=>c({isOpen:!1,user:null}),$=Q=>d({isOpen:!0,user:Q}),R=()=>d({isOpen:!1,user:null}),V=async(Q,M)=>{k(x=>({...x,[`balance_${Q}`]:!0}));try{const x=F(E,"users",Q);await Rr(x,{balance:M}),t(W=>W.map(U=>U.id===Q?{...U,balance:M}:U)),L()}catch(x){C("Error al actualizar saldo: "+x.message)}k(x=>({...x,[`balance_${Q}`]:!1}))},z=async(Q,M)=>{k(x=>({...x,[`role_${Q}`]:!0}));try{const x=F(E,"users",Q);await Rr(x,{role:M}),t(W=>W.map(U=>U.id===Q?{...U,role:M}:U)),R()}catch(x){C("Error al actualizar rol: "+x.message)}k(x=>({...x,[`role_${Q}`]:!1}))};return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Lista de ",e.jsx("span",{className:"text-red-400",children:"Usuarios"})," (",r.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all text-sm placeholder-gray-500",value:s,onChange:Q=>a(Q.target.value)}),e.jsx(Al,{className:"absolute right-3 top-2.5 text-red-400"})]})]}),u?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-400"})}):T?e.jsx("div",{className:"text-center text-red-500 py-4",children:T}):r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{})," Usuario"]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Mx,{})," Email"]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Bo,{})," Rol"]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ir,{})," Saldo"]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:r.filter(Q=>(Q.username||"").toLowerCase().includes(s.toLowerCase())||(Q.email||"").toLowerCase().includes(s.toLowerCase())).map(Q=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:Q.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:Q.email}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-900/80 text-red-400",children:vU(Q.role)}),e.jsx("button",{onClick:()=>$(Q),disabled:j[`role_${Q.id}`],className:"ml-2 p-1 bg-red-700 hover:bg-red-800 text-red-200 rounded-xl transition-all duration-300 disabled:bg-red-900",title:"Editar Rol",children:e.jsx(zp,{size:14})})]}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(Q.balance||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>v(Q),disabled:j[`balance_${Q.id}`],className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 disabled:bg-red-800",title:"Editar Saldo",children:e.jsx(zp,{size:16})})})]},Q.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Bo,{className:"mx-auto text-4xl text-red-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay usuarios registrados"})]})]}),e.jsx(jU,{isOpen:i.isOpen,user:i.user,onClose:L,onSave:V,loading:j[`balance_${(re=i.user)==null?void 0:re.id}`]}),e.jsx(wU,{isOpen:o.isOpen,user:o.user,onClose:R,onSave:z,loading:j[`role_${(q=o.user)==null?void 0:q.id}`]})]})},kU=({pendingTopUps:r=[],topUpsHistory:t=[],approveTopUp:s=()=>{},denyTopUp:a=()=>{},actionLoading:i={},formatDate:c=o=>"No especificada"})=>e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:["Recargas ",e.jsx("span",{className:"text-red-400",children:"Pendientes"})]}),Array.isArray(r)&&r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(o=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-900/80 rounded-full flex items-center justify-center text-red-400",children:e.jsx(Ir,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:o.username||"Sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",c(o.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(o.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>s(o.id),disabled:i[o.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:i[o.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Q4,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>a(o.id),disabled:i[o.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:i[o.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:18})," Rechazar Recarga"]})})]})})]},o.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ir,{className:"mx-auto text-4xl text-red-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay recargas pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:["Historial de ",e.jsx("span",{className:"text-red-400",children:"Recargas"})]}),Array.isArray(t)&&t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:t.map(o=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:o.username||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(o.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.status==="aprobado"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:o.status||"Desconocido"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:c(o.updatedAt)})]},o.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ir,{className:"mx-auto text-4xl text-red-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de recargas"})]})]})]}),SU=({withdrawals:r,formatDate:t,actionLoading:s,setActionLoading:a,showNotificationModal:i})=>{const c=async(o,d)=>{try{a(m=>({...m,[o]:!0}));const u=F(E,"withdrawals",o);await Rr(u,{status:d==="approve"?"completed":"rejected",updatedAt:ve()}),i("Éxito",`Retiro ${d==="approve"?"aprobado":"rechazado"} exitosamente`)}catch(u){i("Error",u.message||`Error al ${d==="approve"?"aprobar":"rechazar"} el retiro`)}finally{a(u=>({...u,[o]:!1}))}};return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Retiros ",e.jsx("span",{className:"text-red-400",children:"Pendientes"})]}),r.length===0?e.jsxs("div",{className:"text-center text-gray-300 py-8",children:[e.jsx(Ir,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("p",{children:"No hay retiros pendientes"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600/50",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Usuario"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Monto"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Fecha"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Acciones"})]})}),e.jsx("tbody",{children:r.map(o=>{var d;return e.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-all duration-300",children:[e.jsx("td",{className:"py-3 px-4",children:o.userEmail||"No especificado"}),e.jsxs("td",{className:"py-3 px-4",children:["S/ ",((d=o.amount)==null?void 0:d.toFixed(2))||"0.00"]}),e.jsx("td",{className:"py-3 px-4",children:t(o.createdAt)}),e.jsxs("td",{className:"py-3 px-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>c(o.id,"approve"),disabled:s[o.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${s[o.id]?"bg-gray-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600"}`,children:[e.jsx(Q4,{}),e.jsx("span",{children:"Aprobar"})]}),e.jsxs("button",{onClick:()=>c(o.id,"reject"),disabled:s[o.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${s[o.id]?"bg-gray-600 cursor-not-allowed":"bg-red-500 hover:bg-red-600"}`,children:[e.jsx(yt,{}),e.jsx("span",{children:"Rechazar"})]})]})]},o.id)})})]})})]})},TU=({sales:r,totalSales:t,formatDate:s,getOrderStatus:a})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Ventas General"}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border border-gray-600/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Total Ventas"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",t.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"Suma de todos los pedidos realizados"})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de Pedidos"}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Nombre del Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:r.map(i=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:i.productName||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(i.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:i.provider||"Sin proveedor"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:i.buyer||"Sin comprador"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:s(i.createdAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${a(i)==="Pendiente"?"bg-yellow-900/80 text-yellow-400":a(i)==="Activo"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:a(i)})})]},i.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nt,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay pedidos registrados"})]})]}),IU=({earnings:r,totalUsers:t})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-2 flex items-center",children:[e.jsx(di,{className:"mr-2"})," Ganancias Diarias"]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["S/ ",r.day.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Estimado por día"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-2 flex items-center",children:[e.jsx(di,{className:"mr-2"})," Ganancias Semanales"]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["S/ ",r.week.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Estimado por semana"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-2 flex items-center",children:[e.jsx(di,{className:"mr-2"})," Ganancias Mensuales"]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["S/ ",r.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Estimado por mes"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-2 flex items-center",children:[e.jsx(di,{className:"mr-2"})," Ganancias Totales"]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["S/ ",r.total.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Total acumulado"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Resumen"}),e.jsxs("p",{className:"text-gray-300",children:["Total de usuarios registrados: ",e.jsx("span",{className:"font-medium text-white",children:t})]}),e.jsxs("p",{className:"text-gray-300 mt-1",children:["Ganancia por usuario: ",e.jsx("span",{className:"font-medium text-white",children:"S/ 5.00"})]}),e.jsx("p",{className:"text-gray-300 mt-1",children:"Las ganancias se calculan asumiendo S/ 5.00 por cada usuario registrado. Las estimaciones diarias y semanales son proporciones del total (5% y 25%, respectivamente)."})]})]}),PU=({userName:r,setUserName:t,email:s,handleSaveChanges:a,handleLogout:i,actionLoading:c})=>e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración"}),e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(Be,{className:"mr-2 text-cyan-400"})," Nombre de usuario"]}),e.jsx("input",{type:"text",value:r,onChange:o=>t(o.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ingresa tu nombre de usuario",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(Mx,{className:"mr-2 text-cyan-400"})," Correo electrónico"]}),e.jsx("input",{type:"email",value:s,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"El correo no puede ser modificado."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(_y,{className:"mr-2 text-cyan-400"})," Nueva contraseña (opcional)"]}),e.jsx("input",{type:"password",name:"password",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ingresa una nueva contraseña"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Mínimo 6 caracteres. Déjalo en blanco para no cambiarla."})]}),e.jsx("button",{type:"submit",disabled:c.config,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium transition-all duration-300 disabled:bg-cyan-800",children:c.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:i,className:"w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2",children:[e.jsx(It,{size:18})," Cerrar Sesión"]})})]}),EU=({isOpen:r,message:t,title:s,onClose:a})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,CU=({isOpen:r,user:t,onClose:s,onSave:a})=>{const[i,c]=b.useState((t==null?void 0:t.balance)||0),[o,d]=b.useState(""),u=m=>{if(m.preventDefault(),d(""),isNaN(i)||i<0){d("Por favor, ingrese un saldo válido (número no negativo).");return}a(t.id,parseFloat(i))};return r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(yt,{size:20})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:i,onChange:m=>c(m.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},DU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState("inicio"),[i,c]=b.useState(""),[o,d]=b.useState(""),[u,m]=b.useState([]),[j,k]=b.useState([]),[T,C]=b.useState([]),[v,L]=b.useState([]),[$,R]=b.useState([]),[V,z]=b.useState(0),[re,q]=b.useState(0),[Q,M]=b.useState(0),[x,W]=b.useState(0),[U,ee]=b.useState({day:0,week:0,month:0,total:0}),[se,X]=b.useState(!0),[G,l]=b.useState(null),[_e,de]=b.useState({}),[ue,je]=b.useState({isOpen:!1,message:"",title:""}),[ye,$e]=b.useState({isOpen:!1,user:null}),be=Tt();b.useEffect(()=>{const H=_t(Ge,ae=>{ae?(d(ae.email||"No especificado"),X(!1)):be("/login")});return()=>H()},[be]),b.useEffect(()=>{var ne;const H=F(E,"users",(ne=Ge.currentUser)==null?void 0:ne.uid),ae=fe(H,I=>{if(I.exists()){const _=I.data();c(_.username||"Admin")}else l("Usuario no encontrado")},I=>{l("Error al cargar datos del usuario: "+I.message)});return()=>ae()},[]),b.useEffect(()=>{const H=te(E,"users"),ae=te(E,"sales"),ne=xe(te(E,"pendingTopUps"),pe("status","==","pendiente")),I=xe(te(E,"withdrawals"),pe("status","==","pendiente")),_=fe(H,S=>{const Z=S.docs.map(Y=>({id:Y.id,...Y.data()}));m(Z),z(Z.length)}),P=fe(ae,S=>{const Z=S.docs.map(ie=>({id:ie.id,...ie.data()}));k(Z);const Y=Z.reduce((ie,ce)=>ie+(parseFloat(ce.price)||0),0);q(Y)}),h=fe(ne,S=>{const Z=S.docs.map(Y=>({id:Y.id,...Y.data()}));C(Z),M(Z.length)}),g=fe(I,S=>{const Z=S.docs.map(Y=>({id:Y.id,...Y.data()}));L(Z),W(Z.length)});return()=>{_(),P(),h(),g()}},[]),b.useEffect(()=>{const H=fe(F(E,"notifications","adminMessage"),ae=>{if(ae.exists()){const ne=ae.data();R([{id:ae.id,...ne}])}else R([])},ae=>{l("Error al cargar notificaciones: "+ae.message)});return()=>H()},[]),b.useEffect(()=>{const H=V*5;ee({day:H*.05,week:H*.25,month:H,total:H})},[V]);const Te=(H,ae)=>{je({isOpen:!0,title:H,message:ae})},qe=()=>{je({isOpen:!1,message:"",title:""})},Ce=H=>{$e({isOpen:!0,user:H})},ze=()=>{$e({isOpen:!1,user:null})},De=async(H,ae)=>{try{de(I=>({...I,balance:!0}));const ne=F(E,"users",H);await Rr(ne,{balance:ae,updatedAt:ve()}),Te("Éxito","Saldo actualizado exitosamente"),ze()}catch(ne){Te("Error",ne.message||"Error al actualizar el saldo")}finally{de(ne=>({...ne,balance:!1}))}},n=async H=>{H.preventDefault();try{de(_=>({..._,config:!0}));const ae=H.target.password.value,ne=F(E,"users",Ge.currentUser.uid),I={username:i,updatedAt:ve()};if(ae){if(ae.length<6){Te("Error","La contraseña debe tener al menos 6 caracteres");return}await Wg(Ge.currentUser,ae)}await Rr(ne,I),Te("Éxito","Cambios guardados correctamente"),H.target.reset()}catch(ae){Te("Error",ae.message||"Error al guardar los cambios")}finally{de(ae=>({...ae,config:!1}))}},w=async()=>{try{await Px(Ge),be("/")}catch(H){Te("Error",H.message||"Error al cerrar sesión")}},p=H=>{if(!H)return"No especificada";try{const ae=H instanceof Date?H:new Date(H);return isNaN(ae.getTime())?"Fecha inválida":ae.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},A=H=>{var I,_;const ae=((_=(I=H.endDate)==null?void 0:I.toDate)==null?void 0:_.call(I))||new Date,ne=new Date;return H.status==="pending"?"Pendiente":ae>ne&&H.status==="completed"?"Activo":"Expirado"},B=()=>{if(se)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-400"})});if(G)return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:G}),e.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})]});switch(s){case"inicio":return e.jsx(yU,{totalUsers:V,totalSales:re,pendingTopUps:Q,pendingWithdrawals:x});case"notificaciones":return e.jsx(bU,{notifications:$,formatDate:p});case"usuarios":return e.jsx(NU,{users:u,openEditBalanceModal:Ce});case"recargas":return e.jsx(kU,{topUps:T,formatDate:p,actionLoading:_e,setActionLoading:de,showNotificationModal:Te});case"retiros":return e.jsx(SU,{withdrawals:v,formatDate:p,actionLoading:_e,setActionLoading:de,showNotificationModal:Te});case"pedidos":return e.jsx(TU,{sales:j,totalSales:re,formatDate:p,getOrderStatus:A});case"ganancias":return e.jsx(IU,{earnings:U,totalUsers:V});case"configuracion":return e.jsx(PU,{userName:i,setUserName:c,email:o,handleSaveChanges:n,handleLogout:w,actionLoading:_e});default:return e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Ze,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black to-gray-900 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!r),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>{be("/"),t(!1)},className:"text-xl font-bold text-red-400 hover:text-red-300 transition-all duration-300",children:"SZ Streaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(yt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Rx},{id:"notificaciones",label:"Notificaciones",icon:zo},{id:"usuarios",label:"Usuarios",icon:Bo},{id:"recargas",label:"Recargas",icon:Ir},{id:"retiros",label:"Retiros",icon:Ir},{id:"pedidos",label:"Pedidos",icon:Nt},{id:"ganancias",label:"Ganancias",icon:di},{id:"configuracion",label:"Configuración",icon:pd}].map(H=>e.jsxs("button",{onClick:()=>{a(H.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s===H.id?"bg-red-500/20 text-red-400 border border-red-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-red-400"}`,children:[e.jsx(H.icon,{className:"text-lg"}),e.jsx("span",{children:H.label})]},H.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:w,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:B()}),e.jsx(EU,{isOpen:ue.isOpen,title:ue.title,message:ue.message,onClose:qe}),e.jsx(CU,{isOpen:ye.isOpen,user:ye.user,onClose:ze,onSave:De}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},sS=b.createContext({theme:"dark",toggleTheme:()=>{}}),_U=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(sS.Provider,{value:{theme:t,toggleTheme:a},children:r})},$U=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(sS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Netflix")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,netflix:P.length}))},I=>{C("Error al cargar productos de Netflix"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"netflix_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"netflix"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"netflix"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Netflix`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:13}),De(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[ue(se[n.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx($y,{className:"text-red-500",size:13}),n.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Dy,{className:"text-red-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",de(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",de(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Bt,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Oe,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(Nt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:`text-gray-300 mb-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:v.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",de(v.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Número de WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"9 dígitos (sin código de país)"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-transparent border-red-500/50 rounded focus:ring-red-500/50"}),e.jsxs("label",{htmlFor:"termsCheck",className:`ml-2 text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(v.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),T&&e.jsxs("div",{className:"p-3 bg-gradient-to-r from-red-900/80 to-red-800/80 border-l-4 border-red-500 rounded-xl flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-white",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>C(null),className:"text-white hover:text-red-300",children:e.jsx(yt,{size:16})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-gray-300 ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60":"bg-gray-200/60 hover:bg-gray-300/60"} border border-gray-600/50 transition-all shadow-md`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-md`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:18}):"Confirmar Compra"})]})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre del Producto"}),e.jsx("p",{className:"text-white font-semibold",children:$.name})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tipo de Cuenta"}),e.jsx("p",{className:"text-white",children:$.accountType})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Proveedor"}),e.jsx("p",{className:"text-white",children:$.provider})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Detalles de la Cuenta"}),e.jsx("p",{className:"text-white",children:$.accountDetails})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-gray-300 ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60":"bg-gray-200/60 hover:bg-gray-300/60"} border border-gray-600/50 transition-all shadow-md mt-4`,children:"Cerrar"})]})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Producto"}),e.jsx("p",{className:"text-white font-semibold",children:$.name})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Términos"}),e.jsx("p",{className:"text-white",children:$.terms})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Proveedor"}),e.jsx("p",{className:"text-white",children:$.provider})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-gray-300 ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60":"bg-gray-200/60 hover:bg-gray-300/60"} border border-gray-600/50 transition-all shadow-md mt-4`,children:"Cerrar"})]})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-white",children:[e.jsx("li",{children:"No compartir las credenciales de la cuenta con terceros."}),e.jsx("li",{children:"Las cuentas son para uso personal y no comercial."}),e.jsx("li",{children:"El proveedor puede contactarte para coordinar la entrega de los detalles de la cuenta."}),e.jsx("li",{children:"Los reembolsos están sujetos a la política del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por el mal uso de las cuentas."})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-gray-300 ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60":"bg-gray-200/60 hover:bg-gray-300/60"} border border-gray-600/50 transition-all shadow-md mt-4`,children:"Cerrar"})]})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-md mt-6`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})},AU=()=>e.jsx(_U,{children:e.jsx($U,{})}),aS=b.createContext({theme:"dark",toggleTheme:()=>{}}),RU=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(aS.Provider,{value:{theme:t,toggleTheme:a},children:r})},MU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(aS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Disney")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,disney:P.length}))},I=>{C("Error al cargar productos de Disney+"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"disney_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"disney"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"disney"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Disney`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas, series y contenido exclusivo con nuestras cuentas premium de Disney+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:13}),De(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[ue(se[n.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx($y,{className:"text-red-500",size:13}),n.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Dy,{className:"text-red-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",de(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",de(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Bt,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Oe,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(Nt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:`text-gray-300 mb-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:v.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",de(v.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Número de WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"9 dígitos (sin código de país)"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-transparent border-red-500/50 rounded focus:ring-red-500/50"}),e.jsxs("label",{htmlFor:"termsCheck",className:`ml-2 text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(v.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function OU(){return e.jsx(RU,{children:e.jsx(MU,{})})}const nS=b.createContext({theme:"dark",toggleTheme:()=>{}}),LU=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(nS.Provider,{value:{theme:t,toggleTheme:a},children:r})},VU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(nS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Max")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,max:P.length}))},I=>{C("Error al cargar productos de Max"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"max_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"max"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"max"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Max`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Max...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo con nuestras cuentas premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?text-gray-300:"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function zU(){return e.jsx(LU,{children:e.jsx(VU,{})})}const iS=b.createContext({theme:"dark",toggleTheme:()=>{}}),BU=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(iS.Provider,{value:{theme:t,toggleTheme:a},children:r})},UU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(iS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Spotify")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,spotify:P.length}))},I=>{C("Error al cargar productos de Spotify"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"spotify_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"spotify"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"spotify"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Spotify`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616531770192-6b04a0c365ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Escucha tu música favorita sin anuncios con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:13}),De(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[ue(se[n.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(se[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx($y,{className:"text-red-500",size:13}),n.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(Dy,{className:"text-red-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",de(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",de(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Bt,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-red-500/20":"bg-gray-200/60 hover:bg-red-600/20"} text-gray-100 transition-all border border-red-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(Oe,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(Nt,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:`text-gray-300 mb-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:v.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",de(v.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"} mb-1`,children:"Número de WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"9 dígitos (sin código de país)"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-transparent border-red-500/50 rounded focus:ring-red-500/50"}),e.jsxs("label",{htmlFor:"termsCheck",className:`ml-2 text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(v.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),T&&e.jsxs("div",{className:"p-3 bg-gradient-to-r from-red-900/80 to-red-700/80 rounded-lg flex items-center gap-2",children:[e.jsx(Ze,{className:"text-red-400",size:20}),e.jsx("p",{className:"text-sm text-white",children:T})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-gray-600/50 shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} text-white shadow-lg transition-all`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Producto"}),e.jsx("p",{className:"text-white font-semibold",children:$.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tipo de Cuenta"}),e.jsx("p",{className:"text-white font-semibold",children:$.accountType})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Proveedor"}),e.jsx("p",{className:"text-white font-semibold",children:$.provider})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Detalles"}),e.jsx("p",{className:"text-white font-semibold",children:$.accountDetails})]}),V&&e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Términos y Condiciones"}),e.jsx("p",{className:"text-white font-semibold",children:$.terms})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{R(null),z(!1)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-gray-600/50 shadow-inner`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsx("p",{className:"text-sm",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos:"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm space-y-2",children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor."}),e.jsx("li",{children:"No se aceptan reembolsos una vez entregada la cuenta."}),e.jsx("li",{children:"El proveedor se contactará contigo para coordinar los detalles de acceso."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por mal uso de las cuentas."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-gray-600/50 shadow-inner`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-4",children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-gray-600/50 shadow-inner`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function FU(){return e.jsx(BU,{children:e.jsx(UU,{})})}const oS=b.createContext({theme:"dark",toggleTheme:()=>{}}),HU=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(oS.Provider,{value:{theme:t,toggleTheme:a},children:r})},WU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(oS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Prime Video")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,primevideo:P.length}))},I=>{C("Error al cargar productos de Prime Video"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"primevideo_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"primevideo"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"primevideo"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Prime Video`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg mt-4`,children:"Cerrar"})]})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg mt-4`,children:"Cerrar"})]})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} list-disc pl-5 space-y-2`,children:[e.jsx("li",{children:"Las cuentas son de uso personal y no deben compartirse."}),e.jsx("li",{children:"Los tiempos de entrega pueden variar según el proveedor."}),e.jsx("li",{children:"No se aceptan reembolsos una vez entregada la cuenta, salvo en casos de fallos verificados."}),e.jsx("li",{children:"El proveedor se contactará contigo para coordinar los detalles de acceso."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por el mal uso de las cuentas."})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg mt-4`,children:"Cerrar"})]})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-4`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})},qU=()=>e.jsx(HU,{children:e.jsx(WU,{})}),lS=b.createContext({theme:"dark",toggleTheme:()=>{}}),GU=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(lS.Provider,{value:{theme:t,toggleTheme:a},children:r})},QU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(lS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Vix")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,vix:P.length}))},I=>{C("Error al cargar productos de Vix"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"vix_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"vix"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vix"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Vix`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),V&&e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos y Condiciones:"})," ",$.terms]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{R(null),z(!1)},className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"}),!V&&e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>z(!0),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Ver Términos"})]})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:`space-y-4 text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} overflow-y-auto max-h-[60vh]`,children:[e.jsx("p",{children:"Bienvenido a SZ Streaming. Al utilizar nuestros servicios, aceptas los siguientes términos y condiciones:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{children:"Las cuentas proporcionadas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones en el servicio debido a cambios en las políticas de las plataformas de streaming."}),e.jsx("li",{children:"Los pagos son procesados de forma segura, y no se ofrecen reembolsos una vez que la cuenta ha sido entregada."}),e.jsx("li",{children:"El usuario es responsable de proporcionar información precisa para la entrega de las credenciales."}),e.jsx("li",{children:"SZ Streaming se reserva el derecho de suspender cuentas en caso de uso indebido o violación de estos términos."}),e.jsx("li",{children:'Los tiempos de entrega para productos "A pedido" pueden variar según la disponibilidad del proveedor.'})]}),e.jsx("p",{children:"Para más información, contáctanos a través de nuestro soporte en WhatsApp o correo electrónico."})]}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"})})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})},KU=()=>e.jsx(GU,{children:e.jsx(QU,{})}),cS=b.createContext({theme:"dark",toggleTheme:()=>{}}),ZU=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(cS.Provider,{value:{theme:t,toggleTheme:a},children:r})},YU=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(cS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Canva")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,canva:P.length}))},I=>{C("Error al cargar productos de Canva"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"canva_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"canva"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"canva"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Canva`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Canva"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Crea diseños increíbles con nuestras cuentas premium de Canva Pro"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`mt-6 w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`mt-6 w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la compra."}),e.jsx("li",{children:'No se garantiza la disponibilidad de stock en productos "A pedido".'}),e.jsx("li",{children:"Los reembolsos están sujetos a la política del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por el mal uso de las cuentas."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`mt-6 w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`mt-6 w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`mt-auto p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center text-center sm:text-left",children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsxs("div",{className:"flex space-x-4 mt-3 sm:mt-0",children:[e.jsx(N,{to:"/terms",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Términos"}),e.jsx(N,{to:"/privacy",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Privacidad"}),e.jsx(N,{to:"/contact",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Contacto"})]})]})})]})};function XU(){return e.jsx(ZU,{children:e.jsx(YU,{})})}const dS=b.createContext({theme:"dark",toggleTheme:()=>{}}),JU=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(dS.Provider,{value:{theme:t,toggleTheme:a},children:r})},eF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(dS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","ChatGPT")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,chatgpt:P.length}))},I=>{C("Error al cargar productos de ChatGPT"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"chatgpt_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"chatgpt"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"chatgpt"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=ChatGPT`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1677442136019-2b8a3e742f5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de ChatGPT"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a funciones avanzadas de ChatGPT con nuestras cuentas premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})})]})}),V&&$&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} whitespace-pre-wrap`,children:$.terms})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm list-disc pl-5 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse."}),e.jsx("li",{children:"El proveedor se contactará contigo para entregar los detalles de acceso tras la compra."}),e.jsx("li",{children:"Los tiempos de entrega pueden variar según el producto (en stock o a pedido)."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por mal uso de las cuentas por parte del usuario."}),e.jsx("li",{children:"El proveedor puede establecer términos adicionales específicos para cada producto."})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})})]})}),e.jsx("footer",{className:`mt-auto border-t ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"} backdrop-blur-md py-6 px-4 sm:px-6`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"SZ Streaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"SZ Streaming © 2025"})]}),e.jsxs("div",{className:"flex space-x-4 sm:space-x-6",children:[e.jsx(N,{to:"/terms",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Términos"}),e.jsx(N,{to:"/privacy",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Privacidad"}),e.jsx(N,{to:"/contact",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Contacto"})]})]})})]})};function tF(){return e.jsx(JU,{children:e.jsx(eF,{})})}const uS=b.createContext({theme:"dark",toggleTheme:()=>{}}),rF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(uS.Provider,{value:{theme:t,toggleTheme:a},children:r})},sF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(uS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Crunchyroll")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,crunchyroll:P.length}))},I=>{C("Error al cargar productos de Crunchyroll"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"crunchyroll_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"crunchyroll"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"crunchyroll"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Crunchyroll`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de anime, manga y contenido exclusivo con nuestras cuentas premium de Crunchyroll"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]})]}),e.jsx("div",{className:"mt-6 flex gap-3",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"})})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:$.terms})]}),e.jsx("div",{className:"mt-6 flex gap-3",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"})})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Al utilizar SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} list-disc pl-5 space-y-2`,children:[e.jsx("li",{children:"Las cuentas son personales y no transferibles."}),e.jsx("li",{children:"El uso indebido de las cuentas puede resultar en la suspensión del servicio."}),e.jsx("li",{children:"Los precios y la disponibilidad de los productos están sujetos a cambios sin previo aviso."}),e.jsx("li",{children:"El proveedor se contactará contigo para coordinar los detalles de acceso tras la compra."}),e.jsx("li",{children:"SZ Streaming no se hace responsable por interrupciones del servicio causadas por terceros."})]})]}),e.jsx("div",{className:"mt-6 flex gap-3",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"})})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx("div",{className:"mt-6 flex gap-3",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"})})]})})]})},aF=()=>e.jsx(rF,{children:e.jsx(sF,{})}),xS=b.createContext({theme:"dark",toggleTheme:()=>{}}),nF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(xS.Provider,{value:{theme:t,toggleTheme:a},children:r})},iF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(xS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Redes Sociales")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,redessociales:P.length}))},I=>{C("Error al cargar productos de Redes Sociales"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"redes_sociales_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"redes_sociales"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"redes_sociales"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Redes Sociales`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-6d0c4f0db7d0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a funciones premium y mejora tu experiencia en redes sociales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function oF(){return e.jsx(nF,{children:e.jsx(iF,{})})}const mS=b.createContext({theme:"dark",toggleTheme:()=>{}}),lF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(mS.Provider,{value:{theme:t,toggleTheme:a},children:r})},cF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(mS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Apple Music")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,applemusic:P.length}))},I=>{C("Error al cargar productos de Apple Music"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"apple_music_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(availableAccountsQuery);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"apple_music"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"apple_music"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Apple Music`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/"),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Volver al Inicio"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px ambulatory care unit px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2f2a7b7690a3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Apple Music"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de música ilimitada y funciones exclusivas con Apple Music Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function dF(){return e.jsx(lF,{children:e.jsx(cF,{})})}const hS=b.createContext({theme:"dark",toggleTheme:()=>{}}),uF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(hS.Provider,{value:{theme:t,toggleTheme:a},children:r})},xF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(hS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Apple Tv")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,appletv:P.length}))},I=>{C("Error al cargar productos de Apple Tv"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"appletv_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"appletv"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"appletv"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Apple Tv`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-grid duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Apple Tv...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2b6e3c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios Premium de Apple Tv"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de tus programas y películas favoritas con nuestras suscripciones premium de Apple Tv"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function mF(){return e.jsx(uF,{children:e.jsx(xF,{})})}const pS=b.createContext({theme:"dark",toggleTheme:()=>{}}),hF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(pS.Provider,{value:{theme:t,toggleTheme:a},children:r})},pF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(pS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Iptv")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,iptv:P.length}))},I=>{C("Error al cargar productos de IPTV"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"iptv_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profileprops.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"iptv"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"iptv"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Iptv`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",class3080:!0,className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1512428559087-560fa5ceab76?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de IPTV"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de una amplia variedad de canales en vivo y contenido a demanda con nuestras cuentas premium de IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function fF(){return e.jsx(hF,{children:e.jsx(pF,{})})}const fS=b.createContext({theme:"dark",toggleTheme:()=>{}}),gF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(fS.Provider,{value:{theme:t,toggleTheme:a},children:r})},yF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(fS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Flujo Tv")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,flujotv:P.length}))},I=>{C("Error al cargar productos de Flujo Tv"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"flujotv_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"flujotv"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"flujotv"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Flujo Tv`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Flujo Tv...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-6d0c4f0db7d0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Flujo Tv"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a funciones premium y mejora tu experiencia en Flujo Tv"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function bF(){return e.jsx(gF,{children:e.jsx(yF,{})})}const gS=b.createContext({theme:"dark",toggleTheme:()=>{}}),vF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(gS.Provider,{value:{theme:t,toggleTheme:a},children:r})},jF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(gS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Viki Rakuten")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,vikirakuten:P.length}))},I=>{C("Error al cargar productos de Viki Rakuten"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"viki_rakuten_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"viki_rakuten"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"viki_rakuten"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Viki Rakuten`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Reintentar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/"),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg mt-4",children:"Volver al Inicio"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e756b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Viki Rakuten"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de dramas asiáticos y contenido exclusivo con Viki Rakuten Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function wF(){return e.jsx(vF,{children:e.jsx(jF,{})})}const yS=b.createContext({theme:"dark",toggleTheme:()=>{}}),NF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(yS.Provider,{value:{theme:t,toggleTheme:a},children:r})},kF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(yS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Pornhub")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,pornhub:P.length}))},I=>{C("Error al cargar productos de Pornhub"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"pornhub_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profileprops.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"pornhub"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"pornhub"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Pornhub`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1512428559087-560fa5ceab76?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Pornhub"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de contenido exclusivo con nuestras cuentas premium de Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function SF(){return e.jsx(NF,{children:e.jsx(kF,{})})}const bS=b.createContext({theme:"dark",toggleTheme:()=>{}}),TF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(bS.Provider,{value:{theme:t,toggleTheme:a},children:r})},IF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(bS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Paramount")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,paramount:P.length}))},I=>{C("Error al cargar productos de Paramount"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"paramount_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"paramount"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"paramount"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Paramount`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Reintentar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/"),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg mt-4",children:"Volver al Inicio"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Paramount...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Paramount"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas y series exclusivas con Paramount+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Servicios de Paramount Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function PF(){return e.jsx(TF,{children:e.jsx(IF,{})})}const vS=b.createContext({theme:"dark",toggleTheme:()=>{}}),EF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(vS.Provider,{value:{theme:t,toggleTheme:a},children:r})},CF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(vS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Licencias")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,licencias:P.length}))},I=>{C("Error al cargar productos de Licencias"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"licencias_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"licencias"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"licencias"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Licencias`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Reintentar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/"),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg mt-4",children:"Volver al Inicio"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Licencias...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e756b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias de Software"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Obtén licencias de software premium para tus necesidades"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Licencias Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function DF(){return e.jsx(EF,{children:e.jsx(CF,{})})}const jS=b.createContext({theme:"dark",toggleTheme:()=>{}}),_F=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(jS.Provider,{value:{theme:t,toggleTheme:a},children:r})},$F=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(jS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Capcut")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,capcut:P.length}))},I=>{C("Error al cargar productos de Capcut"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"capcut_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"capcut"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"capcut"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Capcut`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Reintentar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/"),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg mt-4",children:"Volver al Inicio"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e756b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Capcut"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Edita videos de manera profesional y creativa con Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Servicios de Capcut Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function AF(){return e.jsx(_F,{children:e.jsx($F,{})})}const wS=b.createContext({theme:"dark",toggleTheme:()=>{}}),RF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(wS.Provider,{value:{theme:t,toggleTheme:a},children:r})},MF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(wS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Duolingo")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,duolingo:P.length}))},I=>{C("Error al cargar productos de Duolingo"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"duolingo_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"duolingo"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"duolingo"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Duolingo`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Reintentar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/"),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg mt-4",children:"Volver al Inicio"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,ofr:!0,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e756b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Duolingo"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Aprende idiomas de manera divertida y efectiva con Duolingo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Servicios de Duolingo Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function OF(){return e.jsx(RF,{children:e.jsx(MF,{})})}const NS=b.createContext({theme:"dark",toggleTheme:()=>{}}),LF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(NS.Provider,{value:{theme:t,toggleTheme:a},children:r})},VF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(NS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Dgo")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,dgo:P.length}))},I=>{C("Error al cargar productos de Dgo"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"dgo_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"dgo"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"dgo"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Dgo`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de streaming en vivo y contenido exclusivo con nuestras cuentas premium de Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),V&&e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{R(null),z(!1)},className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"}),!V&&e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>z(!0),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Ver Términos"})]})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"1. Condiciones de Uso:"})," Al adquirir una cuenta en SZ Streaming, aceptas cumplir con las políticas de uso de cada plataforma. No se permite compartir cuentas fuera de los términos establecidos por el proveedor."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"2. Responsabilidad:"})," SZ Streaming actúa como intermediario entre el cliente y el proveedor. No nos hacemos responsables por el mal uso de las cuentas o interrupciones del servicio causadas por terceros."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"3. Pagos y Reembolsos:"})," Todos los pagos son finales. Los reembolsos solo se procesarán en caso de que el proveedor no pueda entregar la cuenta adquirida dentro del plazo establecido."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"4. Soporte:"})," El soporte será proporcionado por el proveedor de la cuenta. Contacta al proveedor directamente a través del número de WhatsApp proporcionado al momento de la compra."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"5. Cambios en los Términos:"})," SZ Streaming se reserva el derecho de modificar estos términos en cualquier momento. Los cambios serán notificados a través de nuestra plataforma."]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"})})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})})]})}),e.jsx("footer",{className:`mt-auto p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"}`,children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsxs("div",{className:"mt-4 flex justify-center space-x-4",children:[e.jsx(N,{to:"/terms",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Términos y Condiciones"}),e.jsx(N,{to:"/privacy",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Política de Privacidad"}),e.jsx(N,{to:"/contact",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Contacto"})]})]})})]})};function zF(){return e.jsx(LF,{children:e.jsx(VF,{})})}const kS=b.createContext({theme:"dark",toggleTheme:()=>{}}),BF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(kS.Provider,{value:{theme:t,toggleTheme:a},children:r})},UF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(kS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Liga Max")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,ligamax:P.length}))},I=>{C("Error al cargar productos de Liga Max"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"ligamax_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"ligamax"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"ligamax"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Liga Max`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1553481187-2de44ae95cf0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de deportes en vivo y contenido exclusivo con nuestras cuentas premium de Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:$.terms})]}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Uso de Cuentas:"})," Las cuentas adquiridas en SZ Streaming son para uso personal y no deben ser revendidas o compartidas con terceros no autorizados."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Responsabilidad:"})," SZ Streaming actúa como intermediario entre los proveedores y los clientes. No nos hacemos responsables por el mal uso de las cuentas o problemas derivados del proveedor."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Pagos:"})," Todos los pagos se procesan a través de métodos seguros. No se realizarán reembolsos una vez que la cuenta haya sido entregada al cliente."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Soporte:"})," Cualquier problema con las cuentas debe ser reportado al proveedor correspondiente a través de los datos de contacto proporcionados."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," La duración de las cuentas varía según el producto. Asegúrate de verificar los detalles antes de realizar la compra."]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})})]})}),e.jsx("footer",{className:`mt-auto py-8 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"}`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"SZ Streaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming y más. Disfruta del mejor entretenimiento al mejor precio."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Enlaces Rápidos"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(N,{to:"/",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Inicio"})}),e.jsx("li",{children:e.jsx(N,{to:"/dashboard",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Dashboard"})}),e.jsx("li",{children:e.jsx(N,{to:"/support",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Soporte"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Contacto"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Email: soporte@szstreaming.com"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"WhatsApp: +51 987 654 321"})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-500"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]})})]})})]})};function FF(){return e.jsx(BF,{children:e.jsx(UF,{})})}const SS=b.createContext({theme:"dark",toggleTheme:()=>{}}),HF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(SS.Provider,{value:{theme:t,toggleTheme:a},children:r})},WF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(SS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Movistar Play")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,movistarplay:P.length}))},I=>{C("Error al cargar productos de Movistar Play"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"movistarplay_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"movistarplay"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"movistarplay"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Movistar Play`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},"Old:transition":{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de entretenimiento sin límites con nuestras cuentas premium de Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),V&&e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{R(null),z(!1)},className:`py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:`space-y-4 max-h-[60vh] overflow-y-auto text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("p",{children:"Bienvenido a SZ Streaming. Al realizar una compra, aceptas los siguientes términos y condiciones:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{children:"Todas las cuentas proporcionadas son para uso personal y no deben ser compartidas o revendidas."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por los proveedores de streaming."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las compras no son reembolsables una vez que se han entregado los detalles de la cuenta."}),e.jsx("li",{children:"En caso de problemas con la cuenta, contacta al proveedor a través del número de WhatsApp proporcionado."}),e.jsx("li",{children:"SZ Streaming se reserva el derecho de suspender cuentas en caso de uso indebido."})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})})]})}),e.jsx("footer",{className:`py-8 px-4 mt-12 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"}`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("div",{className:"mb-4 sm:mb-0",children:e.jsxs("p",{className:`text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(N,{to:"/terms",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Términos y Condiciones"}),e.jsx(N,{to:"/privacy",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Política de Privacidad"}),e.jsx(N,{to:"/contact",className:`text-sm ${l==="dark"?"text-gray-300 hover:text-red-500":"text-gray-600 hover:text-red-600"} transition-all`,children:"Contacto"})]})]})})]})},qF=()=>e.jsx(HF,{children:e.jsx(WF,{})}),TS=b.createContext({theme:"dark",toggleTheme:()=>{}}),GF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(TS.Provider,{value:{theme:t,toggleTheme:a},children:r})},QF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(TS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Youtube")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,youtube:P.length}))},I=>{C("Error al cargar productos de Youtube"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"youtube_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"youtube"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"youtube"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Youtube`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Youtube...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617210-7d673bf0f Crawford?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Youtube"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de videos sin anuncios, contenido exclusivo y más con nuestras cuentas premium de Youtube"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function KF(){return e.jsx(GF,{children:e.jsx(QF,{})})}const IS=b.createContext({theme:"dark",toggleTheme:()=>{}}),ZF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(IS.Provider,{value:{theme:t,toggleTheme:a},children:r})},YF=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(IS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Deezer")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,deezer:P.length}))},I=>{C("Error al cargar productos de Deezer"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"deezer_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"deezer"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"deezer"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Deezer`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de música sin límites con nuestras cuentas premium de Deezer"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]}),V&&e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos y Condiciones:"})," ",$.terms]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{R(null),z(!1)},className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"}),!V&&e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>z(!0),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Ver Términos"})]})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"1. Uso de Cuentas:"})," Las cuentas adquiridas en SZ Streaming son para uso personal y no deben compartirse ni revenderse. El incumplimiento puede resultar en la suspensión de la cuenta sin reembolso."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"2. Entrega:"})," Las cuentas en stock se entregan inmediatamente tras la compra. Las cuentas a pedido pueden tardar hasta 24-48 horas, dependiendo del proveedor."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"3. Reembolsos:"})," No se ofrecen reembolsos una vez que la cuenta ha sido entregada y activada. En caso de problemas, contacte al proveedor a través del número proporcionado."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"4. Soporte:"})," SZ Streaming ofrece soporte para problemas relacionados con la compra. Para problemas con la cuenta, contacte directamente al proveedor."]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"5. Renovaciones:"})," Algunas cuentas ofrecen renovación a un precio reducido. Verifique los detalles en cada producto."]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cerrar"})})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.message}),e.jsx("div",{className:"mt-6",children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})})]})}),e.jsx("footer",{className:`mt-auto py-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"}`,children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," SZ Streaming. Todos los derechos reservados."]}),e.jsxs("div",{className:"mt-2 flex justify-center space-x-4",children:[e.jsx(N,{to:"/terms",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Términos y Condiciones"}),e.jsx(N,{to:"/privacy",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Política de Privacidad"}),e.jsx(N,{to:"/contact",className:`text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all`,children:"Contacto"})]})]})})]})},XF=()=>e.jsx(ZF,{children:e.jsx(YF,{})}),PS=b.createContext({theme:"dark",toggleTheme:()=>{}}),JF=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(PS.Provider,{value:{theme:t,toggleTheme:a},children:r})},eH=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(PS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Tidal")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,tidal:P.length}))},I=>{C("Error al cargar productos de Tidal"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"tidal_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"tidal"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"tidal"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Tidal`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a596?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de música en alta fidelidad y contenido exclusivo con nuestras cuentas premium de Tidal"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function tH(){return e.jsx(JF,{children:e.jsx(eH,{})})}const ES=b.createContext({theme:"dark",toggleTheme:()=>{}}),rH=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(ES.Provider,{value:{theme:t,toggleTheme:a},children:r})},sH=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(ES),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Vpn")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,vpn:P.length}))},I=>{C("Error al cargar productos de VPN"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"vpn_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"vpn"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vpn"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Vpn`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-grid duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios Premium de VPN"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Navega de forma segura y privada con nuestras suscripciones premium de VPN"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function aH(){return e.jsx(rH,{children:e.jsx(sH,{})})}const CS=b.createContext({theme:"dark",toggleTheme:()=>{}}),nH=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(CS.Provider,{value:{theme:t,toggleTheme:a},children:r})},iH=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(CS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Win Tv")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,wintv:P.length}))},I=>{C("Error al cargar productos de Win Tv"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"wintv_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"wintv"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"wintv"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Win Tv`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-grid duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Win Tv...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2b6e3c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios Premium de Win Tv"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de tus programas y canales favoritos con nuestras suscripciones premium de Win Tv"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function oH(){return e.jsx(nH,{children:e.jsx(iH,{})})}const DS=b.createContext({theme:"dark",toggleTheme:()=>{}}),lH=({children:r})=>{const[t,s]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";s(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(DS.Provider,{value:{theme:t,toggleTheme:a},children:r})},cH=()=>{const[r,t]=b.useState(!1),[s,a]=b.useState([]),[i,c]=b.useState([]),[o,d]=b.useState(null),[u,m]=b.useState(0),[j,k]=b.useState(!0),[T,C]=b.useState(null),[v,L]=b.useState(null),[$,R]=b.useState(null),[V,z]=b.useState(!1),[re,q]=b.useState(!1),[Q,M]=b.useState(null),[x,W]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=b.useState(""),[se,X]=b.useState({}),G=Tt(),{theme:l,toggleTheme:_e}=b.useContext(DS),de=n=>{const w=Number(n);return isNaN(w)?"0.00":w.toFixed(2)},ue=n=>{const w=Math.floor(n),p=n%1>=.5,A=5-w-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(w)].map((B,H)=>e.jsx(Me,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${H}`)),p&&e.jsx(Me,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(A)].map((B,H)=>e.jsx(Me,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${H}`))]})};b.useEffect(()=>{const n=_t(Ge,async w=>{if(w)try{const p=await et(F(E,"users",w.uid));if(p.exists()){const A=p.data();d({id:w.uid,name:A.username||"Usuario",email:w.email,orders:A.orders||[],role:A.role||"user",phone:A.phone||""}),m(Number(A.balance)||0)}else C("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){C("Error al cargar datos del usuario"),console.error(p)}else d(null),m(0);k(!1)});return()=>n()},[]),b.useEffect(()=>{const n=xe(te(E,"products"),pe("category","==","Busca Personas")),w=fe(n,async I=>{const _=I.docs.map(h=>{const g=h.data();return{id:h.id,...g,price:Number(g.price)||0,stock:Number(g.stock||g.available||0),accountDetails:g.email||g.details||"Detalles no disponibles",terms:g.terms||"Términos del proveedor",provider:g.provider||"Proveedor no especificado",providerId:g.providerId||"",providerPhone:g.providerPhone||"",acceptsOrders:g.status==="A pedido",duration:g.duration||"1 mes",accountType:g.accountType||"No especificado",status:g.status||"En stock",image:g.image||"https://via.placeholder.com/300",renewal:g.renewal||!1,renewalPrice:Number(g.renewalPrice)||Number(g.price)*.9}}),P=await Promise.all(_.map(async h=>{let g={provider:h.provider,providerPhone:h.providerPhone};if(!h.provider||h.provider==="Proveedor no especificado")try{if(h.providerId){const S=await et(F(E,"users",h.providerId));S.exists()&&(g={provider:S.data().username||S.data().email||h.provider,providerPhone:S.data().phoneNumber||h.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...h,...g}}));a(P),W(h=>({...h,buscapersonas:P.length}))},I=>{C("Error al cargar productos de Busca Personas"),console.error(I)}),p=xe(te(E,"ratings")),A=fe(p,I=>{const _={};I.docs.forEach(h=>{const g=h.data(),S=g.providerId;_[S]||(_[S]=[]),_[S].push(Number(g.rating)||0)});const P={};Object.keys(_).forEach(h=>{const g=_[h],S=g.length?g.reduce((Z,Y)=>Z+Y,0)/g.length:1;P[h]=Math.min(Math.max(S,1),5)}),X(P)},I=>{console.error("Error al cargar calificaciones de proveedores:",I)}),B=xe(te(E,"buscapersonas_accounts"),pe("status","==","available")),H=fe(B,I=>{const _=I.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));c(_)},I=>{console.error("Error al cargar cuentas:",I)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(I=>{const _=I.toLowerCase().replace(/\s+/g,""),P=xe(te(E,"products"),pe("category","==",I));return fe(P,h=>{W(g=>({...g,[_]:h.docs.length}))},h=>{console.error(`Error al cargar productos de ${I}:`,h)})});return()=>{w(),A(),H(),ne.forEach(I=>I())}},[]);const je=n=>{if(!o){M({message:"Por favor, inicia sesión para realizar una compra en SZ Streaming.",onClose:()=>G("/login")});return}if(u<n.price){M({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){M({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de SZ Streaming."});return}L({product:n,customerName:o.name,phoneNumber:""})},ye=async()=>{if(!document.getElementById("termsCheck").checked){C("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(v.phoneNumber)){C("El número de WhatsApp debe tener 9 dígitos");return}try{k(!0);const n=v.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let w=null;n.status==="En stock"?w=await nt(E,async p=>{const A=F(E,"products",n.id),B=await p.get(A);if(!B.exists())throw new Error("Producto no encontrado");const H=B.data();if(H.availableAccounts<=0&&H.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const ae=te(E,`products/${n.id}/accounts`),ne=xe(ae,pe("status","==","available"),Ut(1)),I=await jt(ne);if(I.empty)throw new Error("No hay cuentas disponibles en la subcolección");const _=I.docs[0],P=_.ref,h=_.data(),g=F(E,"users",o.id),S=await p.get(g);if(!S.exists())throw new Error("Usuario no encontrado");const Z=F(E,"users",n.providerId),Y=await p.get(Z);if(!Y.exists())throw new Error("Proveedor no encontrado");const ie=F(E,"providerBalances",n.providerId),ce=await p.get(ie);let oe=0;ce.exists()?oe=parseFloat(ce.data().balance)||0:p.set(ie,{balance:0,provider:n.providerId,updatedAt:ve()});let J=n.providerPhone||"";J||(J=Y.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(A,{availableAccounts:it(-1),stock:it(-1)});const ke=(Number(S.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Ue=S.data().orders||[],Pe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},terms:n.terms,type:"buscapersonas"};p.update(g,{balance:ke,orders:[...Ue,Pe]});const Fe=(Number(Y.data().balance)||0)+n.price,We=Y.data().sales||[],Ie={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(Z,{balance:Fe,sales:[...We,Ie]});const Qe=oe+n.price;p.set(ie,{balance:Qe,provider:n.providerId,updatedAt:ve()},{merge:!0});const Ye=F(te(E,"sales"));return p.set(Ye,{...Pe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:h.email||"No proporcionado",password:h.password||"No proporcionado",profile:h.profile||"No proporcionado",pin:h.pin||"No proporcionado"},saleId:Ie.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image}),h}):await nt(E,async p=>{const A=F(E,"users",o.id),B=await p.get(A);if(!B.exists())throw new Error("Usuario no encontrado");const H=F(E,"users",n.providerId),ae=await p.get(H);if(!ae.exists())throw new Error("Proveedor no encontrado");const ne=F(E,"providerBalances",n.providerId),I=await p.get(ne);let _=0;I.exists()?_=parseFloat(I.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:ve()});let P=n.providerPhone||"";P||(P=ae.data().phoneNumber||"");const g=(Number(B.data().balance)||0)-n.price;if(g<0)throw new Error("Saldo insuficiente");const S=B.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:v.customerName,customerId:o.id,phoneNumber:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"buscapersonas"};p.update(A,{balance:g,orders:[...S,Z]});const ie=(Number(ae.data().balance)||0)+n.price,ce=ae.data().sales||[],oe={saleId:F(te(E,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:v.customerName,customerPhone:v.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image};p.update(H,{balance:ie,sales:[...ce,oe]});const J=_+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:ve()},{merge:!0});const he=F(te(E,"sales"));p.set(he,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms,generalDetails:n.accountDetails,productUrl:n.image})}),m(p=>p-n.price),d(p=>({...p,orders:[...p.orders,{...v,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(w==null?void 0:w.email)||"No proporcionado",password:(w==null?void 0:w.password)||"No proporcionado",profile:(w==null?void 0:w.profile)||"No proporcionado",pin:(w==null?void 0:w.pin)||"No proporcionado"}:null}]})),L(null),M({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){C(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{k(!1)}},$e=n=>{R({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{R({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),z(!0)},Te=()=>{if(!o){G("/login");return}(o==null?void 0:o.role)==="user"?G("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?G("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?G("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&G("/dashboard/admin")},qe=n=>{n.preventDefault(),U.trim()&&G(`/search?q=${encodeURIComponent(U)}&category=Busca%20Personas`)},Ce=s.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),ze=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const w=n.match(/(\d+)\s*(mes|meses)/i);if(w)return`${parseInt(w[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const A=n.match(/(\d+)/);return A?`${parseInt(A[1],10)} días`:"30 días"};return j?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} text-gray-200`,children:[e.jsx(ut,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):T?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} p-4`,children:[e.jsx(Ze,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:T}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg",children:"Reintentar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/"),className:"px-6 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-full hover:from-red-600 hover:to-red-800 transition-all shadow-lg mt-4",children:"Volver al Inicio"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-black via-gray-900 to-black":"bg-gradient-to-b from-gray-100 via-gray-200 to-gray-100"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${l==="dark"?"border-gray-800/50 bg-black/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!r),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(Vt,{size:24})}),e.jsxs(N,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:kt,alt:"SZ Streaming",className:"h-10 w-auto transition-transform"}),e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"} hidden sm:block`,children:"SZ Streaming"})]})]}),e.jsx("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:e.jsxs("form",{onSubmit:qe,className:"w-full relative",children:[e.jsx(rt,{className:`absolute top-3 left-3 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",className:`w-full pl-10 pr-4 py-2.5 rounded-full bg-transparent ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} border focus:ring-2 focus:ring-red-500/50 focus:border-red-500 shadow-md backdrop-blur-sm transition-all ${l==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,value:U,onChange:n=>ee(n.target.value)})]})}),e.jsxs("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:[e.jsx(y.button,{whileHover:{rotate:180},whileTap:{scale:.95},onClick:_e,className:`p-2 rounded-full ${l==="dark"?"text-red-500 hover:bg-gray-700/50":"text-red-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:l==="dark"?e.jsx(Ot,{size:22}):e.jsx(Mt,{size:22})}),o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:`text-sm font-medium hidden sm:flex items-center ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Be,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l==="dark"?"text-gray-200 bg-red-500/20":"text-gray-900 bg-red-500/20"} px-3 py-1 rounded-full`,children:["S/ ",u.toFixed(2)]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Te,className:"p-2 rounded-full bg-red-500/20 hover:bg-red-500/30 transition-all",title:"Dashboard",children:e.jsx(Be,{className:"text-red-500",size:20})}),e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Ge.signOut(),G("/")},className:`flex items-center space-x-1 px-3 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/login"),className:`px-4 py-2 text-sm ${l==="dark"?"text-gray-200 hover:text-red-500":"text-gray-900 hover:text-red-600"} transition-all`,children:"Ingresar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G("/register"),className:`px-4 py-2 rounded-full text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all`,children:"Registrarse"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 backdrop-blur-md ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} text-white shadow-2xl transform ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:`text-xl font-semibold ${l==="dark"?"text-red-500":"text-red-600"}`,children:"SZ Streaming"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!1),className:`text-red-500 hover:bg-gray-700/50 p-2 rounded-full transition-all ${l==="light"?"hover:bg-gray-200/50":""}`,children:e.jsx(yt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(N,{to:"/netflix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.netflix})]}),e.jsxs(N,{to:"/spotify",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.spotify})]}),e.jsxs(N,{to:"/disney",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.disney})]}),e.jsxs(N,{to:"/max",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.max})]}),e.jsxs(N,{to:"/primevideo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.primevideo})]}),e.jsxs(N,{to:"/vix",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vix})]}),e.jsxs(N,{to:"/crunchyroll",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.crunchyroll})]}),e.jsxs(N,{to:"/canva",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.canva})]}),e.jsxs(N,{to:"/chatgpt",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-red-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.chatgpt})]}),e.jsxs(N,{to:"/redessociales",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.redessociales})]}),e.jsxs(N,{to:"/dgo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.dgo})]}),e.jsxs(N,{to:"/ligamax",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"text-red-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.ligamax})]}),e.jsxs(N,{to:"/movistarplay",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.movistarplay})]}),e.jsxs(N,{to:"/youtube",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.youtube})]}),e.jsxs(N,{to:"/deezer",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.deezer})]}),e.jsxs(N,{to:"/tidal",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.tidal})]}),e.jsxs(N,{to:"/vpn",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-red-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vpn})]}),e.jsxs(N,{to:"/wintv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.wintv})]}),e.jsxs(N,{to:"/applemusic",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-red-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.applemusic})]}),e.jsxs(N,{to:"/appletv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.appletv})]}),e.jsxs(N,{to:"/iptv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.iptv})]}),e.jsxs(N,{to:"/flujotv",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.flujotv})]}),e.jsxs(N,{to:"/vikirakuten",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.vikirakuten})]}),e.jsxs(N,{to:"/pornhub",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"text-red-500"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.pornhub})]}),e.jsxs(N,{to:"/paramount",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"text-red-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.paramount})]}),e.jsxs(N,{to:"/licencias",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"text-red-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.licencias})]}),e.jsxs(N,{to:"/capcut",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-red-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.capcut})]}),e.jsxs(N,{to:"/duolingo",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"text-gray-300 hover:bg-red-500/20":"text-gray-600 hover:bg-red-600/20"} transition-all`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-red-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.duolingo})]}),e.jsxs(N,{to:"/buscapersonas",className:`flex items-center justify-between px-4 py-3 rounded-xl ${l==="dark"?"bg-red-500/30 border-red-500/30":"bg-red-600/30 border-red-600/30"} text-white`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"text-red-500"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-red-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:x.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${l==="dark"?"bg-red-500/20":"bg-red-600/20"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${l==="dark"?"bg-red-500/30":"bg-red-600/30"} flex items-center justify-center text-white font-bold text-lg`,children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/ ",u.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e756b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Busca Personas"}),e.jsx(y.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Encuentra servicios para buscar personas de manera rápida y confiable"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Servicios de Búsqueda Disponibles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!0),className:`text-sm sm:text-base ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),Ce.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Ce.map(n=>e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(y.img,{whileHover:{scale:1.1},src:n.image,alt:n.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),ze(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-red-500 bg-red-500/20":"text-red-600 bg-red-600/20"} px-2 py-0.5 rounded-md`,children:n.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx(Lt,{className:"text-red-500",size:14}),De(n.duration)]})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-1",children:n.name}),e.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.accountDetails}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Proveedor:"}),e.jsx("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:n.provider})]}),se[n.providerId]&&e.jsx("div",{className:"flex items-center",children:ue(se[n.providerId])})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["S/ ",de(n.price)]}),n.renewal&&e.jsxs("span",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Renovación: S/ ",de(n.renewalPrice)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>$e(n),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 shadow-inner`,children:"Detalles"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>je(n),className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:n.stock<=0&&!n.acceptsOrders,children:n.stock<=0&&!n.acceptsOrders?"Agotado":"Comprar"})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be(n),className:`mt-3 text-sm ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"} transition-all underline underline-offset-4`,children:"Términos y Condiciones"})]})]},n.id))})]})]})]}),v&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white font-semibold",children:v.product.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," S/ ",de(v.product.price)]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",v.product.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Duración:"})," ",De(v.product.duration)]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Nombre"}),e.jsx("input",{type:"text",value:v.customerName,onChange:n=>L({...v,customerName:n.target.value}),className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:v.phoneNumber,onChange:n=>L({...v,phoneNumber:n.target.value}),placeholder:"Ej: 987654321",className:`w-full p-2 rounded-xl bg-transparent border ${l==="dark"?"text-white border-gray-600/50":"text-gray-900 border-gray-400/50"} focus:ring-2 focus:ring-red-500/50 focus:border-red-500 transition-all`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 focus:ring-red-500/50 border-gray-600/50 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["Acepto los"," ",e.jsx("span",{onClick:()=>be(v.product),className:`cursor-pointer underline ${l==="dark"?"text-red-500 hover:text-red-400":"text-red-600 hover:text-red-500"}`,children:"términos y condiciones"})]})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:T})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-800/60 hover:bg-gray-700/60 text-gray-300":"bg-gray-200/60 hover:bg-gray-300/60 text-gray-600"} transition-all border border-red-500/40 text-sm font-medium shadow-inner`,children:"Cancelar"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,className:`flex-1 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,disabled:j,children:j?e.jsx(ut,{className:"animate-spin mx-auto",size:20}):"Confirmar"})]})]})}),$&&!V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Bt,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Tipo de Cuenta:"})," ",$.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Detalles:"})," ",$.accountDetails]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(null),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),$&&V&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white font-semibold",children:$.name}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",$.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Términos:"})," ",$.terms]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{z(!1),R(null)},className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),re&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("p",{className:l==="dark"?"text-gray-300":"text-gray-600",children:"Al realizar una compra en SZ Streaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`list-disc pl-5 space-y-2 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:[e.jsx("li",{children:"Las cuentas son para uso personal y no deben compartirse con terceros."}),e.jsx("li",{children:"Los detalles de la cuenta serán proporcionados por el proveedor tras la confirmación de la compra."}),e.jsx("li",{children:"Las renovaciones automáticas, si están disponibles, se procesarán al precio indicado."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregados los detalles de la cuenta, salvo en casos de incumplimiento por parte del proveedor."}),e.jsx("li",{children:"SZ Streaming no se responsabiliza por interrupciones del servicio causadas por el proveedor de streaming."}),e.jsx("li",{children:"El uso de las cuentas debe cumplir con las políticas del servicio de streaming correspondiente."})]})]}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(!1),className:`w-full mt-6 py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Cerrar"})]})}),Q&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs(y.div,{initial:{scale:.95},animate:{scale:1},className:`rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-red-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-red-500/20"}`,children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ze,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"} mb-6`,children:Q.message}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q.onClose&&Q.onClose(),M(null)},className:`w-full py-2 px-4 rounded-xl font-semibold text-sm text-white bg-gradient-to-r ${l==="dark"?"from-red-500 to-red-700 hover:from-red-600 hover:to-red-800":"from-red-600 to-red-800 hover:from-red-700 hover:to-red-900"} transition-all shadow-lg`,children:"Aceptar"})]})}),e.jsx("footer",{className:`p-4 sm:p-6 border-t ${l==="dark"?"bg-black/80 border-gray-800/50":"bg-gray-100/80 border-gray-300/50"} backdrop-blur-md mt-8`,children:e.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:"© 2025 SZ Streaming. Todos los derechos reservados."}),e.jsx("div",{className:"flex space-x-4 mt-4 sm:mt-0"})]})})]})};function dH(){return e.jsx(lH,{children:e.jsx(cH,{})})}b.memo(()=>{const[r,t]=b.useState(null),[s,a]=b.useState(0),[i,c]=b.useState(!0),[o,d]=b.useState(null),[u,m]=b.useState(!1),[j,k]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0}),[T,C]=b.useState(""),v=Tt();b.useEffect(()=>{const R=_t(Ge,async V=>{if(V)try{const z=await et(F(E,"users",V.uid));if(z.exists()){const re=z.data();t({id:V.uid,name:re.username||"Usuario",email:V.email,orders:re.orders||[],role:re.role||"user"}),a(Number(re.balance)||0)}else d("Usuario no encontrado"),console.error("Usuario no encontrado en la base de datos")}catch(z){d("Error al cargar datos"),console.error(z)}else t(null),a(0);c(!1)});return()=>R()},[]),b.useEffect(()=>{const V=[{name:"Netflix",key:"netflix"},{name:"Spotify",key:"spotify"},{name:"Disney",key:"disney"},{name:"Max",key:"max"},{name:"Prime Video",key:"primevideo"},{name:"Vix",key:"vix"},{name:"Crunchyroll",key:"crunchyroll"},{name:"Canva",key:"canva"},{name:"ChatGPT",key:"chatgpt"},{name:"Redes Sociales",key:"redessociales"}].map(({name:z,key:re})=>{const q=xe(te(E,"products"),pe("category","==",z));return fe(q,Q=>{k(M=>({...M,[re]:Q.docs.length}))},Q=>console.error(`Error loading ${z}:`,Q))});return()=>V.forEach(z=>z())},[]);const L=()=>{if(!r)return v("/login");v({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[r.role]||"/dashboard/user")},$=R=>{R.preventDefault(),T.trim()&&v(`/search?q=${encodeURIComponent(T)}`)};return i?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:[e.jsx(Km,{className:"animate-spin text-4xl text-cyan-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Cargando..."})]}):o?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[e.jsx(Km,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Reintentar"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-800/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(N,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-8"}),e.jsx("span",{className:"text-lg font-bold text-cyan-500 hidden sm:block",children:"BlackStreaming"})]})}),e.jsx("form",{onSubmit:$,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-2 px-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:T,onChange:R=>C(R.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-cyan-500",children:e.jsx(rt,{size:20})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-300",children:r.name}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded-lg text-sm",children:["S/ ",s.toFixed(2)]}),e.jsx("button",{onClick:L,className:"p-2 hover:bg-gray-700 rounded-lg",title:"Dashboard",children:e.jsx(Be,{className:"text-cyan-500",size:20})}),e.jsxs("button",{onClick:()=>{Ge.signOut(),v("/")},className:"flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:[e.jsx(It,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v("/login"),className:"px-3 py-2 text-sm hover:text-cyan-500",children:"Ingresar"}),e.jsx("button",{onClick:()=>v("/register"),className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 text-sm",children:"Registrarse"})]})})]})}),e.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("div",{className:"p-4 bg-gray-800 rounded-full inline-flex mb-6",children:e.jsx(Km,{className:"text-4xl text-cyan-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"En Mantenimiento"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Estamos mejorando nuestra plataforma para ti."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300 mb-6",children:[e.jsx(Lt,{className:"text-yellow-500"}),e.jsx("span",{children:"Volveremos pronto."})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Qué estamos haciendo?"}),e.jsxs("ul",{className:"text-left space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Corrección de errores en el sistema de pedidos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Solución de fallos en el retiro de dinero"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Arreglo de errores al pasar del sistema al pedido"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del proveedor"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del usuario"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Refuerzo de la seguridad general del sitio"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Mejora en la visualización y diseño"]})]}),e.jsx("button",{onClick:()=>m(!0),className:"mt-4 text-cyan-500 hover:text-cyan-400 underline",children:"Términos Generales"})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Términos y Condiciones"}),e.jsx("button",{onClick:()=>m(!1),className:"hover:text-gray-300",children:e.jsx(FiX,{size:24})})]}),e.jsx("div",{className:"space-y-4 text-gray-300",children:[{title:"Proceso de Compra",text:"El proveedor te contactará en 24 horas hábiles para los accesos."},{title:"Garantía",text:"7 días de garantía. El proveedor resolverá problemas o reembolsará."},{title:"Uso Responsable",text:"No nos responsabilizamos por suspensiones por mal uso."},{title:"Soporte",text:"Contacta al proveedor vía WhatsApp."},{title:"Renovaciones",text:"Solicita renovaciones manuales antes del fin del período."}].map(({title:R,text:V},z)=>e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:R}),e.jsx("p",{children:V})]},z))}),e.jsx("button",{onClick:()=>m(!1),className:"w-full mt-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-800 py-6",children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-6"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-500",children:"BlackStreaming"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Desarrollado por Saiph"})]})})]})});const uH=b.createContext(),xH=({children:r})=>{const t=Qg(dd),[s,a]=b.useState(null),[i,c]=b.useState(!0);return b.useEffect(()=>{const o=_t(t,d=>{a(d),c(!1)});return()=>o()},[]),e.jsx(uH.Provider,{value:{user:s,loading:i},children:!i&&r})},mH=()=>e.jsx(SE,{children:e.jsxs(e.Fragment,{children:[e.jsx(Pt,{path:"/",element:e.jsx(MB,{})}),e.jsx(Pt,{path:"/login",element:e.jsx(UB,{})}),e.jsx(Pt,{path:"/register",element:e.jsx(GB,{})}),e.jsx(Pt,{path:"/dashboard/user",element:e.jsx(sU,{})}),e.jsx(Pt,{path:"/dashboard/affiliate",element:e.jsx(iU,{})}),e.jsx(Pt,{path:"/dashboard/provider",element:e.jsx(gU,{})}),e.jsx(Pt,{path:"/dashboard/admin",element:e.jsx(DU,{})}),e.jsx(Pt,{path:"/netflix",element:e.jsx(AU,{})}),e.jsx(Pt,{path:"/disney",element:e.jsx(OU,{})}),e.jsx(Pt,{path:"/max",element:e.jsx(zU,{})}),e.jsx(Pt,{path:"/spotify",element:e.jsx(FU,{})}),e.jsx(Pt,{path:"/primevideo",element:e.jsx(qU,{})}),e.jsx(Pt,{path:"/vix",element:e.jsx(KU,{})}),e.jsx(Pt,{path:"/canva",element:e.jsx(XU,{})}),e.jsx(Pt,{path:"/chatgpt",element:e.jsx(tF,{})}),e.jsx(Pt,{path:"/crunchyroll",element:e.jsx(aF,{})}),e.jsx(Pt,{path:"/redessociales",element:e.jsx(oF,{})}),e.jsx(Pt,{path:"/applemusic",element:e.jsx(dF,{})}),e.jsx(Pt,{path:"/appletv",element:e.jsx(mF,{})}),e.jsx(Pt,{path:"/iptv",element:e.jsx(fF,{})}),e.jsx(Pt,{path:"/flujotv",element:e.jsx(bF,{})}),e.jsx(Pt,{path:"/vikirakuten",element:e.jsx(wF,{})}),e.jsx(Pt,{path:"/pornhub",element:e.jsx(SF,{})}),e.jsx(Pt,{path:"/paramount",element:e.jsx(PF,{})}),e.jsx(Pt,{path:"/licencias",element:e.jsx(DF,{})}),e.jsx(Pt,{path:"/capcut",element:e.jsx(AF,{})}),e.jsx(Pt,{path:"/duolingo",element:e.jsx(OF,{})}),e.jsx(Pt,{path:"/dgo",element:e.jsx(zF,{})}),e.jsx(Pt,{path:"/ligamax",element:e.jsx(FF,{})}),e.jsx(Pt,{path:"/movistarplay",element:e.jsx(qF,{})}),e.jsx(Pt,{path:"/youtube",element:e.jsx(KF,{})}),e.jsx(Pt,{path:"/deezer",element:e.jsx(XF,{})}),e.jsx(Pt,{path:"/tidal",element:e.jsx(tH,{})}),e.jsx(Pt,{path:"/vpn",element:e.jsx(aH,{})}),e.jsx(Pt,{path:"/wintv",element:e.jsx(oH,{})}),e.jsx(Pt,{path:"/buscapersonas",element:e.jsx(dH,{})})]})});Zm.createRoot(document.getElementById("root")).render(e.jsx(hn.StrictMode,{children:e.jsx(KE,{children:e.jsx(xH,{children:e.jsx(mH,{})})})}));
